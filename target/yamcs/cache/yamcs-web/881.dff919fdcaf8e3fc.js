"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[881],{3881:(jl,G,f)=>{f.r(G),f.d(G,{AdminModule:()=>El});var E=f(4421),_=f(1896),j=f(1293),Vt=f(9969),t=f(5879),k=f(5394);let z=(()=>{class e{constructor(a,n){this.authService=a,this.router=n}canActivate(a,n){return!!this.authService.getUser().hasSystemPrivilege("web.AccessAdminArea")||(this.router.navigate(["/403"],{queryParams:{page:n.url}}),!1)}canActivateChild(a,n){return this.canActivate(a,n)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(k.e),t.LFG(_.F0))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const q=(e,i)=>(0,t.f3M)(X).canActivate(e,i);let X=(()=>{class e{constructor(a,n){this.authService=a,this.router=n}canActivate(a,n){return!!this.authService.getUser().hasSystemPrivilege("ControlAccess")||(this.router.navigate(["/403"],{queryParams:{page:n.url}}),!1)}canActivateChild(a,n){return this.canActivate(a,n)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(k.e),t.LFG(_.F0))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const V=(e,i)=>(0,t.f3M)(K).canActivate(e,i);let K=(()=>{class e{constructor(a,n){this.authService=a,this.router=n}canActivate(a,n){return!!this.authService.getUser().hasSystemPrivilege("ControlArchiving")||(this.router.navigate(["/403"],{queryParams:{page:n.url}}),!1)}canActivateChild(a,n){return this.canActivate(a,n)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(k.e),t.LFG(_.F0))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),W=(()=>{class e{constructor(a,n){this.authService=a,this.router=n}canActivate(a,n){return!!this.authService.getUser().hasSystemPrivilege("ControlServices")||(this.router.navigate(["/403"],{queryParams:{page:n.url}}),!1)}canActivateChild(a,n){return this.canActivate(a,n)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(k.e),t.LFG(_.F0))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Y=(e,i)=>(0,t.f3M)(tt).canActivate(e,i);let tt=(()=>{class e{constructor(a,n){this.authService=a,this.router=n}canActivate(a,n){return!!this.authService.getUser().hasSystemPrivilege("ReadSystemInfo")||(this.router.navigate(["/403"],{queryParams:{page:n.url}}),!1)}canActivateChild(a,n){return this.canActivate(a,n)}static#t=this.\u0275fac=function(n){return new(n||e)(t.LFG(k.e),t.LFG(_.F0))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var p=f(6223),r=f(9538),l=f(6516),Z=f(5619),te=f(3620),b=f(6593),m=f(6814),v=f(617);const ee=[[["app-admin-toolbar"]],[["ya-detail-pane"]],"*"],ae=["app-admin-toolbar","ya-detail-pane","*"];let y=(()=>{class e{constructor(){this.noscroll=!1}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-admin-page"]],inputs:{noscroll:"noscroll"},ngContentSelectors:ae,decls:4,vars:2,consts:[[1,"page-content"]],template:function(n,o){1&n&&(t.F$t(ee),t.Hsn(0),t.TgZ(1,"div",0),t.Hsn(2,1),t.Hsn(3,2),t.qZA()),2&n&&(t.xp6(1),t.Udp("overflow",o.noscroll?"hidden":"auto"))},styles:[".page-content[_ngcontent-%COMP%]{position:absolute;inset:49px 0 0;overflow:auto}"],changeDetection:0})}return e})();var O=f(1274);const ne=["*"];let A=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-admin-toolbar"]],ngContentSelectors:ne,decls:4,vars:0,consts:[[1,"top"],[2,"flex","1 1 auto"]],template:function(n,o){1&n&&(t.F$t(),t.TgZ(0,"mat-toolbar",0)(1,"mat-toolbar-row"),t.Hsn(2),t._UZ(3,"span",1),t.qZA()())},dependencies:[O.Ye,O.rD],styles:["mat-toolbar[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);background-color:#f7f7f7;box-sizing:content-box}mat-toolbar-row[_ngcontent-%COMP%]{padding-left:24px}.hide[_ngcontent-%COMP%]{visibility:hidden}.toolbar-text[_ngcontent-%COMP%]{font-size:12px}"],changeDetection:0})}return e})();const ie=["intervalSelect"];function oe(e,i){if(1&e){const a=t.EpF();t.ynx(0),t._UZ(1,"ya-date-time-input",8)(2,"ya-date-time-input",9),t.TgZ(3,"button",10),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.applyCustomDates())}),t._uU(4,"Apply"),t.qZA(),t.BQk()}if(2&e){const a=t.oxw();t.xp6(3),t.Q6J("disabled",a.filterForm.invalid)}}function se(e,i){if(1&e){const a=t.EpF();t.ynx(0),t.TgZ(1,"button",11),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.jumpToNow())}),t._uU(2," Jump to now "),t.qZA(),t.BQk()}}function re(e,i){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.item.time.substring(11,16)," ")}}function ce(e,i){if(1&e&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.item.user||"-"," ")}}function le(e,i){if(1&e&&(t.TgZ(0,"td",27),t._UZ(1,"span",28),t.ALo(2,"actionLogFormat"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("innerHTML",t.lcZ(2,1,a.item.summary)||"-",t.oJD)}}function pe(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"expand_more"),t.qZA())}function me(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"expand_less"),t.qZA())}function ue(e,i){if(1&e&&(t.TgZ(0,"td",29),t.YNc(1,pe,2,0,"mat-icon",6),t.YNc(2,me,2,0,"mat-icon",6),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngIf",!a.expanded),t.xp6(1),t.Q6J("ngIf",a.expanded)}}function _e(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"dt",32),t._uU(2),t.qZA(),t.TgZ(3,"dd"),t._uU(4),t.qZA(),t.BQk()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.key),t.xp6(2),t.Oqu(a.value||"")}}function de(e,i){if(1&e&&(t.TgZ(0,"td",30)(1,"dl",31)(2,"dt"),t._uU(3,"Service"),t.qZA(),t.TgZ(4,"dd"),t._uU(5),t.qZA(),t.TgZ(6,"dt"),t._uU(7,"Method"),t.qZA(),t.TgZ(8,"dd"),t._uU(9),t.qZA(),t.YNc(10,_e,5,2,"ng-container",7),t.qZA()()),2&e){const a=i.$implicit,n=t.oxw(2);t.uIk("colspan",n.displayedColumns.length),t.xp6(5),t.Oqu(a.item.service),t.xp6(4),t.Oqu(a.item.method),t.xp6(1),t.Q6J("ngForOf",a.requestOptions)}}function ge(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",33),t.NdJ("click",function(){const s=t.CHM(a).$implicit;return t.KtG(s.expanded=!s.expanded)}),t.qZA()}2&e&&t.ekj("expanded",i.$implicit.expanded)}function fe(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",34),t.NdJ("click",function(){const s=t.CHM(a).$implicit;return t.KtG(s.expanded=!s.expanded)}),t.qZA()}2&e&&t.ekj("expanded",i.$implicit.expanded)}const he=function(){return["detail"]};function Te(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"h4"),t._uU(2),t.qZA(),t.TgZ(3,"table",12),t.ynx(4,13),t.YNc(5,re,2,1,"td",14),t.BQk(),t.ynx(6,15),t.YNc(7,ce,2,1,"td",16),t.BQk(),t.ynx(8,17),t.YNc(9,le,3,3,"td",18),t.BQk(),t.ynx(10,19),t.YNc(11,ue,3,2,"td",20),t.BQk(),t.ynx(12,21),t.YNc(13,de,11,4,"td",22),t.BQk(),t.YNc(14,ge,1,2,"tr",23),t.YNc(15,fe,1,2,"tr",24),t.qZA(),t.BQk()),2&e){const a=i.$implicit,n=i.first,o=t.oxw();t.xp6(1),t.ekj("first",n),t.xp6(1),t.Oqu(a.grouper),t.xp6(1),t.Q6J("dataSource",a.dataSource),t.xp6(11),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(6,he))}}function Ze(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," No actions for the current filter criteria. "),t.qZA())}const R="NO_LIMIT";let et=(()=>{class e{constructor(a,n,o,s,c){this.yamcs=a,this.router=n,this.route=o,this.messageService=s,this.filterForm=new p.nJ({filter:new p.p4,interval:new p.p4(R),customStart:new p.p4(null),customStop:new p.p4(null)}),this.displayedColumns=["time","user","summary","actions"],this.intervalOptions=[{id:"PT1H",label:"Last hour"},{id:"PT6H",label:"Last 6 hours"},{id:"P1D",label:"Last 24 hours"},{id:"NO_LIMIT",label:"No limit"},{id:"CUSTOM",label:"Custom",group:!0}],this.rowGroups$=new Z.X([]),c.setTitle("Admin Area"),this.initializeOptions(),this.loadData(),this.filterForm.get("filter").valueChanges.pipe((0,te.b)(400)).forEach(u=>{this.filter=u,this.loadData()}),this.filterForm.get("interval").valueChanges.forEach(u=>{if("CUSTOM"===u){const g=new Date,T=this.validStart||g,U=this.validStop||g;this.filterForm.get("customStart").setValue(l.P6.toISOString(T)),this.filterForm.get("customStop").setValue(l.P6.toISOString(U))}else"NO_LIMIT"===u?(this.validStart=null,this.validStop=null,this.appliedInterval=u,this.loadData()):(this.validStop=new Date,this.validStart=l.P6.subtractDuration(this.validStop,u),this.appliedInterval=u,this.loadData())})}initializeOptions(){const a=this.route.snapshot.queryParamMap;if(a.has("filter")&&(this.filter=a.get("filter")||"",this.filterForm.get("filter").setValue(this.filter)),a.has("interval"))if(this.appliedInterval=a.get("interval"),this.filterForm.get("interval").setValue(this.appliedInterval),"CUSTOM"===this.appliedInterval){const n=a.get("customStart");this.filterForm.get("customStart").setValue(n),this.validStart=l.P6.toDate(n);const o=a.get("customStop");this.filterForm.get("customStop").setValue(o),this.validStop=l.P6.toDate(o)}else"NO_LIMIT"===this.appliedInterval?(this.validStart=null,this.validStop=null):(this.validStop=new Date,this.validStart=l.P6.subtractDuration(this.validStop,this.appliedInterval));else this.appliedInterval=R,this.validStop=null,this.validStart=null}jumpToNow(){const a=this.filterForm.value.interval;"NO_LIMIT"===a||"CUSTOM"===a?this.filterForm.get("interval").setValue(R):(this.validStop=new Date,this.validStart=l.P6.subtractDuration(this.validStop,a),this.loadData())}applyCustomDates(){this.validStart=l.P6.toDate(this.filterForm.value.customStart),this.validStop=l.P6.toDate(this.filterForm.value.customStop),this.appliedInterval="CUSTOM",this.loadData()}loadData(){this.updateURL();const a={};this.validStart&&(a.start=this.validStart.toISOString()),this.validStop&&(a.stop=this.validStop.toISOString()),this.filter&&(a.q=this.filter);const n=(new Date).toISOString().substr(0,10),o=l.P6.subtractDuration(new Date,"P1D").toISOString().substr(0,10);this.yamcs.yamcsClient.getAuditRecords("_global",a).then(s=>{const c=this.groupByDay(s.records||[]).map(u=>{const g=new r.by;g.data=u.map(U=>{const x=[{key:"Request",value:""}];return U.request&&this.flatten(U.request,x,"    "),{item:U,expanded:!1,requestOptions:x}});let T=u[0].time.substr(0,10);return T===n?T="Today":T===o&&(T="Yesterday"),{grouper:T,dataSource:g}});this.rowGroups$.next(c)}).catch(s=>this.messageService.showError(s))}loadMoreData(){}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filter||null,interval:this.appliedInterval,customStart:"CUSTOM"===this.appliedInterval?this.filterForm.value.customStart:null,customStop:"CUSTOM"===this.appliedInterval?this.filterForm.value.customStop:null},queryParamsHandling:"merge"})}groupByDay(a){const n=[];let o,s=[];for(const c of a){const u=c.time.substr(0,10);u!==o&&(o=u,s.length&&(n.push(s),s=[])),s.push(c)}return s.length&&n.push(s),n}flatten(a,n,o=""){for(const s in a){const c=a[s];if(Array.isArray(c)){n.push({key:o+s,value:""});for(let u=0;u<c.length;u++)n.push({key:o+"    "+s+" "+(u+1),value:c[u]})}else"object"==typeof c?(n.push({key:o+s,value:""}),this.flatten(c,n,o+"    ")):n.push({key:o+s,value:""+c})}}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(_.F0),t.Y36(_.gz),t.Y36(l.ez),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(ie,5),2&n){let s;t.iGM(s=t.CRH())&&(o.intervalSelect=s.first)}},decls:15,vars:10,consts:[[1,"panel-content"],[3,"formGroup"],[1,"filter-bar"],["formControlName","filter","placeholder","Filter by text search"],["icon","access_time","formControlName","interval",3,"options"],["intervalSelect",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["formControlName","customStart"],["formControlName","customStop"],[1,"ya-button",3,"disabled","click"],[1,"ya-button",3,"click"],["mat-table","","multiTemplateDataRows","",1,"ya-data-table",2,"border-top","1px solid rgba(0, 0, 0, 0.1)",3,"dataSource"],["matColumnDef","time"],["mat-cell","","style","width: 100px",4,"matCellDef"],["matColumnDef","user"],["mat-cell","","style","width: 200px",4,"matCellDef"],["matColumnDef","summary"],["mat-cell","","style","width: 400px",4,"matCellDef"],["matColumnDef","actions"],["mat-cell","","style","width: 20px; text-align: right;",4,"matCellDef"],["matColumnDef","detail"],["mat-cell","",4,"matCellDef"],["mat-row","","class","item-row",3,"expanded","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","item-detail",3,"expanded","click",4,"matRowDef","matRowDefColumns"],["mat-cell","",2,"width","100px"],["mat-cell","",2,"width","200px"],["mat-cell","",2,"width","400px"],[3,"innerHTML"],["mat-cell","",2,"width","20px","text-align","right"],["mat-cell",""],[1,"dl-horizontal"],[2,"white-space","pre"],["mat-row","",1,"item-row",3,"click"],["mat-row","",1,"item-detail",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Action log "),t.qZA(),t.TgZ(3,"div",0)(4,"form",1)(5,"div",2),t._UZ(6,"ya-search-filter",3)(7,"ya-select",4,5),t.YNc(9,oe,5,1,"ng-container",6),t.YNc(10,se,3,0,"ng-container",6),t.qZA()(),t.YNc(11,Te,16,7,"ng-container",7),t.ALo(12,"async"),t.YNc(13,Ze,2,0,"ya-empty-message",6),t.ALo(14,"async"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("formGroup",o.filterForm),t.xp6(3),t.Q6J("options",o.intervalOptions),t.xp6(2),t.Q6J("ngIf","CUSTOM"===o.filterForm.value.interval),t.xp6(1),t.Q6J("ngIf","CUSTOM"!==o.filterForm.value.interval),t.xp6(1),t.Q6J("ngForOf",t.lcZ(12,6,o.rowGroups$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(14,8,o.rowGroups$).length))},dependencies:[m.sg,m.O5,p._Y,p.JJ,p.JL,p.sg,p.u,v.Hw,r.BZ,r.w1,r.Dz,r.nj,r.ev,r.Gk,l.t,l.RR,l.cF,l.Hr,y,A,m.Ov,l.NE],styles:["h4[_ngcontent-%COMP%]{margin-top:2em;margin-bottom:.5em;font-size:12px}h4.first[_ngcontent-%COMP%]{margin-top:0}tr.item-row.expanded[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:none}tr.item-detail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:40px!important}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}tr.item-detail[_ngcontent-%COMP%]:not(.expanded){display:none}.dl-horizontal[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{border-right:1px solid #e5e5e5}.dl-horizontal[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%], .dl-horizontal[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{line-height:20px}.dl-horizontal[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{min-height:20px}.ya-data-table[_ngcontent-%COMP%]   tr.mat-mdc-row[_ngcontent-%COMP%]:hover{background:inherit}"],changeDetection:0})}return e})();var at=f(2181),C=f(2296),P=f(4104);const nt=function(e){return["/admin/databases",e,"tables"]};function be(e,i){if(1&e&&(t.TgZ(0,"a",3),t._uU(1," Tables "),t.qZA()),2&e){const a=t.oxw(2).ngIf;t.Q6J("routerLink",t.VKq(1,nt,a.name))}}const it=function(e){return["/admin/databases",e,"streams"]};function xe(e,i){if(1&e&&(t.TgZ(0,"a",3),t._uU(1," Streams "),t.qZA()),2&e){const a=t.oxw(2).ngIf;t.Q6J("routerLink",t.VKq(1,it,a.name))}}function ye(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-icon",2),t._uU(2,"navigate_next"),t.qZA(),t.YNc(3,be,2,3,"a",7),t.YNc(4,xe,2,3,"a",7),t.TgZ(5,"mat-icon",2),t._uU(6,"navigate_next"),t.qZA(),t._uU(7),t.BQk()),2&e){const a=i.ngIf;t.xp6(3),t.Q6J("ngIf","table"===a.type),t.xp6(1),t.Q6J("ngIf","stream"===a.type),t.xp6(3),t.hij(" ",a.name," ")}}const Ae=function(e){return["/admin/databases",e,"shell"]};function Ue(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"a",8,9),t._uU(3," Tables "),t.qZA(),t.TgZ(4,"a",8,10),t._uU(6," Streams "),t.qZA(),t.TgZ(7,"a",8,11),t._uU(9," DB Shell "),t.qZA(),t.BQk()),2&e){const a=t.MAs(2),n=t.MAs(5),o=t.MAs(8),s=t.oxw().ngIf;t.xp6(1),t.Q6J("routerLink",t.VKq(6,nt,s.name))("active",a.isActive),t.xp6(3),t.Q6J("routerLink",t.VKq(8,it,s.name))("active",n.isActive),t.xp6(3),t.Q6J("routerLink",t.VKq(10,Ae,s.name))("active",o.isActive)}}const ve=function(e,i){return["/admin/databases",e,"tables",i,"info"]},Ce=function(e,i){return["/admin/databases",e,"tables",i,"data"]},we=function(e,i){return["/admin/databases",e,"tables",i,"script"]};function qe(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"a",8,12),t._uU(3," Info "),t.qZA(),t.TgZ(4,"a",8,13),t._uU(6," Data "),t.qZA(),t.TgZ(7,"a",8,14),t._uU(9," Script "),t.qZA(),t.BQk()),2&e){const a=t.MAs(2),n=t.MAs(5),o=t.MAs(8),s=t.oxw().ngIf,c=t.oxw().ngIf;t.xp6(1),t.Q6J("routerLink",t.WLB(6,ve,c.name,s.name))("active",a.isActive),t.xp6(3),t.Q6J("routerLink",t.WLB(9,Ce,c.name,s.name))("active",n.isActive),t.xp6(3),t.Q6J("routerLink",t.WLB(12,we,c.name,s.name))("active",o.isActive)}}const De=function(e,i){return["/admin/databases",e,"streams",i,"columns"]},Se=function(e,i){return["/admin/databases",e,"streams",i,"data"]},Pe=function(e,i){return["/admin/databases",e,"streams",i,"script"]};function Ye(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"a",8,15),t._uU(3," Columns "),t.qZA(),t.TgZ(4,"a",8,16),t._uU(6," Data "),t.qZA(),t.TgZ(7,"a",8,17),t._uU(9," Script "),t.qZA(),t.BQk()),2&e){const a=t.MAs(2),n=t.MAs(5),o=t.MAs(8),s=t.oxw().ngIf,c=t.oxw().ngIf;t.xp6(1),t.Q6J("routerLink",t.WLB(6,De,c.name,s.name))("active",a.isActive),t.xp6(3),t.Q6J("routerLink",t.WLB(9,Se,c.name,s.name))("active",n.isActive),t.xp6(3),t.Q6J("routerLink",t.WLB(12,Pe,c.name,s.name))("active",o.isActive)}}function Ne(e,i){if(1&e&&(t.ynx(0),t.YNc(1,qe,10,15,"ng-container",0),t.YNc(2,Ye,10,15,"ng-container",0),t.BQk()),2&e){const a=i.ngIf;t.xp6(1),t.Q6J("ngIf","table"===a.type),t.xp6(1),t.Q6J("ngIf","stream"===a.type)}}const ke=function(e){return["/admin/databases",e]};function Qe(e,i){if(1&e&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",1)(3,"mat-icon"),t._uU(4,"account_tree"),t.qZA()(),t.TgZ(5,"mat-icon",2),t._uU(6,"navigate_next"),t.qZA(),t.TgZ(7,"a",3),t._uU(8),t.qZA(),t.YNc(9,ye,8,3,"ng-container",0),t.ALo(10,"async"),t.qZA(),t.TgZ(11,"nav",4),t.YNc(12,Ue,10,12,"ng-container",0),t.ALo(13,"async"),t.YNc(14,Ne,3,2,"ng-container",0),t.ALo(15,"async"),t.qZA(),t.TgZ(16,"div",5)(17,"mat-tab-nav-panel",null,6),t._UZ(19,"router-outlet"),t.qZA()()()),2&e){const a=i.ngIf,n=t.MAs(18),o=t.oxw();t.xp6(7),t.Q6J("routerLink",t.VKq(13,ke,a.name)),t.xp6(1),t.hij(" ",a.name," "),t.xp6(1),t.Q6J("ngIf",t.lcZ(10,7,o.object$)),t.xp6(2),t.Q6J("mat-stretch-tabs",!1)("tabPanel",n),t.xp6(1),t.Q6J("ngIf",!t.lcZ(13,9,o.object$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(15,11,o.object$))}}let ot=(()=>{class e{constructor(a,n,o,s,c){this.yamcs=o,this.object$=new Z.X(null),this.user=c.getUser(),this.routerSubscription=a.events.pipe((0,at.h)(g=>g instanceof _.m2)).subscribe(g=>{const T=n.snapshot.firstChild;let U=T.paramMap.get("table");U?this.object$.next({type:"table",name:U}):(U=T.paramMap.get("stream"),this.object$.next(U?{type:"stream",name:U}:null))});const u=n.snapshot.paramMap.get("database");s.setTitle(u),this.database$=o.yamcsClient.getDatabase(u)}ngOnDestroy(){this.routerSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.F0),t.Y36(_.gz),t.Y36(l.C8),t.Y36(b.Dx),t.Y36(k.e))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-icon-button","","routerLink","/admin/databases"],[1,"icon14","sep"],[1,"ya-link","ya-header-link",3,"routerLink"],["mat-tab-nav-bar","",1,"secondary",3,"mat-stretch-tabs","tabPanel"],[1,"outlet-wrapper"],["tabPanel",""],["class","ya-link ya-header-link",3,"routerLink",4,"ngIf"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["rla","routerLinkActive"],["rlb","routerLinkActive"],["rlc","routerLinkActive"],["rla1","routerLinkActive"],["rla2","routerLinkActive"],["rla3","routerLinkActive"],["rlb1","routerLinkActive"],["rlb2","routerLinkActive"],["rlb3","routerLinkActive"]],template:function(n,o){1&n&&(t.YNc(0,Qe,20,15,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.database$))},dependencies:[m.O5,_.lC,_.rH,_.Od,C.o6,v.Hw,P.BU,P.sW,P.Nj,y,A,m.Ov],styles:[".outlet-wrapper[_ngcontent-%COMP%]{overflow:auto;position:absolute;inset:37px 0 0}.sep[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"],changeDetection:0})}return e})();class st{constructor(i=""){this.text=i,this.edited=i}backspace(i){if(i>0){const a=this.edited.split("");a.splice(i-1,1),this.edited=a.join("")}}insert(i,a){const n=this.edited.split("");n.splice(i,0,a),this.edited=n.join("")}get value(){return this.edited}commit(){this.text=this.edited}revert(){this.edited=this.text}}class Ie{constructor(i){this.shell=i,this.history=[],this.pointer=-1,this.lastItem=new st,this.cursor=0,this.history.push(this.lastItem),this.pointer=0}consume(i){switch(i){case"Backspace":this.history[this.pointer].backspace(this.cursor),this.cursor=Math.max(0,this.cursor-1);break;case"ArrowUp":this.pointer=Math.max(0,this.pointer-1),this.cursor=this.history[this.pointer].value.length;break;case"ArrowDown":this.pointer=Math.min(this.history.length-1,this.pointer+1),this.cursor=this.history[this.pointer].value.length;break;case"ArrowLeft":this.cursor=Math.max(0,this.cursor-1);break;case"ArrowRight":this.cursor=Math.min(this.history[this.pointer].value.length,this.cursor+1);break;default:this.history[this.pointer].insert(this.cursor,i),this.cursor+=i.length}this.notifyChange()}notifyChange(){this.shell.repaintCommandLine()}abort(){const i=this.history[this.pointer].value;for(const a of this.history)a.revert();return this.cursor=0,this.pointer=this.history.length-1,this.notifyChange(),i}peek(){return this.history[this.pointer].value}take(){const i=this.history[this.pointer].value;for(let a=0;a<this.history.length;a++)a===this.pointer||a===this.history.length-1?this.history[a].revert():this.history[a].commit();if(i){const a=new st(i);this.history.splice(this.history.length-1,0,a),this.pointer=this.history.length-1}return this.cursor=0,this.notifyChange(),i}moveCursorToHome(){this.cursor=0,this.notifyChange()}moveCursorToEnd(){this.cursor=this.history[this.pointer].value.length,this.notifyChange()}}class Je{constructor(i){this.dirty=!1,this.pointer=0,this.buffer=Array(i).fill(void 0)}add(i){this.buffer[this.pointer]=i,this.prevPointer=this.pointer,this.pointer=(this.pointer+1)%this.buffer.length,this.dirty=!0}reset(){this.buffer.fill(void 0),this.pointer=0,this.prevPointer=void 0,this.dirty=!0}snapshot(){if(void 0===this.prevPointer)return[];{const i=this.buffer.slice(0,this.prevPointer+1);return this.buffer.slice(this.prevPointer+1).concat(i).filter(n=>void 0!==n)}}}const Oe=["shell"],Re=["bottom"];function Le(e,i){1&e&&t._UZ(0,"ya-dots",8)}function $e(e,i){if(1&e&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a)}}function Me(e,i){if(1&e&&(t.TgZ(0,"pre"),t._uU(1,"    "),t.TgZ(2,"code"),t._uU(3,"\n      "),t.TgZ(4,"span",9),t.YNc(5,$e,3,1,"ng-container",10),t.ALo(6,"async"),t.qZA(),t._uU(7),t.ALo(8,"async"),t._UZ(9,"span",11),t.ALo(10,"async"),t._uU(11,"\n      "),t.qZA(),t._uU(12,"\n  "),t.qZA()),2&e){const a=t.oxw();t.xp6(5),t.Q6J("ngForOf",t.lcZ(6,3,a.lines$)),t.xp6(2),t.hij("\n      ",t.lcZ(8,5,a.prompt$),"\n      "),t.xp6(2),t.Q6J("innerHTML",t.lcZ(10,7,a.commandLineHTML$),t.oJD)}}let rt=(()=>{class e{constructor(a){this.sanitizer=a,this.scrollBuffer=new Je(500),this.lines$=new Z.X([]),this.ready$=new Z.X(!1),this.prompt$=new Z.X(""),this.focused$=new Z.X(!1),this.commandLineHTML$=new Z.X(""),this.command=new t.vpe,this.commandLine=new Ie(this),this.repaintCommandLine()}ngAfterViewInit(){this.shellEl.nativeElement.focus()}onFocus(){this.focused$.next(!0)}onFocusOut(){this.focused$.next(!1)}onPaste(a){const n=a.clipboardData?.getData("Text");n&&this.commandLine.consume(n),a.preventDefault()}printLines(a){for(const n of a)this.scrollBuffer.add(n);this.lines$.next(this.scrollBuffer.snapshot()),this.scrollToBottom()}printLine(a=""){this.scrollBuffer.add(a),this.lines$.next(this.scrollBuffer.snapshot()),this.scrollToBottom()}setPrompt(a){this.prompt$.next(a)}handleKeyDownEvent(a){if(a.ctrlKey)switch(a.key){case"a":this.commandLine.moveCursorToHome(),a.preventDefault();break;case"c":const n=this.commandLine.abort();this.printLine(this.prompt$.value+n),a.preventDefault();break;case"e":this.commandLine.moveCursorToEnd(),a.preventDefault();break;case"h":this.commandLine.consume("Backspace"),a.preventDefault();break;case"l":this.scrollBuffer.reset(),this.lines$.next(this.scrollBuffer.snapshot()),a.preventDefault()}else if(!a.shiftKey&&!a.metaKey)switch(a.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"Backspace":this.commandLine.consume(a.key),a.preventDefault()}}handleKeyboardEvent(a){if(this.focused$.value&&!(a.ctrlKey||a.altKey||a.metaKey))if("Enter"===a.key){const n=this.commandLine.take();this.printLine(this.prompt$.value+n),this.command.next(n.trim()),a.preventDefault()}else 1===a.key.length&&(this.scrollToBottom(),this.commandLine.consume(a.key),a.preventDefault())}repaintCommandLine(){let a="",n=!1;const o=this.commandLine.peek(),s=this.commandLine.cursor;for(let c=0;c<o.length;c++)s===c?(a+='<span class="cursor">'+o[c]+"</span>",n=!0):a+=o[c];n||(a+='<span class="cursor"> </span>'),this.commandLineHTML$.next(this.sanitizer.bypassSecurityTrustHtml(a))}scrollToBottom(){window.setTimeout(()=>{this.bottomAnchor.nativeElement.scrollIntoView()})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(b.H7))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-shell"]],viewQuery:function(n,o){if(1&n&&(t.Gf(Oe,5),t.Gf(Re,5)),2&n){let s;t.iGM(s=t.CRH())&&(o.shellEl=s.first),t.iGM(s=t.CRH())&&(o.bottomAnchor=s.first)}},hostBindings:function(n,o){1&n&&t.NdJ("keydown",function(c){return o.handleKeyDownEvent(c)},!1,t.evT)("keypress",function(c){return o.handleKeyboardEvent(c)},!1,t.evT)},outputs:{command:"command"},decls:11,vars:10,consts:[["tabindex","0","contenteditable","true","spellcheck","false",1,"shell",3,"focus","focusout","paste"],["shell",""],[1,"top"],["top",""],["color","#3f0",4,"ngIf"],[4,"ngIf"],[1,"bottom"],["bottom",""],["color","#3f0"],[1,"preserved"],[4,"ngFor","ngForOf"],[1,"preserved",3,"innerHTML"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0,1),t.NdJ("focus",function(){return o.onFocus()})("focusout",function(){return o.onFocusOut()})("paste",function(c){return o.onPaste(c)}),t.ALo(2,"async"),t._UZ(3,"div",2,3),t.YNc(5,Le,1,0,"ya-dots",4),t.ALo(6,"async"),t.YNc(7,Me,13,9,"pre",5),t.ALo(8,"async"),t._UZ(9,"div",6,7),t.qZA()),2&n&&(t.ekj("focused",t.lcZ(2,4,o.focused$)),t.xp6(5),t.Q6J("ngIf",!t.lcZ(6,6,o.ready$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(8,8,o.ready$)))},dependencies:[m.sg,m.O5,l.Zy,m.Ov],styles:[".shell[_ngcontent-%COMP%]{position:absolute;inset:0;padding:5px;background-color:#24292e;overflow:auto;outline:none;caret-color:transparent}.top[_ngcontent-%COMP%], .bottom[_ngcontent-%COMP%]{visibility:hidden;line-height:0}pre[_ngcontent-%COMP%], code[_ngcontent-%COMP%]{white-space:normal;font-family:Roboto Mono,monospace;font-size:12px;line-height:14px}pre[_ngcontent-%COMP%]{background:#24292e;border:none;overflow:auto;border-radius:0;margin:0;padding:0;color:#3f0}.preserved[_ngcontent-%COMP%]{white-space:pre}code[_ngcontent-%COMP%]{padding:0;background:0 0}.shell.focused[_ngcontent-%COMP%]     .cursor{background-color:#3f0;color:#24292e}"],changeDetection:0})}return e})();class Fe{constructor(i){this.columns=i,this.widths=[],this.pendingRows=[],this.printedRowCount=0;for(const a of i)this.widths.push(a.name.length)}add(i){const a=[];for(let n=0;n<i.values.length;n++){const o=l.P6.printValue(i.values[n])||"";a.push(o),this.widths[n]=Math.max(o.length,this.widths[n])}this.pendingRows.push(a)}printPending(){const i=[],a=this.columns.map(n=>n.name);0===this.printedRowCount&&(i.push(this.generateSeparator()),i.push(this.printRow(a)),i.push(this.generateSeparator()));for(const n of this.pendingRows)i.push(this.printRow(n)),this.printedRowCount++;return i}printRow(i){let a="";for(let n=0;n<this.columns.length;n++)a+="| ",a+=i[n],a+=" ".repeat(this.widths[n]-i[n].length),a+=" ";return a+"|"}printSummary(){const i=[];return i.push(this.generateSeparator()),i.push(1===this.printedRowCount?"1 row in set":`${this.printedRowCount} rows in set`),i.push(""),i}generateSeparator(){let i="";for(const a of this.widths)i+="+-"+"-".repeat(a)+"-";return i+="+",i}}let ct=(()=>{class e{constructor(a,n){this.yamcs=n;const s=a.snapshot.parent.paramMap.get("database");this.changeDatabase(s)}ngAfterViewInit(){this.shell.printLine("Yamcs DB Shell"),this.shell.printLine("Type help or ? for help.\n")}handleCommand(a){if(!a)return;const n=a.split(";").map(o=>o.trim());for(const o of n)o&&this.handleStatement(o)}changeDatabase(a){this.yamcs.yamcsClient.getDatabase(a).then(n=>{this.database=n,this.shell.ready$.next(!0),this.shell.setPrompt(n.name+"> ")})}handleStatement(a){if("?"===a||a.startsWith("help")){const n=a.split(/\s+/,2);n.length>1?this.shell.printLine("use"===n[1]?"Use another database, provided as argument.":"*** No help on "+n[1]):(this.shell.printLine(),this.shell.printLine("List of dbshell commands:"),this.shell.printLine("?        Show help."),this.shell.printLine('help     List available commands with "help" or detailed help with "help cmd".'),this.shell.printLine("use      Use another database, provided as argument."),this.shell.printLine())}else if(a.startsWith("use")){const n=a.split(/\s+/,2);1===n.length?this.shell.printLine("*** Missing argument"):this.changeDatabase(n[1])}else this.yamcs.yamcsClient.executeSQL(this.database.name,a).then(n=>{if(n.rows){const o=new Fe(n.columns||[]);for(const s of n.rows||[])o.add(s);this.shell.printLines(o.printPending()),this.shell.printLines(o.printSummary())}else this.shell.printLine("Empty set\n")}).catch(n=>{this.shell.printLine(`${n}`)})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(rt,5),2&n){let s;t.iGM(s=t.CRH())&&(o.shell=s.first)}},decls:1,vars:0,consts:[[3,"command"]],template:function(n,o){1&n&&(t.TgZ(0,"app-shell",0),t.NdJ("command",function(c){return o.handleCommand(c)}),t.qZA())},dependencies:[rt],encapsulation:2,changeDetection:0})}return e})();function Be(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t._UZ(5,"td"),t.qZA()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Oqu(a.type)}}function He(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td",4),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a)}}function Ge(e,i){if(1&e&&(t.TgZ(0,"div",1)(1,"h3"),t._uU(2,"Columns"),t.qZA(),t.TgZ(3,"table",2)(4,"tr")(5,"th",3),t._uU(6,"Column"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Type"),t.qZA(),t._UZ(9,"th",4),t.qZA(),t.YNc(10,Be,6,2,"tr",5),t.qZA(),t.TgZ(11,"p"),t._uU(12,"\xa0"),t.qZA(),t.TgZ(13,"h3"),t._uU(14,"Subscribers"),t.qZA(),t.TgZ(15,"table",2),t.YNc(16,He,3,1,"tr",5),t.qZA()()),2&e){const a=i.ngIf;t.xp6(10),t.Q6J("ngForOf",a.columns),t.xp6(6),t.Q6J("ngForOf",a.subscribers)}}let lt=(()=>{class e{constructor(a,n){const o=a.snapshot.parent,s=o.parent.paramMap.get("database"),c=o.paramMap.get("stream");this.stream$=n.yamcsClient.getStream(s,c)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[["class","panel-content",4,"ngIf"],[1,"panel-content"],["yaDataTable","",1,"expand"],["width","200"],[1,"expand"],[4,"ngFor","ngForOf"]],template:function(n,o){1&n&&(t.YNc(0,Ge,17,2,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.stream$))},dependencies:[m.sg,m.O5,l.Gj,m.Ov],encapsulation:2,changeDetection:0})}return e})();var I=f(4643),F=f(8337);class Ee{constructor(){this.dirty=!1,this.bufferSize=500,this.pointer=0,this.buffer=Array(this.bufferSize).fill(void 0)}add(i){this.buffer[this.pointer]=i,this.prevPointer=this.pointer,this.pointer=(this.pointer+1)%this.buffer.length,this.dirty=!0}reset(){this.buffer.fill(void 0),this.pointer=0,this.prevPointer=void 0,this.dirty=!0}snapshot(){if(void 0===this.prevPointer)return[];{const i=this.buffer.slice(0,this.prevPointer+1);return this.buffer.slice(this.prevPointer+1).concat(i).filter(n=>void 0!==n)}}}class je extends F.o2{constructor(i,a,n,o){super(),this.yamcs=i,this.database=n,this.stream=o,this.streamData$=new Z.X([]),this.loading$=new Z.X(!1),this.streaming$=new Z.X(!1),this.columns$=new Z.X([]),this.streamBuffer=new Ee,this.syncSubscription=a.sync(()=>{this.streamBuffer.dirty&&!this.loading$.getValue()&&(this.streamData$.next(this.streamBuffer.snapshot().reverse()),this.streamBuffer.dirty=!1)})}connect(){return this.streamData$}startStreaming(){this.streaming$.next(!0),this.streamSubscription=this.yamcs.yamcsClient.createStreamSubscription({instance:this.database,stream:this.stream},i=>{if(!this.loading$.getValue()){i.animate=!0,this.streamBuffer.add(i);const a=this.columns$.value;for(const n of i.column)-1===a.indexOf(n.name)&&a.push(n.name);this.columns$.next([...a])}})}stopStreaming(){this.streamSubscription&&this.streamSubscription.cancel(),this.streaming$.next(!1)}disconnect(){this.streamSubscription&&this.streamSubscription.cancel(),this.syncSubscription&&this.syncSubscription.unsubscribe(),this.streamData$.complete(),this.loading$.complete(),this.streaming$.complete()}}var pt=f(5094);function ze(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"value"),t.BQk()),2&e){const a=t.oxw().index,n=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,n.streamData.column[a].value)||"-"," ")}}function Xe(e,i){if(1&e&&(t.ynx(0),t._UZ(1,"app-hex",4),t.BQk()),2&e){const a=t.oxw().index,n=t.oxw();t.xp6(1),t.Q6J("base64String",n.streamData.column[a].value.binaryValue)}}function Ve(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,ze,3,3,"ng-container",3),t.YNc(5,Xe,2,1,"ng-container",3),t.qZA(),t.BQk()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Q6J("ngIf","BINARY"!==a.value.type),t.xp6(1),t.Q6J("ngIf","BINARY"===a.value.type)}}let Ke=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-stream-data"]],inputs:{streamData:"streamData"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"block-title"],[1,"block"],[4,"ngIf"],[3,"base64String"]],template:function(n,o){1&n&&t.YNc(0,Ve,6,3,"ng-container",0),2&n&&t.Q6J("ngForOf",o.streamData.column)},dependencies:[m.sg,m.O5,pt.p,l.VC],encapsulation:2,changeDetection:0})}return e})(),L=(()=>{class e{transform(a,n){if(!a||0===a.length)return null;for(const o of a)if(o.name===n)return o.value;return null}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275pipe=t.Yjl({name:"columnValue",type:e,pure:!0})}return e})();function We(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"ya-detail-toolbar"),t._uU(2," Tuple "),t.qZA(),t.TgZ(3,"div",12),t._UZ(4,"app-stream-data",13),t.qZA(),t.BQk()),2&e){const a=i.ngIf;t.xp6(4),t.Q6J("streamData",a)}}function ta(e,i){1&e&&(t.TgZ(0,"ya-detail-toolbar"),t._uU(1," Select a tuple "),t.qZA())}function ea(e,i){if(1&e&&(t.TgZ(0,"th",16),t._uU(1),t.qZA()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(a)}}function aa(e,i){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.ALo(2,"value"),t.ALo(3,"columnValue"),t.qZA()),2&e){const a=i.$implicit,n=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,t.xi3(3,3,a.column,n))||"-"," ")}}function na(e,i){1&e&&(t.ynx(0,14),t.YNc(1,ea,2,1,"th",15),t.YNc(2,aa,4,6,"td",9),t.BQk()),2&e&&t.Q6J("cdkColumnDef",i.$implicit)}function ia(e,i){1&e&&t._UZ(0,"th",18)}function oa(e,i){1&e&&t._UZ(0,"td",17)}function sa(e,i){1&e&&t._UZ(0,"tr",19)}const ra=function(e){return{selected:e}};function ca(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",20),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw();return t.KtG(c.selectStreamData(s))}),t.ALo(1,"async"),t.qZA()}if(2&e){const a=i.$implicit,n=t.oxw();t.Q6J("@rowAnimation",a.animate)("ngClass",t.VKq(4,ra,a===t.lcZ(1,2,n.selectedStreamData$)))}}let mt=(()=>{class e{constructor(a,n,o){this.displayedColumns=["actions"],this.selectedStreamData$=new Z.X(null);const s=a.snapshot.parent,c=s.parent.paramMap.get("database"),u=s.paramMap.get("stream");this.dataSource=new je(n,o,c,u),this.availableColumns$=this.dataSource.columns$}ngAfterViewInit(){this.columnDefinitionsSubscription=this.columnDefinitions.changes.subscribe(()=>{this.columnDefinitions.forEach(a=>{-1===this.displayedColumns.indexOf(a.name)&&this.displayedColumns.splice(this.displayedColumns.length-1,0,a.name)})}),this.dataSource.startStreaming()}selectStreamData(a){this.selectedStreamData$.next(a)}ngOnDestroy(){this.columnDefinitionsSubscription&&this.columnDefinitionsSubscription.unsubscribe(),this.dataSource&&this.dataSource.stopStreaming()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(l.jF))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(I.fo,5),2&n){let s;t.iGM(s=t.CRH())&&(o.columnDefinitions=s)}},decls:16,vars:10,consts:[[4,"ngIf","ngIfElse"],["noSelection",""],[1,"data-table-wrapper"],[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["table",""],[3,"cdkColumnDef",4,"ngFor","ngForOf"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["mat-header-row","",4,"cdkHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"cdkRowDef","cdkRowDefColumns"],[2,"padding","0 16px"],[3,"streamData"],[3,"cdkColumnDef"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(n,o){if(1&n&&(t.TgZ(0,"ya-detail-pane"),t.YNc(1,We,5,1,"ng-container",0),t.ALo(2,"async"),t.YNc(3,ta,2,0,"ng-template",null,1,t.W1O),t.qZA(),t.TgZ(5,"div",2)(6,"div",3)(7,"table",4,5),t.YNc(9,na,3,1,"ng-container",6),t.ALo(10,"async"),t.ynx(11,7),t.YNc(12,ia,1,0,"th",8),t.YNc(13,oa,1,0,"td",9),t.BQk(),t.YNc(14,sa,1,0,"tr",10),t.YNc(15,ca,2,6,"tr",11),t.qZA()()()),2&n){const s=t.MAs(4);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,6,o.selectedStreamData$))("ngIfElse",s),t.xp6(6),t.Q6J("dataSource",o.dataSource),t.xp6(2),t.Q6J("ngForOf",t.lcZ(10,8,o.availableColumns$)),t.xp6(5),t.Q6J("cdkHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("cdkRowDefColumns",o.displayedColumns)}},dependencies:[m.mk,m.sg,m.O5,I.Sq,I.O_,I.D5,I.fo,I.s$,r.BZ,r.w1,r.ge,r.ev,r.XQ,r.Gk,l.J8,l.MD,Ke,m.Ov,l.VC,L],styles:[".data-table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.detail[_ngcontent-%COMP%]{background-color:#fcfcfc;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.data-table-wrapper[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table-wrapper[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}.data-table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{cursor:pointer}"],data:{animation:[l.q5]},changeDetection:0})}return e})();function la(e,i){1&e&&(t.ynx(0),t._UZ(1,"router-outlet"),t.BQk())}let ut=(()=>{class e{constructor(a,n,o){this.yamcs=n;const s=a.snapshot,c=s.parent.paramMap.get("database"),u=s.paramMap.get("stream");o.setTitle(u),this.stream$=n.yamcsClient.getStream(c,u)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-stream-page"]],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(n,o){1&n&&(t.YNc(0,la,2,0,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.stream$))},dependencies:[m.O5,_.lC,m.Ov],encapsulation:2,changeDetection:0})}return e})();const _t="&nbsp;&nbsp;&nbsp;&nbsp;",$=/[()]|(, ")/;function dt(e){if(!e)return e;const i=[];let a="",n=e.search($);for(;-1!==n;)"("===e[n]?(i.push(e.substring(0,n+1)),a+=_t,i.push("<br>",a),n=(e=e.substring(n+1)).search($)):")"===e[n]?(i.push(e.substring(0,n)),a=a.replace(_t,""),i.push("<br>",a),i.push(")"),n=(e=e.substring(n+1)).search($)):(i.push(e.substring(0,n+1)),i.push("<br>",a),i.push('"'),n=(e=e.substring(n+3)).search($));let o=i.join("")+e;return o=o.replace(/(engine|histogram|partition|primary|table_format)/g,"<br>$1"),function pa(e){return e.replace(/(BINARY|ENUM|HRES_TIMESTAMP|INT|LONG|PARAMETER_VALUE|PROTOBUF|STRING|TIMESTAMP)/g,'<span class="dtype">$1</span>').replace(/([(),]+)/g,'<span class="paren">$1</span>').replace(/(auto_increment|create|compressed|histogram|engine|primary key|table(_format)?|stream)/g,'<span class="kw">$1</span>').replace(/(partition by time(_and_value)?|partition by value)/g,'<span class="kw">$1</span>')}(o)}function ma(e,i){if(1&e&&(t.TgZ(0,"div",1),t._UZ(1,"code",2),t.qZA()),2&e){const a=i.ngIf,n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.formatSQL(a.script),t.oJD)}}let gt=(()=>{class e{constructor(a,n){const o=a.snapshot.parent,s=o.parent.paramMap.get("database"),c=o.paramMap.get("stream");this.stream$=n.yamcsClient.getStream(s,c)}formatSQL(a){return dt(a)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-stream-script-tab"]],decls:2,vars:3,consts:[["class","panel-content sql",4,"ngIf"],[1,"panel-content","sql"],[3,"innerHTML"]],template:function(n,o){1&n&&(t.YNc(0,ma,2,1,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.stream$))},dependencies:[m.O5,m.Ov],styles:["code[_ngcontent-%COMP%]{display:inline-block;font-size:12px;line-height:14px}",".dtype{color:red}  .paren{color:#1b61b9}  .kw{color:#1b61b9}"],changeDetection:0})}return e})();var h=f(3566);function ua(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Name"),t.qZA())}function _a(e,i){if(1&e&&(t.TgZ(0,"td",12)(1,"a",13),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.hij(" ",a.name," ")}}function da(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Data count"),t.qZA())}function ga(e,i){if(1&e&&(t.TgZ(0,"td",14),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,a.dataCount)," ")}}function fa(e,i){1&e&&t._UZ(0,"th",15)}function ha(e,i){1&e&&t._UZ(0,"td",12)}function Ta(e,i){1&e&&t._UZ(0,"tr",16)}function Za(e,i){1&e&&t._UZ(0,"tr",17)}let ft=(()=>{class e{constructor(a,n){this.yamcs=n,this.displayedColumns=["name","dataCount","actions"],this.dataSource=new r.by,this.itemsByName={},this.database=a.snapshot.parent.paramMap.get("database")}ngAfterViewInit(){this.dataSource.sort=this.sort,this.streamStatisticsSubscription=this.yamcs.yamcsClient.createStreamStatisticsSubscription({instance:this.database},a=>{this.processStreamEvent(a)})}processStreamEvent(a){switch(a.type){case"CREATED":case"UPDATED":this.itemsByName[a.name]={name:a.name,dataCount:a.dataCount},this.updateDataSource();break;case"DELETED":delete this.itemsByName[a.name],this.updateDataSource();break;default:console.error("Unexpected stream update of type "+a.type)}}updateDataSource(){const a=Object.values(this.itemsByName);a.sort((n,o)=>n.name.localeCompare(o.name)),this.dataSource.data=a}ngOnDestroy(){this.streamStatisticsSubscription&&this.streamStatisticsSubscription.cancel()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(h.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:13,vars:3,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","dataCount"],["mat-cell","","style","text-align: right",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-cell","",2,"text-align","right"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"table",1),t.ynx(2,2),t.YNc(3,ua,2,0,"th",3),t.YNc(4,_a,3,2,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,da,2,0,"th",3),t.YNc(7,ga,3,3,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,fa,1,0,"th",8),t.YNc(10,ha,1,0,"td",4),t.BQk(),t.YNc(11,Ta,1,0,"tr",9),t.YNc(12,Za,1,0,"tr",10),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[_.rH,h.YE,h.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,m.JJ],encapsulation:2,changeDetection:0})}return e})();var D=f(2596);function ba(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",2)(2,"mat-icon",3),t._uU(3,"vpn_key"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",4),t._uU(6),t.ALo(7,"value"),t.ALo(8,"columnValue"),t.qZA(),t.BQk()),2&e){const a=i.$implicit,n=t.oxw();t.xp6(4),t.hij(" ",a.name," "),t.xp6(2),t.hij(" ",t.lcZ(7,2,t.xi3(8,4,n.record.column,a.name))||"-"," ")}}function xa(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.ALo(2,"value"),t.ALo(3,"columnValue"),t.BQk()),2&e){const a=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,t.xi3(3,3,n.record.column,a.name))||"-"," ")}}function ya(e,i){if(1&e&&(t.ynx(0),t._UZ(1,"app-hex",7),t.BQk()),2&e){const a=i.ngIf;t.xp6(1),t.Q6J("base64String",a.binaryValue)}}function Aa(e,i){if(1&e&&(t.ynx(0),t.YNc(1,ya,2,1,"ng-container",6),t.ALo(2,"columnValue"),t.BQk()),2&e){const a=t.oxw().$implicit,n=t.oxw(),o=t.MAs(5);t.xp6(1),t.Q6J("ngIf",t.xi3(2,2,n.record.column,a.name))("ngIfElse",o)}}function Ua(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",2),t._uU(2),t.qZA(),t.TgZ(3,"div",4),t.YNc(4,xa,4,6,"ng-container",5),t.YNc(5,Aa,3,5,"ng-container",5),t.qZA(),t.BQk()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Q6J("ngIf","BINARY"!==a.type&&("PROTOBUF(com.google.protobuf.Struct)"===a.type||!a.type.startsWith("PROTOBUF"))),t.xp6(1),t.Q6J("ngIf","BINARY"===a.type||"PROTOBUF(com.google.protobuf.Struct)"!==a.type&&a.type.startsWith("PROTOBUF"))}}function va(e,i){1&e&&t._uU(0,"-")}let Ca=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-record"]],inputs:{table:"table",record:"record"},decls:6,vars:2,consts:[[4,"ngFor","ngForOf"],["dash",""],[1,"block-title"],["matTooltip","Key Column",1,"icon12",2,"color","gold"],[1,"block"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"base64String"]],template:function(n,o){1&n&&(t.YNc(0,ba,9,7,"ng-container",0),t.YNc(1,Ua,6,3,"ng-container",0),t.TgZ(2,"p"),t._uU(3,"\xa0"),t.qZA(),t.YNc(4,va,1,0,"ng-template",null,1,t.W1O)),2&n&&(t.Q6J("ngForOf",o.table.keyColumn),t.xp6(1),t.Q6J("ngForOf",o.table.valueColumn))},dependencies:[m.sg,m.O5,v.Hw,D.gM,pt.p,l.VC,L],encapsulation:2,changeDetection:0})}return e})();function wa(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"ya-detail-toolbar"),t._uU(2," Record "),t.qZA(),t.TgZ(3,"div",6),t._UZ(4,"app-record",7),t.qZA(),t.BQk()),2&e){const a=i.ngIf,n=t.oxw().ngIf;t.xp6(4),t.Q6J("table",n)("record",a)}}function qa(e,i){1&e&&(t.TgZ(0,"ya-detail-toolbar"),t._uU(1," Select a record "),t.qZA())}function Da(e,i){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.name)}}function Sa(e,i){if(1&e&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.name)}}function Pa(e,i){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"value"),t.ALo(3,"columnValue"),t.qZA()),2&e){const a=i.$implicit,n=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,t.xi3(3,3,n.column,a.name))||"-"," ")}}function Ya(e,i){if(1&e&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"value"),t.ALo(3,"columnValue"),t.qZA()),2&e){const a=i.$implicit,n=t.oxw().$implicit;t.ekj("mono","BINARY"===a.type),t.xp6(1),t.hij(" ",t.lcZ(2,3,t.xi3(3,5,n.column,a.name))||"-"," ")}}const Na=function(e){return{selected:e}};function ka(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",12),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(4);return t.KtG(c.selectRecord(s))}),t.ALo(1,"async"),t.YNc(2,Pa,4,6,"td",10),t.YNc(3,Ya,4,8,"td",13),t.qZA()}if(2&e){const a=i.$implicit,n=t.oxw(3).ngIf,o=t.oxw();t.Q6J("ngClass",t.VKq(5,Na,a===t.lcZ(1,3,o.selectedRecord$))),t.xp6(2),t.Q6J("ngForOf",n.keyColumn),t.xp6(1),t.Q6J("ngForOf",n.valueColumn)}}function Qa(e,i){if(1&e&&(t.TgZ(0,"table",9)(1,"tr"),t.YNc(2,Da,2,1,"th",10),t.YNc(3,Sa,2,1,"th",10),t.qZA(),t.YNc(4,ka,4,7,"tr",11),t.qZA()),2&e){const a=t.oxw().ngIf,n=t.oxw().ngIf;t.xp6(2),t.Q6J("ngForOf",n.keyColumn),t.xp6(1),t.Q6J("ngForOf",n.valueColumn),t.xp6(1),t.Q6J("ngForOf",a)}}function Ia(e,i){if(1&e&&(t.ynx(0),t.YNc(1,Qa,5,3,"table",8),t.BQk()),2&e){const a=i.ngIf;t.oxw(2);const n=t.MAs(3);t.xp6(1),t.Q6J("ngIf",a.length)("ngIfElse",n)}}function Ja(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"ya-detail-pane"),t.YNc(2,wa,5,2,"ng-container",2),t.ALo(3,"async"),t.YNc(4,qa,2,0,"ng-template",null,3,t.W1O),t.qZA(),t.TgZ(6,"div",4)(7,"div",5),t.YNc(8,Ia,2,2,"ng-container",2),t.ALo(9,"async"),t.qZA()(),t.BQk()),2&e){const a=t.MAs(5),n=t.oxw(),o=t.MAs(3);t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,n.selectedRecord$))("ngIfElse",a),t.xp6(6),t.Q6J("ngIf",t.lcZ(9,6,n.records$))("ngIfElse",o)}}function Oa(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," Empty table. "),t.qZA())}let ht=(()=>{class e{constructor(a,n){this.selectedRecord$=new Z.X(null);const o=a.snapshot.parent,s=o.parent.paramMap.get("database"),c=o.paramMap.get("table");this.table$=n.yamcsClient.getTable(s,c),this.records$=n.yamcsClient.getTableData(s,c)}selectRecord(a){this.selectedRecord$.next(a)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:4,vars:3,consts:[[4,"ngIf"],["nodata",""],[4,"ngIf","ngIfElse"],["noSelection",""],[1,"data-table-wrapper"],[1,"panel-content"],[2,"padding","0 16px"],[3,"table","record"],["yaDataTable","",4,"ngIf","ngIfElse"],["yaDataTable",""],[4,"ngFor","ngForOf"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[3,"mono",4,"ngFor","ngForOf"]],template:function(n,o){1&n&&(t.YNc(0,Ja,10,8,"ng-container",0),t.ALo(1,"async"),t.YNc(2,Oa,2,0,"ng-template",null,1,t.W1O)),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.table$))},dependencies:[m.mk,m.sg,m.O5,l.Gj,l.J8,l.MD,l.RR,Ca,m.Ov,l.VC,L],styles:[".data-table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.detail[_ngcontent-%COMP%]{background-color:#fcfcfc;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.data-table-wrapper[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table-wrapper[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}.data-table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#fafafa;cursor:pointer}"],changeDetection:0})}return e})();var d=f(7700);function Ra(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.value),t.xp6(2),t.Oqu(a.label)}}let La=(()=>{class e{constructor(a){this.data=a}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(d.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-show-enum-dialog"]],decls:13,vars:1,consts:[["mat-dialog-title",""],["yaDataTable","",1,"mat-typography",2,"width","100%"],[4,"ngFor","ngForOf"],["align","end"],["mat-dialog-close","",1,"ya-button"]],template:function(n,o){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Enum States"),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"table",1)(4,"tr")(5,"th"),t._uU(6,"Value"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Label"),t.qZA()(),t.YNc(9,Ra,5,2,"tr",2),t.qZA()(),t.TgZ(10,"mat-dialog-actions",3)(11,"button",4),t._uU(12,"Close"),t.qZA()()),2&n&&(t.xp6(9),t.Q6J("ngForOf",o.data.column.enumValue))},dependencies:[m.sg,l.Gj,d.ZT,d.uh,d.xY,d.H8],encapsulation:2})}return e})();function $a(e,i){if(1&e){const a=t.EpF();t.ynx(0),t.TgZ(1,"span",8),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.showEnum(o))}),t._uU(2),t.qZA(),t.BQk()}if(2&e){const a=t.oxw().$implicit;t.xp6(2),t.Oqu(a.type)}}function Ma(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.hij(" ",a.type," ")}}function Fa(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,$a,3,1,"ng-container",7),t.YNc(5,Ma,2,1,"ng-container",7),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t._UZ(8,"td"),t.qZA()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Q6J("ngIf","ENUM"===a.type),t.xp6(1),t.Q6J("ngIf","ENUM"!==a.type),t.xp6(2),t.hij(" ",a.autoIncrement?"auto_increment":"-"," ")}}function Ba(e,i){if(1&e){const a=t.EpF();t.ynx(0),t.TgZ(1,"span",8),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.showEnum(o))}),t._uU(2),t.qZA(),t.BQk()}if(2&e){const a=t.oxw().$implicit;t.xp6(2),t.Oqu(a.type)}}function Ha(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.hij(" ",a.type," ")}}function Ga(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.YNc(4,Ba,3,1,"ng-container",7),t.YNc(5,Ha,2,1,"ng-container",7),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t._UZ(8,"td"),t.qZA()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Q6J("ngIf","ENUM"===a.type),t.xp6(1),t.Q6J("ngIf","ENUM"!==a.type),t.xp6(2),t.hij(" ",a.autoIncrement?"auto_increment":"-"," ")}}function Ea(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,", "),t.qZA())}function ja(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.YNc(2,Ea,2,0,"span",7),t.BQk()),2&e){const a=i.$implicit,n=i.last;t.xp6(1),t.hij(" ",a,""),t.xp6(1),t.Q6J("ngIf",!n)}}function za(e,i){if(1&e&&(t.ynx(0),t.YNc(1,ja,3,2,"ng-container",4),t.BQk()),2&e){const a=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",a.histogramColumn)}}function Xa(e,i){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function Va(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"dt"),t._uU(2,"Time partition column"),t.qZA(),t.TgZ(3,"dd"),t._uU(4),t.qZA(),t.BQk()),2&e){const a=t.oxw().ngIf;t.xp6(4),t.AsE(" ",null==a.partitioningInfo?null:a.partitioningInfo.timeColumn,"('",null==a.partitioningInfo?null:a.partitioningInfo.timePartitionSchema,"') ")}}function Ka(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"dt"),t._uU(2,"Value partition column"),t.qZA(),t.TgZ(3,"dd"),t._uU(4),t.qZA(),t.BQk()),2&e){const a=t.oxw().ngIf;t.xp6(4),t.hij(" ",null==a.partitioningInfo?null:a.partitioningInfo.valueColumn," ")}}function Wa(e,i){if(1&e&&(t.TgZ(0,"div",1)(1,"h3"),t._uU(2,"Key"),t.qZA(),t.TgZ(3,"table",2)(4,"tr")(5,"th"),t._uU(6,"Column"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Type"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Extra"),t.qZA(),t._UZ(11,"th",3),t.qZA(),t.YNc(12,Fa,9,4,"tr",4),t.qZA(),t.TgZ(13,"p"),t._uU(14,"\xa0"),t.qZA(),t.TgZ(15,"h3"),t._uU(16,"Value"),t.qZA(),t.TgZ(17,"table",5)(18,"tr")(19,"th"),t._uU(20,"Column"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Type"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Extra"),t.qZA(),t._UZ(25,"th",3),t.qZA(),t.YNc(26,Ga,9,4,"tr",4),t.qZA(),t.TgZ(27,"p"),t._uU(28,"\xa0"),t.qZA(),t.TgZ(29,"h3"),t._uU(30,"Options"),t.qZA(),t.TgZ(31,"dl",6)(32,"dt"),t._uU(33,"Format version"),t.qZA(),t.TgZ(34,"dd"),t._uU(35),t.qZA(),t.TgZ(36,"dt"),t._uU(37,"Storage engine"),t.qZA(),t.TgZ(38,"dd"),t._uU(39),t.qZA(),t.TgZ(40,"dt"),t._uU(41,"Tablespace"),t.qZA(),t.TgZ(42,"dd"),t._uU(43),t.qZA(),t.TgZ(44,"dt"),t._uU(45,"Compressed"),t.qZA(),t.TgZ(46,"dd"),t._uU(47),t.qZA(),t.TgZ(48,"dt"),t._uU(49,"Histogram"),t.qZA(),t.TgZ(50,"dd"),t.YNc(51,za,2,1,"ng-container",7),t.YNc(52,Xa,2,0,"ng-container",7),t.qZA(),t.TgZ(53,"dt"),t._uU(54,"Partition by"),t.qZA(),t.TgZ(55,"dd"),t._uU(56),t.ALo(57,"lowercase"),t.qZA(),t.YNc(58,Va,5,2,"ng-container",7),t.YNc(59,Ka,5,1,"ng-container",7),t.qZA()()),2&e){const a=i.ngIf;t.xp6(12),t.Q6J("ngForOf",a.keyColumn),t.xp6(14),t.Q6J("ngForOf",a.valueColumn),t.xp6(9),t.Oqu(a.formatVersion),t.xp6(4),t.Oqu(a.storageEngine),t.xp6(4),t.Oqu(a.tablespace||"-"),t.xp6(4),t.Oqu(a.compressed?"yes":"no"),t.xp6(4),t.Q6J("ngIf",a.histogramColumn),t.xp6(1),t.Q6J("ngIf",!a.histogramColumn),t.xp6(4),t.Oqu(t.lcZ(57,11,null==a.partitioningInfo?null:a.partitioningInfo.type)||"-"),t.xp6(2),t.Q6J("ngIf",null==a.partitioningInfo?null:a.partitioningInfo.timeColumn),t.xp6(1),t.Q6J("ngIf",null==a.partitioningInfo?null:a.partitioningInfo.valueColumn)}}let Tt=(()=>{class e{constructor(a,n,o){this.dialog=o;const s=a.snapshot.parent,c=s.parent.paramMap.get("database"),u=s.paramMap.get("table");this.table$=n.yamcsClient.getTable(c,u)}showEnum(a){this.dialog.open(La,{width:"400px",data:{column:a}})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(d.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[["class","panel-content",4,"ngIf"],[1,"panel-content"],["yaDataTable","",1,"expand"],[1,"expand"],[4,"ngFor","ngForOf"],["yaDataTable",""],[1,"dl-horizontal"],[4,"ngIf"],["matTooltip","Show enum states",1,"enum",3,"click"]],template:function(n,o){1&n&&(t.YNc(0,Wa,60,13,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.table$))},dependencies:[m.sg,m.O5,l.Gj,D.gM,m.Ov,m.i8],styles:[".enum[_ngcontent-%COMP%]{border-bottom:1px dotted #888;cursor:pointer}"],changeDetection:0})}return e})();function tn(e,i){1&e&&(t.ynx(0),t._UZ(1,"router-outlet"),t.BQk())}let Zt=(()=>{class e{constructor(a,n,o){this.yamcs=n;const s=a.snapshot.parent.paramMap.get("database"),c=a.snapshot.paramMap.get("table");o.setTitle(c),this.table$=n.yamcsClient.getTable(s,c)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-table-page"]],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(n,o){1&n&&(t.YNc(0,tn,2,0,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.table$))},dependencies:[m.O5,_.lC,m.Ov],encapsulation:2,changeDetection:0})}return e})();function en(e,i){if(1&e&&(t.TgZ(0,"div",1),t._UZ(1,"code",2),t.qZA()),2&e){const a=i.ngIf,n=t.oxw();t.xp6(1),t.Q6J("innerHTML",n.formatSQL(a.script),t.oJD)}}let bt=(()=>{class e{constructor(a,n){const o=a.snapshot.parent,s=o.parent.paramMap.get("database"),c=o.paramMap.get("table");this.table$=n.yamcsClient.getTable(s,c)}formatSQL(a){return dt(a)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-table-script-tab"]],decls:2,vars:3,consts:[["class","panel-content sql",4,"ngIf"],[1,"panel-content","sql"],[3,"innerHTML"]],template:function(n,o){1&n&&(t.YNc(0,en,2,1,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.table$))},dependencies:[m.O5,m.Ov],styles:["code[_ngcontent-%COMP%]{display:inline-block;font-size:12px;line-height:14px}",".dtype{color:red}  .paren{color:#1b61b9}  .kw{color:#1b61b9}"],changeDetection:0})}return e})();function an(e,i){1&e&&(t.TgZ(0,"th",9),t._uU(1,"Name"),t.qZA())}function nn(e,i){if(1&e&&(t.TgZ(0,"td",10)(1,"a",11),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.hij(" ",a.name," ")}}function on(e,i){1&e&&t._UZ(0,"th",12)}function sn(e,i){1&e&&t._UZ(0,"td",10)}function rn(e,i){1&e&&t._UZ(0,"tr",13)}function cn(e,i){1&e&&t._UZ(0,"tr",14)}let xt=(()=>{class e{constructor(a,n){this.yamcs=n,this.displayedColumns=["name","actions"],this.dataSource=new r.by;const s=a.snapshot.parent.paramMap.get("database");n.yamcsClient.getTables(s).then(c=>{this.dataSource.data=c})}ngAfterViewInit(){this.dataSource.sort=this.sort}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(h.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:10,vars:3,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"table",1),t.ynx(2,2),t.YNc(3,an,2,0,"th",3),t.YNc(4,nn,3,2,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,on,1,0,"th",6),t.YNc(7,sn,1,0,"td",4),t.BQk(),t.YNc(8,rn,1,0,"tr",7),t.YNc(9,cn,1,0,"tr",8),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(7),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[_.rH,h.YE,h.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk],encapsulation:2,changeDetection:0})}return e})();function ln(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Name"),t.qZA())}function pn(e,i){if(1&e&&(t.TgZ(0,"td",12)(1,"a",13),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.hij(" ",a.name," ")}}function mn(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Tablespace"),t.qZA())}function un(e,i){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.tablespace," ")}}function _n(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Path"),t.qZA())}function dn(e,i){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.path," ")}}function gn(e,i){1&e&&t._UZ(0,"th",14)}function fn(e,i){1&e&&t._UZ(0,"td",12)}function hn(e,i){1&e&&t._UZ(0,"tr",15)}function Tn(e,i){1&e&&t._UZ(0,"tr",16)}let yt=(()=>{class e{constructor(a,n,o){this.yamcs=a,this.displayedColumns=["name","tablespace","path","actions"],this.dataSource=new r.by,n.setTitle("Databases"),a.yamcsClient.getDatabases().then(s=>{this.dataSource.data=s}).catch(s=>o.showError(s))}ngAfterViewInit(){this.dataSource.sort=this.sort}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(h.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:19,vars:3,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tablespace"],["matColumnDef","path"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2,"Databases"),t.qZA(),t.TgZ(3,"div",0)(4,"table",1),t.ynx(5,2),t.YNc(6,ln,2,0,"th",3),t.YNc(7,pn,3,2,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,mn,2,0,"th",3),t.YNc(10,un,2,1,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,_n,2,0,"th",3),t.YNc(13,dn,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,gn,1,0,"th",8),t.YNc(16,fn,1,0,"td",4),t.BQk(),t.YNc(17,hn,1,0,"tr",9),t.YNc(18,Tn,1,0,"tr",10),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[_.rH,h.YE,h.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,y,A],encapsulation:2,changeDetection:0})}return e})();var N=f(9887),Q=f(6385);let B=(()=>{class e{transform(a){if(!a)return a;const n=a.match(/Chrome\/([a-zA-Z0-9\.]+)/),o=a.match(/Chromium\/([a-zA-Z0-9\.]+)/),s=a.match(/Edg\/([a-zA-Z0-9\.]+)/),c=a.match(/Firefox\/([a-zA-Z0-9\.]+)/),u=a.match(/OPR\/([a-zA-Z0-9\.]+)/),g=a.match(/Safari\/([a-zA-Z0-9\.]+)/),T=a.match(/Seamonkey\/([a-zA-Z0-9\.]+)/);let U,x;if(!g||n||o||s)!n||o||s?o?(U="Chromium",x=o[1]):c&&!T?(U="Firefox",x=c[1]):T?(U="Seamonkey",x=T[1]):u?(U="Opera",x=u[1]):s&&(U="Edge",x=s[1]):(U="Chrome",x=n[1]);else{U="Safari",x=g[1];const S=a.match(/Version\/([a-zA-Z0-9\.]+)/);S&&(x=S[1])}return U?`${U} ${x}`:a}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275pipe=t.Yjl({name:"userAgent",type:e,pure:!0})}return e})();function Zn(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"dl",20)(2,"dt"),t._uU(3,"Cumulative read"),t.qZA(),t.TgZ(4,"dd"),t._uU(5),t.ALo(6,"formatBytes"),t.qZA(),t.TgZ(7,"dt"),t._uU(8,"Cumulative written"),t.qZA(),t.TgZ(9,"dd"),t._uU(10),t.ALo(11,"formatBytes"),t.qZA(),t.TgZ(12,"dt"),t._uU(13,"Rx"),t.qZA(),t.TgZ(14,"dd"),t._uU(15),t.ALo(16,"dataRate"),t.qZA(),t.TgZ(17,"dt"),t._uU(18,"Tx"),t.qZA(),t.TgZ(19,"dd"),t._uU(20),t.ALo(21,"dataRate"),t.qZA()(),t.BQk()),2&e){const a=i.ngIf;t.xp6(5),t.Oqu(t.lcZ(6,4,a.readBytes)),t.xp6(5),t.Oqu(t.lcZ(11,6,a.writtenBytes)),t.xp6(5),t.Oqu(t.lcZ(16,8,8*a.readThroughput)),t.xp6(5),t.Oqu(t.lcZ(21,10,8*a.writeThroughput))}}function bn(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Id"),t.qZA())}function xn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.id)}}function yn(e,i){1&e&&(t.TgZ(0,"th",23),t._uU(1,"User agent"),t.qZA())}function An(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"userAgent"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,null==a.httpRequest?null:a.httpRequest.userAgent)||"-")}}function Un(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Protocol"),t.qZA())}function vn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu((null==a.httpRequest?null:a.httpRequest.protocol)||"-")}}function Cn(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Remote address"),t.qZA())}function wn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.remoteAddress||"-")}}function qn(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Read"),t.qZA())}function Dn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"formatBytes"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.readBytes)||"-")}}function Sn(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Written"),t.qZA())}function Pn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"formatBytes"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.writtenBytes)||"-")}}function Yn(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Rx"),t.qZA())}function Nn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"dataRate"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,8*a.readThroughput))}}function kn(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Tx"),t.qZA())}function Qn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"dataRate"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,8*a.writeThroughput))}}function In(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Request"),t.qZA())}function Jn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.AsE(" ",null==a.httpRequest?null:a.httpRequest.method," ",null==a.httpRequest?null:a.httpRequest.uri," ")}}function On(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Authorization"),t.qZA())}function Rn(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.username||"-"," ")}}function Ln(e,i){1&e&&t._UZ(0,"tr",24)}function $n(e,i){1&e&&t._UZ(0,"tr",25)}let At=(()=>{class e{constructor(a,n,o){this.yamcs=a,this.displayedColumns=["id","protocol","remoteAddress","readBytes","writtenBytes","readThroughput","writeThroughput","request","authorization","userAgent"],this.tableTrackerFn=(s,c)=>c.id,this.traffic$=new Z.X(null),this.dataSource=new r.by,n.setTitle("HTTP traffic"),this.refresh(),this.syncSubscription=o.syncSlow(()=>this.refresh())}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}refresh(){this.yamcs.yamcsClient.getHttpTraffic().then(a=>{this.traffic$.next(a),this.dataSource.data=a.connections||[]})}ngOnDestroy(){this.syncSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(l.jF))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&(t.Gf(h.YE,5),t.Gf(N.NW,5)),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first),t.iGM(s=t.CRH())&&(o.paginator=s.first)}},decls:44,vars:10,consts:[[1,"panel-content"],[4,"ngIf"],[1,"section-divider"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userAgent"],["mat-header-cell","","mat-sort-header","","class","expand",4,"matHeaderCellDef"],["matColumnDef","protocol"],["matColumnDef","remoteAddress"],["matColumnDef","readBytes"],["matColumnDef","writtenBytes"],["matColumnDef","readThroughput"],["matColumnDef","writeThroughput"],["matColumnDef","request"],["matColumnDef","authorization"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","hidePageSize","showFirstLastButtons"],[1,"dl-horizontal","no-lead"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," HTTP traffic "),t.qZA(),t.TgZ(3,"div",0),t.YNc(4,Zn,22,12,"ng-container",1),t.ALo(5,"async"),t.TgZ(6,"div",2),t._UZ(7,"mat-divider"),t.qZA(),t.TgZ(8,"h4"),t._uU(9,"Current connections"),t.qZA(),t.TgZ(10,"table",3),t.ynx(11,4),t.YNc(12,bn,2,0,"th",5),t.YNc(13,xn,2,1,"td",6),t.BQk(),t.ynx(14,7),t.YNc(15,yn,2,0,"th",8),t.YNc(16,An,3,3,"td",6),t.BQk(),t.ynx(17,9),t.YNc(18,Un,2,0,"th",5),t.YNc(19,vn,2,1,"td",6),t.BQk(),t.ynx(20,10),t.YNc(21,Cn,2,0,"th",5),t.YNc(22,wn,2,1,"td",6),t.BQk(),t.ynx(23,11),t.YNc(24,qn,2,0,"th",5),t.YNc(25,Dn,3,3,"td",6),t.BQk(),t.ynx(26,12),t.YNc(27,Sn,2,0,"th",5),t.YNc(28,Pn,3,3,"td",6),t.BQk(),t.ynx(29,13),t.YNc(30,Yn,2,0,"th",5),t.YNc(31,Nn,3,3,"td",6),t.BQk(),t.ynx(32,14),t.YNc(33,kn,2,0,"th",5),t.YNc(34,Qn,3,3,"td",6),t.BQk(),t.ynx(35,15),t.YNc(36,In,2,0,"th",5),t.YNc(37,Jn,2,2,"td",6),t.BQk(),t.ynx(38,16),t.YNc(39,On,2,0,"th",5),t.YNc(40,Rn,2,1,"td",6),t.BQk(),t.YNc(41,Ln,1,0,"tr",17),t.YNc(42,$n,1,0,"tr",18),t.qZA(),t._UZ(43,"mat-paginator",19),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngIf",t.lcZ(5,8,o.traffic$)),t.xp6(6),t.Q6J("dataSource",o.dataSource)("trackBy",o.tableTrackerFn),t.xp6(31),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("pageSize",100)("hidePageSize",!0)("showFirstLastButtons",!0))},dependencies:[m.O5,Q.d,N.NW,h.YE,h.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,y,A,m.Ov,l.zs,l.bP,B],encapsulation:2,changeDetection:0})}return e})();function Mn(e,i){1&e&&t._UZ(0,"th",21)}function Fn(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"td",22)(1,"input",23),t.NdJ("click",function(o){return o.stopPropagation()})("change",function(o){const c=t.CHM(a).$implicit,u=t.oxw(2);return t.KtG(o?u.selection.toggle(c):null)}),t.qZA()()}if(2&e){const a=i.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("checked",n.selection.isSelected(a))}}function Bn(e,i){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Type"),t.qZA())}function Hn(e,i){1&e&&(t.TgZ(0,"mat-icon",27),t._uU(1,"person"),t.qZA())}function Gn(e,i){if(1&e&&(t.TgZ(0,"td",25),t.YNc(1,Hn,2,0,"mat-icon",26),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngIf",a.user)}}function En(e,i){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Member"),t.qZA())}function jn(e,i){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.label," ")}}function zn(e,i){1&e&&t._UZ(0,"tr",29)}function Xn(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",30),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(2);return t.KtG(c.toggleOne(s))}),t.qZA()}if(2&e){const a=i.$implicit,n=t.oxw(2);t.ekj("selected",n.selection.isSelected(a))}}function Vn(e,i){if(1&e&&(t.TgZ(0,"table",10),t.ynx(1,11),t.YNc(2,Mn,1,0,"th",12),t.YNc(3,Fn,2,1,"td",13),t.BQk(),t.ynx(4,14),t.YNc(5,Bn,2,0,"th",15),t.YNc(6,Gn,2,1,"td",16),t.BQk(),t.ynx(7,17),t.YNc(8,En,2,0,"th",18),t.YNc(9,jn,2,1,"td",16),t.BQk(),t.YNc(10,zn,1,0,"tr",19),t.YNc(11,Xn,1,2,"tr",20),t.qZA()),2&e){const a=t.oxw();t.Q6J("dataSource",a.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns)}}function Kn(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," No rows to display "),t.qZA())}let Ut=(()=>{class e{constructor(a,n,o){this.dialogRef=a,this.data=o,this.displayedColumns=["select","type","name"],this.filterControl=new p.p4,this.dataSource=new r.by,this.selection=new F.Ov(!0,[]);const c=o.items.filter(u=>u.user).map(u=>u.user.name);n.yamcsClient.getUsers().then(u=>{const g=(u||[]).filter(T=>-1===c.indexOf(T.name)).map(T=>({label:T.displayName||T.name,user:T}));this.dataSource.data=g})}ngAfterViewInit(){this.filterControl.valueChanges.subscribe(()=>{this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.dataSource.filterPredicate=(a,n)=>a.label.toLowerCase().indexOf(n)>=0,this.dataSource.paginator=this.paginator}toggleOne(a){(!this.selection.isSelected(a)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(a)}save(){this.dialogRef.close(this.selection.selected)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(d.so),t.Y36(l.C8),t.Y36(d.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-members-dialog"]],viewQuery:function(n,o){if(1&n&&t.Gf(N.NW,7),2&n){let s;t.iGM(s=t.CRH())&&(o.paginator=s.first)}},decls:13,vars:7,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"filter-bar",2,"margin-top","5px"],["placeholder","Filter users",3,"formControl"],["mat-table","","class","ya-data-table","style","width: 100%",3,"dataSource",4,"ngIf"],[4,"ngIf"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"],["mat-table","",1,"ya-data-table",2,"width","100%",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","checkbox",4,"matHeaderCellDef"],["mat-cell","","class","checkbox",4,"matCellDef"],["matColumnDef","type"],["mat-header-cell","","width","1",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"checked","click","change"],["mat-header-cell","","width","1"],["mat-cell",""],["matTooltip","User","style","vertical-align: middle",4,"ngIf"],["matTooltip","User",2,"vertical-align","middle"],["mat-header-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Add members"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"div",2),t._UZ(4,"ya-search-filter",3),t.qZA(),t.YNc(5,Vn,12,3,"table",4),t.YNc(6,Kn,2,0,"ya-empty-message",5),t._UZ(7,"mat-paginator",6),t.qZA(),t.TgZ(8,"mat-dialog-actions",7)(9,"button",8),t._uU(10,"CANCEL"),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return o.save()}),t._uU(12,"ADD"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("ngIf",o.dataSource),t.xp6(1),t.Q6J("ngIf",!o.dataSource.data.length),t.xp6(1),t.Q6J("pageSize",10)("hidePageSize",!0)("showFirstLastButtons",!1),t.xp6(4),t.Q6J("disabled",o.selection.isEmpty()))},dependencies:[m.O5,p.JJ,p.oH,d.ZT,d.uh,d.xY,d.H8,v.Hw,N.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,D.gM,l.RR,l.cF],styles:[".selected[_ngcontent-%COMP%]{background-color:#f0f4fd!important}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0})}return e})();function Wn(e,i){1&e&&(t.TgZ(0,"tr")(1,"td",13),t._uU(2,"No rows to display"),t.qZA()())}function ti(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"mat-icon",14),t._uU(3,"person"),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",15)(7,"ya-text-action",16),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(2);return t.KtG(c.deleteItem(s))}),t._uU(8,"DELETE"),t.qZA()()()}if(2&e){const a=i.$implicit;t.xp6(5),t.Oqu(a.label)}}function ei(e,i){if(1&e&&(t.TgZ(0,"table",9)(1,"tr")(2,"th",10),t._uU(3,"Type"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Member"),t.qZA(),t._UZ(6,"th"),t.qZA(),t.YNc(7,Wn,3,0,"tr",11),t.YNc(8,ti,9,1,"tr",12),t.qZA()),2&e){const a=i.ngIf;t.xp6(7),t.Q6J("ngIf",!a.length),t.xp6(1),t.Q6J("ngForOf",a)}}let vt=(()=>{class e{constructor(a,n,o,s,c,u,g,T){this.router=o,this.route=s,this.yamcs=c,this.dialog=u,this.messageService=g,this.location=T,this.memberItems$=new Z.X([]),n.setTitle("Create a Group"),this.form=a.group({name:new p.p4("",[p.kI.required]),description:new p.p4})}showAddMembersDialog(){this.dialog.open(Ut,{data:{items:this.memberItems$.value},width:"600px"}).afterClosed().subscribe(n=>{n&&this.updateMemberItems([...this.memberItems$.value,...n])})}updateMemberItems(a){a.sort((n,o)=>n.label<o.label?-1:n.label>o.label?1:0),this.memberItems$.next(a)}deleteItem(a){this.updateMemberItems(this.memberItems$.value.filter(n=>n!==a))}onConfirm(){const a={name:this.form.value.name,description:this.form.value.description,users:this.memberItems$.value.filter(n=>n.user).map(n=>n.user.name)};this.yamcs.yamcsClient.createGroup(a).then(()=>this.router.navigate([".."],{relativeTo:this.route})).catch(n=>this.messageService.showError(n))}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(p.QS),t.Y36(b.Dx),t.Y36(_.F0),t.Y36(_.gz),t.Y36(l.C8),t.Y36(d.uw),t.Y36(l.ez),t.Y36(m.Ye))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:33,vars:5,consts:[["mat-icon-button","","routerLink","..","color","primary"],[1,"form-content","ya-form"],["novalidate","",3,"formGroup"],["formControlName","name","type","text"],["formControlName","description","rows","5"],[1,"ya-button",3,"click"],["yaDataTable","","style","width: 100%",4,"ngIf"],[1,"action-bar"],["type","submit",1,"ya-button","primary",3,"disabled","click"],["yaDataTable","",2,"width","100%"],["width","1"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","3"],["matTooltip","User",2,"vertical-align","middle"],[2,"text-align","right"],["icon","delete",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",0)(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA()(),t._uU(5," Create group "),t.qZA(),t.TgZ(6,"div",1)(7,"form",2)(8,"label"),t._uU(9," Group name"),t._UZ(10,"br")(11,"input",3),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"label"),t._uU(14," Description "),t._UZ(15,"textarea",4),t.qZA()(),t.TgZ(16,"p"),t._uU(17,"\xa0"),t.qZA(),t.TgZ(18,"button",5),t.NdJ("click",function(){return o.showAddMembersDialog()}),t.TgZ(19,"mat-icon"),t._uU(20,"add_circle_outline"),t.qZA(),t._uU(21," Add members "),t.qZA(),t.TgZ(22,"p"),t._uU(23,"\xa0"),t.qZA(),t.YNc(24,ei,9,2,"table",6),t.ALo(25,"async"),t.TgZ(26,"p"),t._uU(27,"\xa0"),t.qZA(),t.TgZ(28,"div",7)(29,"button",5),t.NdJ("click",function(){return o.location.back()}),t._uU(30,"Cancel"),t.qZA(),t.TgZ(31,"button",8),t.NdJ("click",function(){return o.onConfirm()}),t._uU(32,"CREATE"),t.qZA()()()()),2&n&&(t.xp6(7),t.Q6J("formGroup",o.form),t.xp6(17),t.Q6J("ngIf",t.lcZ(25,3,o.memberItems$)),t.xp6(7),t.Q6J("disabled",!o.form.valid))},dependencies:[m.sg,m.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,_.rH,l.Gj,C.o6,v.Hw,D.gM,l.ll,y,A,m.Ov],encapsulation:2,changeDetection:0})}return e})(),ai=(()=>{class e{constructor(a){this.data=a}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(d.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-application-credentials-dialog"]],decls:22,vars:3,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"dl-horizontal"],["align","end"],["mat-dialog-close","",1,"ya-button","primary"]],template:function(n,o){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Service account created"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"dl",2)(6,"dt"),t._uU(7,"Application ID"),t.qZA(),t.TgZ(8,"dd")(9,"pre"),t._uU(10),t.qZA()(),t.TgZ(11,"dt"),t._uU(12,"Application Secret"),t.qZA(),t.TgZ(13,"dd")(14,"pre"),t._uU(15),t.qZA()()(),t.TgZ(16,"strong"),t._uU(17,"Important: "),t.qZA(),t._uU(18," Take note of these application credentials. It is not possible to display them after closing this dialog.\n"),t.qZA(),t.TgZ(19,"mat-dialog-actions",3)(20,"button",4),t._uU(21,"CLOSE"),t.qZA()()),2&n&&(t.xp6(4),t.hij("The service account '",o.data.name,"' was created successfully. You can use this account to connect an application to Yamcs."),t.xp6(6),t.Oqu(o.data.applicationId),t.xp6(5),t.Oqu(o.data.applicationSecret))},dependencies:[d.ZT,d.uh,d.xY,d.H8],encapsulation:2,changeDetection:0})}return e})(),Ct=(()=>{class e{constructor(a,n,o,s,c,u,g,T){this.router=o,this.route=s,this.yamcs=c,this.messageService=u,this.location=g,this.dialog=T,n.setTitle("Create service account"),this.form=a.group({name:new p.p4("",[p.kI.required])})}onConfirm(){this.yamcs.yamcsClient.createServiceAccount({name:this.form.value.name}).then(n=>this.onServerConfirm(n)).catch(n=>this.messageService.showError(n))}onServerConfirm(a){this.dialog.open(ai,{disableClose:!0,closeOnNavigation:!1,data:a,width:"550px"}).afterClosed().subscribe(()=>{this.router.navigate([".."],{relativeTo:this.route})})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(p.QS),t.Y36(b.Dx),t.Y36(_.F0),t.Y36(_.gz),t.Y36(l.C8),t.Y36(l.ez),t.Y36(m.Ye),t.Y36(d.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:29,vars:4,consts:[["mat-icon-button","","routerLink","..","color","primary"],[1,"form-content","ya-form"],["novalidate","",3,"formGroup"],[1,"hint"],["formControlName","name","type","text"],[2,"margin-top","32px"],["type","checkbox",3,"disabled","checked"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",0)(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA()(),t._uU(5," Create service account "),t.qZA(),t.TgZ(6,"div",1)(7,"form",2)(8,"label"),t._uU(9," Service account name "),t.TgZ(10,"span",3),t._uU(11,"(required)"),t.qZA(),t._UZ(12,"br")(13,"input",4),t.qZA(),t.TgZ(14,"h2",5),t._uU(15,"Scopes"),t.qZA(),t.TgZ(16,"label"),t._UZ(17,"input",6),t._uU(18," Impersonation"),t._UZ(19,"br"),t.TgZ(20,"span",3),t._uU(21,"Grants permission to access the API on behalf of any user in the system."),t.qZA()()(),t.TgZ(22,"p"),t._uU(23,"\xa0"),t.qZA(),t.TgZ(24,"div",7)(25,"button",8),t.NdJ("click",function(){return o.location.back()}),t._uU(26,"Cancel"),t.qZA(),t.TgZ(27,"button",9),t.NdJ("click",function(){return o.onConfirm()}),t._uU(28,"CREATE"),t.qZA()()()()),2&n&&(t.xp6(7),t.Q6J("formGroup",o.form),t.xp6(10),t.Q6J("disabled",!0)("checked",!0),t.xp6(10),t.Q6J("disabled",!o.form.valid))},dependencies:[p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,_.rH,C.o6,v.Hw,y,A],encapsulation:2,changeDetection:0})}return e})(),wt=(()=>{class e{constructor(a,n,o,s,c){this.router=o,this.yamcs=s,this.messageService=c,n.setTitle("Create a User"),this.form=a.group({name:new p.p4("",[p.kI.required]),displayName:new p.p4,email:new p.p4,password:new p.p4,passwordConfirmation:new p.p4})}onConfirm(){const a=this.form.value,n={name:a.name};if(a.displayName&&(n.displayName=a.displayName),a.email&&(n.email=a.email),a.password){if(a.password!==a.passwordConfirmation)return void alert("Password confirmation does not match password");n.password=a.password}this.yamcs.yamcsClient.createUser(n).then(()=>this.router.navigateByUrl(`/admin/iam/users/${a.name}`)).catch(o=>this.messageService.showError(o))}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(p.QS),t.Y36(b.Dx),t.Y36(_.F0),t.Y36(l.C8),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:53,vars:2,consts:[["mat-icon-button","","routerLink","..","color","primary"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["formControlName","name","type","text"],["formControlName","displayName","type","text"],["formControlName","email","type","text"],[1,"section-divider"],["formControlName","password","type","password"],["formControlName","passwordConfirmation","type","password"],[1,"action-bar"],["routerLink","..",1,"ya-button"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",0)(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA()(),t._uU(5," Create user "),t.qZA(),t.TgZ(6,"div",1)(7,"form",2)(8,"label"),t._uU(9," Username "),t.TgZ(10,"span",3),t._uU(11,"(required)"),t.qZA(),t._UZ(12,"br")(13,"input",4),t.qZA(),t._UZ(14,"br"),t.TgZ(15,"label"),t._uU(16," Display name "),t.TgZ(17,"span",3),t._uU(18,"(optional)"),t.qZA(),t._UZ(19,"br")(20,"input",5),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"label"),t._uU(23," Email "),t.TgZ(24,"span",3),t._uU(25,"(optional)"),t.qZA(),t._UZ(26,"br")(27,"input",6),t.qZA(),t.TgZ(28,"p"),t._uU(29,"\xa0"),t.qZA(),t.TgZ(30,"div",7),t._UZ(31,"mat-divider"),t.qZA(),t._UZ(32,"br"),t.TgZ(33,"label"),t._uU(34," Password "),t.TgZ(35,"span",3),t._uU(36,"(optional)"),t.qZA(),t._UZ(37,"br"),t.TgZ(38,"span",3),t._uU(39,"User without a password may still be able to login if an external identity provider is configured."),t.qZA(),t._UZ(40,"input",8),t.qZA(),t._UZ(41,"br"),t.TgZ(42,"label"),t._uU(43," Password confirmation"),t._UZ(44,"br")(45,"input",9),t.qZA()(),t.TgZ(46,"p"),t._uU(47,"\xa0"),t.qZA(),t.TgZ(48,"div",10)(49,"button",11),t._uU(50,"Cancel"),t.qZA(),t.TgZ(51,"button",12),t.NdJ("click",function(){return o.onConfirm()}),t._uU(52,"CREATE"),t.qZA()()()()),2&n&&(t.xp6(7),t.Q6J("formGroup",o.form),t.xp6(44),t.Q6J("disabled",!o.form.valid))},dependencies:[p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,_.rH,C.o6,v.Hw,Q.d,y,A],encapsulation:2,changeDetection:0})}return e})();function ni(e,i){1&e&&(t.TgZ(0,"tr")(1,"td",13),t._uU(2,"No rows to display"),t.qZA()())}function ii(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"mat-icon",14),t._uU(3,"person"),t.qZA()(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td",15)(7,"ya-text-action",16),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(3);return t.KtG(c.deleteItem(s))}),t._uU(8,"DELETE"),t.qZA()()()}if(2&e){const a=i.$implicit;t.xp6(5),t.Oqu(a.label)}}function oi(e,i){if(1&e&&(t.TgZ(0,"table",10)(1,"tr")(2,"th",11),t._uU(3,"Type"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Member"),t.qZA(),t._UZ(6,"th"),t.qZA(),t.YNc(7,ni,3,0,"tr",0),t.YNc(8,ii,9,1,"tr",12),t.qZA()),2&e){const a=i.ngIf;t.xp6(7),t.Q6J("ngIf",!a.length),t.xp6(1),t.Q6J("ngForOf",a)}}function si(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2),t.qZA(),t.TgZ(3,"div",1)(4,"form",2)(5,"label"),t._uU(6," Name"),t._UZ(7,"br")(8,"input",3),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"label"),t._uU(11," Description "),t._UZ(12,"textarea",4),t.qZA()(),t.TgZ(13,"p"),t._uU(14,"\xa0"),t.qZA(),t.TgZ(15,"button",5),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.showAddMembersDialog())}),t.TgZ(16,"mat-icon"),t._uU(17,"add_circle_outline"),t.qZA(),t._uU(18," Add members "),t.qZA(),t.TgZ(19,"p"),t._uU(20,"\xa0"),t.qZA(),t.YNc(21,oi,9,2,"table",6),t.ALo(22,"async"),t.TgZ(23,"p"),t._uU(24,"\xa0"),t.qZA(),t.TgZ(25,"div",7)(26,"button",8),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.location.back())}),t._uU(27,"Cancel"),t.qZA(),t.TgZ(28,"button",9),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.onConfirm())}),t.ALo(29,"async"),t._uU(30,"SAVE CHANGES"),t.qZA()()()()}if(2&e){const a=i.ngIf,n=t.oxw();t.xp6(2),t.hij(" Edit Group: ",a.name," "),t.xp6(2),t.Q6J("formGroup",n.form),t.xp6(17),t.Q6J("ngIf",t.lcZ(22,4,n.memberItems$)),t.xp6(7),t.Q6J("disabled",!t.lcZ(29,6,n.dirty$)||!n.form.valid)}}let qt=(()=>{class e{constructor(a,n,o,s,c,u,g,T){this.router=o,this.yamcs=c,this.messageService=u,this.dialog=g,this.location=T,this.memberItems$=new Z.X([]),this.dirty$=new Z.X(!1),n.setTitle("Edit Group");const U=s.snapshot.paramMap.get("name");this.group$=c.yamcsClient.getGroup(U),this.group$.then(x=>{this.group=x,this.form=a.group({name:new p.p4(x.name),description:new p.p4(x.description)}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)});const S=[];if(x.users)for(const J of x.users)S.push({label:J.displayName||J.name,user:J});this.updateMemberItems(S,!1)})}showAddMembersDialog(){this.dialog.open(Ut,{data:{items:this.memberItems$.value},width:"600px"}).afterClosed().subscribe(n=>{n&&this.updateMemberItems([...this.memberItems$.value,...n])})}updateMemberItems(a,n=!0){a.sort((o,s)=>o.label<s.label?-1:o.label>s.label?1:0),this.memberItems$.next(a),this.dirty$.next(n)}deleteItem(a){this.updateMemberItems(this.memberItems$.value.filter(n=>n!==a))}onConfirm(){const a=this.form.value,n={newName:a.name,description:a.description,memberInfo:{users:this.memberItems$.value.filter(s=>s.user).map(s=>s.user.name)}},o=a.name;this.yamcs.yamcsClient.editGroup(this.group.name,n).then(()=>this.router.navigateByUrl(`/admin/iam/groups/${o}`)).catch(s=>this.messageService.showError(s))}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(p.QS),t.Y36(b.Dx),t.Y36(_.F0),t.Y36(_.gz),t.Y36(l.C8),t.Y36(l.ez),t.Y36(d.uw),t.Y36(m.Ye))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],["formControlName","name","type","text"],["formControlName","description","rows","5"],["mat-stroked-button","",3,"click"],["yaDataTable","","style","width: 100%",4,"ngIf"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"disabled","click"],["yaDataTable","",2,"width","100%"],["width","1"],[4,"ngFor","ngForOf"],["colspan","3"],["matTooltip","User",2,"vertical-align","middle"],[2,"text-align","right"],["icon","delete",3,"click"]],template:function(n,o){1&n&&(t.YNc(0,si,31,8,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.group$))},dependencies:[m.sg,m.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,l.Gj,C.lW,v.Hw,D.gM,l.ll,y,A,m.Ov],encapsulation:2,changeDetection:0})}return e})();function ri(e,i){1&e&&t._UZ(0,"th",19)}function ci(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"td",20)(1,"input",21),t.NdJ("click",function(o){return o.stopPropagation()})("change",function(o){const c=t.CHM(a).$implicit,u=t.oxw(2);return t.KtG(o?u.selection.toggle(c):null)}),t.qZA()()}if(2&e){const a=i.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("checked",n.selection.isSelected(a))}}function li(e,i){1&e&&(t.TgZ(0,"th",22),t._uU(1,"Role"),t.qZA())}function pi(e,i){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.label," ")}}function mi(e,i){1&e&&t._UZ(0,"tr",24)}function ui(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",25),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(2);return t.KtG(c.toggleOne(s))}),t.qZA()}if(2&e){const a=i.$implicit,n=t.oxw(2);t.ekj("selected",n.selection.isSelected(a))}}function _i(e,i){if(1&e&&(t.TgZ(0,"table",10),t.ynx(1,11),t.YNc(2,ri,1,0,"th",12),t.YNc(3,ci,2,1,"td",13),t.BQk(),t.ynx(4,14),t.YNc(5,li,2,0,"th",15),t.YNc(6,pi,2,1,"td",16),t.BQk(),t.YNc(7,mi,1,0,"tr",17),t.YNc(8,ui,1,2,"tr",18),t.qZA()),2&e){const a=t.oxw();t.Q6J("dataSource",a.dataSource),t.xp6(7),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns)}}function di(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," No rows to display "),t.qZA())}let gi=(()=>{class e{constructor(a,n,o){this.dialogRef=a,this.data=o,this.displayedColumns=["select","name"],this.filterControl=new p.p4,this.dataSource=new r.by,this.selection=new F.Ov(!0,[]);const c=o.items.filter(u=>u.role).map(u=>u.role.name);n.yamcsClient.getRoles().then(u=>{const g=(u||[]).filter(T=>-1===c.indexOf(T.name)).map(T=>({label:T.name,role:T}));this.dataSource.data=g})}ngAfterViewInit(){this.filterControl.valueChanges.subscribe(()=>{this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.dataSource.filterPredicate=(a,n)=>a.label.toLowerCase().indexOf(n)>=0,this.dataSource.paginator=this.paginator}toggleOne(a){(!this.selection.isSelected(a)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(a)}save(){this.dialogRef.close(this.selection.selected)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(d.so),t.Y36(l.C8),t.Y36(d.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-roles-dialog"]],viewQuery:function(n,o){if(1&n&&t.Gf(N.NW,7),2&n){let s;t.iGM(s=t.CRH())&&(o.paginator=s.first)}},decls:13,vars:7,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"filter-bar",2,"margin-top","5px"],["placeholder","Filter roles",3,"formControl"],["mat-table","","class","ya-data-table","style","width: 100%",3,"dataSource",4,"ngIf"],[4,"ngIf"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"],["mat-table","",1,"ya-data-table",2,"width","100%",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","","class","checkbox",4,"matHeaderCellDef"],["mat-cell","","class","checkbox",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"checked","click","change"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Add roles"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"div",2),t._UZ(4,"ya-search-filter",3),t.qZA(),t.YNc(5,_i,9,3,"table",4),t.YNc(6,di,2,0,"ya-empty-message",5),t._UZ(7,"mat-paginator",6),t.qZA(),t.TgZ(8,"mat-dialog-actions",7)(9,"button",8),t._uU(10,"CANCEL"),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return o.save()}),t._uU(12,"ADD"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("ngIf",o.dataSource),t.xp6(1),t.Q6J("ngIf",!o.dataSource.data.length),t.xp6(1),t.Q6J("pageSize",10)("hidePageSize",!0)("showFirstLastButtons",!1),t.xp6(4),t.Q6J("disabled",o.selection.isEmpty()))},dependencies:[m.O5,p.JJ,p.oH,d.ZT,d.uh,d.xY,d.H8,N.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,l.RR,l.cF],styles:[".selected[_ngcontent-%COMP%]{background-color:#f0f4fd!important}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0})}return e})();var fi=f(2599);function hi(e,i){1&e&&(t.TgZ(0,"span",9),t._uU(1," This user has an external identity. Changes to this field may get overwritten on next login. "),t.qZA())}function Ti(e,i){1&e&&(t.TgZ(0,"span",9),t._uU(1," This user has an external identity. Changes to this field may get overwritten on next login. "),t.qZA())}function Zi(e,i){1&e&&(t.TgZ(0,"tr")(1,"td",18),t._uU(2,"No rows to display"),t.qZA()())}function bi(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",19)(4,"ya-text-action",20),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(3);return t.KtG(c.deleteItem(s))}),t._uU(5,"DELETE"),t.qZA()()()}if(2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.label)}}function xi(e,i){if(1&e&&(t.TgZ(0,"table",16)(1,"tr")(2,"th"),t._uU(3,"Role"),t.qZA(),t._UZ(4,"th"),t.qZA(),t.YNc(5,Zi,3,0,"tr",0),t.YNc(6,bi,6,1,"tr",17),t.qZA()),2&e){const a=i.ngIf;t.xp6(5),t.Q6J("ngIf",!a.length),t.xp6(1),t.Q6J("ngForOf",a)}}function yi(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2),t.qZA(),t.TgZ(3,"div",1)(4,"form",2)(5,"div",3),t._uU(6," Username"),t._UZ(7,"br")(8,"input",4),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"div",3),t._uU(11," Display name"),t._UZ(12,"br")(13,"input",5),t.YNc(14,hi,2,0,"span",6),t.qZA(),t._UZ(15,"br"),t.TgZ(16,"div",3),t._uU(17," Email"),t._UZ(18,"br")(19,"input",7),t.YNc(20,Ti,2,0,"span",6),t.qZA(),t._UZ(21,"br"),t.TgZ(22,"div",3),t._uU(23," Active"),t._UZ(24,"br")(25,"mat-slide-toggle",8)(26,"br"),t.TgZ(27,"span",9),t._uU(28,'Inactive users are considered "blocked". They are not or no longer able to login.'),t.qZA()(),t._UZ(29,"br"),t.TgZ(30,"div",3),t._uU(31," Superuser"),t._UZ(32,"br")(33,"mat-slide-toggle",10)(34,"br"),t.TgZ(35,"span",9),t._uU(36,"Superusers bypass any permission checks. This attribute is intended for system administrators only."),t.qZA()(),t.TgZ(37,"p"),t._uU(38,"\xa0"),t.qZA(),t.TgZ(39,"button",11),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.showAddRolesDialog())}),t.TgZ(40,"mat-icon"),t._uU(41,"add_circle_outline"),t.qZA(),t._uU(42," Add roles "),t.qZA(),t.TgZ(43,"p"),t._uU(44,"\xa0"),t.qZA(),t.YNc(45,xi,7,2,"table",12),t.ALo(46,"async"),t.qZA(),t.TgZ(47,"p"),t._uU(48,"\xa0"),t.qZA(),t.TgZ(49,"div",13)(50,"button",14),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.location.back())}),t._uU(51,"Cancel"),t.qZA(),t.TgZ(52,"button",15),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.onConfirm())}),t.ALo(53,"async"),t._uU(54,"SAVE CHANGES"),t.qZA()()()()}if(2&e){const a=i.ngIf,n=t.oxw();t.xp6(2),t.hij(" Edit User: ",a.displayName||a.name," "),t.xp6(2),t.Q6J("formGroup",n.form),t.xp6(4),t.Q6J("value",a.name),t.xp6(6),t.Q6J("ngIf",a.identities&&a.identities.length>0),t.xp6(6),t.Q6J("ngIf",a.identities&&a.identities.length>0),t.xp6(25),t.Q6J("ngIf",t.lcZ(46,7,n.roleItems$)),t.xp6(7),t.Q6J("disabled",!t.lcZ(53,9,n.dirty$)||!n.form.valid)}}let Dt=(()=>{class e{constructor(a,n,o,s,c,u,g,T){this.router=o,this.route=s,this.yamcs=c,this.messageService=u,this.dialog=g,this.location=T,this.roleItems$=new Z.X([]),this.dirty$=new Z.X(!1),n.setTitle("Edit User");const U=s.snapshot.paramMap.get("username");this.user$=c.yamcsClient.getUser(U),this.user$.then(x=>{this.user=x,this.form=a.group({displayName:new p.p4(x.displayName),email:new p.p4(x.email),active:new p.p4(x.active),superuser:new p.p4(x.superuser)}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)});const S=[];if(x.roles)for(const J of x.roles)S.push({label:J.name,role:J});this.updateRoleItems(S,!1)})}showAddRolesDialog(){this.dialog.open(gi,{data:{items:this.roleItems$.value},width:"600px"}).afterClosed().subscribe(n=>{n&&this.updateRoleItems([...this.roleItems$.value,...n])})}updateRoleItems(a,n=!0){a.sort((o,s)=>o.label<s.label?-1:o.label>s.label?1:0),this.roleItems$.next(a),this.dirty$.next(n)}deleteItem(a){this.updateRoleItems(this.roleItems$.value.filter(n=>n!==a))}onConfirm(){const a=this.form.value,n={roleAssignment:{roles:this.roleItems$.value.filter(o=>o.role).map(o=>o.role.name)}};a.displayName!==this.user.displayName&&(n.displayName=a.displayName),a.email!==this.user.email&&(n.email=a.email),a.active!==this.user.active&&(n.active=a.active),a.superuser!==this.user.superuser&&(n.superuser=a.superuser),this.yamcs.yamcsClient.editUser(this.user.name,n).then(()=>this.router.navigate([".."],{relativeTo:this.route})).catch(o=>this.messageService.showError(o))}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(p.QS),t.Y36(b.Dx),t.Y36(_.F0),t.Y36(_.gz),t.Y36(l.C8),t.Y36(l.ez),t.Y36(d.uw),t.Y36(m.Ye))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"label"],["disabled","","type","text",3,"value"],["formControlName","displayName","type","text"],["class","hint",4,"ngIf"],["formControlName","email","type","text"],["formControlName","active"],[1,"hint"],["formControlName","superuser"],["mat-stroked-button","",3,"click"],["yaDataTable","","style","width: 100%",4,"ngIf"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"disabled","click"],["yaDataTable","",2,"width","100%"],[4,"ngFor","ngForOf"],["colspan","2"],[2,"text-align","right"],["icon","delete",3,"click"]],template:function(n,o){1&n&&(t.YNc(0,yi,55,11,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.user$))},dependencies:[m.sg,m.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,l.Gj,C.lW,v.Hw,fi.Rr,l.ll,y,A,m.Ov],encapsulation:2,changeDetection:0})}return e})();function Ai(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",3),t._UZ(2,"mat-divider"),t.qZA(),t.TgZ(3,"h4"),t._uU(4,"Description"),t.qZA(),t.TgZ(5,"div",5),t._uU(6),t.qZA(),t.BQk()),2&e){const a=t.oxw().ngIf;t.xp6(6),t.Oqu(a.description||"-")}}const Ui=function(e){return["/admin/iam/users",e]};function vi(e,i){if(1&e&&(t.TgZ(0,"div")(1,"mat-icon",6),t._uU(2,"person"),t.qZA(),t.TgZ(3,"a",7),t._uU(4),t.qZA()()),2&e){const a=i.$implicit;t.xp6(3),t.Q6J("routerLink",t.VKq(2,Ui,a.name)),t.xp6(1),t.Oqu(a.displayName||a.name)}}function Ci(e,i){if(1&e&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2),t.TgZ(3,"a",1)(4,"mat-icon"),t._uU(5,"edit"),t.qZA(),t._uU(6," Edit group "),t.qZA()(),t.TgZ(7,"div",2),t.YNc(8,Ai,7,1,"ng-container",0),t._UZ(9,"br"),t.TgZ(10,"div",3),t._UZ(11,"mat-divider"),t.qZA(),t.TgZ(12,"h4"),t._uU(13),t.qZA(),t.YNc(14,vi,5,4,"div",4),t.qZA()()),2&e){const a=i.ngIf;t.xp6(2),t.hij(" ",a.name," \xa0\xa0\xa0 "),t.xp6(6),t.Q6J("ngIf",a.description),t.xp6(5),t.hij("",(null==a.users?null:a.users.length)||0," members"),t.xp6(1),t.Q6J("ngForOf",a.users)}}let St=(()=>{class e{constructor(a,n,o){this.yamcs=n,this.title=o,this.group$=new Z.X(null),a.paramMap.subscribe(s=>{const c=s.get("name");this.changeGroup(c)})}changeGroup(a){this.yamcs.yamcsClient.getGroup(a).then(n=>{this.group$.next(n),this.title.setTitle(n.name)})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-button","","color","primary","routerLink","edit"],[1,"panel-content","ya-link"],[1,"section-divider"],[4,"ngFor","ngForOf"],[2,"white-space","pre-wrap"],["matTooltip","User",1,"icon16",2,"vertical-align","middle"],[3,"routerLink"]],template:function(n,o){1&n&&(t.YNc(0,Ci,15,4,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.group$))},dependencies:[m.sg,m.O5,_.rH,C.zs,v.Hw,Q.d,D.gM,y,A,m.Ov],encapsulation:2,changeDetection:0})}return e})();var M=f(7988);function wi(e,i){1&e&&(t.TgZ(0,"th",14),t._uU(1,"Group"),t.qZA())}function qi(e,i){if(1&e&&(t.TgZ(0,"td",15)(1,"a",16),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.Oqu(a.name)}}function Di(e,i){1&e&&(t.TgZ(0,"th",14),t._uU(1,"Members"),t.qZA())}function Si(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-icon",18),t._uU(2,"person"),t.qZA(),t._uU(3),t._UZ(4,"br"),t.BQk()),2&e){const a=i.$implicit;t.xp6(3),t.hij(" ",a.displayName||a.name," ")}}function Pi(e,i){if(1&e&&(t.TgZ(0,"td",15),t.YNc(1,Si,5,1,"ng-container",17),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngForOf",a.users)}}function Yi(e,i){1&e&&t._UZ(0,"th",19)}const Ni=function(e){return[e,"edit"]};function ki(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"td",15)(1,"ya-more")(2,"a",20),t._uU(3," Edit group "),t.qZA(),t.TgZ(4,"button",21),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw();return t.KtG(c.deleteGroup(s.name))}),t._uU(5," Delete group "),t.qZA()()()}if(2&e){const a=i.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(1,Ni,a.name))}}function Qi(e,i){1&e&&t._UZ(0,"tr",22)}function Ii(e,i){1&e&&t._UZ(0,"tr",23)}function Ji(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," No rows to display "),t.qZA())}let Pt=(()=>{class e{constructor(a,n,o,s,c){this.yamcs=a,this.route=o,this.router=s,this.messageService=c,this.filterControl=new p.p4,this.displayedColumns=["name","members","actions"],this.dataSource=new r.by,n.setTitle("Groups"),this.dataSource.filterPredicate=(u,g)=>u.name.toLowerCase().indexOf(g)>=0}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.dataSource.filter=a.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getGroups().then(a=>{this.dataSource.data=a})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}deleteGroup(a){confirm(`Are you sure you want to delete group ${a}`)&&this.yamcs.yamcsClient.deleteGroup(a).then(()=>this.refresh()).catch(n=>this.messageService.showError(n))}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(_.gz),t.Y36(_.F0),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(h.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:23,vars:5,consts:[["mat-button","","color","primary","routerLink","create"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter groups",3,"formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","members"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],[4,"ngFor","ngForOf"],[1,"icon16",2,"vertical-align","middle"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Groups \xa0\xa0\xa0 "),t.TgZ(3,"a",0)(4,"mat-icon"),t._uU(5,"add_circle_outline"),t.qZA(),t._uU(6," Create group "),t.qZA()(),t.TgZ(7,"div",1)(8,"div",2),t._UZ(9,"ya-search-filter",3),t.qZA(),t.TgZ(10,"table",4),t.ynx(11,5),t.YNc(12,wi,2,0,"th",6),t.YNc(13,qi,3,2,"td",7),t.BQk(),t.ynx(14,8),t.YNc(15,Di,2,0,"th",6),t.YNc(16,Pi,2,1,"td",7),t.BQk(),t.ynx(17,9),t.YNc(18,Yi,1,0,"th",10),t.YNc(19,ki,6,3,"td",7),t.BQk(),t.YNc(20,Qi,1,0,"tr",11),t.YNc(21,Ii,1,0,"tr",12),t.qZA(),t.YNc(22,Ji,2,0,"ya-empty-message",13),t.qZA()()),2&n&&(t.xp6(9),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("ngIf",!o.dataSource.data.length))},dependencies:[m.sg,m.O5,p.JJ,p.oH,_.rH,C.zs,v.Hw,M.OP,h.YE,h.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,l.RR,l.cQ,l.cF,y,A],encapsulation:2,changeDetection:0})}return e})();function Oi(e,i){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a," ")}}function Ri(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"dt"),t._uU(2),t.qZA(),t.TgZ(3,"dd"),t._uU(4),t.qZA(),t.BQk()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.type),t.xp6(2),t.Oqu(a.object)}}function Li(e,i){if(1&e&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2),t.qZA(),t.TgZ(3,"div",1)(4,"h4"),t._uU(5,"Description"),t.qZA(),t.TgZ(6,"div",2),t._uU(7),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"div",3),t._UZ(10,"mat-divider"),t.qZA(),t.TgZ(11,"h4"),t._uU(12),t.qZA(),t.YNc(13,Oi,2,1,"div",4),t._UZ(14,"br"),t.TgZ(15,"div",3),t._UZ(16,"mat-divider"),t.qZA(),t.TgZ(17,"h4"),t._uU(18),t.qZA(),t.TgZ(19,"dl"),t.YNc(20,Ri,5,2,"ng-container",4),t.qZA()()()),2&e){const a=i.ngIf;t.xp6(2),t.hij(" ",a.name," "),t.xp6(5),t.Oqu(a.description||"-"),t.xp6(5),t.hij("",(null==a.systemPrivileges?null:a.systemPrivileges.length)||0," assigned system privileges"),t.xp6(1),t.Q6J("ngForOf",a.systemPrivileges),t.xp6(5),t.hij("",(null==a.objectPrivileges?null:a.objectPrivileges.length)||0," assigned object privileges"),t.xp6(2),t.Q6J("ngForOf",a.objectPrivileges)}}let Yt=(()=>{class e{constructor(a,n,o){this.yamcs=n,this.title=o,this.role$=new Z.X(null),a.paramMap.subscribe(s=>{const c=s.get("name");this.changeRole(c)})}changeRole(a){this.yamcs.yamcsClient.getRole(a).then(n=>{this.role$.next(n),this.title.setTitle(n.name)})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"panel-content","ya-link"],[2,"white-space","pre-wrap"],[1,"section-divider"],[4,"ngFor","ngForOf"]],template:function(n,o){1&n&&(t.YNc(0,Li,21,6,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.role$))},dependencies:[m.sg,m.O5,Q.d,y,A,m.Ov],encapsulation:2,changeDetection:0})}return e})();function $i(e,i){1&e&&(t.TgZ(0,"th",14),t._uU(1,"Role"),t.qZA())}function Mi(e,i){if(1&e&&(t.TgZ(0,"td",15)(1,"a",16),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.Oqu(a.name)}}function Fi(e,i){1&e&&(t.TgZ(0,"th",17),t._uU(1,"Default"),t.qZA())}function Bi(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"check"),t.qZA())}function Hi(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"close"),t.qZA())}function Gi(e,i){if(1&e&&(t.TgZ(0,"td",15),t.YNc(1,Bi,2,0,"mat-icon",13),t.YNc(2,Hi,2,0,"mat-icon",13),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngIf",a.default),t.xp6(1),t.Q6J("ngIf",!a.default)}}function Ei(e,i){1&e&&t._UZ(0,"th",18)}function ji(e,i){1&e&&t._UZ(0,"td",15)}function zi(e,i){1&e&&t._UZ(0,"tr",19)}function Xi(e,i){1&e&&t._UZ(0,"tr",20)}function Vi(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," No rows to display "),t.qZA())}let Nt=(()=>{class e{constructor(a,n,o,s){this.yamcs=a,this.route=o,this.router=s,this.filterControl=new p.p4,this.displayedColumns=["name","default","actions"],this.dataSource=new r.by,n.setTitle("Roles"),this.dataSource.filterPredicate=(c,u)=>c.name.toLowerCase().indexOf(u)>=0}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.dataSource.filter=a.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getRoles().then(a=>{this.dataSource.data=a})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(_.gz),t.Y36(_.F0))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(h.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:19,vars:5,consts:[[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter roles",3,"formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","default"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Roles "),t.qZA(),t.TgZ(3,"div",0)(4,"div",1),t._UZ(5,"ya-search-filter",2),t.qZA(),t.TgZ(6,"table",3),t.ynx(7,4),t.YNc(8,$i,2,0,"th",5),t.YNc(9,Mi,3,2,"td",6),t.BQk(),t.ynx(10,7),t.YNc(11,Fi,2,0,"th",8),t.YNc(12,Gi,3,2,"td",6),t.BQk(),t.ynx(13,9),t.YNc(14,Ei,1,0,"th",10),t.YNc(15,ji,1,0,"td",6),t.BQk(),t.YNc(16,zi,1,0,"tr",11),t.YNc(17,Xi,1,0,"tr",12),t.qZA(),t.YNc(18,Vi,2,0,"ya-empty-message",13),t.qZA()()),2&n&&(t.xp6(5),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("ngIf",!o.dataSource.data.length))},dependencies:[m.O5,p.JJ,p.oH,_.rH,v.Hw,h.YE,h.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,l.RR,l.cF,y,A],encapsulation:2,changeDetection:0})}return e})();function Ki(e,i){1&e&&(t.TgZ(0,"th",13),t._uU(1,"Service account"),t.qZA())}function Wi(e,i){if(1&e&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.name," ")}}function to(e,i){1&e&&t._UZ(0,"th",15)}function eo(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"td",14)(1,"ya-more")(2,"button",16),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw();return t.KtG(c.deleteServiceAccount(s.name))}),t._uU(3," Delete service account "),t.qZA()()()}}function ao(e,i){1&e&&t._UZ(0,"tr",17)}function no(e,i){1&e&&t._UZ(0,"tr",18)}function io(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," No rows to display "),t.qZA())}let kt=(()=>{class e{constructor(a,n,o,s,c){this.yamcs=a,this.route=o,this.router=s,this.messageService=c,this.filterControl=new p.p4,this.displayedColumns=["name","actions"],this.dataSource=new r.by,n.setTitle("Service accounts"),this.dataSource.filterPredicate=(u,g)=>u.name.toLowerCase().indexOf(g)>=0}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.dataSource.filter=a.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getServiceAccounts().then(a=>{this.dataSource.data=a.serviceAccounts||[]})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}deleteServiceAccount(a){confirm(`Are you sure you want to delete service account ${a}`)&&this.yamcs.yamcsClient.deleteServiceAccount(a).then(()=>this.refresh()).catch(n=>this.messageService.showError(n))}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(_.gz),t.Y36(_.F0),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(h.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:20,vars:5,consts:[["mat-button","","color","primary","routerLink","create"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter service accounts",3,"formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Service accounts \xa0\xa0\xa0 "),t.TgZ(3,"a",0)(4,"mat-icon"),t._uU(5,"add_circle_outline"),t.qZA(),t._uU(6," Create service account "),t.qZA()(),t.TgZ(7,"div",1)(8,"div",2),t._UZ(9,"ya-search-filter",3),t.qZA(),t.TgZ(10,"table",4),t.ynx(11,5),t.YNc(12,Ki,2,0,"th",6),t.YNc(13,Wi,2,1,"td",7),t.BQk(),t.ynx(14,8),t.YNc(15,to,1,0,"th",9),t.YNc(16,eo,4,0,"td",7),t.BQk(),t.YNc(17,ao,1,0,"tr",10),t.YNc(18,no,1,0,"tr",11),t.qZA(),t.YNc(19,io,2,0,"ya-empty-message",12),t.qZA()()),2&n&&(t.xp6(9),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(7),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("ngIf",!o.dataSource.data.length))},dependencies:[m.O5,p.JJ,p.oH,_.rH,C.zs,v.Hw,M.OP,h.YE,h.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,l.RR,l.cQ,l.cF,y,A],encapsulation:2,changeDetection:0})}return e})();function oo(e,i){1&e&&(t.TgZ(0,"p"),t._uU(1,"Confirmation does not match password"),t.qZA())}const so=e=>{const i=e.get("password").value,a=e.get("passwordConfirmation").value;return i&&a&&i!==a?{passwordMismatch:!0}:null};let ro=(()=>{class e{constructor(a,n,o){this.data=a,this.yamcs=n,this.user=a.user,this.form=o.group({password:new p.p4(null,p.kI.required),passwordConfirmation:new p.p4(null,p.kI.required)},{validator:so})}changePassword(){this.yamcs.yamcsClient.editUser(this.user.name,{password:this.form.value.password})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(d.WI),t.Y36(l.C8),t.Y36(p.QS))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-change-user-password-dialog"]],decls:19,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"ya-form",3,"formGroup"],["type","password","formControlName","password"],["type","password","formControlName","passwordConfirmation"],[4,"ngIf"],["align","end"],["mat-dialog-close","",1,"ya-button"],["mat-dialog-close","",1,"ya-button","primary",3,"disabled","click"]],template:function(n,o){1&n&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"form",2)(4,"label"),t._uU(5," Password"),t._UZ(6,"br")(7,"input",3),t.qZA(),t._UZ(8,"br"),t.TgZ(9,"label"),t._uU(10," Password confirmation"),t._UZ(11,"br")(12,"input",4),t.qZA()(),t.YNc(13,oo,2,0,"p",5),t.qZA(),t.TgZ(14,"mat-dialog-actions",6)(15,"button",7),t._uU(16,"CANCEL"),t.qZA(),t.TgZ(17,"button",8),t.NdJ("click",function(){return o.changePassword()}),t._uU(18,"OK"),t.qZA()()),2&n&&(t.xp6(1),t.hij("Change password of ",o.user.name,""),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(10),t.Q6J("ngIf",null==o.form.errors?null:o.form.errors.passwordMismatch),t.xp6(4),t.Q6J("disabled",!o.form.valid))},dependencies:[m.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,d.ZT,d.uh,d.xY,d.H8],encapsulation:2,changeDetection:0})}return e})();const co=function(e){return[e]};function lo(e,i){if(1&e&&(t.TgZ(0,"a",9),t._uU(1),t.qZA()),2&e){const a=t.oxw().ngIf;t.Q6J("routerLink",t.VKq(2,co,"../"+a.createdBy.name)),t.xp6(1),t.Oqu(a.createdBy.name||"-")}}function po(e,i){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function mo(e,i){if(1&e&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.name,"")}}function uo(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td")(6,"ya-text-action",11),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(3);return t.KtG(c.deleteIdentity(s))}),t._uU(7,"DELETE"),t.qZA()()()}if(2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.identity),t.xp6(2),t.Oqu(a.provider)}}function _o(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"div",7),t._UZ(2,"mat-divider"),t.qZA(),t.TgZ(3,"h4"),t._uU(4,"External Identities"),t.qZA(),t.TgZ(5,"table",10)(6,"tr")(7,"th"),t._uU(8,"Identity"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Provider"),t.qZA(),t._UZ(11,"th"),t.qZA(),t.YNc(12,uo,8,2,"tr",8),t.qZA(),t.BQk()),2&e){const a=t.oxw().ngIf;t.xp6(12),t.Q6J("ngForOf",a.identities)}}function go(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",1)(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA()(),t._uU(5),t.TgZ(6,"a",2)(7,"mat-icon"),t._uU(8,"edit"),t.qZA(),t._uU(9," Edit user "),t.qZA(),t.TgZ(10,"a",3),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.showChangeUserPasswordDialog())}),t.TgZ(11,"mat-icon"),t._uU(12,"account_box"),t.qZA(),t._uU(13," Change password "),t.qZA()(),t.TgZ(14,"div",4)(15,"dl",5)(16,"dt"),t._uU(17,"Username"),t.qZA(),t.TgZ(18,"dd"),t._uU(19),t.qZA(),t.TgZ(20,"dt"),t._uU(21,"Display name"),t.qZA(),t.TgZ(22,"dd"),t._uU(23),t.qZA(),t.TgZ(24,"dt"),t._uU(25,"Email"),t.qZA(),t.TgZ(26,"dd"),t._uU(27),t.qZA(),t.TgZ(28,"dt"),t._uU(29,"Joined"),t.qZA(),t.TgZ(30,"dd"),t._uU(31),t.ALo(32,"datetime"),t.qZA(),t.TgZ(33,"dt"),t._uU(34,"Confirmed at"),t.qZA(),t.TgZ(35,"dd"),t._uU(36),t.ALo(37,"datetime"),t.qZA(),t.TgZ(38,"dt"),t._uU(39,"Last login"),t.qZA(),t.TgZ(40,"dd"),t._uU(41),t.ALo(42,"datetime"),t.qZA(),t.TgZ(43,"dt"),t._uU(44,"Active"),t.qZA(),t.TgZ(45,"dd"),t._uU(46),t.qZA(),t.TgZ(47,"dt"),t._uU(48,"Superuser"),t.qZA(),t.TgZ(49,"dd"),t._uU(50),t.qZA(),t.TgZ(51,"dt"),t._uU(52,"Created by"),t.qZA(),t.TgZ(53,"dd"),t.YNc(54,lo,2,4,"a",6),t.YNc(55,po,2,0,"ng-container",0),t.qZA()(),t.TgZ(56,"div",7),t._UZ(57,"mat-divider"),t.qZA(),t.TgZ(58,"h4"),t._uU(59),t.qZA(),t.YNc(60,mo,3,1,"ng-container",8),t.YNc(61,_o,13,1,"ng-container",0),t.qZA()()}if(2&e){const a=i.ngIf;t.xp6(5),t.hij(" ",a.displayName||a.name," \xa0\xa0\xa0 "),t.xp6(5),t.Q6J("disabled",null==a.identities?null:a.identities.length),t.xp6(9),t.Oqu(a.name),t.xp6(4),t.Oqu(a.displayName||"-"),t.xp6(4),t.Oqu(a.email||"-"),t.xp6(4),t.Oqu(t.lcZ(32,15,a.creationTime)),t.xp6(5),t.Oqu(t.lcZ(37,17,a.confirmationTime)||"never"),t.xp6(5),t.Oqu(t.lcZ(42,19,a.lastLoginTime)||"never"),t.xp6(5),t.Oqu(a.active),t.xp6(4),t.Oqu(a.superuser),t.xp6(4),t.Q6J("ngIf",a.createdBy),t.xp6(1),t.Q6J("ngIf",!a.createdBy),t.xp6(4),t.hij("",(null==a.roles?null:a.roles.length)||"0"," assigned roles"),t.xp6(1),t.Q6J("ngForOf",a.roles),t.xp6(1),t.Q6J("ngIf",a.identities)}}let Qt=(()=>{class e{constructor(a,n,o,s,c){this.yamcs=n,this.title=o,this.dialog=s,this.messageService=c,this.user$=new Z.X(null),a.paramMap.subscribe(u=>{const g=u.get("username");this.changeUser(g)})}changeUser(a){this.yamcs.yamcsClient.getUser(a).then(n=>{this.user$.next(n),this.title.setTitle(n.name)})}deleteIdentity(a){if(confirm(`Are you sure you want to delete the ${a.provider} identity?`)){const n=this.user$.value.name;this.yamcs.yamcsClient.deleteIdentity(n,a.provider).then(()=>this.changeUser(n)).catch(o=>this.messageService.showError(o))}}showChangeUserPasswordDialog(){this.dialog.open(ro,{data:{user:this.user$.value},width:"400px"})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(b.Dx),t.Y36(d.uw),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-icon-button","","routerLink","..","color","primary"],["mat-button","","color","primary","routerLink","edit"],["mat-button","","color","primary",3,"disabled","click"],[1,"panel-content","ya-link"],[1,"dl-horizontal"],[3,"routerLink",4,"ngIf"],[1,"section-divider"],[4,"ngFor","ngForOf"],[3,"routerLink"],["yaDataTable",""],["icon","delete",3,"click"]],template:function(n,o){1&n&&(t.YNc(0,go,62,21,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.user$))},dependencies:[m.sg,m.O5,_.rH,l.Gj,C.zs,C.o6,v.Hw,Q.d,l.ll,y,A,m.Ov,l.id],encapsulation:2,changeDetection:0})}return e})();var w=f(7398);function fo(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Username"),t.qZA())}function ho(e,i){if(1&e&&(t.TgZ(0,"td",16)(1,"a",17),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",a.name),t.xp6(1),t.hij(" ",a.name," ")}}function To(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Display name"),t.qZA())}function Zo(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.displayName||"-"," ")}}function bo(e,i){1&e&&(t.TgZ(0,"th",18),t._uU(1,"Groups"),t.qZA())}function xo(e,i){1&e&&(t.ynx(0),t._uU(1,", "),t.BQk())}function yo(e,i){if(1&e&&(t.ynx(0),t.YNc(1,xo,2,0,"ng-container",1),t._uU(2),t.BQk()),2&e){const a=i.$implicit,n=i.first;t.xp6(1),t.Q6J("ngIf",!n),t.xp6(1),t.hij("",a.name," ")}}function Ao(e,i){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function Uo(e,i){if(1&e&&(t.TgZ(0,"td",16),t.YNc(1,yo,3,2,"ng-container",19),t.YNc(2,Ao,2,0,"ng-container",1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngForOf",a.groups),t.xp6(1),t.Q6J("ngIf",!a.groups)}}function vo(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Registered"),t.qZA())}function Co(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.ALo(2,"datetime"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.creationTime)||"never")}}function wo(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Last Login"),t.qZA())}function qo(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.ALo(2,"datetime"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.lastLoginTime)||"never")}}function Do(e,i){1&e&&t._UZ(0,"th",20)}const So=function(e){return[e,"edit"]};function Po(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"td",16)(1,"ya-more")(2,"a",21),t._uU(3," Edit user "),t.qZA(),t.TgZ(4,"button",22),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(2);return t.KtG(c.deleteUser.next(s.name))}),t._uU(5," Delete user "),t.qZA()()()}if(2&e){const a=i.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(1,So,a.name))}}function Yo(e,i){1&e&&t._UZ(0,"tr",23)}function No(e,i){1&e&&t._UZ(0,"tr",24)}function ko(e,i){if(1&e&&(t.TgZ(0,"table",2),t.ynx(1,3),t.YNc(2,fo,2,0,"th",4),t.YNc(3,ho,3,2,"td",5),t.BQk(),t.ynx(4,6),t.YNc(5,To,2,0,"th",4),t.YNc(6,Zo,2,1,"td",5),t.BQk(),t.ynx(7,7),t.YNc(8,bo,2,0,"th",8),t.YNc(9,Uo,3,2,"td",5),t.BQk(),t.ynx(10,9),t.YNc(11,vo,2,0,"th",4),t.YNc(12,Co,3,3,"td",5),t.BQk(),t.ynx(13,10),t.YNc(14,wo,2,0,"th",4),t.YNc(15,qo,3,3,"td",5),t.BQk(),t.ynx(16,11),t.YNc(17,Do,1,0,"th",12),t.YNc(18,Po,6,3,"td",5),t.BQk(),t.YNc(19,Yo,1,0,"tr",13),t.YNc(20,No,1,0,"tr",14),t.qZA()),2&e){const a=t.oxw();t.Q6J("dataSource",a.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns)}}function Qo(e,i){1&e&&(t.TgZ(0,"ya-empty-message"),t._uU(1," No rows to display\n"),t.qZA())}let Io=(()=>{class e{constructor(){this.displayedColumns=["name","displayName","groups","actions"],this.deleteUser=new t.vpe,this.dataSource=new r.by}ngAfterViewInit(){this.dataSource.filterPredicate=(a,n)=>a.name.toLowerCase().indexOf(n)>=0,this.dataSource.sort=this.sort}ngOnChanges(){this.dataSource.data=this.users||[],this.dataSource.filter=this.filter}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-users-table"]],viewQuery:function(n,o){if(1&n&&t.Gf(h.YE,5),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},inputs:{users:"users",filter:"filter"},outputs:{deleteUser:"deleteUser"},features:[t.TTD],decls:2,vars:2,consts:[["mat-table","","class","ya-data-table expand","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",3,"dataSource",4,"ngIf"],[4,"ngIf"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","displayName"],["matColumnDef","groups"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","registered"],["matColumnDef","lastLogin"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell",""],[4,"ngFor","ngForOf"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.YNc(0,ko,21,3,"table",0),t.YNc(1,Qo,2,0,"ya-empty-message",1)),2&n&&(t.Q6J("ngIf",o.dataSource),t.xp6(1),t.Q6J("ngIf",!o.dataSource.data.length))},dependencies:[m.sg,m.O5,_.rH,M.OP,h.YE,h.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,l.RR,l.cQ,l.id],encapsulation:2,changeDetection:0})}return e})();function Jo(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" ACTIVE (",t.lcZ(1,1,a.activeUserCount$),") ")}}function Oo(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" SUPERUSERS (",t.lcZ(1,1,a.superUserCount$),") ")}}function Ro(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" INTERNAL (",t.lcZ(1,1,a.internalUserCount$),") ")}}function Lo(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" BLOCKED (",t.lcZ(1,1,a.blockedUserCount$),") ")}}let It=(()=>{class e{constructor(a,n,o,s,c){this.yamcs=a,this.route=o,this.router=s,this.messageService=c,this.filterControl=new p.p4,this.filterValue$=new Z.X(null),this.users$=new Z.X([]),n.setTitle("Users")}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.filterValue$.next(a.get("filter").toLowerCase())),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.filterValue$.next((this.filterControl.value||"").toLowerCase())}),this.activeUsers$=this.users$.pipe((0,w.U)(n=>n.filter(o=>o.active))),this.activeUserCount$=this.activeUsers$.pipe((0,w.U)(n=>n.length)),this.superUsers$=this.users$.pipe((0,w.U)(n=>n.filter(o=>o.superuser))),this.superUserCount$=this.superUsers$.pipe((0,w.U)(n=>n.length)),this.internalUsers$=this.users$.pipe((0,w.U)(n=>n.filter(o=>!o.identities))),this.internalUserCount$=this.internalUsers$.pipe((0,w.U)(n=>n.length)),this.blockedUsers$=this.users$.pipe((0,w.U)(n=>n.filter(o=>!o.active))),this.blockedUserCount$=this.blockedUsers$.pipe((0,w.U)(n=>n.length)),this.refresh()}refresh(){this.yamcs.yamcsClient.getUsers().then(a=>{this.users$.next(a)})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}deleteUser(a){confirm(`Are you sure you want to delete the user account '${a}'`)&&this.yamcs.yamcsClient.deleteUser(a).then(()=>this.refresh()).catch(n=>this.messageService.showError(n))}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(_.gz),t.Y36(_.F0),t.Y36(l.ez))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:35,vars:26,consts:[["mat-button","","color","primary","routerLink","create"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter users",3,"formControl"],["animationDuration","0ms",1,"secondary",3,"mat-stretch-tabs"],["mat-tab-label",""],[3,"users","filter","deleteUser"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Users \xa0\xa0\xa0 "),t.TgZ(3,"a",0)(4,"mat-icon"),t._uU(5,"add_circle_outline"),t.qZA(),t._uU(6," Create user "),t.qZA()(),t.TgZ(7,"div",1)(8,"div",2),t._UZ(9,"ya-search-filter",3),t.qZA(),t.TgZ(10,"mat-tab-group",4)(11,"mat-tab"),t.YNc(12,Jo,2,3,"ng-template",5),t._UZ(13,"br"),t.TgZ(14,"app-users-table",6),t.NdJ("deleteUser",function(c){return o.deleteUser(c)}),t.ALo(15,"async"),t.ALo(16,"async"),t.qZA()(),t.TgZ(17,"mat-tab"),t.YNc(18,Oo,2,3,"ng-template",5),t._UZ(19,"br"),t.TgZ(20,"app-users-table",6),t.NdJ("deleteUser",function(c){return o.deleteUser(c)}),t.ALo(21,"async"),t.ALo(22,"async"),t.qZA()(),t.TgZ(23,"mat-tab"),t.YNc(24,Ro,2,3,"ng-template",5),t._UZ(25,"br"),t.TgZ(26,"app-users-table",6),t.NdJ("deleteUser",function(c){return o.deleteUser(c)}),t.ALo(27,"async"),t.ALo(28,"async"),t.qZA()(),t.TgZ(29,"mat-tab"),t.YNc(30,Lo,2,3,"ng-template",5),t._UZ(31,"br"),t.TgZ(32,"app-users-table",6),t.NdJ("deleteUser",function(c){return o.deleteUser(c)}),t.ALo(33,"async"),t.ALo(34,"async"),t.qZA()()()()()),2&n&&(t.xp6(9),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("mat-stretch-tabs",!1),t.xp6(4),t.Q6J("users",t.lcZ(15,10,o.activeUsers$))("filter",t.lcZ(16,12,o.filterValue$)),t.xp6(6),t.Q6J("users",t.lcZ(21,14,o.superUsers$))("filter",t.lcZ(22,16,o.filterValue$)),t.xp6(6),t.Q6J("users",t.lcZ(27,18,o.internalUsers$))("filter",t.lcZ(28,20,o.filterValue$)),t.xp6(6),t.Q6J("users",t.lcZ(33,22,o.blockedUsers$))("filter",t.lcZ(34,24,o.filterValue$)))},dependencies:[p.JJ,p.oH,_.rH,C.zs,v.Hw,P.uD,P.uX,P.SP,l.cF,y,A,Io,m.Ov],encapsulation:2,changeDetection:0})}return e})();function $o(e,i){1&e&&(t.TgZ(0,"th",12),t._uU(1,"Valid period (at 0h UTC)"),t.qZA())}function Mo(e,i){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"date"),t.ALo(3,"date"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.AsE(" ",t.xi3(2,2,a.start,"y-MM-dd")," \u2013 ",t.xi3(3,5,a.stop,"y-MM-dd")," ")}}function Fo(e,i){1&e&&(t.TgZ(0,"th",12),t._uU(1,"Leap seconds"),t.qZA())}function Bo(e,i){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.leapSeconds)}}function Ho(e,i){1&e&&(t.TgZ(0,"th",12),t._uU(1,"TAI - UTC"),t.qZA())}function Go(e,i){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij("",a.taiDifference," s")}}function Eo(e,i){1&e&&(t.TgZ(0,"th",12),t._uU(1,"UTC - TAI"),t.qZA())}function jo(e,i){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij("",-a.taiDifference," s")}}function zo(e,i){1&e&&t._UZ(0,"th",14)}function Xo(e,i){1&e&&t._UZ(0,"td",13)}function Vo(e,i){1&e&&t._UZ(0,"tr",15)}function Ko(e,i){1&e&&t._UZ(0,"tr",16)}let Jt=(()=>{class e{constructor(a,n){this.displayedColumns=["period","leap-seconds","tai-utc","actions"],this.dataSource=new r.by,n.setTitle("Leap seconds"),a.yamcsClient.getLeapSeconds().then(o=>{this.dataSource.data=o.ranges})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:22,vars:3,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","period"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","leap-seconds"],["matColumnDef","tai-utc"],["matColumnDef","utc-tai"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Leap seconds "),t.qZA(),t.TgZ(3,"div",0)(4,"table",1),t.ynx(5,2),t.YNc(6,$o,2,0,"th",3),t.YNc(7,Mo,4,8,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,Fo,2,0,"th",3),t.YNc(10,Bo,2,1,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,Ho,2,0,"th",3),t.YNc(13,Go,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,Eo,2,0,"th",3),t.YNc(16,jo,2,1,"td",4),t.BQk(),t.ynx(17,8),t.YNc(18,zo,1,0,"th",9),t.YNc(19,Xo,1,0,"td",4),t.BQk(),t.YNc(20,Vo,1,0,"tr",10),t.YNc(21,Ko,1,0,"tr",11),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,y,A,m.uU],encapsulation:2,changeDetection:0})}return e})();function Wo(e,i){1&e&&(t.TgZ(0,"th",7),t._uU(1,"Name"),t.qZA())}function ts(e,i){if(1&e&&(t.TgZ(0,"td",8),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a)}}function es(e,i){1&e&&t._UZ(0,"tr",9)}function as(e,i){1&e&&t._UZ(0,"tr",10)}let Ot=(()=>{class e{constructor(a,n){this.displayedColumns=["name"],this.dataSource=new r.by,n.setTitle("Processor types"),a.yamcsClient.getProcessorTypes().then(o=>{this.dataSource.data=o.types||[]})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:10,vars:3,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Processor types "),t.qZA(),t.TgZ(3,"div",0)(4,"table",1),t.ynx(5,2),t.YNc(6,Wo,2,0,"th",3),t.YNc(7,ts,2,1,"td",4),t.BQk(),t.YNc(8,es,1,0,"tr",5),t.YNc(9,as,1,0,"tr",6),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(4),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,y,A],encapsulation:2,changeDetection:0})}return e})();function ns(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a)}}let is=(()=>{class e{constructor(a){this.data=a}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(d.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-show-streams-dialog"]],decls:8,vars:1,consts:[["mat-dialog-title",""],["yaDataTable","",1,"mat-typography",2,"width","100%"],[4,"ngFor","ngForOf"],["align","end"],["mat-dialog-close","",1,"ya-button"]],template:function(n,o){1&n&&(t.TgZ(0,"h2",0),t._uU(1,"Replicated Streams"),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"table",1),t.YNc(4,ns,3,1,"tr",2),t.qZA()(),t.TgZ(5,"mat-dialog-actions",3)(6,"button",4),t._uU(7,"Close"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngForOf",o.data.streams))},dependencies:[m.sg,l.Gj,d.ZT,d.uh,d.xY,d.H8],encapsulation:2})}return e})();function os(e,i){1&e&&(t.TgZ(0,"mat-icon",2),t._uU(1," check_circle\n"),t.qZA())}function ss(e,i){1&e&&(t.TgZ(0,"mat-icon",3),t._uU(1," lens\n"),t.qZA())}let rs=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-replication-state"]],inputs:{connected:"connected"},decls:2,vars:2,consts:[["class","success",4,"ngIf"],["class","down",4,"ngIf"],[1,"success"],[1,"down"]],template:function(n,o){1&n&&(t.YNc(0,os,2,0,"mat-icon",0),t.YNc(1,ss,2,0,"mat-icon",1)),2&n&&(t.Q6J("ngIf",!0===o.connected),t.xp6(1),t.Q6J("ngIf",!1===o.connected))},dependencies:[m.O5,v.Hw],encapsulation:2,changeDetection:0})}return e})();function cs(e,i){1&e&&t._UZ(0,"th",26)}function ls(e,i){if(1&e&&(t.TgZ(0,"td",27),t._UZ(1,"app-replication-state",28),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("connected",!!a.localAddress&&!!a.remoteAddress)}}function ps(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Instance"),t.qZA())}function ms(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.instance)}}function us(e,i){1&e&&(t.TgZ(0,"th",31),t._uU(1,"Streams"),t.qZA())}const Rt=function(){return[]};function _s(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"td",30)(1,"span",32),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(2);return t.KtG(c.showReplicationStreams(s.streams||[]))}),t._uU(2),t.qZA()()}if(2&e){const a=i.$implicit;t.xp6(2),t.hij("",(a.streams||t.DdM(1,Rt)).length," streams")}}function ds(e,i){1&e&&(t.TgZ(0,"th",33),t._uU(1,"Mode"),t.qZA())}function gs(e,i){if(1&e&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.push?"PUSH":"PULL"," ")}}function fs(e,i){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Local Address"),t.qZA())}function hs(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.localAddress||"-"," ")}}function Ts(e,i){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Remote Address"),t.qZA())}function Zs(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.remoteAddress||"-"," ")}}function bs(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Pull From"),t.qZA())}function xs(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.pullFrom||"-")}}function ys(e,i){1&e&&(t.TgZ(0,"th",36),t._uU(1,"TX"),t.qZA())}function As(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.tx)||"-")}}function Us(e,i){1&e&&t._UZ(0,"th",37)}function vs(e,i){1&e&&t._UZ(0,"td",30)}function Cs(e,i){1&e&&t._UZ(0,"tr",38)}function ws(e,i){1&e&&t._UZ(0,"tr",39)}function qs(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"table",4),t.ynx(2,5),t.YNc(3,cs,1,0,"th",6),t.YNc(4,ls,2,1,"td",7),t.BQk(),t.ynx(5,8),t.YNc(6,ps,2,0,"th",9),t.YNc(7,ms,2,1,"td",10),t.BQk(),t.ynx(8,11),t.YNc(9,us,2,0,"th",12),t.YNc(10,_s,3,2,"td",10),t.BQk(),t.ynx(11,13),t.YNc(12,ds,2,0,"th",14),t.YNc(13,gs,2,1,"td",15),t.BQk(),t.ynx(14,16),t.YNc(15,fs,2,0,"th",17),t.YNc(16,hs,2,1,"td",10),t.BQk(),t.ynx(17,18),t.YNc(18,Ts,2,0,"th",17),t.YNc(19,Zs,2,1,"td",10),t.BQk(),t.ynx(20,19),t.YNc(21,bs,2,0,"th",9),t.YNc(22,xs,2,1,"td",10),t.BQk(),t.ynx(23,20),t.YNc(24,ys,2,0,"th",21),t.YNc(25,As,3,3,"td",10),t.BQk(),t.ynx(26,22),t.YNc(27,Us,1,0,"th",23),t.YNc(28,vs,1,0,"td",10),t.BQk(),t.YNc(29,Cs,1,0,"tr",24),t.YNc(30,ws,1,0,"tr",25),t.qZA(),t.BQk()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("dataSource",a.slavesDataSource),t.xp6(28),t.Q6J("matHeaderRowDef",a.slaveColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.slaveColumns)}}function Ds(e,i){1&e&&t._UZ(0,"th",26)}function Ss(e,i){if(1&e&&(t.TgZ(0,"td",27),t._UZ(1,"app-replication-state",28),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("connected",!!a.localAddress&&!!a.remoteAddress)}}function Ps(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Instance"),t.qZA())}function Ys(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.instance)}}function Ns(e,i){1&e&&(t.TgZ(0,"th",31),t._uU(1,"Streams"),t.qZA())}function ks(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"td",30)(1,"span",32),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw(2);return t.KtG(c.showReplicationStreams(s.streams||[]))}),t._uU(2),t.qZA()()}if(2&e){const a=i.$implicit;t.xp6(2),t.hij("",(a.streams||t.DdM(1,Rt)).length," streams")}}function Qs(e,i){1&e&&(t.TgZ(0,"th",33),t._uU(1,"Mode"),t.qZA())}function Is(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.push?"PUSH":"PULL"," ")}}function Js(e,i){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Local Address"),t.qZA())}function Os(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.localAddress||"-"," ")}}function Rs(e,i){1&e&&(t.TgZ(0,"th",35),t._uU(1,"Remote Address"),t.qZA())}function Ls(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.remoteAddress||"-"," ")}}function $s(e,i){1&e&&(t.TgZ(0,"th",29),t._uU(1,"Push To"),t.qZA())}function Ms(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.pushTo||"-")}}function Fs(e,i){1&e&&(t.TgZ(0,"th",45),t._uU(1,"Local\xa0TX"),t.qZA())}function Bs(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.localTx)||"-")}}function Hs(e,i){1&e&&(t.TgZ(0,"th",45),t._uU(1,"Next\xa0TX"),t.qZA())}function Gs(e,i){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.nextTx)||"-")}}function Es(e,i){1&e&&t._UZ(0,"th",37)}function js(e,i){1&e&&t._UZ(0,"td",30)}function zs(e,i){1&e&&t._UZ(0,"tr",38)}function Xs(e,i){1&e&&t._UZ(0,"tr",39)}function Vs(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"table",40),t.ynx(2,5),t.YNc(3,Ds,1,0,"th",6),t.YNc(4,Ss,2,1,"td",7),t.BQk(),t.ynx(5,8),t.YNc(6,Ps,2,0,"th",9),t.YNc(7,Ys,2,1,"td",10),t.BQk(),t.ynx(8,11),t.YNc(9,Ns,2,0,"th",12),t.YNc(10,ks,3,2,"td",10),t.BQk(),t.ynx(11,13),t.YNc(12,Qs,2,0,"th",14),t.YNc(13,Is,2,1,"td",10),t.BQk(),t.ynx(14,16),t.YNc(15,Js,2,0,"th",17),t.YNc(16,Os,2,1,"td",10),t.BQk(),t.ynx(17,18),t.YNc(18,Rs,2,0,"th",17),t.YNc(19,Ls,2,1,"td",10),t.BQk(),t.ynx(20,41),t.YNc(21,$s,2,0,"th",9),t.YNc(22,Ms,2,1,"td",10),t.BQk(),t.ynx(23,42),t.YNc(24,Fs,2,0,"th",43),t.YNc(25,Bs,3,3,"td",10),t.BQk(),t.ynx(26,44),t.YNc(27,Hs,2,0,"th",43),t.YNc(28,Gs,3,3,"td",10),t.BQk(),t.ynx(29,22),t.YNc(30,Es,1,0,"th",23),t.YNc(31,js,1,0,"td",10),t.BQk(),t.YNc(32,zs,1,0,"tr",24),t.YNc(33,Xs,1,0,"tr",25),t.qZA(),t.BQk()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("dataSource",a.mastersDataSource),t.xp6(31),t.Q6J("matHeaderRowDef",a.masterColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.masterColumns)}}function Ks(e,i){1&e&&(t.TgZ(0,"ya-empty-message",46),t._uU(1,"Not configured"),t.qZA())}let Lt=(()=>{class e{constructor(a,n,o){this.dialog=o,this.slaveColumns=["state","instance","streams","mode","localAddress","remoteAddress","pullFrom","tx","actions"],this.masterColumns=["state","instance","streams","mode","localAddress","remoteAddress","pushTo","localTx","nextTx","actions"],this.slavesDataSource=new r.by,this.mastersDataSource=new r.by,this.hasSlaves$=new Z.X(!1),this.hasMasters$=new Z.X(!1),n.setTitle("Replication"),this.replicationInfoSubscription=a.yamcsClient.createReplicationInfoSubscription(s=>{this.slavesDataSource.data=s.slaves||[],this.mastersDataSource.data=s.masters||[],this.hasSlaves$.next(this.slavesDataSource.data.length>0),this.hasMasters$.next(this.mastersDataSource.data.length>0)})}showReplicationStreams(a){this.dialog.open(is,{width:"500px",data:{streams:a}})}ngOnDestroy(){this.replicationInfoSubscription?.cancel()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(d.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:18,vars:8,consts:[[1,"panel-content"],[4,"ngIf","ngIfElse"],[1,"section-divider"],["nodata",""],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","state"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status",4,"matCellDef"],["matColumnDef","instance"],["mat-header-cell","","style","min-width: 130px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","streams"],["mat-header-cell","","style","min-width: 100px",4,"matHeaderCellDef"],["matColumnDef","mode"],["mat-header-cell","","style","min-width: 70px",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center",4,"matCellDef"],["matColumnDef","localAddress"],["mat-header-cell","","style","min-width: 200px",4,"matHeaderCellDef"],["matColumnDef","remoteAddress"],["matColumnDef","pullFrom"],["matColumnDef","tx"],["mat-header-cell","","style","width: 130px",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"status"],["mat-cell","",1,"status"],[3,"connected"],["mat-header-cell","",2,"min-width","130px"],["mat-cell",""],["mat-header-cell","",2,"min-width","100px"],["matTooltip","Show streams",1,"streams",3,"click"],["mat-header-cell","",2,"min-width","70px"],["mat-cell","",2,"text-align","center"],["mat-header-cell","",2,"min-width","200px"],["mat-header-cell","",2,"width","130px"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""],["mat-table","",1,"ya-data-table",3,"dataSource"],["matColumnDef","pushTo"],["matColumnDef","localTx"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","nextTx"],["mat-header-cell",""],["marginTop","0"]],template:function(n,o){if(1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Replication "),t.qZA(),t.TgZ(3,"div",0)(4,"h4"),t._uU(5,"Inbound"),t.qZA(),t.YNc(6,qs,31,3,"ng-container",1),t.ALo(7,"async"),t.TgZ(8,"p"),t._uU(9,"\xa0"),t.qZA(),t.TgZ(10,"div",2),t._UZ(11,"mat-divider"),t.qZA(),t.TgZ(12,"h4"),t._uU(13,"Outbound"),t.qZA(),t.YNc(14,Vs,34,3,"ng-container",1),t.ALo(15,"async"),t.qZA()(),t.YNc(16,Ks,2,0,"ng-template",null,3,t.W1O)),2&n){const s=t.MAs(17);t.xp6(6),t.Q6J("ngIf",t.lcZ(7,4,o.hasSlaves$))("ngIfElse",s),t.xp6(8),t.Q6J("ngIf",t.lcZ(15,6,o.hasMasters$))("ngIfElse",s)}},dependencies:[m.O5,Q.d,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,D.gM,l.RR,y,A,rs,m.Ov,m.JJ],styles:[".streams[_ngcontent-%COMP%]{border-bottom:1px dotted #888;cursor:pointer}"],changeDetection:0})}return e})();var Ws=f(2939);function tr(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",1)(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA()(),t._uU(5),t.TgZ(6,"button",2),t.NdJ("click",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.compact())}),t.TgZ(7,"mat-icon"),t._uU(8,"fullscreen_exit"),t.qZA(),t._uU(9," Compact "),t.qZA()(),t.TgZ(10,"div",3)(11,"dl",4)(12,"dt"),t._uU(13,"Tablespace"),t.qZA(),t.TgZ(14,"dd"),t._uU(15),t.qZA(),t.TgZ(16,"dt"),t._uU(17,"DB Path"),t.qZA(),t.TgZ(18,"dd"),t._uU(19),t.qZA()(),t.TgZ(20,"pre",5),t._uU(21),t.qZA()()()}if(2&e){const a=i.ngIf,n=t.oxw();t.xp6(5),t.AsE(" ",n.tablespace,"://",n.dbPath," \xa0\xa0\xa0 "),t.xp6(10),t.Oqu(n.tablespace||"-"),t.xp6(4),t.Oqu(n.dbPath||"-"),t.xp6(2),t.Oqu(a)}}let $t=(()=>{class e{constructor(a,n,o,s){this.yamcs=a,this.snackBar=s,this.tablespace=o.snapshot.paramMap.get("tablespace");const c=o.snapshot.url;this.dbPath=c.length?c.map(u=>u.path).join("/"):"",n.setTitle(this.tablespace+"://"+this.dbPath),this.properties$=a.yamcsClient.getRocksDbDatabaseProperties(this.tablespace,this.dbPath)}compact(){this.snackBar.open(`Compacting ${this.tablespace}://${this.dbPath}...`,void 0,{horizontalPosition:"end"}),this.yamcs.yamcsClient.compactRocksDbDatabase(this.tablespace,this.dbPath).then(()=>{this.snackBar.open(`Compaction of ${this.tablespace}://${this.dbPath} successful`,void 0,{duration:3e3,horizontalPosition:"end"})}).catch(a=>{this.snackBar.open(`Compaction of ${this.tablespace}://${this.dbPath} failed`,void 0,{duration:3e3,horizontalPosition:"end"})})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(_.gz),t.Y36(Ws.ux))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-icon-button","","routerLink","/admin/rocksdb/databases","color","primary"],["mat-button","","color","primary",3,"click"],[1,"panel-content"],[1,"dl-horizontal"],[2,"font-size","10px","margin","0"]],template:function(n,o){1&n&&(t.YNc(0,tr,22,5,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.properties$))},dependencies:[m.O5,_.rH,C.lW,C.o6,v.Hw,y,A,m.Ov],encapsulation:2,changeDetection:0})}return e})();function er(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Tablespace"),t.qZA())}function ar(e,i){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.tablespace||"-")}}function nr(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"Data Dir"),t.qZA())}function ir(e,i){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.hij("/",a.dbPath,"")}}const or=function(e,i){return[e,i]};function sr(e,i){if(1&e&&(t.TgZ(0,"td",12)(1,"a",13),t._uU(2),t.YNc(3,ir,2,1,"ng-container",14),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",t.WLB(3,or,a.tablespace,a.dbPath)),t.xp6(1),t.hij(" ",a.dataDir,""),t.xp6(1),t.Q6J("ngIf",a.dbPath)}}function rr(e,i){1&e&&(t.TgZ(0,"th",11),t._uU(1,"DB Path"),t.qZA())}function cr(e,i){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.dbPath||"(root)")}}function lr(e,i){1&e&&t._UZ(0,"th",15)}function pr(e,i){1&e&&t._UZ(0,"td",12)}function mr(e,i){1&e&&t._UZ(0,"tr",16)}function ur(e,i){1&e&&t._UZ(0,"tr",17)}let Mt=(()=>{class e{constructor(a,n){this.displayedColumns=["dataDir","tablespace","dbPath","actions"],this.dataSource=new r.by,n.setTitle("Open Databases"),a.yamcsClient.getRocksDbDatabases().then(o=>{this.dataSource.data=o})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:19,vars:3,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","tablespace"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","dataDir"],["matColumnDef","dbPath"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"routerLink"],[4,"ngIf"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Open databases "),t.qZA(),t.TgZ(3,"div",0)(4,"table",1),t.ynx(5,2),t.YNc(6,er,2,0,"th",3),t.YNc(7,ar,2,1,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,nr,2,0,"th",3),t.YNc(10,sr,4,6,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,rr,2,0,"th",3),t.YNc(13,cr,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,lr,1,0,"th",8),t.YNc(16,pr,1,0,"td",4),t.BQk(),t.YNc(17,mr,1,0,"tr",9),t.YNc(18,ur,1,0,"tr",10),t.qZA()()()),2&n&&(t.xp6(4),t.Q6J("dataSource",o.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[m.O5,_.rH,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,y,A],encapsulation:2,changeDetection:0})}return e})(),_r=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-route-detail"]],inputs:{route:"route"},decls:12,vars:3,consts:[[1,"block-title"],[1,"block"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t._uU(1,"Input Type"),t.qZA(),t.TgZ(2,"div",1),t._uU(3),t.qZA(),t.TgZ(4,"div",0),t._uU(5,"Output Type"),t.qZA(),t.TgZ(6,"div",1),t._uU(7),t.qZA(),t.TgZ(8,"div",0),t._uU(9,"Log Format"),t.qZA(),t.TgZ(10,"div",1),t._uU(11),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",o.route.inputType,"\n"),t.xp6(4),t.hij(" ",o.route.outputType,"\n"),t.xp6(4),t.hij(" ",o.route.logFormat||"-","\n"))},encapsulation:2,changeDetection:0})}return e})();function dr(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"ya-detail-toolbar"),t._uU(2," Route Detail "),t.qZA(),t.TgZ(3,"div",19),t._UZ(4,"app-route-detail",20),t.qZA(),t.BQk()),2&e){const a=i.ngIf;t.xp6(4),t.Q6J("route",a)}}function gr(e,i){1&e&&(t.TgZ(0,"ya-detail-toolbar"),t._uU(1," Select a route "),t.qZA())}function fr(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Service"),t.qZA())}function hr(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.service||"Other")}}function Tr(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Method"),t.qZA())}function Zr(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.description||"-")}}function br(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Requests"),t.qZA())}function xr(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.requestCount)}}function yr(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Errors"),t.qZA())}function Ar(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.errorCount)}}function Ur(e,i){1&e&&(t.TgZ(0,"th",21),t._uU(1,"HTTP"),t.qZA())}function vr(e,i){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.AsE("",a.httpMethod," ",a.url,"")}}function Cr(e,i){1&e&&t._UZ(0,"th",23)}function wr(e,i){1&e&&t._UZ(0,"td",22)}function qr(e,i){1&e&&t._UZ(0,"tr",24)}const Dr=function(e){return{selected:e}};function Sr(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",25),t.NdJ("click",function(){const s=t.CHM(a).$implicit,c=t.oxw();return t.KtG(c.selectRoute(s))}),t.ALo(1,"async"),t.qZA()}if(2&e){const a=i.$implicit,n=t.oxw();t.ekj("deprecated",a.deprecated),t.Q6J("ngClass",t.VKq(5,Dr,a===t.lcZ(1,3,n.selectedRoute$)))}}let Ft=(()=>{class e{constructor(a,n,o,s){this.yamcs=a,this.route=o,this.router=s,this.filterControl=new p.p4,this.displayedColumns=["method","requestCount","errorCount","http","actions"],this.dataSource=new r.by,this.selectedRoute$=new Z.X(null),n.setTitle("API routes"),this.dataSource.filterPredicate=(c,u)=>c.url.toLowerCase().indexOf(u)>=0||c.description.toLowerCase().indexOf(u)>=0}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.dataSource.filter=a.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.dataSource.filter=(this.filterControl.value||"").toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getRoutes().then(a=>{this.dataSource.data=a.routes||[]})}selectRoute(a){this.selectedRoute$.next(a)}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(_.gz),t.Y36(_.F0))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&t.Gf(h.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},decls:36,vars:8,consts:[["mat-icon-button","","color","primary","matTooltip","Refresh view",3,"click"],[4,"ngIf","ngIfElse"],["noSelection",""],[1,"table-wrapper"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter routes",3,"formControl"],["mat-table","","matSort","","matSortActive","requestCount","matSortDirection","desc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","service"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","method"],["matColumnDef","requestCount"],["matColumnDef","errorCount"],["matColumnDef","http"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","deprecated","click",4,"matRowDef","matRowDefColumns"],[2,"padding","0 16px"],[3,"route"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(n,o){if(1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," API routes \xa0\xa0\xa0 "),t.TgZ(3,"button",0),t.NdJ("click",function(){return o.refresh()}),t.TgZ(4,"mat-icon"),t._uU(5,"refresh"),t.qZA()()(),t.TgZ(6,"ya-detail-pane"),t.YNc(7,dr,5,1,"ng-container",1),t.ALo(8,"async"),t.YNc(9,gr,2,0,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(11,"div",3)(12,"div",4)(13,"div",5),t._UZ(14,"ya-search-filter",6),t.qZA(),t.TgZ(15,"table",7),t.ynx(16,8),t.YNc(17,fr,2,0,"th",9),t.YNc(18,hr,2,1,"td",10),t.BQk(),t.ynx(19,11),t.YNc(20,Tr,2,0,"th",9),t.YNc(21,Zr,2,1,"td",10),t.BQk(),t.ynx(22,12),t.YNc(23,br,2,0,"th",9),t.YNc(24,xr,2,1,"td",10),t.BQk(),t.ynx(25,13),t.YNc(26,yr,2,0,"th",9),t.YNc(27,Ar,2,1,"td",10),t.BQk(),t.ynx(28,14),t.YNc(29,Ur,2,0,"th",9),t.YNc(30,vr,2,2,"td",10),t.BQk(),t.ynx(31,15),t.YNc(32,Cr,1,0,"th",16),t.YNc(33,wr,1,0,"td",10),t.BQk(),t.YNc(34,qr,1,0,"tr",17),t.YNc(35,Sr,2,7,"tr",18),t.qZA()()()()),2&n){const s=t.MAs(10);t.xp6(7),t.Q6J("ngIf",t.lcZ(8,6,o.selectedRoute$))("ngIfElse",s),t.xp6(7),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns)}},dependencies:[m.mk,m.O5,p.JJ,p.oH,C.RK,v.Hw,h.YE,h.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,D.gM,l.J8,l.MD,l.cF,y,A,_r,m.Ov],styles:[".deprecated[_ngcontent-%COMP%]{text-decoration:line-through}.detail[_ngcontent-%COMP%]{background-color:#fafafa;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0})}return e})();function Pr(e,i){if(1&e&&(t.TgZ(0,"mat-icon",4),t._uU(1," check_circle\n"),t.qZA()),2&e){const a=t.oxw();t.Q6J("matTooltip",a.service.state)}}function Yr(e,i){if(1&e&&(t.TgZ(0,"mat-icon",5),t._uU(1," check_circle\n"),t.qZA()),2&e){const a=t.oxw();t.Q6J("matTooltip",a.service.state)}}function Nr(e,i){if(1&e&&(t.TgZ(0,"mat-icon",6),t._uU(1," highlight_off\n"),t.qZA()),2&e){const a=t.oxw();t.Q6J("matTooltip",a.service.state)}}function kr(e,i){if(1&e&&(t.TgZ(0,"mat-icon",7),t._uU(1," lens\n"),t.qZA()),2&e){const a=t.oxw();t.Q6J("matTooltip",a.service.state)}}let Qr=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-service-state"]],inputs:{service:"service"},decls:4,vars:4,consts:[["style","color: lightgreen",3,"matTooltip",4,"ngIf"],["class","success",3,"matTooltip",4,"ngIf"],["class","alert",3,"matTooltip",4,"ngIf"],["class","down",3,"matTooltip",4,"ngIf"],[2,"color","lightgreen",3,"matTooltip"],[1,"success",3,"matTooltip"],[1,"alert",3,"matTooltip"],[1,"down",3,"matTooltip"]],template:function(n,o){1&n&&(t.YNc(0,Pr,2,1,"mat-icon",0),t.YNc(1,Yr,2,1,"mat-icon",1),t.YNc(2,Nr,2,1,"mat-icon",2),t.YNc(3,kr,2,1,"mat-icon",3)),2&n&&(t.Q6J("ngIf","STARTING"===o.service.state),t.xp6(1),t.Q6J("ngIf","RUNNING"===o.service.state),t.xp6(1),t.Q6J("ngIf","STOPPING"===o.service.state||"FAILED"===o.service.state),t.xp6(1),t.Q6J("ngIf","TERMINATED"===o.service.state||"NEW"===o.service.state))},dependencies:[m.O5,v.Hw,D.gM],encapsulation:2,changeDetection:0})}return e})();function Ir(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Name"),t.qZA())}function Jr(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.name)}}function Or(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Class"),t.qZA())}function Rr(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.className)}}function Lr(e,i){1&e&&t._UZ(0,"th",17)}function $r(e,i){if(1&e&&(t.TgZ(0,"td",18),t._UZ(1,"app-service-state",19),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("service",a)}}function Mr(e,i){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Failure"),t.qZA())}function Fr(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"ya-icon-action",23),t.NdJ("click",function(){t.CHM(a);const o=t.oxw(2).$implicit;return t.KtG(o.expanded=!0)}),t.qZA()}}function Br(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"ya-icon-action",24),t.NdJ("click",function(){t.CHM(a);const o=t.oxw(2).$implicit;return t.KtG(o.expanded=!1)}),t.qZA()}}function Hr(e,i){if(1&e&&(t.ynx(0),t.YNc(1,Fr,1,0,"ya-icon-action",21),t.YNc(2,Br,1,0,"ya-icon-action",22),t.BQk()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!a.expanded),t.xp6(1),t.Q6J("ngIf",a.expanded)}}function Gr(e,i){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.YNc(2,Hr,3,2,"ng-container",20),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.failureMessage||"-"," "),t.xp6(1),t.Q6J("ngIf",a.failureCause)}}function Er(e,i){if(1&e&&(t.TgZ(0,"td",16)(1,"pre"),t._uU(2),t.qZA()()),2&e){const a=i.$implicit,n=t.oxw();t.uIk("colspan",n.displayedColumns.length),t.xp6(2),t.Oqu(a.failureCause||"-")}}function jr(e,i){1&e&&t._UZ(0,"th",25)}function zr(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"ya-more")(1,"button",26),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.startService.emit(o.name))}),t._uU(2," Start service "),t.qZA(),t.TgZ(3,"button",26),t.NdJ("click",function(){t.CHM(a);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.stopService.emit(o.name))}),t._uU(4," Stop service "),t.qZA()()}if(2&e){const a=t.oxw().$implicit;t.xp6(1),t.Q6J("disabled","TERMINATED"!==a.state&&"NEW"!==a.state),t.xp6(2),t.Q6J("disabled","RUNNING"!==a.state)}}function Xr(e,i){if(1&e&&(t.TgZ(0,"td",16),t.YNc(1,zr,5,2,"ya-more",20),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("ngIf",!a.readonly)}}function Vr(e,i){1&e&&t._UZ(0,"tr",27)}function Kr(e,i){1&e&&t._UZ(0,"tr",28)}function Wr(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"tr",29),t.NdJ("click",function(){const s=t.CHM(a).$implicit;return t.KtG(s.expanded=!s.expanded)}),t.qZA()}2&e&&t.ekj("expanded",i.$implicit.expanded)}const tc=function(){return["detail"]};let ec=(()=>{class e{constructor(){this.displayedColumns=["state","name","className","failureMessage","actions"],this.dataSource=new r.by,this.readonly=!1,this.startService=new t.vpe,this.stopService=new t.vpe}ngAfterViewInit(){this.dataSource.sort=this.sort}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-services-table"]],viewQuery:function(n,o){if(1&n&&t.Gf(h.YE,7),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},inputs:{dataSource:"dataSource",readonly:"readonly"},outputs:{startService:"startService",stopService:"stopService"},decls:21,vars:5,consts:[["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","","multiTemplateDataRows","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","className"],["matColumnDef","state"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status",4,"matCellDef"],["matColumnDef","failureMessage"],["matColumnDef","detail"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row","","class","item-detail",3,"expanded","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"status"],["mat-cell","",1,"status"],[3,"service"],[4,"ngIf"],["icon","expand_more",3,"click",4,"ngIf"],["icon","expand_less",3,"click",4,"ngIf"],["icon","expand_more",3,"click"],["icon","expand_less",3,"click"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"disabled","click"],["mat-header-row",""],["mat-row",""],["mat-row","",1,"item-detail",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"table",0),t.ynx(1,1),t.YNc(2,Ir,2,0,"th",2),t.YNc(3,Jr,2,1,"td",3),t.BQk(),t.ynx(4,4),t.YNc(5,Or,2,0,"th",2),t.YNc(6,Rr,2,1,"td",3),t.BQk(),t.ynx(7,5),t.YNc(8,Lr,1,0,"th",6),t.YNc(9,$r,2,1,"td",7),t.BQk(),t.ynx(10,8),t.YNc(11,Mr,2,0,"th",2),t.YNc(12,Gr,3,2,"td",3),t.BQk(),t.ynx(13,9),t.YNc(14,Er,3,2,"td",3),t.BQk(),t.ynx(15,10),t.YNc(16,jr,1,0,"th",11),t.YNc(17,Xr,2,1,"td",3),t.BQk(),t.YNc(18,Vr,1,0,"tr",12),t.YNc(19,Kr,1,0,"tr",13),t.YNc(20,Wr,1,2,"tr",14),t.qZA()),2&n&&(t.Q6J("dataSource",o.dataSource),t.xp6(18),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(4,tc)))},dependencies:[m.O5,M.OP,h.YE,h.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,l.J5,l.cQ,Qr],styles:["tr.item-detail[_ngcontent-%COMP%]:not(.expanded){display:none}"],changeDetection:0})}return e})(),Bt=(()=>{class e{constructor(a,n,o,s){this.yamcs=a,this.router=n,this.route=o,this.instance="_global",this.filterForm=new p.nJ({instance:new p.p4("_global")}),this.instanceOptions$=new Z.X([{id:"_global",label:"_global"}]),this.dataSource=new r.by,s.setTitle("Services"),a.yamcsClient.getInstances({filter:"state=RUNNING"}).then(c=>{for(const u of c)this.instanceOptions$.next([...this.instanceOptions$.value,{id:u.name,label:u.name}])}),this.initializeOptions(),this.refresh(),this.filterForm.get("instance").valueChanges.forEach(c=>{this.instance=c,this.refresh()})}initializeOptions(){const a=this.route.snapshot.queryParamMap;a.has("instance")&&(this.instance=a.get("instance"),this.filterForm.get("instance").setValue(this.instance))}startService(a){if(confirm(`Are you sure you want to start ${a} ?`)){const n=this.filterForm.get("instance").value;this.yamcs.yamcsClient.startService(n,a).then(()=>this.refresh())}}stopService(a){if(confirm(`Are you sure you want to stop ${a} ?`)){const n=this.filterForm.get("instance").value;this.yamcs.yamcsClient.stopService(n,a).then(()=>this.refresh())}}refresh(){this.updateURL();const a=this.filterForm.get("instance").value;this.yamcs.yamcsClient.getServices(a).then(n=>{this.dataSource.data=n})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{instance:this.instance||null},queryParamsHandling:"merge"})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(_.F0),t.Y36(_.gz),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:12,vars:5,consts:[["mat-icon-button","","color","primary","matTooltip","Refresh view",3,"click"],[1,"panel-content"],[3,"formGroup"],[1,"filter-bar"],["formControlName","instance",3,"options"],[3,"dataSource","startService","stopService"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Services \xa0\xa0\xa0 "),t.TgZ(3,"button",0),t.NdJ("click",function(){return o.refresh()}),t.TgZ(4,"mat-icon"),t._uU(5,"refresh"),t.qZA()()(),t.TgZ(6,"div",1)(7,"form",2)(8,"div",3),t._UZ(9,"ya-select",4),t.ALo(10,"async"),t.qZA()(),t.TgZ(11,"app-services-table",5),t.NdJ("startService",function(c){return o.startService(c)})("stopService",function(c){return o.stopService(c)}),t.qZA()()()),2&n&&(t.xp6(7),t.Q6J("formGroup",o.filterForm),t.xp6(2),t.Q6J("options",t.lcZ(10,3,o.instanceOptions$)),t.xp6(2),t.Q6J("dataSource",o.dataSource))},dependencies:[p._Y,p.JJ,p.JL,p.sg,p.u,C.RK,v.Hw,D.gM,l.Hr,y,A,ec,m.Ov],encapsulation:2,changeDetection:0})}return e})();var ac=f(3366);function nc(e,i){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Id"),t.qZA())}function ic(e,i){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.id)}}function oc(e,i){1&e&&(t.TgZ(0,"th",16),t._uU(1,"User"),t.qZA())}function sc(e,i){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.username||"-")}}function rc(e,i){1&e&&(t.TgZ(0,"th",16),t._uU(1,"IP address"),t.qZA())}function cc(e,i){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.ipAddress||"-")}}function lc(e,i){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Hostname"),t.qZA())}function pc(e,i){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.hostname||"-")}}function mc(e,i){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Started"),t.qZA())}function uc(e,i){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.ALo(2,"datetime"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.startTime)||"-")}}function _c(e,i){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Last renewed"),t.qZA())}function dc(e,i){if(1&e&&(t.TgZ(0,"td",17),t._UZ(1,"app-ago",18),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("time",a.lastAccessTime)("useMissionTime",!1)}}function gc(e,i){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Expires in"),t.qZA())}function fc(e,i){if(1&e&&(t.TgZ(0,"td",17),t._UZ(1,"app-ago",18),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("time",a.expirationTime)("useMissionTime",!1)}}function hc(e,i){1&e&&(t.TgZ(0,"th",19),t._uU(1,"Client"),t.qZA())}function Tc(e,i){1&e&&(t.ynx(0),t._uU(1,", "),t.BQk())}function Zc(e,i){if(1&e&&(t.ynx(0),t.YNc(1,Tc,2,0,"ng-container",21),t._uU(2),t.ALo(3,"userAgent"),t.BQk()),2&e){const a=i.$implicit,n=i.first;t.xp6(1),t.Q6J("ngIf",!n),t.xp6(1),t.hij("",t.lcZ(3,2,a)," ")}}function bc(e,i){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}const xc=function(){return[]};function yc(e,i){if(1&e&&(t.TgZ(0,"td",17),t.YNc(1,Zc,4,4,"ng-container",20),t.YNc(2,bc,2,0,"ng-container",21),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngForOf",a.clients||t.DdM(2,xc)),t.xp6(1),t.Q6J("ngIf",!a.clients)}}function Ac(e,i){1&e&&t._UZ(0,"tr",22)}function Uc(e,i){1&e&&t._UZ(0,"tr",23)}let Ht=(()=>{class e{constructor(a,n,o){this.yamcs=a,this.displayedColumns=["id","user","ipAddress","hostname","started","lastAccessTime","expirationTime","clients"],this.tableTrackerFn=(s,c)=>c.id,this.dataSource=new r.by,n.setTitle("Sessions"),this.refresh(),this.syncSubscription=o.syncSlow(()=>this.refresh())}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}refresh(){this.yamcs.yamcsClient.getSessions().then(a=>{this.dataSource.data=a||[]})}ngOnDestroy(){this.syncSubscription&&this.syncSubscription.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(l.jF))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(n,o){if(1&n&&(t.Gf(h.YE,5),t.Gf(N.NW,5)),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first),t.iGM(s=t.CRH())&&(o.paginator=s.first)}},decls:32,vars:7,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","started","matSortDirection","desc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["matColumnDef","ipAddress"],["matColumnDef","hostname"],["matColumnDef","started"],["matColumnDef","lastAccessTime"],["matColumnDef","expirationTime"],["matColumnDef","clients"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"time","useMissionTime"],["mat-header-cell","",1,"expand"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Sessions "),t.qZA(),t.TgZ(3,"div",0)(4,"table",1),t.ynx(5,2),t.YNc(6,nc,2,0,"th",3),t.YNc(7,ic,2,1,"td",4),t.BQk(),t.ynx(8,5),t.YNc(9,oc,2,0,"th",3),t.YNc(10,sc,2,1,"td",4),t.BQk(),t.ynx(11,6),t.YNc(12,rc,2,0,"th",3),t.YNc(13,cc,2,1,"td",4),t.BQk(),t.ynx(14,7),t.YNc(15,lc,2,0,"th",3),t.YNc(16,pc,2,1,"td",4),t.BQk(),t.ynx(17,8),t.YNc(18,mc,2,0,"th",3),t.YNc(19,uc,3,3,"td",4),t.BQk(),t.ynx(20,9),t.YNc(21,_c,2,0,"th",3),t.YNc(22,dc,2,2,"td",4),t.BQk(),t.ynx(23,10),t.YNc(24,gc,2,0,"th",3),t.YNc(25,fc,2,2,"td",4),t.BQk(),t.ynx(26,11),t.YNc(27,hc,2,0,"th",12),t.YNc(28,yc,3,3,"td",4),t.BQk(),t.YNc(29,Ac,1,0,"tr",13),t.YNc(30,Uc,1,0,"tr",14),t.qZA(),t._UZ(31,"mat-paginator",15),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("dataSource",o.dataSource)("trackBy",o.tableTrackerFn),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("pageSize",100)("hidePageSize",!0)("showFirstLastButtons",!0))},dependencies:[m.sg,m.O5,N.NW,h.YE,h.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,ac.E,y,A,l.id,B],encapsulation:2,changeDetection:0})}return e})();var vc=f(9038),H=f(2651);function Cc(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"ya-sidebar-nav-group",23),t.NdJ("toggle",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.toggleUserManagementGroup())}),t.TgZ(1,"ya-sidebar-nav-item",24),t._uU(2," Users "),t.qZA(),t.TgZ(3,"ya-sidebar-nav-item",25),t._uU(4," Service accounts "),t.qZA(),t.TgZ(5,"ya-sidebar-nav-item",26),t._uU(6," Groups "),t.qZA(),t.TgZ(7,"ya-sidebar-nav-item",27),t._uU(8," Roles "),t.qZA()()}if(2&e){const a=t.oxw();t.Q6J("active",a.userManagementActive)("expanded",a.userManagementExpanded),t.xp6(1),t.Q6J("subitem",!0),t.xp6(2),t.Q6J("subitem",!0),t.xp6(2),t.Q6J("subitem",!0),t.xp6(2),t.Q6J("subitem",!0)}}function wc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",28)(1,"mat-icon",8),t._uU(2,"devices"),t.qZA(),t._uU(3," Sessions "),t.qZA())}function qc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",29)(1,"mat-icon",8),t._uU(2,"attractions"),t.qZA(),t._uU(3," Services "),t.qZA())}function Dc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",30)(1,"mat-icon",8),t._uU(2,"flip_camera_android"),t.qZA(),t._uU(3," Processor types "),t.qZA())}function Sc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",31)(1,"mat-icon",8),t._uU(2,"share"),t.qZA(),t._uU(3," Replication "),t.qZA())}function Pc(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"ya-sidebar-nav-group",32),t.NdJ("toggle",function(){t.CHM(a);const o=t.oxw();return t.KtG(o.toggleRocksDbGroup())}),t.TgZ(1,"ya-sidebar-nav-item",33),t._uU(2," Open databases "),t.qZA()()}if(2&e){const a=t.oxw();t.Q6J("active",a.rocksDbActive)("expanded",a.rocksDbExpanded),t.xp6(1),t.Q6J("subitem",!0)}}function Yc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",34)(1,"mat-icon",8),t._uU(2,"traffic"),t.qZA(),t._uU(3," HTTP traffic "),t.qZA())}function Nc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",35)(1,"mat-icon",8),t._uU(2,"api"),t.qZA(),t._uU(3," API routes "),t.qZA())}function kc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",36)(1,"mat-icon",8),t._uU(2,"access_time"),t.qZA(),t._uU(3," Leap seconds "),t.qZA())}function Qc(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",37)(1,"mat-icon",8),t._uU(2,"receipt"),t.qZA(),t._uU(3," Threads "),t.qZA())}function Ic(e,i){1&e&&(t.TgZ(0,"ya-sidebar-nav-item",38)(1,"mat-icon",8),t._uU(2,"memory"),t.qZA(),t._uU(3," System "),t.qZA())}function Jc(e,i){if(1&e&&(t.TgZ(0,"div",39),t._UZ(1,"img",40),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.Q6J("src",a.config.logo,t.LSH)}}let Gt=(()=>{class e{constructor(a,n,o,s,c,u,g){this.userManagementActive=!1,this.userManagementExpanded=!1,this.rocksDbActive=!1,this.rocksDbExpanded=!1,this.config=n.getConfig(),this.user=o.getUser();const U=c.bypassSecurityTrustResourceUrl(`${g}rocksdb.svg`);s.addSvgIcon("rocksdb",U),this.routerSubscription=u.events.pipe((0,at.h)(x=>x instanceof _.m2)).subscribe(x=>{const S=x.url;this.collapseAllGroups(),this.userManagementActive=!1,this.rocksDbActive=!1,S.match(/\/iam.*/)?(this.userManagementActive=!0,this.userManagementExpanded=!0):S.match(/\/rocksdb.*/)&&(this.rocksDbActive=!0,this.rocksDbExpanded=!0)})}collapseAllGroups(){this.userManagementExpanded=!1,this.rocksDbExpanded=!1}toggleUserManagementGroup(){const a=this.userManagementExpanded;this.collapseAllGroups(),this.userManagementExpanded=!a}toggleRocksDbGroup(){const a=this.rocksDbExpanded;this.collapseAllGroups(),this.rocksDbExpanded=!a}showRocksDbItem(){return this.user.hasSystemPrivilege("ControlArchiving")}showAccessControlItem(){return this.user.hasSystemPrivilege("ControlAccess")}showServicesItem(){return this.user.hasSystemPrivilege("ControlServices")}showSystemInfo(){return this.user.hasSystemPrivilege("ReadSystemInfo")}ngOnDestroy(){this.routerSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.Vi),t.Y36(l.E4),t.Y36(k.e),t.Y36(v.jv),t.Y36(b.H7),t.Y36(_.F0),t.Y36(m.mr))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:35,vars:19,consts:[["messageBar",""],[1,"mat-typography"],["mode","side",3,"opened","disableClose"],[1,"sidenav-content"],[1,"top","module-title"],[1,"icon32",2,"margin-right","16px"],["dense",""],["routerLink","/admin",3,"exact"],[1,"item-icon"],["label","Access control","icon","supervised_user_circle",3,"active","expanded","toggle",4,"ngIf"],["routerLink","/admin/sessions",4,"ngIf"],["routerLink","/admin/services",4,"ngIf"],["routerLink","/admin/processor-types",4,"ngIf"],["routerLink","/admin/databases"],["routerLink","/admin/replication",4,"ngIf"],["label","RocksDB","svgIcon","rocksdb",3,"active","expanded","toggle",4,"ngIf"],["routerLink","/admin/http-traffic",4,"ngIf"],["routerLink","/admin/routes",4,"ngIf"],["routerLink","/admin/leap-seconds",4,"ngIf"],["routerLink","/admin/threads",4,"ngIf"],["routerLink","/admin/system",4,"ngIf"],[2,"flex","1 1 auto"],["class","navbar-logo",4,"ngIf"],["label","Access control","icon","supervised_user_circle",3,"active","expanded","toggle"],["routerLink","/admin/iam/users",3,"subitem"],["routerLink","/admin/iam/service-accounts",3,"subitem"],["routerLink","/admin/iam/groups",3,"subitem"],["routerLink","/admin/iam/roles",3,"subitem"],["routerLink","/admin/sessions"],["routerLink","/admin/services"],["routerLink","/admin/processor-types"],["routerLink","/admin/replication"],["label","RocksDB","svgIcon","rocksdb",3,"active","expanded","toggle"],["routerLink","/admin/rocksdb/databases",3,"subitem"],["routerLink","/admin/http-traffic"],["routerLink","/admin/routes"],["routerLink","/admin/leap-seconds"],["routerLink","/admin/threads"],["routerLink","/admin/system"],[1,"navbar-logo"],[3,"src"]],template:function(n,o){if(1&n&&(t._UZ(0,"ya-message-bar",null,0),t.TgZ(2,"mat-sidenav-container",1),t.ALo(3,"async"),t.TgZ(4,"mat-sidenav",2)(5,"div",3)(6,"mat-toolbar",4)(7,"mat-toolbar-row")(8,"mat-icon",5),t._uU(9,"security"),t.qZA(),t._uU(10," Admin Area "),t.qZA()(),t.TgZ(11,"mat-nav-list",6)(12,"ya-sidebar-nav-item",7)(13,"mat-icon",8),t._uU(14,"recent_actors"),t.qZA(),t._uU(15," Action log "),t.qZA(),t.YNc(16,Cc,9,6,"ya-sidebar-nav-group",9),t.YNc(17,wc,4,0,"ya-sidebar-nav-item",10),t.YNc(18,qc,4,0,"ya-sidebar-nav-item",11),t.YNc(19,Dc,4,0,"ya-sidebar-nav-item",12),t.TgZ(20,"ya-sidebar-nav-item",13)(21,"mat-icon",8),t._uU(22,"storage"),t.qZA(),t._uU(23," Databases "),t.qZA(),t.YNc(24,Sc,4,0,"ya-sidebar-nav-item",14),t.YNc(25,Pc,3,3,"ya-sidebar-nav-group",15),t.YNc(26,Yc,4,0,"ya-sidebar-nav-item",16),t.YNc(27,Nc,4,0,"ya-sidebar-nav-item",17),t.YNc(28,kc,4,0,"ya-sidebar-nav-item",18),t.YNc(29,Qc,4,0,"ya-sidebar-nav-item",19),t.YNc(30,Ic,4,0,"ya-sidebar-nav-item",20),t.qZA(),t._UZ(31,"div",21),t.YNc(32,Jc,2,1,"div",22),t.qZA()(),t.TgZ(33,"mat-sidenav-content"),t._UZ(34,"router-outlet"),t.qZA()()),2&n){const s=t.MAs(1);t.xp6(2),t.ekj("message-bar-visible",t.lcZ(3,17,s.show$)),t.xp6(2),t.Q6J("opened",!0)("disableClose",!0),t.xp6(8),t.Q6J("exact",!0),t.xp6(4),t.Q6J("ngIf",o.showAccessControlItem()),t.xp6(1),t.Q6J("ngIf",o.showAccessControlItem()),t.xp6(1),t.Q6J("ngIf",o.showServicesItem()),t.xp6(1),t.Q6J("ngIf",o.showSystemInfo()),t.xp6(5),t.Q6J("ngIf",o.showSystemInfo()),t.xp6(1),t.Q6J("ngIf",o.showRocksDbItem()),t.xp6(1),t.Q6J("ngIf",o.showSystemInfo()),t.xp6(1),t.Q6J("ngIf",o.showSystemInfo()),t.xp6(1),t.Q6J("ngIf",o.showSystemInfo()),t.xp6(1),t.Q6J("ngIf",o.showSystemInfo()),t.xp6(1),t.Q6J("ngIf",o.showSystemInfo()),t.xp6(2),t.Q6J("ngIf",o.config.logo)}},dependencies:[m.O5,_.lC,_.rH,v.Hw,vc.Hk,H.JX,H.TM,H.Rh,O.Ye,O.rD,l.pc,l.vN,l.Ss,m.Ov],styles:["mat-sidenav-container[_ngcontent-%COMP%]{position:absolute;inset:48px 0 0;background-color:#f7f7f7}mat-sidenav-container.message-bar-visible[_ngcontent-%COMP%]{top:96px}mat-sidenav[_ngcontent-%COMP%]{width:250px;background-color:#181818;border-right:0!important}.sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column}mat-toolbar[_ngcontent-%COMP%]{background-color:#181818;border-bottom:1px solid rgba(255,255,255,.1);box-sizing:content-box;color:#d3d3d3;font-weight:300;font-size:14px}.navbar-logo[_ngcontent-%COMP%]{text-align:center;line-height:0}.navbar-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}"],changeDetection:0})}return e})();function Oc(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",10),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t._UZ(9,"td"),t.qZA()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.name),t.xp6(2),t.Oqu(a.description||"-"),t.xp6(2),t.Oqu(a.version||"-"),t.xp6(2),t.Oqu(a.vendor||"-")}}function Rc(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"h4"),t._uU(2,"Plugins"),t.qZA(),t.TgZ(3,"table",6)(4,"tr")(5,"th"),t._uU(6,"Name"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Description"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Version"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Maintainer"),t.qZA(),t._UZ(13,"th",7),t.qZA(),t.YNc(14,Oc,10,4,"tr",8),t.qZA(),t._UZ(15,"br"),t.BQk()),2&e){const a=i.ngIf;t.xp6(14),t.Q6J("ngForOf",a)}}function Lc(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"formatBytes"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"formatBytes"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"formatBytes"),t.qZA(),t._UZ(14,"td"),t.qZA()),2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.directory),t.xp6(2),t.Oqu(a.type||"-"),t.xp6(2),t.Oqu(t.lcZ(7,5,a.totalSpace)),t.xp6(3),t.Oqu(t.lcZ(10,7,a.unallocatedSpace)),t.xp6(3),t.Oqu(t.lcZ(13,9,a.usableSpace))}}function $c(e,i){1&e&&t.GkF(0)}const Mc=function(e){return{process:e,indent:0,last:!1}};function Fc(e,i){if(1&e&&(t.TgZ(0,"div",2)(1,"dl",3)(2,"dt"),t._uU(3,"Yamcs version"),t.qZA(),t.TgZ(4,"dd"),t._uU(5),t.qZA(),t.TgZ(6,"dt"),t._uU(7,"Build"),t.qZA(),t.TgZ(8,"dd"),t._uU(9),t.qZA(),t.TgZ(10,"dt"),t._uU(11,"Server ID"),t.qZA(),t.TgZ(12,"dd"),t._uU(13),t.qZA()(),t.TgZ(14,"dl",4)(15,"dt"),t._uU(16,"OS"),t.qZA(),t.TgZ(17,"dd"),t._uU(18),t.qZA(),t.TgZ(19,"dt"),t._uU(20,"Architecture"),t.qZA(),t.TgZ(21,"dd"),t._uU(22),t.qZA(),t.TgZ(23,"dt"),t._uU(24,"JVM"),t.qZA(),t.TgZ(25,"dd"),t._uU(26),t.qZA()(),t.TgZ(27,"dl",4)(28,"dt"),t._uU(29,"Working directory"),t.qZA(),t.TgZ(30,"dd"),t._uU(31),t.qZA(),t.TgZ(32,"dt"),t._uU(33,"Config directory"),t.qZA(),t.TgZ(34,"dd"),t._uU(35),t.qZA(),t.TgZ(36,"dt"),t._uU(37,"Cache directory"),t.qZA(),t.TgZ(38,"dd"),t._uU(39),t.qZA(),t.TgZ(40,"dt"),t._uU(41,"Data directory"),t.qZA(),t.TgZ(42,"dd"),t._uU(43),t.qZA()(),t.TgZ(44,"dl",4)(45,"dt"),t._uU(46,"Uptime"),t.qZA(),t.TgZ(47,"dd"),t._uU(48),t.ALo(49,"duration"),t.qZA(),t.TgZ(50,"dt"),t._uU(51,"Load average"),t.qZA(),t.TgZ(52,"dd"),t._uU(53),t.ALo(54,"number"),t.qZA(),t.TgZ(55,"dt"),t._uU(56,"Available processors"),t.qZA(),t.TgZ(57,"dd"),t._uU(58),t.qZA(),t.TgZ(59,"dt"),t._uU(60,"Heap memory"),t.qZA(),t.TgZ(61,"dd"),t._uU(62),t.ALo(63,"formatBytes"),t.ALo(64,"formatBytes"),t.ALo(65,"formatBytes"),t.qZA(),t.TgZ(66,"dt"),t._uU(67,"Non-heap memory"),t.qZA(),t.TgZ(68,"dd"),t._uU(69),t.ALo(70,"formatBytes"),t.ALo(71,"formatBytes"),t.ALo(72,"formatBytes"),t.qZA(),t.TgZ(73,"dt"),t._uU(74,"Thread count"),t.qZA(),t.TgZ(75,"dd"),t._uU(76),t.qZA()(),t.YNc(77,Rc,16,1,"ng-container",5),t.ALo(78,"async"),t.TgZ(79,"h4"),t._uU(80,"Root directories"),t.qZA(),t.TgZ(81,"table",6)(82,"tr")(83,"th"),t._uU(84,"Directory"),t.qZA(),t.TgZ(85,"th"),t._uU(86,"Type"),t.qZA(),t.TgZ(87,"th"),t._uU(88,"Total space"),t.qZA(),t.TgZ(89,"th"),t._uU(90,"Unallocated space"),t.qZA(),t.TgZ(91,"th"),t._uU(92,"Usable space"),t.qZA(),t._UZ(93,"th",7),t.qZA(),t.YNc(94,Lc,15,11,"tr",8),t.qZA(),t._UZ(95,"br"),t.TgZ(96,"h4"),t._uU(97,"Process tree"),t.qZA(),t.TgZ(98,"table",6)(99,"tr")(100,"th"),t._uU(101,"PID"),t.qZA(),t.TgZ(102,"th"),t._uU(103,"User"),t.qZA(),t.TgZ(104,"th"),t._uU(105,"Start time"),t.qZA(),t.TgZ(106,"th",7),t._uU(107,"Command"),t.qZA()(),t.YNc(108,$c,1,0,"ng-container",9),t.qZA()()),2&e){const a=i.ngIf,n=t.oxw(),o=t.MAs(6);t.xp6(5),t.Oqu(a.yamcsVersion||"-"),t.xp6(4),t.Oqu(a.revision||"-"),t.xp6(4),t.Oqu(a.serverId||"-"),t.xp6(5),t.Oqu(a.os),t.xp6(4),t.Oqu(a.arch),t.xp6(4),t.Oqu(a.jvm),t.xp6(5),t.Oqu(a.workingDirectory),t.xp6(4),t.Oqu(a.configDirectory),t.xp6(4),t.Oqu(a.cacheDirectory),t.xp6(4),t.Oqu(a.dataDirectory),t.xp6(5),t.Oqu(t.lcZ(49,24,a.uptime)),t.xp6(5),t.Oqu(t.xi3(54,26,a.loadAverage,"1.2-2")||"-"),t.xp6(5),t.Oqu(a.availableProcessors),t.xp6(4),t.lnq(" ",t.lcZ(63,29,a.heapMemory)," (used: ",t.lcZ(64,31,a.heapMemory-a.usedHeapMemory),", limit: ",t.lcZ(65,33,a.maxHeapMemory)||"n/a",")"),t.xp6(7),t.lnq(" ",t.lcZ(70,35,a.nonHeapMemory)," (used: ",t.lcZ(71,37,a.nonHeapMemory-a.usedNonHeapMemory),", limit: ",t.lcZ(72,39,a.maxNonHeapMemory)||"n/a",")"),t.xp6(7),t.Oqu(a.jvmThreadCount),t.xp6(1),t.Q6J("ngIf",t.lcZ(78,41,n.plugins$)),t.xp6(17),t.Q6J("ngForOf",a.rootDirectories),t.xp6(14),t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",t.VKq(43,Mc,a.process))}}function Bc(e,i){1&e&&(t.TgZ(0,"span",11),t._uU(1,"\u251c\u2500\u2500"),t.qZA())}function Hc(e,i){1&e&&(t.TgZ(0,"span",11),t._uU(1,"\u2514\u2500\u2500"),t.qZA())}function Gc(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"span",11),t._uU(2),t.qZA(),t.YNc(3,Bc,2,0,"span",12),t.YNc(4,Hc,2,0,"span",12),t.BQk()),2&e){const a=t.oxw(),n=a.indent,o=a.last;t.xp6(2),t.Oqu(" ".repeat(n)),t.xp6(1),t.Q6J("ngIf",!o),t.xp6(1),t.Q6J("ngIf",o)}}function Ec(e,i){1&e&&t.GkF(0)}const jc=function(e,i,a){return{process:e,indent:i,last:a}};function zc(e,i){if(1&e&&(t.ynx(0),t.YNc(1,Ec,1,0,"ng-container",9),t.BQk()),2&e){const a=i.$implicit,n=i.last,o=t.oxw().indent;t.oxw();const s=t.MAs(6);t.xp6(1),t.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",t.kEZ(2,jc,a,o+2,n))}}const Xc=function(){return[]};function Vc(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"datetime"),t.qZA(),t.TgZ(8,"td"),t.YNc(9,Gc,5,3,"ng-container",5),t._uU(10),t.qZA()(),t.YNc(11,zc,2,6,"ng-container",8)),2&e){const a=i.process,n=i.indent;t.xp6(2),t.Oqu(a.pid),t.xp6(2),t.Oqu(a.user),t.xp6(2),t.Oqu(t.lcZ(7,6,a.startTime)||"-"),t.xp6(3),t.Q6J("ngIf",n),t.xp6(1),t.hij(" ",a.command," "),t.xp6(1),t.Q6J("ngForOf",a.children||t.DdM(8,Xc))}}let Et=(()=>{class e{constructor(a,n){this.yamcs=a,this.info$=new Z.X(null),this.plugins$=new Z.X([]),n.setTitle("System"),this.yamcs.yamcsClient.getGeneralInfo().then(o=>this.plugins$.next(o.plugins||[])),this.systemInfoSubscription=a.yamcsClient.createSystemInfoSubscription(o=>{this.info$.next(o)})}ngOnDestroy(){this.systemInfoSubscription?.cancel()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:7,vars:3,consts:[["class","panel-content",4,"ngIf"],["processTemplate",""],[1,"panel-content"],[1,"dl-horizontal",2,"margin-top","0"],[1,"dl-horizontal"],[4,"ngIf"],["yaDataTable","",1,"expand"],[1,"expand"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"wrap200"],[1,"tree","mono"],["class","tree mono",4,"ngIf"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," System "),t.qZA(),t.YNc(3,Fc,109,45,"div",0),t.ALo(4,"async"),t.qZA(),t.YNc(5,Vc,12,9,"ng-template",null,1,t.W1O)),2&n&&(t.xp6(3),t.Q6J("ngIf",t.lcZ(4,1,o.info$)))},dependencies:[m.sg,m.O5,m.tP,l.Gj,y,A,m.Ov,m.JJ,l.id,l.uG,l.bP],styles:["table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}.tree[_ngcontent-%COMP%]{white-space:pre;color:var(--y-accent)}"],changeDetection:0})}return e})();function Kc(e,i){if(1&e&&(t.TgZ(0,"small"),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij("(line: ",a.element.lineNumber,")")}}let jt=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-trace-element"]],inputs:{element:"element"},decls:4,vars:5,consts:[[3,"innerHTML"],[4,"ngIf"]],template:function(n,o){1&n&&(t._UZ(0,"span",0),t.ALo(1,"classNameHtml"),t._uU(2),t.YNc(3,Kc,2,1,"small",1)),2&n&&(t.Q6J("innerHTML",t.lcZ(1,3,o.element.className),t.oJD),t.xp6(2),t.hij(".",o.element.methodName,"\n"),t.xp6(1),t.Q6J("ngIf",o.element.lineNumber))},dependencies:[m.O5,l.f8],encapsulation:2,changeDetection:0})}return e})();function Wc(e,i){1&e&&(t.TgZ(0,"mat-icon",7),t._uU(1,"check"),t.qZA())}function tl(e,i){1&e&&(t.TgZ(0,"mat-icon",7),t._uU(1,"close"),t.qZA())}function el(e,i){1&e&&(t.TgZ(0,"mat-icon",7),t._uU(1,"check"),t.qZA())}function al(e,i){1&e&&(t.TgZ(0,"mat-icon",7),t._uU(1,"close"),t.qZA())}function nl(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"app-trace-element",10),t.qZA()()),2&e){const a=i.$implicit;t.xp6(2),t.Q6J("element",a)}}function il(e,i){if(1&e&&(t.TgZ(0,"table",8),t.YNc(1,nl,3,1,"tr",9),t.qZA()),2&e){const a=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",a.trace)}}function ol(e,i){1&e&&(t.ynx(0),t._uU(1,"Information not available"),t.BQk())}function sl(e,i){if(1&e&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",1)(3,"mat-icon"),t._uU(4,"arrow_back"),t.qZA()(),t._uU(5),t.qZA(),t.TgZ(6,"div",2)(7,"dl",3)(8,"dt"),t._uU(9,"ID"),t.qZA(),t.TgZ(10,"dd"),t._uU(11),t.qZA(),t.TgZ(12,"dt"),t._uU(13,"Name"),t.qZA(),t.TgZ(14,"dd"),t._uU(15),t.qZA(),t.TgZ(16,"dt"),t._uU(17,"Native"),t.qZA(),t.TgZ(18,"dd"),t.YNc(19,Wc,2,0,"mat-icon",4),t.YNc(20,tl,2,0,"mat-icon",4),t.qZA(),t.TgZ(21,"dt"),t._uU(22,"Suspended"),t.qZA(),t.TgZ(23,"dd"),t.YNc(24,el,2,0,"mat-icon",4),t.YNc(25,al,2,0,"mat-icon",4),t.qZA(),t.TgZ(26,"dt"),t._uU(27,"Group"),t.qZA(),t.TgZ(28,"dd"),t._uU(29),t.qZA()(),t.TgZ(30,"div",5),t._UZ(31,"mat-divider"),t.qZA(),t.TgZ(32,"h4"),t._uU(33,"Stack trace"),t.qZA(),t.YNc(34,il,2,1,"table",6),t.YNc(35,ol,2,0,"ng-container",0),t.qZA()()),2&e){const a=i.ngIf;t.xp6(5),t.hij(" ",a.name," "),t.xp6(6),t.Oqu(a.id),t.xp6(4),t.Oqu(a.name),t.xp6(4),t.Q6J("ngIf",a.native),t.xp6(1),t.Q6J("ngIf",!a.native),t.xp6(4),t.Q6J("ngIf",a.suspended),t.xp6(1),t.Q6J("ngIf",!a.suspended),t.xp6(4),t.Oqu((null==a.group?null:a.group.name)||"-"),t.xp6(5),t.Q6J("ngIf",a.trace),t.xp6(1),t.Q6J("ngIf",!a.trace)}}let zt=(()=>{class e{constructor(a,n,o){this.yamcs=n,this.title=o,this.thread$=new Z.X(null),a.paramMap.subscribe(s=>{const c=s.get("id");this.changeThread(Number(c))})}changeThread(a){this.yamcs.yamcsClient.getThread(a).then(n=>{this.thread$.next(n),this.title.setTitle(n.name)})}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(_.gz),t.Y36(l.C8),t.Y36(b.Dx))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-icon-button","","routerLink","..","color","primary"],[1,"panel-content","ya-link"],[1,"dl-horizontal"],["class","icon14",4,"ngIf"],[1,"section-divider"],["yaDataTable","",4,"ngIf"],[1,"icon14"],["yaDataTable",""],[4,"ngFor","ngForOf"],[3,"element"]],template:function(n,o){1&n&&(t.YNc(0,sl,36,10,"app-admin-page",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,o.thread$))},dependencies:[m.sg,m.O5,_.rH,l.Gj,C.o6,v.Hw,Q.d,y,A,jt,m.Ov],encapsulation:2,changeDetection:0})}return e})();var rl=f(8645);function cl(e,i){1&e&&(t.TgZ(0,"th",18),t._uU(1,"ID"),t.qZA())}function ll(e,i){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Oqu(a.id)}}function pl(e,i){1&e&&(t.TgZ(0,"th",18),t._uU(1,"Name"),t.qZA())}function ml(e,i){if(1&e&&(t.TgZ(0,"td",19)(1,"a",20),t._uU(2),t.qZA()()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("routerLink",a.id),t.xp6(1),t.hij(" ",a.name," ")}}function ul(e,i){1&e&&t._UZ(0,"th",21)}function _l(e,i){if(1&e&&(t.TgZ(0,"mat-icon",24),t._uU(1,"playlist_play"),t.qZA()),2&e){const a=t.oxw().$implicit;t.Q6J("matTooltip",a.state)}}function dl(e,i){if(1&e&&(t.TgZ(0,"mat-icon",24),t._uU(1,"timer"),t.qZA()),2&e){const a=t.oxw().$implicit;t.Q6J("matTooltip",a.state)}}function gl(e,i){if(1&e&&(t.TgZ(0,"mat-icon",24),t._uU(1,"pause"),t.qZA()),2&e){const a=t.oxw().$implicit;t.Q6J("matTooltip",a.state)}}function fl(e,i){if(1&e&&(t.TgZ(0,"mat-icon",24),t._uU(1,"block"),t.qZA()),2&e){const a=t.oxw().$implicit;t.Q6J("matTooltip",a.state)}}function hl(e,i){if(1&e&&(t.TgZ(0,"td",22),t.YNc(1,_l,2,1,"mat-icon",23),t.YNc(2,dl,2,1,"mat-icon",23),t.YNc(3,gl,2,1,"mat-icon",23),t.YNc(4,fl,2,1,"mat-icon",23),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngIf","RUNNABLE"===a.state),t.xp6(1),t.Q6J("ngIf","TIMED_WAITING"===a.state),t.xp6(1),t.Q6J("ngIf","WAITING"===a.state),t.xp6(1),t.Q6J("ngIf","BLOCKED"===a.state)}}function Tl(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Native"),t.qZA())}function Zl(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"check"),t.qZA())}function bl(e,i){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function xl(e,i){if(1&e&&(t.TgZ(0,"td",19),t.YNc(1,Zl,2,0,"mat-icon",26),t.YNc(2,bl,2,0,"ng-container",26),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngIf",a.native),t.xp6(1),t.Q6J("ngIf",!a.native)}}function yl(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Suspended"),t.qZA())}function Al(e,i){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"check"),t.qZA())}function Ul(e,i){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function vl(e,i){if(1&e&&(t.TgZ(0,"td",19),t.YNc(1,Al,2,0,"mat-icon",26),t.YNc(2,Ul,2,0,"ng-container",26),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngIf",a.suspended),t.xp6(1),t.Q6J("ngIf",!a.suspended)}}function Cl(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Group"),t.qZA())}function wl(e,i){if(1&e&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",(null==a.group?null:a.group.name)||"-"," ")}}function ql(e,i){1&e&&(t.TgZ(0,"th",25),t._uU(1,"Frame"),t.qZA())}function Dl(e,i){if(1&e&&t._UZ(0,"app-trace-element",28),2&e){const a=t.oxw().$implicit;t.Q6J("element",a.trace[0])}}function Sl(e,i){1&e&&(t.ynx(0),t._uU(1,"-"),t.BQk())}function Pl(e,i){if(1&e&&(t.TgZ(0,"td",19),t.YNc(1,Dl,1,1,"app-trace-element",27),t.YNc(2,Sl,2,0,"ng-container",26),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngIf",a.trace),t.xp6(1),t.Q6J("ngIf",!a.trace)}}function Yl(e,i){1&e&&t._UZ(0,"th",29)}function Nl(e,i){1&e&&t._UZ(0,"td",19)}function kl(e,i){1&e&&t._UZ(0,"tr",30)}function Ql(e,i){1&e&&t._UZ(0,"tr",31)}function Il(e,i){if(1&e&&(t.TgZ(0,"table",1),t.ynx(1,2),t.YNc(2,cl,2,0,"th",3),t.YNc(3,ll,2,1,"td",4),t.BQk(),t.ynx(4,5),t.YNc(5,pl,2,0,"th",3),t.YNc(6,ml,3,2,"td",4),t.BQk(),t.ynx(7,6),t.YNc(8,ul,1,0,"th",7),t.YNc(9,hl,5,4,"td",8),t.BQk(),t.ynx(10,9),t.YNc(11,Tl,2,0,"th",10),t.YNc(12,xl,3,2,"td",4),t.BQk(),t.ynx(13,11),t.YNc(14,yl,2,0,"th",10),t.YNc(15,vl,3,2,"td",4),t.BQk(),t.ynx(16,12),t.YNc(17,Cl,2,0,"th",10),t.YNc(18,wl,2,1,"td",4),t.BQk(),t.ynx(19,13),t.YNc(20,ql,2,0,"th",10),t.YNc(21,Pl,3,2,"td",4),t.BQk(),t.ynx(22,14),t.YNc(23,Yl,1,0,"th",15),t.YNc(24,Nl,1,0,"td",4),t.BQk(),t.YNc(25,kl,1,0,"tr",16),t.YNc(26,Ql,1,0,"tr",17),t.qZA()),2&e){const a=t.oxw();t.Q6J("dataSource",a.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns)}}let Jl=(()=>{class e{constructor(){this.displayedColumns=["id","state","name","trace","native","suspended","group","actions"],this.dataSource=new r.by}ngAfterViewInit(){this.dataSource.filterPredicate=(a,n)=>a.name.toLowerCase().indexOf(n)>=0,this.dataSource.sort=this.sort}ngOnChanges(){this.dataSource.data=this.threads||[],this.dataSource.filter=this.filter}static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-threads-table"]],viewQuery:function(n,o){if(1&n&&t.Gf(h.YE,5),2&n){let s;t.iGM(s=t.CRH())&&(o.sort=s.first)}},inputs:{threads:"threads",filter:"filter"},features:[t.TTD],decls:1,vars:1,consts:[["mat-table","","class","ya-data-table expand","matSort","","matSortActive","id","matSortDirection","desc","matSortDisableClear","",3,"dataSource",4,"ngIf"],["mat-table","","matSort","","matSortActive","id","matSortDirection","desc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","state"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status",4,"matCellDef"],["matColumnDef","native"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","suspended"],["matColumnDef","group"],["matColumnDef","trace"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"status"],["mat-cell","",1,"status"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],["mat-header-cell",""],[4,"ngIf"],[3,"element",4,"ngIf"],[3,"element"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(n,o){1&n&&t.YNc(0,Il,27,3,"table",0),2&n&&t.Q6J("ngIf",o.dataSource)},dependencies:[m.O5,_.rH,v.Hw,h.YE,h.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,D.gM,jt],encapsulation:2,changeDetection:0})}return e})();function Ol(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" ALL (",t.lcZ(1,1,a.allThreadCount$),") ")}}function Rl(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" RUNNABLE (",t.lcZ(1,1,a.runnableThreadCount$),") ")}}function Ll(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" TIMED WAITING (",t.lcZ(1,1,a.timedWaitingThreadCount$),") ")}}function $l(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" WAITING (",t.lcZ(1,1,a.waitingThreadCount$),") ")}}function Ml(e,i){if(1&e&&(t._uU(0),t.ALo(1,"async")),2&e){const a=t.oxw();t.hij(" BLOCKED (",t.lcZ(1,1,a.blockedThreadCount$),") ")}}const Fl=[{path:"",canActivate:[j.r,Vt.h,(e,i)=>(0,t.f3M)(z).canActivate(e,i)],canActivateChild:[j.q],runGuardsAndResolvers:"always",component:Gt,children:[{path:"",pathMatch:"full",component:et},{path:"http-traffic",canActivate:[Y],component:At},{path:"sessions",canActivate:[q],component:Ht},{path:"routes",canActivate:[Y],component:Ft},{path:"leap-seconds",canActivate:[Y],component:Jt},{path:"processor-types",canActivate:[Y],component:Ot},{path:"replication",canActivate:[Y],component:Lt},{path:"services",canActivate:[(e,i)=>(0,t.f3M)(W).canActivate(e,i)],component:Bt},{path:"databases",canActivate:[V],children:[{path:"",pathMatch:"full",component:yt},{path:":database",component:ot,children:[{path:"",pathMatch:"full",redirectTo:"tables"},{path:"tables",pathMatch:"full",component:xt},{path:"tables/:table",component:Zt,children:[{path:"",pathMatch:"full",redirectTo:"info"},{path:"info",component:Tt},{path:"data",component:ht},{path:"script",component:bt}]},{path:"shell",pathMatch:"full",component:ct},{path:"streams",pathMatch:"full",component:ft},{path:"streams/:stream",component:ut,children:[{path:"",pathMatch:"full",redirectTo:"columns"},{path:"columns",component:lt},{path:"data",component:mt},{path:"script",component:gt}]}]}]},{path:"rocksdb",runGuardsAndResolvers:"always",canActivate:[V],children:[{path:"",pathMatch:"full",redirectTo:"databases"},{path:"databases",pathMatch:"full",component:Mt},{path:"databases/:tablespace",children:[{path:"**",component:$t}]}]},{path:"iam/service-accounts",pathMatch:"full",component:kt,canActivate:[q]},{path:"iam/service-accounts/create",pathMatch:"full",component:Ct,canActivate:[q]},{path:"iam/users",pathMatch:"full",component:It,canActivate:[q]},{path:"iam/users/create",pathMatch:"full",component:wt,canActivate:[q]},{path:"iam/users/:username",pathMatch:"full",component:Qt,canActivate:[q]},{path:"iam/users/:username/edit",pathMatch:"full",component:Dt,canActivate:[q]},{path:"iam/groups",pathMatch:"full",component:Pt,canActivate:[q]},{path:"iam/groups/create",pathMatch:"full",component:vt,canActivate:[q]},{path:"iam/groups/:name",pathMatch:"full",component:St,canActivate:[q]},{path:"iam/groups/:name/edit",pathMatch:"full",component:qt,canActivate:[q]},{path:"iam/roles",pathMatch:"full",component:Nt,canActivate:[q]},{path:"iam/roles/:name",pathMatch:"full",component:Yt,canActivate:[q]},{path:"threads",pathMatch:"full",component:(()=>{class e{constructor(a,n,o,s,c){this.yamcs=a,this.route=o,this.router=s,this.filterControl=new p.p4,this.filterValue$=new Z.X(null),this.allThreads$=new rl.x,this.allThreadCount$=this.allThreads$.pipe((0,w.U)(u=>u.length)),this.runnableThreads$=this.allThreads$.pipe((0,w.U)(u=>u.filter(g=>"RUNNABLE"===g.state))),this.runnableThreadCount$=this.runnableThreads$.pipe((0,w.U)(u=>u.length)),this.timedWaitingThreads$=this.allThreads$.pipe((0,w.U)(u=>u.filter(g=>"TIMED_WAITING"===g.state))),this.timedWaitingThreadCount$=this.timedWaitingThreads$.pipe((0,w.U)(u=>u.length)),this.waitingThreads$=this.allThreads$.pipe((0,w.U)(u=>u.filter(g=>"WAITING"===g.state))),this.waitingThreadCount$=this.waitingThreads$.pipe((0,w.U)(u=>u.length)),this.blockedThreads$=this.allThreads$.pipe((0,w.U)(u=>u.filter(g=>"BLOCKED"===g.state))),this.blockedThreadCount$=this.blockedThreads$.pipe((0,w.U)(u=>u.length)),n.setTitle("Threads"),this.threadDumpURL=a.yamcsClient.getThreadDumpURL(),this.refresh(),this.syncSubscription=c.syncSlow(()=>this.refresh())}refresh(){this.yamcs.yamcsClient.getThreads().then(a=>{this.allThreads$.next(a.threads||[])})}ngAfterViewInit(){const a=this.route.snapshot.queryParamMap;a.has("filter")&&(this.filterControl.setValue(a.get("filter")),this.filterValue$.next(a.get("filter").toLowerCase())),this.filterControl.valueChanges.subscribe(()=>{this.updateURL(),this.filterValue$.next((this.filterControl.value||"").toLowerCase())})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filterControl.value||null},queryParamsHandling:"merge"})}ngOnDestroy(){this.syncSubscription&&this.syncSubscription.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(l.C8),t.Y36(b.Dx),t.Y36(_.gz),t.Y36(_.F0),t.Y36(l.jF))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["ng-component"]],decls:41,vars:33,consts:[["mat-button","","color","primary",3,"href"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter threads",3,"formControl"],["animationDuration","0ms",1,"secondary",3,"mat-stretch-tabs"],["mat-tab-label",""],[3,"threads","filter"]],template:function(n,o){1&n&&(t.TgZ(0,"app-admin-page")(1,"app-admin-toolbar"),t._uU(2," Threads \xa0\xa0\xa0 "),t.TgZ(3,"a",0)(4,"mat-icon"),t._uU(5,"notes"),t.qZA(),t._uU(6," Text dump "),t.qZA()(),t.TgZ(7,"div",1)(8,"div",2),t._UZ(9,"ya-search-filter",3),t.qZA(),t.TgZ(10,"mat-tab-group",4)(11,"mat-tab"),t.YNc(12,Ol,2,3,"ng-template",5),t._UZ(13,"br")(14,"app-threads-table",6),t.ALo(15,"async"),t.ALo(16,"async"),t.qZA(),t.TgZ(17,"mat-tab"),t.YNc(18,Rl,2,3,"ng-template",5),t._UZ(19,"br")(20,"app-threads-table",6),t.ALo(21,"async"),t.ALo(22,"async"),t.qZA(),t.TgZ(23,"mat-tab"),t.YNc(24,Ll,2,3,"ng-template",5),t._UZ(25,"br")(26,"app-threads-table",6),t.ALo(27,"async"),t.ALo(28,"async"),t.qZA(),t.TgZ(29,"mat-tab"),t.YNc(30,$l,2,3,"ng-template",5),t._UZ(31,"br")(32,"app-threads-table",6),t.ALo(33,"async"),t.ALo(34,"async"),t.qZA(),t.TgZ(35,"mat-tab"),t.YNc(36,Ml,2,3,"ng-template",5),t._UZ(37,"br")(38,"app-threads-table",6),t.ALo(39,"async"),t.ALo(40,"async"),t.qZA()()()()),2&n&&(t.xp6(3),t.Q6J("href",o.threadDumpURL,t.LSH),t.xp6(6),t.Q6J("formControl",o.filterControl),t.xp6(1),t.Q6J("mat-stretch-tabs",!1),t.xp6(4),t.Q6J("threads",t.lcZ(15,13,o.allThreads$))("filter",t.lcZ(16,15,o.filterValue$)),t.xp6(6),t.Q6J("threads",t.lcZ(21,17,o.runnableThreads$))("filter",t.lcZ(22,19,o.filterValue$)),t.xp6(6),t.Q6J("threads",t.lcZ(27,21,o.timedWaitingThreads$))("filter",t.lcZ(28,23,o.filterValue$)),t.xp6(6),t.Q6J("threads",t.lcZ(33,25,o.waitingThreads$))("filter",t.lcZ(34,27,o.filterValue$)),t.xp6(6),t.Q6J("threads",t.lcZ(39,29,o.blockedThreads$))("filter",t.lcZ(40,31,o.filterValue$)))},dependencies:[p.JJ,p.oH,C.zs,v.Hw,P.uD,P.uX,P.SP,l.cF,y,A,Jl,m.Ov],encapsulation:2,changeDetection:0})}return e})(),canActivate:[Y]},{path:"threads/:id",component:zt,canActivate:[Y]},{path:"system",pathMatch:"full",component:Et,canActivate:[Y]}]}];let Bl=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[_.Bz.forChild(Fl),_.Bz]})}return e})(),Gl=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[E.m]})}return e})(),El=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#e=this.\u0275mod=t.oAB({type:e});static#a=this.\u0275inj=t.cJS({imports:[E.m,Gl,Bl]})}return e})()}}]);