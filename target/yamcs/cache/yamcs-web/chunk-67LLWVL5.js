import{a as zt}from"./chunk-6BUZTTN5.js";import{a as Wi}from"./chunk-7QLPMAWZ.js";import{a as zi}from"./chunk-EL7VJGKE.js";import"./chunk-LYLI3P7F.js";import"./chunk-ISJZ4IJQ.js";import{$a as fi,Aa as o,Ae as Wt,B as Fe,Ba as C,Bb as mt,Bd as Fi,C as at,Ca as g,Cd as gt,Da as ot,Db as de,Dd as bt,Ea as oi,Eb as Ie,F as b,Fc as Ti,Ga as T,Gb as Bt,Gc as Di,H as At,Ha as Xe,Hc as Nt,Hd as Qt,Ia as ve,Ib as Q,Ic as Ei,J as Rt,Ja as lt,Jb as Ae,Jc as wi,Jd as be,K as R,Ka as pi,L as k,La as h,Ma as v,Mb as Re,Mc as Le,Md as ft,Na as Be,Nb as ke,Nc as Mi,Oa as di,Oc as Ii,Od as Pi,Pc as Ai,Qb as $e,Qc as N,R as Mt,Rc as Se,Rd as Bi,Re as M,Sc as q,Tc as ee,U as pt,Uc as re,Ue as Tt,V as kt,Ve as D,Wa as dt,Wc as Z,We as Ue,X as m,Xa as xt,Xc as te,Xe as Yi,Y as f,Yb as Ye,Yd as xe,Ye as Qi,Za as ui,Zc as K,Zd as Hi,_a as j,_b as Y,_c as le,_d as _t,aa as c,ad as ie,ba as $t,bc as rt,bd as ne,be as we,ca as u,cb as _i,ce as Vi,d as mi,da as ci,dc as Si,dd as J,de as ji,e as G,ea as Me,eb as yt,ec as vi,ed as W,fc as xi,fd as Ot,ga as S,gc as Qe,gd as Gt,ha as B,hc as Ht,hd as Yt,i as Te,ia as H,ib as $,ic as He,id as Ri,ie as ht,ja as V,jd as ki,ka as n,kd as $i,la as i,lb as Ft,le as ye,ma as d,mb as L,mc as Ce,na as x,nb as ut,nc as Vt,ne as Ui,o as It,oa as y,ob as z,oc as jt,p as si,pa as ai,pb as X,pc as Ve,qa as U,qb as hi,qc as Ut,ra as I,rc as We,re as Ni,sa as _,sc as je,se as Oi,ta as Lt,tc as ze,te as Ct,ua as vt,uc as qe,vb as Ci,vc as Ze,wa as me,wb as Pt,wc as Ke,we as Gi,xa as se,xc as yi,ya as ce,yc as gi,yd as et,z as nt,za as Ee,zb as Ge,zc as bi,zd as Li}from"./chunk-YLFXKKOP.js";var qi=(e,t)=>at(ia).canActivate(e,t);var ia=(()=>{let t=class t{constructor(l,a){this.authService=l,this.router=a}canActivate(l,a){return this.authService.getUser().hasSystemPrivilege("web.AccessAdminArea")?!0:(this.router.navigate(["/403"],{queryParams:{page:a.url}}),!1)}canActivateChild(l,a){return this.canActivate(l,a)}};t.\u0275fac=function(a){return new(a||t)(Fe(Ue),Fe(z))},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Ne=(e,t)=>at(na).canActivate(e,t);var na=(()=>{let t=class t{constructor(l,a){this.authService=l,this.router=a}canActivate(l,a){return this.authService.getUser().hasSystemPrivilege("ControlAccess")?!0:(this.router.navigate(["/403"],{queryParams:{page:a.url}}),!1)}canActivateChild(l,a){return this.canActivate(l,a)}};t.\u0275fac=function(a){return new(a||t)(Fe(Ue),Fe(z))},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ri=(e,t)=>at(aa).canActivate(e,t);var aa=(()=>{let t=class t{constructor(l,a){this.authService=l,this.router=a}canActivate(l,a){return this.authService.getUser().hasSystemPrivilege("ControlArchiving")?!0:(this.router.navigate(["/403"],{queryParams:{page:a.url}}),!1)}canActivateChild(l,a){return this.canActivate(l,a)}};t.\u0275fac=function(a){return new(a||t)(Fe(Ue),Fe(z))},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Zi=(e,t)=>at(oa).canActivate(e,t);var oa=(()=>{let t=class t{constructor(l,a){this.authService=l,this.router=a}canActivate(l,a){return this.authService.getUser().hasSystemPrivilege("ControlServices")?!0:(this.router.navigate(["/403"],{queryParams:{page:a.url}}),!1)}canActivateChild(l,a){return this.canActivate(l,a)}};t.\u0275fac=function(a){return new(a||t)(Fe(Ue),Fe(z))},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var st=(e,t)=>at(ra).canActivate(e,t);var ra=(()=>{let t=class t{constructor(l,a){this.authService=l,this.router=a}canActivate(l,a){return this.authService.getUser().hasSystemPrivilege("ReadSystemInfo")?!0:(this.router.navigate(["/403"],{queryParams:{page:a.url}}),!1)}canActivateChild(l,a){return this.canActivate(l,a)}};t.\u0275fac=function(a){return new(a||t)(Fe(Ue),Fe(z))},t.\u0275prov=nt({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var la=[[["app-admin-toolbar"]],[["ya-detail-pane"]],"*"],ma=["app-admin-toolbar","ya-detail-pane","*"],F=(()=>{let t=class t{constructor(){this.noscroll=!1}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=b({type:t,selectors:[["app-admin-page"]],inputs:{noscroll:"noscroll"},standalone:!0,features:[T],ngContentSelectors:ma,decls:4,vars:2,consts:[[1,"page-content"]],template:function(a,s){a&1&&(Lt(la),vt(0),n(1,"div",0),vt(2,1),vt(3,2),i()),a&2&&(m(),ci("overflow",s.noscroll?"hidden":"auto"))},dependencies:[D],styles:[".page-content[_ngcontent-%COMP%]{position:absolute;inset:49px 0 0;overflow:auto;font:400 12px/20px Roboto,sans-serif}"],changeDetection:0});let e=t;return e})();var ca=["*"],P=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=b({type:t,selectors:[["app-admin-toolbar"]],standalone:!0,features:[T],ngContentSelectors:ca,decls:4,vars:0,consts:[[1,"top"],[2,"flex","1 1 auto"]],template:function(a,s){a&1&&(Lt(),n(0,"mat-toolbar",0)(1,"mat-toolbar-row"),vt(2),d(3,"span",1),i()())},dependencies:[D,jt,Vt],styles:["mat-toolbar[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);background-color:var(--y-background-color);box-sizing:content-box}mat-toolbar-row[_ngcontent-%COMP%]{padding-left:24px}.hide[_ngcontent-%COMP%]{visibility:hidden}.toolbar-text[_ngcontent-%COMP%]{font-size:12px}"],changeDetection:0});let e=t;return e})();var pa=["intervalSelect"],da=()=>["detail"];function ua(e,t){if(e&1){let r=U();d(0,"ya-date-time-input",7)(1,"ya-date-time-input",8),n(2,"button",9),I("click",function(){R(r);let a=_();return k(a.applyCustomDates())}),o(3," Apply "),i()}if(e&2){let r=_();m(2),u("disabled",r.filterForm.invalid)}}function fa(e,t){if(e&1){let r=U();n(0,"button",10),I("click",function(){R(r);let a=_();return k(a.jumpToNow())}),o(1,"Jump to now"),i()}}function _a(e,t){if(e&1&&(n(0,"td",24),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.item.time.substring(11,16)," ")}}function ha(e,t){if(e&1&&(n(0,"td",25),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.item.user||"-"," ")}}function Ca(e,t){if(e&1&&(n(0,"td",26),d(1,"span",27),h(2,"actionLogFormat"),i()),e&2){let r=t.$implicit;m(),u("innerHTML",v(2,1,r.item.summary)||"-",pt)}}function Sa(e,t){e&1&&(n(0,"mat-icon"),o(1,"expand_less"),i())}function va(e,t){e&1&&(n(0,"mat-icon"),o(1,"expand_more"),i())}function xa(e,t){if(e&1&&(n(0,"td",28),c(1,Sa,2,0,"mat-icon")(2,va,2,0,"mat-icon"),i()),e&2){let r=t.$implicit;m(),S(r.expanded?1:2)}}function ya(e,t){if(e&1&&(n(0,"dt",31),o(1),i(),n(2,"dd"),o(3),i()),e&2){let r=t.$implicit;m(),C(r.key),m(2),C(r.value||"")}}function ga(e,t){if(e&1&&(n(0,"td",29)(1,"dl",30)(2,"dt"),o(3,"Service"),i(),n(4,"dd"),o(5),i(),n(6,"dt"),o(7,"Method"),i(),n(8,"dd"),o(9),i(),H(10,ya,4,2,null,null,B),i()()),e&2){let r=t.$implicit,l=_(2);$t("colspan",l.displayedColumns.length),m(5),C(r.item.service),m(4),C(r.item.method),m(),V(r.requestOptions)}}function ba(e,t){if(e&1){let r=U();n(0,"tr",32),I("click",function(){let a=R(r).$implicit;return k(a.expanded=!a.expanded)}),i()}if(e&2){let r=t.$implicit;Me("expanded",r.expanded)}}function Ta(e,t){if(e&1){let r=U();n(0,"tr",33),I("click",function(){let a=R(r).$implicit;return k(a.expanded=!a.expanded)}),i()}if(e&2){let r=t.$implicit;Me("expanded",r.expanded)}}function Da(e,t){if(e&1&&(n(0,"h4"),o(1),i(),n(2,"table",11),x(3,12),c(4,_a,2,1,"td",13),y(),x(5,14),c(6,ha,2,1,"td",15),y(),x(7,16),c(8,Ca,3,3,"td",17),y(),x(9,18),c(10,xa,3,1,"td",19),y(),x(11,20),c(12,ga,12,3,"td",21),y(),c(13,ba,1,2,"tr",22)(14,Ta,1,2,"tr",23),i()),e&2){let r=t.$implicit,l=t.$index,a=_();Me("first",l===0),m(),C(r.grouper),m(),u("dataSource",r.dataSource),m(11),u("matRowDefColumns",a.displayedColumns),m(),u("matRowDefColumns",Xe(6,da))}}function Ea(e,t){e&1&&(n(0,"ya-empty-message"),o(1,"No actions for the current filter criteria."),i())}var qt="NO_LIMIT",Ki=(()=>{let t=class t{constructor(l,a,s,p,E){this.yamcs=l,this.router=a,this.route=s,this.messageService=p,this.filterForm=new Bt({filter:new Q,interval:new Q(qt),customStart:new Q(null),customStop:new Q(null)}),this.displayedColumns=["time","user","summary","actions"],this.intervalOptions=[{id:"PT1H",label:"Last hour"},{id:"PT6H",label:"Last 6 hours"},{id:"P1D",label:"Last 24 hours"},{id:"NO_LIMIT",label:"No limit"},{id:"CUSTOM",label:"Custom",group:!0}],this.rowGroups$=new G([]),E.setTitle("Admin Area"),this.initializeOptions(),this.loadData(),this.filterForm.get("filter").valueChanges.pipe(si(400)).forEach(w=>{this.filter=w,this.loadData()}),this.filterForm.get("interval").valueChanges.forEach(w=>{if(w==="CUSTOM"){let oe=new Date,pe=this.validStart||oe,he=this.validStop||oe;this.filterForm.get("customStart").setValue(et.toISOString(pe)),this.filterForm.get("customStop").setValue(et.toISOString(he))}else w==="NO_LIMIT"?(this.validStart=null,this.validStop=null,this.appliedInterval=w,this.loadData()):(this.validStop=new Date,this.validStart=et.subtractDuration(this.validStop,w),this.appliedInterval=w,this.loadData())})}initializeOptions(){let l=this.route.snapshot.queryParamMap;if(l.has("filter")&&(this.filter=l.get("filter")||"",this.filterForm.get("filter").setValue(this.filter)),l.has("interval"))if(this.appliedInterval=l.get("interval"),this.filterForm.get("interval").setValue(this.appliedInterval),this.appliedInterval==="CUSTOM"){let a=l.get("customStart");this.filterForm.get("customStart").setValue(a),this.validStart=et.toDate(a);let s=l.get("customStop");this.filterForm.get("customStop").setValue(s),this.validStop=et.toDate(s)}else this.appliedInterval==="NO_LIMIT"?(this.validStart=null,this.validStop=null):(this.validStop=new Date,this.validStart=et.subtractDuration(this.validStop,this.appliedInterval));else this.appliedInterval=qt,this.validStop=null,this.validStart=null}jumpToNow(){let l=this.filterForm.value.interval;l==="NO_LIMIT"?this.filterForm.get("interval").setValue(qt):l==="CUSTOM"?this.filterForm.get("interval").setValue(qt):(this.validStop=new Date,this.validStart=et.subtractDuration(this.validStop,l),this.loadData())}applyCustomDates(){this.validStart=et.toDate(this.filterForm.value.customStart),this.validStop=et.toDate(this.filterForm.value.customStop),this.appliedInterval="CUSTOM",this.loadData()}loadData(){this.updateURL();let l={};this.validStart&&(l.start=this.validStart.toISOString()),this.validStop&&(l.stop=this.validStop.toISOString()),this.filter&&(l.q=this.filter);let a=new Date().toISOString().substr(0,10),s=et.subtractDuration(new Date,"P1D").toISOString().substr(0,10);this.yamcs.yamcsClient.getAuditRecords("_global",l).then(p=>{let E=this.groupByDay(p.records||[]).map(w=>{let oe=new W;oe.data=w.map(he=>{let _e=[{key:"Request",value:""}];return he.request&&this.flatten(he.request,_e,"    "),{item:he,expanded:!1,requestOptions:_e}});let pe=w[0].time.substr(0,10);return pe===a?pe="Today":pe===s&&(pe="Yesterday"),{grouper:pe,dataSource:oe}});this.rowGroups$.next(E)}).catch(p=>this.messageService.showError(p))}loadMoreData(){}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filter||null,interval:this.appliedInterval,customStart:this.appliedInterval==="CUSTOM"?this.filterForm.value.customStart:null,customStop:this.appliedInterval==="CUSTOM"?this.filterForm.value.customStop:null},queryParamsHandling:"merge"})}groupByDay(l){let a=[],s,p=[];for(let E of l){let w=E.time.substr(0,10);w!==s&&(s=w,p.length&&(a.push(p),p=[])),p.push(E)}return p.length&&a.push(p),a}flatten(l,a,s=""){for(let p in l){let E=l[p];if(Array.isArray(E)){a.push({key:s+p,value:""});for(let w=0;w<E.length;w++)a.push({key:s+"    "+p+" "+(w+1),value:E[w]})}else typeof E=="object"?(a.push({key:s+p,value:""}),this.flatten(E,a,s+"    ")):a.push({key:s+p,value:""+E})}}};t.\u0275fac=function(a){return new(a||t)(f(M),f(z),f(L),f(xe),f($))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],viewQuery:function(a,s){if(a&1&&me(pa,5),a&2){let p;se(p=ce())&&(s.intervalSelect=p.first)}},standalone:!0,features:[T],decls:16,vars:8,consts:[["intervalSelect",""],[1,"panel-content"],[3,"formGroup"],[1,"filter-bar"],["formControlName","filter","placeholder","Filter by text search"],["icon","access_time","formControlName","interval",3,"options"],[1,"ya-button"],["formControlName","customStart"],["formControlName","customStop"],[1,"ya-button",3,"click","disabled"],[1,"ya-button",3,"click"],["mat-table","","multiTemplateDataRows","",1,"ya-data-table",2,"border-top","1px solid rgba(0, 0, 0, 0.1)",3,"dataSource"],["matColumnDef","time"],["mat-cell","","style","width: 100px",4,"matCellDef"],["matColumnDef","user"],["mat-cell","","style","width: 200px",4,"matCellDef"],["matColumnDef","summary"],["mat-cell","","style","width: 400px",4,"matCellDef"],["matColumnDef","actions"],["mat-cell","","style","text-align: right",4,"matCellDef"],["matColumnDef","detail"],["mat-cell","",4,"matCellDef"],["mat-row","","class","item-row",3,"expanded","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","item-detail",3,"expanded","click",4,"matRowDef","matRowDefColumns"],["mat-cell","",2,"width","100px"],["mat-cell","",2,"width","200px"],["mat-cell","",2,"width","400px"],[3,"innerHTML"],["mat-cell","",2,"text-align","right"],["mat-cell",""],[1,"dl-horizontal"],[2,"white-space","pre"],["mat-row","",1,"item-row",3,"click"],["mat-row","",1,"item-detail",3,"click"]],template:function(a,s){a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2,"Action log"),i(),n(3,"div",1)(4,"form",2)(5,"div",3),d(6,"ya-search-filter",4)(7,"ya-select",5,0),c(9,ua,4,1)(10,fa,2,0,"button",6),i()(),H(11,Da,15,7,null,null,B),h(13,"async"),c(14,Ea,2,0,"ya-empty-message"),h(15,"async"),i()()),a&2&&(m(4),u("formGroup",s.filterForm),m(3),u("options",s.intervalOptions),m(2),S(s.filterForm.value.interval==="CUSTOM"?9:10),m(2),V(v(13,4,s.rowGroups$)),m(3),S(v(15,6,s.rowGroups$).length?-1:14))},dependencies:[F,P,D,j,Ae,de,Ie,ke,$e,Y,q,Z,ee,ie,K,J,Fi,be,we,Qt,Ui],styles:["h4[_ngcontent-%COMP%]{margin-top:2em;margin-bottom:.5em;font-size:12px}h4.first[_ngcontent-%COMP%]{margin-top:0}tr.item-row.expanded[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:none}tr.item-detail[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-left:40px!important}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}tr.item-detail[_ngcontent-%COMP%]:not(.expanded){display:none}.dl-horizontal[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{border-right:1px solid #e5e5e5}.dl-horizontal[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%], .dl-horizontal[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{line-height:20px}.dl-horizontal[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{min-height:20px}.ya-data-table[_ngcontent-%COMP%]   tr.mat-mdc-row[_ngcontent-%COMP%]:hover{background:inherit}"],changeDetection:0});let e=t;return e})();function wa(e,t){e&1&&(n(0,"th",11),o(1,"Name"),i())}function Ma(e,t){if(e&1&&(n(0,"td",12)(1,"a",13),o(2),i()()),e&2){let r=t.$implicit;m(),u("routerLink",r.name),m(),g(" ",r.name," ")}}function Ia(e,t){e&1&&(n(0,"th",11),o(1,"Tablespace"),i())}function Aa(e,t){if(e&1&&(n(0,"td",12),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.tablespace," ")}}function Ra(e,t){e&1&&(n(0,"th",11),o(1,"Path"),i())}function ka(e,t){if(e&1&&(n(0,"td",12),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.path," ")}}function $a(e,t){e&1&&d(0,"th",14)}function La(e,t){e&1&&d(0,"td",12)}function Fa(e,t){e&1&&d(0,"tr",15)}function Pa(e,t){e&1&&d(0,"tr",16)}var Ji=(()=>{let t=class t{constructor(l,a,s){this.yamcs=l,this.displayedColumns=["name","tablespace","path","actions"],this.dataSource=new W,a.setTitle("Databases"),l.yamcsClient.getDatabases().then(p=>{this.dataSource.data=p}).catch(p=>s.showError(p))}ngAfterViewInit(){this.dataSource.sort=this.sort}};t.\u0275fac=function(a){return new(a||t)(f(M),f($),f(xe))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],viewQuery:function(a,s){if(a&1&&me(N,7),a&2){let p;se(p=ce())&&(s.sort=p.first)}},standalone:!0,features:[T],decls:19,vars:3,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","tablespace"],["matColumnDef","path"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,s){a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2,"Databases"),i(),n(3,"div",0)(4,"table",1),x(5,2),c(6,wa,2,0,"th",3)(7,Ma,3,2,"td",4),y(),x(8,5),c(9,Ia,2,0,"th",3)(10,Aa,2,1,"td",4),y(),x(11,6),c(12,Ra,2,0,"th",3)(13,ka,2,1,"td",4),y(),x(14,7),c(15,$a,1,0,"th",8)(16,La,1,0,"td",4),y(),c(17,Fa,1,0,"tr",9)(18,Pa,1,0,"tr",10),i()()()),a&2&&(m(4),u("dataSource",s.dataSource),m(13),u("matHeaderRowDef",s.displayedColumns),m(),u("matRowDefColumns",s.displayedColumns))},dependencies:[F,P,D,X,N,Se,q,re,le,Z,ee,ie,te,K,ne,J],encapsulation:2,changeDetection:0});let e=t;return e})();var Ba=e=>["/admin/databases",e],en=e=>["/admin/databases",e,"tables"],tn=e=>["/admin/databases",e,"streams"],Ha=e=>["/admin/databases",e,"shell"],Va=(e,t)=>["/admin/databases",e,"tables",t,"info"],ja=(e,t)=>["/admin/databases",e,"tables",t,"data"],Ua=(e,t)=>["/admin/databases",e,"tables",t,"script"],Na=(e,t)=>["/admin/databases",e,"streams",t,"columns"],Oa=(e,t)=>["/admin/databases",e,"streams",t,"data"],Ga=(e,t)=>["/admin/databases",e,"streams",t,"script"];function Ya(e,t){if(e&1&&(n(0,"a",12),o(1," Tables "),i()),e&2){let r=_(2);u("routerLink",ve(1,en,r.name))}}function Qa(e,t){if(e&1&&(n(0,"a",12),o(1," Streams "),i()),e&2){let r=_(2);u("routerLink",ve(1,tn,r.name))}}function Wa(e,t){if(e&1&&(n(0,"mat-icon",11),o(1,"navigate_next"),i(),c(2,Ya,2,3,"a",12)(3,Qa,2,3,"a",12),n(4,"mat-icon",11),o(5,"navigate_next"),i(),o(6)),e&2){let r=t;m(2),S(r.type==="table"?2:-1),m(),S(r.type==="stream"?3:-1),m(3),g(" ",r.name," ")}}function za(e,t){if(e&1&&(n(0,"a",15,1),o(2," Tables "),i(),n(3,"a",15,2),o(5," Streams "),i(),n(6,"a",15,3),o(8," DB Shell "),i()),e&2){let r=Ee(1),l=Ee(4),a=Ee(7),s=_();u("routerLink",ve(6,en,s.name))("active",r.isActive),m(3),u("routerLink",ve(8,tn,s.name))("active",l.isActive),m(3),u("routerLink",ve(10,Ha,s.name))("active",a.isActive)}}function qa(e,t){if(e&1&&(n(0,"a",15,4),o(2," Info "),i(),n(3,"a",15,5),o(5," Data "),i(),n(6,"a",15,6),o(8," Script "),i()),e&2){let r=Ee(1),l=Ee(4),a=Ee(7),s=_(),p=_();u("routerLink",lt(6,Va,p.name,s.name))("active",r.isActive),m(3),u("routerLink",lt(9,ja,p.name,s.name))("active",l.isActive),m(3),u("routerLink",lt(12,Ua,p.name,s.name))("active",a.isActive)}}function Za(e,t){if(e&1&&(n(0,"a",15,7),o(2," Columns "),i(),n(3,"a",15,8),o(5," Data "),i(),n(6,"a",15,9),o(8," Script "),i()),e&2){let r=Ee(1),l=Ee(4),a=Ee(7),s=_(),p=_();u("routerLink",lt(6,Na,p.name,s.name))("active",r.isActive),m(3),u("routerLink",lt(9,Oa,p.name,s.name))("active",l.isActive),m(3),u("routerLink",lt(12,Ga,p.name,s.name))("active",a.isActive)}}function Ka(e,t){if(e&1&&c(0,qa,9,15)(1,Za,9,15),e&2){let r=t;S(r.type==="table"?0:-1),m(),S(r.type==="stream"?1:-1)}}function Ja(e,t){if(e&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",10)(3,"mat-icon"),o(4,"account_tree"),i()(),n(5,"mat-icon",11),o(6,"navigate_next"),i(),n(7,"a",12),o(8),i(),c(9,Wa,7,3),h(10,"async"),i(),n(11,"nav",13),c(12,za,9,12),h(13,"async"),c(14,Ka,2,2),h(15,"async"),i(),n(16,"div",14)(17,"mat-tab-nav-panel",null,0),d(19,"router-outlet"),i()()()),e&2){let r,l,a=t,s=Ee(18),p=_();m(7),u("routerLink",ve(13,Ba,a.name)),m(),g(" ",a.name," "),m(),S((r=v(10,7,p.object$))?9:-1,r),m(2),u("mat-stretch-tabs",!1)("tabPanel",s),m(),S(v(13,9,p.object$)?-1:12),m(2),S((l=v(15,11,p.object$))?14:-1,l)}}var nn=(()=>{let t=class t{constructor(l,a,s,p,E){this.yamcs=s,this.object$=new G(null),this.user=E.getUser(),this.routerSubscription=l.events.pipe(It(oe=>oe instanceof Ft)).subscribe(oe=>{let pe=a.snapshot.firstChild,he=pe.paramMap.get("table");if(he){this.object$.next({type:"table",name:he});return}if(he=pe.paramMap.get("stream"),he){this.object$.next({type:"stream",name:he});return}this.object$.next(null)});let w=a.snapshot.paramMap.get("database");p.setTitle(w),this.database$=s.yamcsClient.getDatabase(w)}ngOnDestroy(){this.routerSubscription?.unsubscribe()}};t.\u0275fac=function(a){return new(a||t)(f(z),f(L),f(M),f($),f(Ue))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:2,vars:3,consts:[["tabPanel",""],["rla","routerLinkActive"],["rlb","routerLinkActive"],["rlc","routerLinkActive"],["rla1","routerLinkActive"],["rla2","routerLinkActive"],["rla3","routerLinkActive"],["rlb1","routerLinkActive"],["rlb2","routerLinkActive"],["rlb3","routerLinkActive"],["mat-icon-button","","routerLink","/admin/databases"],[1,"icon14","sep"],[1,"ya-link","ya-header-link",3,"routerLink"],["mat-tab-nav-bar","",1,"secondary",3,"mat-stretch-tabs","tabPanel"],[1,"outlet-wrapper"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"]],template:function(a,s){if(a&1&&(c(0,Ja,20,15,"app-admin-page"),h(1,"async")),a&2){let p;S((p=v(1,1,s.database$))?0:-1,p)}},dependencies:[F,P,D,j,ut,X,hi,He,Y,Ri,$i,ki],styles:[".outlet-wrapper[_ngcontent-%COMP%]{overflow:auto;position:absolute;inset:37px 0 0}.sep[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"],changeDetection:0});let e=t;return e})();var an=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:18,vars:0,consts:[["headerTitle","Notice"],[2,"background-color","black","color","white","padding","12px"],["href","https://github.com/yamcs/yamcs-cli",1,"ya-link"]],template:function(a,s){a&1&&(n(0,"ya-empty-message",0)(1,"p"),o(2,"The DB shell functionality has been removed from the Yamcs Web UI."),i(),n(3,"p"),o(4," Use "),n(5,"strong"),o(6,"yamcs-cli"),i(),o(7," instead: "),i(),n(8,"p",1)(9,"code"),o(10," pip install --upgrade yamcs-cli "),d(11,"br"),o(12," yamcs login http://localhost:8090 "),d(13,"br"),o(14," yamcs dbshell "),i()(),n(15,"p")(16,"a",2),o(17," https://docs.yamcs.org/yamcs-cli/ "),i()()())},dependencies:[D,be],encapsulation:2,changeDetection:0});let e=t;return e})();function Xa(e,t){if(e&1&&(n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),i(),d(5,"td"),i()),e&2){let r=t.$implicit;m(2),C(r.name),m(2),C(r.type)}}function eo(e,t){if(e&1&&(n(0,"tr")(1,"td",3),o(2),i()()),e&2){let r=t.$implicit;m(2),C(r)}}function to(e,t){if(e&1&&(n(0,"div",0)(1,"h3"),o(2,"Columns"),i(),n(3,"table",1)(4,"tr")(5,"th",2),o(6,"Column"),i(),n(7,"th"),o(8,"Type"),i(),d(9,"th",3),i(),H(10,Xa,6,2,"tr",null,B),i(),n(12,"p"),o(13,"\xA0"),i(),n(14,"h3"),o(15,"Subscribers"),i(),n(16,"table",1),H(17,eo,3,1,"tr",null,B),i()()),e&2){let r=t;m(10),V(r.columns),m(7),V(r.subscribers)}}var on=(()=>{let t=class t{constructor(l,a){let s=l.snapshot.parent,p=s.parent.paramMap.get("database"),E=s.paramMap.get("stream");this.stream$=a.yamcsClient.getStream(p,E)}};t.\u0275fac=function(a){return new(a||t)(f(L),f(M))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:2,vars:3,consts:[[1,"panel-content"],["yaDataTable","",1,"expand"],["width","200"],[1,"expand"]],template:function(a,s){if(a&1&&(c(0,to,19,0,"div",0),h(1,"async")),a&2){let p;S((p=v(1,1,s.stream$))?0:-1,p)}},dependencies:[D,j,ye],encapsulation:2,changeDetection:0});let e=t;return e})();var Et=(()=>{let t=class t{transform(l,a){if(!l||l.length===0)return null;for(let s of l)if(s.name===a)return s.value;return null}};t.\u0275fac=function(a){return new(a||t)},t.\u0275pipe=At({name:"columnValue",type:t,pure:!0,standalone:!0});let e=t;return e})();function io(e,t){if(e&1&&(o(0),h(1,"value")),e&2){let r=_().$index,l=_();g(" ",v(1,1,l.streamData.column[r].value)||"-"," ")}}function no(e,t){if(e&1&&d(0,"app-hex",2),e&2){let r=_().$index,l=_();u("base64String",l.streamData.column[r].value.binaryValue)}}function ao(e,t){if(e&1&&(n(0,"div",0),o(1),i(),n(2,"div",1),c(3,io,2,3)(4,no,1,1,"app-hex",2),i()),e&2){let r=t.$implicit;m(),C(r.name),m(2),S(r.value.type!=="BINARY"?3:-1),m(),S(r.value.type==="BINARY"?4:-1)}}var rn=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=b({type:t,selectors:[["app-stream-data"]],inputs:{streamData:"streamData"},standalone:!0,features:[T],decls:2,vars:0,consts:[[1,"block-title"],[1,"block"],[3,"base64String"]],template:function(a,s){a&1&&H(0,ao,5,3,null,null,B),a&2&&V(s.streamData.column)},dependencies:[zt,D,ht],encapsulation:2,changeDetection:0});let e=t;return e})();var Zt=class{constructor(){this.dirty=!1,this.bufferSize=500,this.pointer=0,this.buffer=Array(this.bufferSize).fill(void 0)}add(t){this.buffer[this.pointer]=t,this.prevPointer=this.pointer,this.pointer=(this.pointer+1)%this.buffer.length,this.dirty=!0}reset(){this.buffer.fill(void 0),this.pointer=0,this.prevPointer=void 0,this.dirty=!0}snapshot(){if(this.prevPointer===void 0)return[];{let t=this.buffer.slice(0,this.prevPointer+1);return this.buffer.slice(this.prevPointer+1).concat(t).filter(l=>l!==void 0)}}};var Kt=class extends Ci{constructor(t,r,l,a){super(),this.yamcs=t,this.database=l,this.stream=a,this.streamData$=new G([]),this.loading$=new G(!1),this.streaming$=new G(!1),this.columns$=new G([]),this.streamBuffer=new Zt,this.syncSubscription=r.sync(()=>{this.streamBuffer.dirty&&!this.loading$.getValue()&&(this.streamData$.next(this.streamBuffer.snapshot().reverse()),this.streamBuffer.dirty=!1)})}connect(){return this.streamData$}startStreaming(){this.streaming$.next(!0),this.streamSubscription=this.yamcs.yamcsClient.createStreamSubscription({instance:this.database,stream:this.stream},t=>{if(!this.loading$.getValue()){this.streamBuffer.add(t);let r=this.columns$.value;for(let l of t.column)r.indexOf(l.name)===-1&&r.push(l.name);this.columns$.next([...r])}})}stopStreaming(){this.streamSubscription&&this.streamSubscription.cancel(),this.streaming$.next(!1)}disconnect(){this.streamSubscription&&this.streamSubscription.cancel(),this.syncSubscription&&this.syncSubscription.unsubscribe(),this.streamData$.complete(),this.loading$.complete(),this.streaming$.complete()}};var oo=e=>({selected:e});function ro(e,t){e&1&&(n(0,"ya-detail-toolbar"),o(1," Tuple "),i(),n(2,"div",10),d(3,"app-stream-data",11),i()),e&2&&(m(3),u("streamData",t))}function lo(e,t){e&1&&(n(0,"ya-detail-toolbar"),o(1," Select a tuple "),i())}function mo(e,t){if(e&1&&(n(0,"th",13),o(1),i()),e&2){let r=_().$implicit;m(),C(r)}}function so(e,t){if(e&1&&(n(0,"td",14),o(1),h(2,"columnValue"),h(3,"value"),i()),e&2){let r=t.$implicit,l=_().$implicit;m(),g(" ",v(3,4,Be(2,1,r.column,l))||"-"," ")}}function co(e,t){if(e&1&&(x(0,4),c(1,mo,2,1,"th",12)(2,so,4,6,"td",7),y()),e&2){let r=t.$implicit;u("cdkColumnDef",r)}}function po(e,t){e&1&&d(0,"th",15)}function uo(e,t){e&1&&d(0,"td",14)}function fo(e,t){e&1&&d(0,"tr",16)}function _o(e,t){if(e&1){let r=U();n(0,"tr",17),h(1,"async"),I("click",function(){let a=R(r).$implicit,s=_();return k(s.selectStreamData(a))}),i()}if(e&2){let r=t.$implicit,l=_();u("ngClass",ve(3,oo,r===v(1,1,l.selectedStreamData$)))}}var ln=(()=>{let t=class t{constructor(l,a,s){this.displayedColumns=["actions"],this.selectedStreamData$=new G(null);let p=l.snapshot.parent,E=p.parent.paramMap.get("database"),w=p.paramMap.get("stream");this.dataSource=new Kt(a,s,E,w),this.availableColumns$=this.dataSource.columns$}ngAfterViewInit(){this.columnDefinitionsSubscription=this.columnDefinitions.changes.subscribe(()=>{this.columnDefinitions.forEach(l=>{this.displayedColumns.indexOf(l.name)===-1&&this.displayedColumns.splice(this.displayedColumns.length-1,0,l.name)})}),this.dataSource.startStreaming()}selectStreamData(l){this.selectedStreamData$.next(l)}ngOnDestroy(){this.columnDefinitionsSubscription?.unsubscribe(),this.dataSource?.stopStreaming()}};t.\u0275fac=function(a){return new(a||t)(f(L),f(M),f(Tt))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],viewQuery:function(a,s){if(a&1&&me(Nt,5),a&2){let p;se(p=ce())&&(s.columnDefinitions=p)}},standalone:!0,features:[T],decls:16,vars:8,consts:[["table",""],[1,"data-table-wrapper"],[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],[3,"cdkColumnDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["mat-header-row","",4,"cdkHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"cdkRowDef","cdkRowDefColumns"],[2,"padding","0 16px"],[3,"streamData"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click","ngClass"]],template:function(a,s){if(a&1&&(n(0,"ya-detail-pane"),c(1,ro,4,1),h(2,"async"),c(3,lo,2,0,"ya-detail-toolbar"),i(),n(4,"div",1)(5,"div",2)(6,"table",3,0),H(8,co,3,1,"ng-container",4,B),h(10,"async"),x(11,5),c(12,po,1,0,"th",6)(13,uo,1,0,"td",7),y(),c(14,fo,1,0,"tr",8)(15,_o,2,5,"tr",9),i()()()),a&2){let p;m(),S((p=v(2,4,s.selectedStreamData$))?1:3,p),m(5),u("dataSource",s.dataSource),m(2),V(v(10,6,s.availableColumns$)),m(6),u("cdkHeaderRowDef",s.displayedColumns),m(),u("cdkRowDefColumns",s.displayedColumns)}},dependencies:[Et,D,xt,j,wi,Ti,Di,Nt,Ei,q,Z,te,K,ne,J,gt,bt,ht,rn],styles:[".data-table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.detail[_ngcontent-%COMP%]{background-color:#fcfcfc;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.data-table-wrapper[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table-wrapper[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}.data-table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0});let e=t;return e})();function ho(e,t){e&1&&(n(0,"th",11),o(1,"Name"),i())}function Co(e,t){if(e&1&&(n(0,"td",12)(1,"a",13),o(2),i()()),e&2){let r=t.$implicit;m(),u("routerLink",r.name),m(),g(" ",r.name," ")}}function So(e,t){e&1&&(n(0,"th",11),o(1,"Data count"),i())}function vo(e,t){if(e&1&&(n(0,"td",14),o(1),h(2,"number"),i()),e&2){let r=t.$implicit;m(),g(" ",v(2,1,r.dataCount)," ")}}function xo(e,t){e&1&&d(0,"th",15)}function yo(e,t){e&1&&d(0,"td",12)}function go(e,t){e&1&&d(0,"tr",16)}function bo(e,t){e&1&&d(0,"tr",17)}var mn=(()=>{let t=class t{constructor(l,a){this.yamcs=a,this.displayedColumns=["name","dataCount","actions"],this.dataSource=new W,this.itemsByName={};let s=l.snapshot.parent;this.database=s.paramMap.get("database")}ngAfterViewInit(){this.dataSource.sort=this.sort,this.streamStatisticsSubscription=this.yamcs.yamcsClient.createStreamStatisticsSubscription({instance:this.database},l=>{this.processStreamEvent(l)})}processStreamEvent(l){switch(l.type){case"CREATED":case"UPDATED":this.itemsByName[l.name]={name:l.name,dataCount:l.dataCount},this.updateDataSource();break;case"DELETED":delete this.itemsByName[l.name],this.updateDataSource();break;default:console.error("Unexpected stream update of type "+l.type);break}}updateDataSource(){let l=Object.values(this.itemsByName);l.sort((a,s)=>a.name.localeCompare(s.name)),this.dataSource.data=l}ngOnDestroy(){this.streamStatisticsSubscription?.cancel()}};t.\u0275fac=function(a){return new(a||t)(f(L),f(M))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],viewQuery:function(a,s){if(a&1&&me(N,7),a&2){let p;se(p=ce())&&(s.sort=p.first)}},standalone:!0,features:[T],decls:13,vars:3,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","dataCount"],["mat-cell","","style","text-align: right",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-cell","",2,"text-align","right"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,s){a&1&&(n(0,"div",0)(1,"table",1),x(2,2),c(3,ho,2,0,"th",3)(4,Co,3,2,"td",4),y(),x(5,5),c(6,So,2,0,"th",3)(7,vo,3,3,"td",6),y(),x(8,7),c(9,xo,1,0,"th",8)(10,yo,1,0,"td",4),y(),c(11,go,1,0,"tr",9)(12,bo,1,0,"tr",10),i()()),a&2&&(m(),u("dataSource",s.dataSource),m(10),u("matHeaderRowDef",s.displayedColumns),m(),u("matRowDefColumns",s.displayedColumns))},dependencies:[D,yt,X,N,Se,q,re,le,Z,ee,ie,te,K,ne,J],encapsulation:2,changeDetection:0});let e=t;return e})();var sn="&nbsp;&nbsp;&nbsp;&nbsp;",Jt=/[()]|(, ")/;function Xt(e){if(!e)return e;let t=[],r="",l=e.search(Jt);for(;l!==-1;)e[l]==="("?(t.push(e.substring(0,l+1)),r+=sn,t.push("<br>",r),e=e.substring(l+1),l=e.search(Jt)):e[l]===")"?(t.push(e.substring(0,l)),r=r.replace(sn,""),t.push("<br>",r),t.push(")"),e=e.substring(l+1),l=e.search(Jt)):(t.push(e.substring(0,l+1)),t.push("<br>",r),t.push('"'),e=e.substring(l+3),l=e.search(Jt));let a=t.join("")+e;return a=a.replace(/(engine|histogram|partition|primary|table_format)/g,"<br>$1"),To(a)}function To(e){return e.replace(/(BINARY|ENUM|HRES_TIMESTAMP|INT|LONG|PARAMETER_VALUE|PROTOBUF|STRING|TIMESTAMP)/g,'<span class="dtype">$1</span>').replace(/([(),]+)/g,'<span class="paren">$1</span>').replace(/(auto_increment|create|compressed|histogram|engine|primary key|table(_format)?|stream)/g,'<span class="kw">$1</span>').replace(/(partition by time(_and_value)?|partition by value)/g,'<span class="kw">$1</span>')}function Do(e,t){if(e&1&&(n(0,"div",0),d(1,"code",1),i()),e&2){let r=_();m(),u("innerHTML",r.formatSQL(t.script),pt)}}var pn=(()=>{let t=class t{constructor(l,a){let s=l.snapshot.parent,p=s.parent.paramMap.get("database"),E=s.paramMap.get("stream");this.stream$=a.yamcsClient.getStream(p,E)}formatSQL(l){return Xt(l)}};t.\u0275fac=function(a){return new(a||t)(f(L),f(M))},t.\u0275cmp=b({type:t,selectors:[["app-stream-script-tab"]],standalone:!0,features:[T],decls:2,vars:3,consts:[[1,"panel-content","sql"],[3,"innerHTML"]],template:function(a,s){if(a&1&&(c(0,Do,2,1,"div",0),h(1,"async")),a&2){let p;S((p=v(1,1,s.stream$))?0:-1,p)}},dependencies:[D,j],styles:["code[_ngcontent-%COMP%]{display:inline-block;font-size:12px;line-height:14px}",".dtype{color:red}  .paren{color:#1b61b9}  .kw{color:#1b61b9}"],changeDetection:0});let e=t;return e})();function Eo(e,t){e&1&&d(0,"router-outlet")}var dn=(()=>{let t=class t{constructor(l,a,s){this.yamcs=a;let p=l.snapshot,E=p.parent.paramMap.get("database"),w=p.paramMap.get("stream");s.setTitle(w),this.stream$=a.yamcsClient.getStream(E,w)}};t.\u0275fac=function(a){return new(a||t)(f(L),f(M),f($))},t.\u0275cmp=b({type:t,selectors:[["app-stream-page"]],standalone:!0,features:[T],decls:2,vars:3,template:function(a,s){if(a&1&&(c(0,Eo,1,0,"router-outlet"),h(1,"async")),a&2){let p;S((p=v(1,1,s.stream$))?0:-1,p)}},dependencies:[D,j,ut],encapsulation:2,changeDetection:0});let e=t;return e})();function wo(e,t){if(e&1&&(n(0,"div",0)(1,"mat-icon",1),o(2,"vpn_key"),i(),o(3),i(),n(4,"div",2),o(5),h(6,"columnValue"),h(7,"value"),i()),e&2){let r=t.$implicit,l=_();m(3),g(" ",r.name," "),m(2),g(" ",v(7,5,Be(6,2,l.record.column,r.name))||"-"," ")}}function Mo(e,t){if(e&1&&(o(0),h(1,"columnValue"),h(2,"value")),e&2){let r=_().$implicit,l=_();g(" ",v(2,4,Be(1,1,l.record.column,r.name))||"-"," ")}}function Io(e,t){e&1&&d(0,"app-hex",3),e&2&&u("base64String",t.binaryValue)}function Ao(e,t){e&1&&o(0," - ")}function Ro(e,t){if(e&1&&(c(0,Io,1,1,"app-hex",3),h(1,"columnValue"),c(2,Ao,1,0)),e&2){let r,l=_().$implicit,a=_();S((r=Be(1,1,a.record.column,l.name))?0:2,r)}}function ko(e,t){if(e&1&&(n(0,"div",0),o(1),i(),n(2,"div",2),c(3,Mo,3,6)(4,Ro,3,4),i()),e&2){let r=t.$implicit;m(),C(r.name),m(2),S(r.type!=="BINARY"&&(r.type==="PROTOBUF(com.google.protobuf.Struct)"||!r.type.startsWith("PROTOBUF"))?3:-1),m(),S(r.type==="BINARY"||r.type!=="PROTOBUF(com.google.protobuf.Struct)"&&r.type.startsWith("PROTOBUF")?4:-1)}}var un=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=b({type:t,selectors:[["app-record"]],inputs:{table:"table",record:"record"},standalone:!0,features:[T],decls:6,vars:0,consts:[[1,"block-title"],["matTooltip","Key Column",1,"icon12",2,"color","gold"],[1,"block"],[3,"base64String"]],template:function(a,s){a&1&&(H(0,wo,8,7,null,null,B),H(2,ko,5,3,null,null,B),n(4,"p"),o(5,"\xA0"),i()),a&2&&(V(s.table.keyColumn),m(2),V(s.table.valueColumn))},dependencies:[Et,zt,D,Y,Ce,ht],encapsulation:2,changeDetection:0});let e=t;return e})();var $o=e=>({selected:e});function Lo(e,t){if(e&1&&(n(0,"ya-detail-toolbar"),o(1," Record "),i(),n(2,"div",2),d(3,"app-record",3),i()),e&2){let r=_();m(3),u("table",r)("record",t)}}function Fo(e,t){e&1&&(n(0,"ya-detail-toolbar"),o(1," Select a record "),i())}function Po(e,t){if(e&1&&(n(0,"th"),o(1),i()),e&2){let r=t.$implicit;m(),C(r.name)}}function Bo(e,t){if(e&1&&(n(0,"th"),o(1),i()),e&2){let r=t.$implicit;m(),C(r.name)}}function Ho(e,t){if(e&1&&(n(0,"td"),o(1),h(2,"columnValue"),h(3,"value"),i()),e&2){let r=t.$implicit,l=_().$implicit;m(),g(" ",v(3,4,Be(2,1,l.column,r.name))||"-"," ")}}function Vo(e,t){if(e&1&&(n(0,"td"),o(1),h(2,"columnValue"),h(3,"value"),i()),e&2){let r=t.$implicit,l=_().$implicit;Me("mono",r.type==="BINARY"),m(),g(" ",v(3,6,Be(2,3,l.column,r.name))||"-"," ")}}function jo(e,t){if(e&1){let r=U();n(0,"tr",6),h(1,"async"),I("click",function(){let a=R(r).$implicit,s=_(4);return k(s.selectRecord(a))}),H(2,Ho,4,6,"td",null,B),H(4,Vo,4,8,"td",7,B),i()}if(e&2){let r=t.$implicit,l=_(3),a=_();u("ngClass",ve(3,$o,r===v(1,1,a.selectedRecord$))),m(2),V(l.keyColumn),m(2),V(l.valueColumn)}}function Uo(e,t){if(e&1&&(n(0,"table",4)(1,"tr"),H(2,Po,2,1,"th",null,B),H(4,Bo,2,1,"th",null,B),i(),H(6,jo,6,5,"tr",5,B),i()),e&2){let r=_(),l=_();m(2),V(l.keyColumn),m(2),V(l.valueColumn),m(2),V(r)}}function No(e,t){e&1&&(n(0,"ya-empty-message"),o(1," Empty table. "),i())}function Oo(e,t){e&1&&c(0,Uo,8,0,"table",4)(1,No,2,0,"ya-empty-message"),e&2&&S(t.length?0:1)}function Go(e,t){e&1&&(n(0,"ya-empty-message"),o(1," Empty table. "),i())}function Yo(e,t){if(e&1&&(n(0,"ya-detail-pane"),c(1,Lo,4,2),h(2,"async"),c(3,Fo,2,0,"ya-detail-toolbar"),i(),n(4,"div",0)(5,"div",1),c(6,Oo,2,1),h(7,"async"),c(8,Go,2,0,"ya-empty-message"),i()()),e&2){let r,l,a=_();m(),S((r=v(2,2,a.selectedRecord$))?1:3,r),m(5),S((l=v(7,4,a.records$))?6:8,l)}}var fn=(()=>{let t=class t{constructor(l,a){this.selectedRecord$=new G(null);let s=l.snapshot.parent,p=s.parent.paramMap.get("database"),E=s.paramMap.get("table");this.table$=a.yamcsClient.getTable(p,E),this.records$=a.yamcsClient.getTableData(p,E)}selectRecord(l){this.selectedRecord$.next(l)}};t.\u0275fac=function(a){return new(a||t)(f(L),f(M))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:2,vars:3,consts:[[1,"data-table-wrapper"],[1,"panel-content"],[2,"padding","0 16px"],[3,"table","record"],["yaDataTable",""],[3,"ngClass"],[3,"click","ngClass"],[3,"mono"]],template:function(a,s){if(a&1&&(c(0,Yo,9,6),h(1,"async")),a&2){let p;S((p=v(1,1,s.table$))?0:-1,p)}},dependencies:[Et,un,D,xt,j,ye,gt,bt,be,ht],styles:[".data-table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.detail[_ngcontent-%COMP%]{background-color:#fcfcfc;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.data-table-wrapper[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table-wrapper[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}.data-table-wrapper[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#fafafa;cursor:pointer}"],changeDetection:0});let e=t;return e})();function Qo(e,t){if(e&1&&(n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),i()()),e&2){let r=t.$implicit;m(2),C(r.value),m(2),C(r.label)}}var _n=(()=>{let t=class t{constructor(l){this.data=l}};t.\u0275fac=function(a){return new(a||t)(f(We))},t.\u0275cmp=b({type:t,selectors:[["app-show-enum-dialog"]],standalone:!0,features:[T],decls:14,vars:0,consts:[["mat-dialog-title",""],["yaDataTable","",2,"width","100%"],["align","end"],["mat-dialog-close","",1,"ya-button"]],template:function(a,s){a&1&&(n(0,"h2",0),o(1,"Enum States"),i(),n(2,"mat-dialog-content")(3,"table",1)(4,"tr")(5,"th"),o(6,"Value"),i(),n(7,"th"),o(8,"Label"),i()(),H(9,Qo,5,2,"tr",null,B),i()(),n(11,"mat-dialog-actions",2)(12,"button",3),o(13,"Close"),i()()),a&2&&(m(9),V(s.data.column.enumValue))},dependencies:[D,ye,ze,qe,Ke,Ze],encapsulation:2});let e=t;return e})();function Wo(e,t){if(e&1){let r=U();n(0,"span",6),I("click",function(){R(r);let a=_().$implicit,s=_(2);return k(s.showEnum(a))}),o(1),i()}if(e&2){let r=_().$implicit;m(),C(r.type)}}function zo(e,t){if(e&1&&o(0),e&2){let r=_().$implicit;g(" ",r.type," ")}}function qo(e,t){if(e&1&&(n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),c(4,Wo,2,1,"span",5)(5,zo,1,1),i(),n(6,"td"),o(7),i(),d(8,"td"),i()),e&2){let r=t.$implicit;m(2),C(r.name),m(2),S(r.type==="ENUM"?4:-1),m(),S(r.type!=="ENUM"?5:-1),m(2),g(" ",r.autoIncrement?"auto_increment":"-"," ")}}function Zo(e,t){if(e&1){let r=U();n(0,"span",6),I("click",function(){R(r);let a=_().$implicit,s=_(2);return k(s.showEnum(a))}),o(1),i()}if(e&2){let r=_().$implicit;m(),C(r.type)}}function Ko(e,t){if(e&1&&o(0),e&2){let r=_().$implicit;g(" ",r.type," ")}}function Jo(e,t){if(e&1&&(n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),c(4,Zo,2,1,"span",5)(5,Ko,1,1),i(),n(6,"td"),o(7),i(),d(8,"td"),i()),e&2){let r=t.$implicit;m(2),C(r.name),m(2),S(r.type==="ENUM"?4:-1),m(),S(r.type!=="ENUM"?5:-1),m(2),g(" ",r.autoIncrement?"auto_increment":"-"," ")}}function Xo(e,t){e&1&&(n(0,"span"),o(1,", "),i())}function er(e,t){if(e&1&&(o(0),c(1,Xo,2,0,"span")),e&2){let r=t.$implicit,l=t.$index,a=t.$count;g(" ",r," "),m(),S(l!==a-1?1:-1)}}function tr(e,t){if(e&1&&H(0,er,2,2,null,null,B),e&2){let r=_();V(r.histogramColumn)}}function ir(e,t){e&1&&o(0," - ")}function nr(e,t){if(e&1&&(n(0,"dt"),o(1,"Time partition column"),i(),n(2,"dd"),o(3),i()),e&2){let r=_();m(3),ot(" ",r.partitioningInfo==null?null:r.partitioningInfo.timeColumn,"('",r.partitioningInfo==null?null:r.partitioningInfo.timePartitionSchema,"') ")}}function ar(e,t){if(e&1&&(n(0,"dt"),o(1,"Value partition column"),i(),n(2,"dd"),o(3),i()),e&2){let r=_();m(3),g(" ",r.partitioningInfo==null?null:r.partitioningInfo.valueColumn," ")}}function or(e,t){if(e&1&&(n(0,"div",0)(1,"h3"),o(2,"Key"),i(),n(3,"table",1)(4,"tr")(5,"th"),o(6,"Column"),i(),n(7,"th"),o(8,"Type"),i(),n(9,"th"),o(10,"Extra"),i(),d(11,"th",2),i(),H(12,qo,9,4,"tr",null,B),i(),n(14,"p"),o(15,"\xA0"),i(),n(16,"h3"),o(17,"Value"),i(),n(18,"table",3)(19,"tr")(20,"th"),o(21,"Column"),i(),n(22,"th"),o(23,"Type"),i(),n(24,"th"),o(25,"Extra"),i(),d(26,"th",2),i(),H(27,Jo,9,4,"tr",null,B),i(),n(29,"p"),o(30,"\xA0"),i(),n(31,"h3"),o(32,"Options"),i(),n(33,"dl",4)(34,"dt"),o(35,"Format version"),i(),n(36,"dd"),o(37),i(),n(38,"dt"),o(39,"Storage engine"),i(),n(40,"dd"),o(41),i(),n(42,"dt"),o(43,"Tablespace"),i(),n(44,"dd"),o(45),i(),n(46,"dt"),o(47,"Compressed"),i(),n(48,"dd"),o(49),i(),n(50,"dt"),o(51,"Histogram"),i(),n(52,"dd"),c(53,tr,2,0)(54,ir,1,0),i(),n(55,"dt"),o(56,"Partition by"),i(),n(57,"dd"),o(58),h(59,"lowercase"),i(),c(60,nr,4,2)(61,ar,4,1),i()()),e&2){let r=t;m(12),V(r.keyColumn),m(15),V(r.valueColumn),m(10),C(r.formatVersion),m(4),C(r.storageEngine),m(4),C(r.tablespace||"-"),m(4),C(r.compressed?"yes":"no"),m(4),S(r.histogramColumn?53:-1),m(),S(r.histogramColumn?-1:54),m(4),C(v(59,9,r.partitioningInfo==null?null:r.partitioningInfo.type)||"-"),m(2),S(r.partitioningInfo!=null&&r.partitioningInfo.timeColumn?60:-1),m(),S(r.partitioningInfo!=null&&r.partitioningInfo.valueColumn?61:-1)}}var hn=(()=>{let t=class t{constructor(l,a,s){this.dialog=s;let p=l.snapshot.parent,E=p.parent.paramMap.get("database"),w=p.paramMap.get("table");this.table$=a.yamcsClient.getTable(E,w)}showEnum(l){this.dialog.open(_n,{width:"400px",data:{column:l}})}};t.\u0275fac=function(a){return new(a||t)(f(L),f(M),f(je))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:2,vars:3,consts:[[1,"panel-content"],["yaDataTable","",1,"expand"],[1,"expand"],["yaDataTable",""],[1,"dl-horizontal"],["matTooltip","Show enum states",1,"enum"],["matTooltip","Show enum states",1,"enum",3,"click"]],template:function(a,s){if(a&1&&(c(0,or,62,11,"div",0),h(1,"async")),a&2){let p;S((p=v(1,1,s.table$))?0:-1,p)}},dependencies:[D,j,fi,ye,Ce],styles:[".enum[_ngcontent-%COMP%]{border-bottom:1px dotted #888;cursor:pointer}"],changeDetection:0});let e=t;return e})();function rr(e,t){e&1&&(n(0,"th",9),o(1,"Name"),i())}function lr(e,t){if(e&1&&(n(0,"td",10)(1,"a",11),o(2),i()()),e&2){let r=t.$implicit;m(),u("routerLink",r.name),m(),g(" ",r.name," ")}}function mr(e,t){e&1&&d(0,"th",12)}function sr(e,t){e&1&&d(0,"td",10)}function cr(e,t){e&1&&d(0,"tr",13)}function pr(e,t){e&1&&d(0,"tr",14)}var Cn=(()=>{let t=class t{constructor(l,a){this.yamcs=a,this.displayedColumns=["name","actions"],this.dataSource=new W;let p=l.snapshot.parent.paramMap.get("database");a.yamcsClient.getTables(p).then(E=>{this.dataSource.data=E})}ngAfterViewInit(){this.dataSource.sort=this.sort}};t.\u0275fac=function(a){return new(a||t)(f(L),f(M))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],viewQuery:function(a,s){if(a&1&&me(N,7),a&2){let p;se(p=ce())&&(s.sort=p.first)}},standalone:!0,features:[T],decls:10,vars:3,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,s){a&1&&(n(0,"div",0)(1,"table",1),x(2,2),c(3,rr,2,0,"th",3)(4,lr,3,2,"td",4),y(),x(5,5),c(6,mr,1,0,"th",6)(7,sr,1,0,"td",4),y(),c(8,cr,1,0,"tr",7)(9,pr,1,0,"tr",8),i()()),a&2&&(m(),u("dataSource",s.dataSource),m(7),u("matHeaderRowDef",s.displayedColumns),m(),u("matRowDefColumns",s.displayedColumns))},dependencies:[D,X,N,Se,q,re,le,Z,ee,ie,te,K,ne,J],encapsulation:2,changeDetection:0});let e=t;return e})();function dr(e,t){if(e&1&&(n(0,"div",0),d(1,"code",1),i()),e&2){let r=_();m(),u("innerHTML",r.formatSQL(t.script),pt)}}var Sn=(()=>{let t=class t{constructor(l,a){let s=l.snapshot.parent,p=s.parent.paramMap.get("database"),E=s.paramMap.get("table");this.table$=a.yamcsClient.getTable(p,E)}formatSQL(l){return Xt(l)}};t.\u0275fac=function(a){return new(a||t)(f(L),f(M))},t.\u0275cmp=b({type:t,selectors:[["app-table-script-tab"]],standalone:!0,features:[T],decls:2,vars:3,consts:[[1,"panel-content","sql"],[3,"innerHTML"]],template:function(a,s){if(a&1&&(c(0,dr,2,1,"div",0),h(1,"async")),a&2){let p;S((p=v(1,1,s.table$))?0:-1,p)}},dependencies:[D,j],styles:["code[_ngcontent-%COMP%]{display:inline-block;font-size:12px;line-height:14px}",".dtype{color:red}  .paren{color:#1b61b9}  .kw{color:#1b61b9}"],changeDetection:0});let e=t;return e})();function ur(e,t){e&1&&d(0,"router-outlet")}var vn=(()=>{let t=class t{constructor(l,a,s){this.yamcs=a;let p=l.snapshot.parent.paramMap.get("database"),E=l.snapshot.paramMap.get("table");s.setTitle(E),this.table$=a.yamcsClient.getTable(p,E)}};t.\u0275fac=function(a){return new(a||t)(f(L),f(M),f($))},t.\u0275cmp=b({type:t,selectors:[["app-table-page"]],standalone:!0,features:[T],decls:2,vars:3,template:function(a,s){if(a&1&&(c(0,ur,1,0,"router-outlet"),h(1,"async")),a&2){let p;S((p=v(1,1,s.table$))?0:-1,p)}},dependencies:[D,j,ut],encapsulation:2,changeDetection:0});let e=t;return e})();var ei=(()=>{let t=class t{transform(l){if(!l)return l;let a=l.match(/Chrome\/([a-zA-Z0-9\.]+)/),s=l.match(/Chromium\/([a-zA-Z0-9\.]+)/),p=l.match(/Edg\/([a-zA-Z0-9\.]+)/),E=l.match(/Firefox\/([a-zA-Z0-9\.]+)/),w=l.match(/OPR\/([a-zA-Z0-9\.]+)/),oe=l.match(/Safari\/([a-zA-Z0-9\.]+)/),pe=l.match(/Seamonkey\/([a-zA-Z0-9\.]+)/),he,_e;if(oe&&!a&&!s&&!p){he="Safari",_e=oe[1];let ct=l.match(/Version\/([a-zA-Z0-9\.]+)/);ct&&(_e=ct[1])}else a&&!s&&!p?(he="Chrome",_e=a[1]):s?(he="Chromium",_e=s[1]):E&&!pe?(he="Firefox",_e=E[1]):pe?(he="Seamonkey",_e=pe[1]):w?(he="Opera",_e=w[1]):p&&(he="Edge",_e=p[1]);return he?`${he} ${_e}`:l}};t.\u0275fac=function(a){return new(a||t)},t.\u0275pipe=At({name:"userAgent",type:t,pure:!0,standalone:!0});let e=t;return e})();function fr(e,t){if(e&1&&(n(0,"dl",1)(1,"dt"),o(2,"Cumulative read"),i(),n(3,"dd"),o(4),h(5,"formatBytes"),i(),n(6,"dt"),o(7,"Cumulative written"),i(),n(8,"dd"),o(9),h(10,"formatBytes"),i(),n(11,"dt"),o(12,"Rx"),i(),n(13,"dd"),o(14),h(15,"dataRate"),i(),n(16,"dt"),o(17,"Tx"),i(),n(18,"dd"),o(19),h(20,"dataRate"),i()()),e&2){let r=t;m(4),C(v(5,4,r.readBytes)),m(5),C(v(10,6,r.writtenBytes)),m(5),C(v(15,8,r.readThroughput*8)),m(5),C(v(20,10,r.writeThroughput*8))}}function _r(e,t){e&1&&(n(0,"th",20),o(1,"Id"),i())}function hr(e,t){if(e&1&&(n(0,"td",21),o(1),i()),e&2){let r=t.$implicit;m(),C(r.id)}}function Cr(e,t){e&1&&(n(0,"th",22),o(1,"User agent"),i())}function Sr(e,t){if(e&1&&(n(0,"td",21),o(1),h(2,"userAgent"),i()),e&2){let r=t.$implicit;m(),g(" ",v(2,1,r.httpRequest==null?null:r.httpRequest.userAgent)||"-"," ")}}function vr(e,t){e&1&&(n(0,"th",20),o(1,"Protocol"),i())}function xr(e,t){if(e&1&&(n(0,"td",21),o(1),i()),e&2){let r=t.$implicit;m(),C((r.httpRequest==null?null:r.httpRequest.protocol)||"-")}}function yr(e,t){e&1&&(n(0,"th",20),o(1,"Remote address"),i())}function gr(e,t){if(e&1&&(n(0,"td",21),o(1),i()),e&2){let r=t.$implicit;m(),C(r.remoteAddress||"-")}}function br(e,t){e&1&&(n(0,"th",20),o(1,"Read"),i())}function Tr(e,t){if(e&1&&(n(0,"td",21),o(1),h(2,"formatBytes"),i()),e&2){let r=t.$implicit;m(),C(v(2,1,r.readBytes)||"-")}}function Dr(e,t){e&1&&(n(0,"th",20),o(1,"Written"),i())}function Er(e,t){if(e&1&&(n(0,"td",21),o(1),h(2,"formatBytes"),i()),e&2){let r=t.$implicit;m(),C(v(2,1,r.writtenBytes)||"-")}}function wr(e,t){e&1&&(n(0,"th",20),o(1,"Rx"),i())}function Mr(e,t){if(e&1&&(n(0,"td",21),o(1),h(2,"dataRate"),i()),e&2){let r=t.$implicit;m(),C(v(2,1,r.readThroughput*8))}}function Ir(e,t){e&1&&(n(0,"th",20),o(1,"Tx"),i())}function Ar(e,t){if(e&1&&(n(0,"td",21),o(1),h(2,"dataRate"),i()),e&2){let r=t.$implicit;m(),C(v(2,1,r.writeThroughput*8))}}function Rr(e,t){e&1&&(n(0,"th",20),o(1,"Request"),i())}function kr(e,t){if(e&1&&(n(0,"td",21),o(1),i()),e&2){let r=t.$implicit;m(),ot(" ",r.httpRequest==null?null:r.httpRequest.method," ",r.httpRequest==null?null:r.httpRequest.uri," ")}}function $r(e,t){e&1&&(n(0,"th",20),o(1,"Authorization"),i())}function Lr(e,t){if(e&1&&(n(0,"td",21),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.username||"-"," ")}}function Fr(e,t){e&1&&d(0,"tr",23)}function Pr(e,t){e&1&&d(0,"tr",24)}var xn=(()=>{let t=class t{constructor(l,a){this.displayedColumns=["id","protocol","remoteAddress","readBytes","writtenBytes","readThroughput","writeThroughput","request","authorization","userAgent"],this.tableTrackerFn=(s,p)=>p.id,this.traffic$=new G(null),this.dataSource=new W,a.setTitle("HTTP traffic"),this.httpTrafficSubscription=l.yamcsClient.createHttpTrafficSubscription(s=>{this.traffic$.next(s),this.dataSource.data=s.connections})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnDestroy(){this.httpTrafficSubscription?.cancel()}};t.\u0275fac=function(a){return new(a||t)(f(M),f($))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],viewQuery:function(a,s){if(a&1&&(me(N,5),me(Le,5)),a&2){let p;se(p=ce())&&(s.sort=p.first),se(p=ce())&&(s.paginator=p.first)}},standalone:!0,features:[T],decls:44,vars:10,consts:[[1,"panel-content"],[1,"dl-horizontal","no-lead"],[1,"section-divider"],["mat-table","","matSort","","matSortActive","id","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userAgent"],["mat-header-cell","","mat-sort-header","","class","expand",4,"matHeaderCellDef"],["matColumnDef","protocol"],["matColumnDef","remoteAddress"],["matColumnDef","readBytes"],["matColumnDef","writtenBytes"],["matColumnDef","readThroughput"],["matColumnDef","writeThroughput"],["matColumnDef","request"],["matColumnDef","authorization"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,s){if(a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," HTTP traffic "),i(),n(3,"div",0),c(4,fr,21,12,"dl",1),h(5,"async"),n(6,"div",2),d(7,"mat-divider"),i(),n(8,"h4"),o(9,"Current connections"),i(),n(10,"table",3),x(11,4),c(12,_r,2,0,"th",5)(13,hr,2,1,"td",6),y(),x(14,7),c(15,Cr,2,0,"th",8)(16,Sr,3,3,"td",6),y(),x(17,9),c(18,vr,2,0,"th",5)(19,xr,2,1,"td",6),y(),x(20,10),c(21,yr,2,0,"th",5)(22,gr,2,1,"td",6),y(),x(23,11),c(24,br,2,0,"th",5)(25,Tr,3,3,"td",6),y(),x(26,12),c(27,Dr,2,0,"th",5)(28,Er,3,3,"td",6),y(),x(29,13),c(30,wr,2,0,"th",5)(31,Mr,3,3,"td",6),y(),x(32,14),c(33,Ir,2,0,"th",5)(34,Ar,3,3,"td",6),y(),x(35,15),c(36,Rr,2,0,"th",5)(37,kr,2,2,"td",6),y(),x(38,16),c(39,$r,2,0,"th",5)(40,Lr,2,1,"td",6),y(),c(41,Fr,1,0,"tr",17)(42,Pr,1,0,"tr",18),i(),d(43,"mat-paginator",19),i()()),a&2){let p;m(4),S((p=v(5,8,s.traffic$))?4:-1,p),m(6),u("dataSource",s.dataSource)("trackBy",s.tableTrackerFn),m(31),u("matHeaderRowDef",s.displayedColumns),m(),u("matRowDefColumns",s.displayedColumns),m(),u("pageSize",100)("hidePageSize",!0)("showFirstLastButtons",!0)}},dependencies:[F,P,D,j,Ve,Le,N,Se,q,re,le,Z,ee,ie,te,K,ne,J,Oi,Wt,ei],encapsulation:2,changeDetection:0});let e=t;return e})();function Br(e,t){e&1&&d(0,"th",18)}function Hr(e,t){if(e&1){let r=U();n(0,"td",19)(1,"input",20),I("click",function(a){return R(r),k(a.stopPropagation())})("change",function(a){let s=R(r).$implicit,p=_(2);return k(a?p.selection.toggle(s):null)}),i()()}if(e&2){let r=t.$implicit,l=_(2);m(),u("checked",l.selection.isSelected(r))}}function Vr(e,t){e&1&&(n(0,"th",21),o(1,"Type"),i())}function jr(e,t){e&1&&(n(0,"mat-icon",23),o(1,"person"),i())}function Ur(e,t){if(e&1&&(n(0,"td",22),c(1,jr,2,0,"mat-icon",23),i()),e&2){let r=t.$implicit;m(),S(r.user?1:-1)}}function Nr(e,t){e&1&&(n(0,"th",24),o(1,"Member"),i())}function Or(e,t){if(e&1&&(n(0,"td",22),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.label," ")}}function Gr(e,t){e&1&&d(0,"tr",25)}function Yr(e,t){if(e&1){let r=U();n(0,"tr",26),I("click",function(){let a=R(r).$implicit,s=_(2);return k(s.toggleOne(a))}),i()}if(e&2){let r=t.$implicit,l=_(2);Me("selected",l.selection.isSelected(r))}}function Qr(e,t){if(e&1&&(n(0,"table",3),x(1,8),c(2,Br,1,0,"th",9)(3,Hr,2,1,"td",10),y(),x(4,11),c(5,Vr,2,0,"th",12)(6,Ur,2,1,"td",13),y(),x(7,14),c(8,Nr,2,0,"th",15)(9,Or,2,1,"td",13),y(),c(10,Gr,1,0,"tr",16)(11,Yr,1,2,"tr",17),i()),e&2){let r=_();u("dataSource",r.dataSource),m(10),u("matHeaderRowDef",r.displayedColumns),m(),u("matRowDefColumns",r.displayedColumns)}}function Wr(e,t){e&1&&(n(0,"ya-empty-message"),o(1," No rows to display "),i())}var ti=(()=>{let t=class t{constructor(l,a,s){this.dialogRef=l,this.data=s,this.displayedColumns=["select","type","name"],this.filterControl=new Q,this.dataSource=new W,this.selection=new Pt(!0,[]);let E=s.items.filter(w=>w.user).map(w=>w.user.name);a.yamcsClient.getUsers().then(w=>{let oe=(w||[]).filter(pe=>E.indexOf(pe.name)===-1).map(pe=>({label:pe.displayName||pe.name,user:pe}));this.dataSource.data=oe})}ngAfterViewInit(){this.filterControl.valueChanges.subscribe(()=>{let l=this.filterControl.value||"";this.dataSource.filter=l.toLowerCase()}),this.dataSource.filterPredicate=(l,a)=>l.label.toLowerCase().indexOf(a)>=0,this.dataSource.paginator=this.paginator}toggleOne(l){(!this.selection.isSelected(l)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(l)}save(){this.dialogRef.close(this.selection.selected)}};t.\u0275fac=function(a){return new(a||t)(f(Ut),f(M),f(We))},t.\u0275cmp=b({type:t,selectors:[["app-add-members-dialog"]],viewQuery:function(a,s){if(a&1&&me(Le,7),a&2){let p;se(p=ce())&&(s.paginator=p.first)}},standalone:!0,features:[T],decls:13,vars:7,consts:[["mat-dialog-title",""],[1,"filter-bar"],["placeholder","Filter users",3,"formControl"],["mat-table","",1,"ya-data-table",2,"width","100%",3,"dataSource"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"click","disabled"],["matColumnDef","select"],["mat-header-cell","","class","checkbox",4,"matHeaderCellDef"],["mat-cell","","class","checkbox",4,"matCellDef"],["matColumnDef","type"],["mat-header-cell","","width","1",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell","","width","1"],["mat-cell",""],["matTooltip","User",2,"vertical-align","middle"],["mat-header-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(a,s){a&1&&(n(0,"h2",0),o(1,"Add members"),i(),n(2,"mat-dialog-content")(3,"div",1),d(4,"ya-search-filter",2),i(),c(5,Qr,12,3,"table",3)(6,Wr,2,0,"ya-empty-message"),d(7,"mat-paginator",4),i(),n(8,"mat-dialog-actions",5)(9,"button",6),o(10,"CANCEL"),i(),n(11,"button",7),I("click",function(){return s.save()}),o(12,"ADD"),i()()),a&2&&(m(4),u("formControl",s.filterControl),m(),S(s.dataSource?5:-1),m(),S(s.dataSource.data.length?-1:6),m(),u("pageSize",10)("hidePageSize",!0)("showFirstLastButtons",!1),m(4),u("disabled",s.selection.isEmpty()))},dependencies:[D,de,Re,ze,qe,Ke,Ze,Y,Le,q,re,le,Z,ee,ie,te,K,ne,J,Ce,be,we],styles:[".selected[_ngcontent-%COMP%]{background-color:#f0f4fd!important}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0});let e=t;return e})();function zr(e,t){e&1&&(n(0,"tr")(1,"td",10),o(2,"No rows to display"),i()())}function qr(e,t){if(e&1){let r=U();n(0,"tr")(1,"td")(2,"mat-icon",11),o(3,"person"),i()(),n(4,"td"),o(5),i(),n(6,"td",12)(7,"ya-text-action",13),I("click",function(){let a=R(r).$implicit,s=_(2);return k(s.deleteItem(a))}),o(8,"DELETE"),i()()()}if(e&2){let r=t.$implicit;m(5),C(r.label)}}function Zr(e,t){if(e&1&&(n(0,"table",6)(1,"tr")(2,"th",9),o(3,"Type"),i(),n(4,"th"),o(5,"Member"),i(),d(6,"th"),i(),c(7,zr,3,0,"tr"),H(8,qr,9,1,"tr",null,B),i()),e&2){let r=t;m(7),S(r.length?-1:7),m(),V(r)}}var yn=(()=>{let t=class t{constructor(l,a,s,p,E,w,oe,pe){this.router=s,this.route=p,this.yamcs=E,this.dialog=w,this.messageService=oe,this.location=pe,this.memberItems$=new G([]),a.setTitle("Create a Group"),this.form=l.group({name:new Q("",[mt.required]),description:new Q})}showAddMembersDialog(){this.dialog.open(ti,{data:{items:this.memberItems$.value},width:"600px"}).afterClosed().subscribe(a=>{a&&this.updateMemberItems([...this.memberItems$.value,...a])})}updateMemberItems(l){l.sort((a,s)=>a.label<s.label?-1:a.label>s.label?1:0),this.memberItems$.next(l)}deleteItem(l){this.updateMemberItems(this.memberItems$.value.filter(a=>a!==l))}onConfirm(){let l={name:this.form.value.name,description:this.form.value.description,users:this.memberItems$.value.filter(a=>a.user).map(a=>a.user.name)};this.yamcs.yamcsClient.createGroup(l).then(()=>this.router.navigate([".."],{relativeTo:this.route})).catch(a=>this.messageService.showError(a))}};t.\u0275fac=function(a){return new(a||t)(f(Ye),f($),f(z),f(L),f(M),f(je),f(xe),f(dt))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:33,vars:5,consts:[["mat-icon-button","","routerLink","..","color","primary"],[1,"form-content","ya-form"],["novalidate","",3,"formGroup"],["formControlName","name","type","text"],["formControlName","description","rows","5"],[1,"ya-button",3,"click"],["yaDataTable","",2,"width","100%"],[1,"action-bar"],["type","submit",1,"ya-button","primary",3,"click","disabled"],["width","1"],["colspan","3"],["matTooltip","User",2,"vertical-align","middle"],[2,"text-align","right"],["icon","delete",3,"click"]],template:function(a,s){if(a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",0)(3,"mat-icon"),o(4,"arrow_back"),i()(),o(5," Create group "),i(),n(6,"div",1)(7,"form",2)(8,"label"),o(9," Group name"),d(10,"br")(11,"input",3),i(),d(12,"br"),n(13,"label"),o(14," Description "),d(15,"textarea",4),i()(),n(16,"p"),o(17,"\xA0"),i(),n(18,"button",5),I("click",function(){return s.showAddMembersDialog()}),n(19,"mat-icon"),o(20,"add_circle_outline"),i(),o(21," Add members "),i(),n(22,"p"),o(23,"\xA0"),i(),c(24,Zr,10,1,"table",6),h(25,"async"),n(26,"p"),o(27,"\xA0"),i(),n(28,"div",7)(29,"button",5),I("click",function(){return s.location.back()}),o(30,"Cancel"),i(),n(31,"button",8),I("click",function(){return s.onConfirm()}),o(32," CREATE "),i()()()()),a&2){let p;m(7),u("formGroup",s.form),m(17),S((p=v(25,3,s.memberItems$))?24:-1,p),m(7),u("disabled",!s.form.valid)}},dependencies:[F,P,D,j,Ae,Ge,de,Ie,ke,$e,X,ye,He,Y,Ce,ft],encapsulation:2,changeDetection:0});let e=t;return e})();var gn=(()=>{let t=class t{constructor(l){this.data=l}};t.\u0275fac=function(a){return new(a||t)(f(We))},t.\u0275cmp=b({type:t,selectors:[["app-application-credentials-dialog"]],standalone:!0,features:[T],decls:22,vars:3,consts:[["mat-dialog-title",""],[1,"dl-horizontal"],["align","end"],["mat-dialog-close","",1,"ya-button","primary"]],template:function(a,s){a&1&&(n(0,"h2",0),o(1,"Service account created"),i(),n(2,"mat-dialog-content")(3,"p"),o(4),i(),n(5,"dl",1)(6,"dt"),o(7,"Application ID"),i(),n(8,"dd")(9,"pre"),o(10),i()(),n(11,"dt"),o(12,"Application Secret"),i(),n(13,"dd")(14,"pre"),o(15),i()()(),n(16,"strong"),o(17,"Important: "),i(),o(18,` Take note of these application credentials. It is not possible to display them after closing this dialog.
`),i(),n(19,"mat-dialog-actions",2)(20,"button",3),o(21,"CLOSE"),i()()),a&2&&(m(4),g(" The service account '",s.data.name,"' was created successfully. You can use this account to connect an application to Yamcs. "),m(6),C(s.data.applicationId),m(5),C(s.data.applicationSecret))},dependencies:[D,ze,qe,Ke,Ze],encapsulation:2,changeDetection:0});let e=t;return e})();var bn=(()=>{let t=class t{constructor(l,a,s,p,E,w,oe,pe){this.router=s,this.route=p,this.yamcs=E,this.messageService=w,this.location=oe,this.dialog=pe,a.setTitle("Create service account"),this.form=l.group({name:new Q("",[mt.required])})}onConfirm(){let l={name:this.form.value.name};this.yamcs.yamcsClient.createServiceAccount(l).then(a=>this.onServerConfirm(a)).catch(a=>this.messageService.showError(a))}onServerConfirm(l){this.dialog.open(gn,{disableClose:!0,closeOnNavigation:!1,data:l,width:"550px"}).afterClosed().subscribe(()=>{this.router.navigate([".."],{relativeTo:this.route})})}};t.\u0275fac=function(a){return new(a||t)(f(Ye),f($),f(z),f(L),f(M),f(xe),f(dt),f(je))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:29,vars:4,consts:[["mat-icon-button","","routerLink","..","color","primary"],[1,"form-content","ya-form"],["novalidate","",3,"formGroup"],[1,"hint"],["formControlName","name","type","text"],[2,"margin-top","32px"],["type","checkbox",3,"disabled","checked"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"click","disabled"]],template:function(a,s){a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",0)(3,"mat-icon"),o(4,"arrow_back"),i()(),o(5," Create service account "),i(),n(6,"div",1)(7,"form",2)(8,"label"),o(9," Service account name "),n(10,"span",3),o(11,"(required)"),i(),d(12,"br")(13,"input",4),i(),n(14,"h2",5),o(15,"Scopes"),i(),n(16,"label"),d(17,"input",6),o(18," Impersonation"),d(19,"br"),n(20,"span",3),o(21,"Grants permission to access the API on behalf of any user in the system."),i()()(),n(22,"p"),o(23,"\xA0"),i(),n(24,"div",7)(25,"button",8),I("click",function(){return s.location.back()}),o(26,"Cancel"),i(),n(27,"button",9),I("click",function(){return s.onConfirm()}),o(28," CREATE "),i()()()()),a&2&&(m(7),u("formGroup",s.form),m(10),u("disabled",!0)("checked",!0),m(10),u("disabled",!s.form.valid))},dependencies:[F,P,D,Ae,Ge,de,Ie,ke,$e,X,He,Y],encapsulation:2,changeDetection:0});let e=t;return e})();var Tn=(()=>{let t=class t{constructor(l,a,s,p,E){this.router=s,this.yamcs=p,this.messageService=E,a.setTitle("Create a User"),this.form=l.group({name:new Q("",[mt.required]),displayName:new Q,email:new Q,password:new Q,passwordConfirmation:new Q})}onConfirm(){let l=this.form.value,a={name:l.name};if(l.displayName&&(a.displayName=l.displayName),l.email&&(a.email=l.email),l.password){if(l.password!==l.passwordConfirmation){alert("Password confirmation does not match password");return}a.password=l.password}this.yamcs.yamcsClient.createUser(a).then(()=>this.router.navigateByUrl(`/admin/iam/users/${l.name}`)).catch(s=>this.messageService.showError(s))}};t.\u0275fac=function(a){return new(a||t)(f(Ye),f($),f(z),f(M),f(xe))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:53,vars:2,consts:[["mat-icon-button","","routerLink","..","color","primary"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["formControlName","name","type","text"],["formControlName","displayName","type","text"],["formControlName","email","type","text"],[1,"section-divider"],["formControlName","password","type","password"],["formControlName","passwordConfirmation","type","password"],[1,"action-bar"],["routerLink","..",1,"ya-button"],["type","submit",1,"ya-button","primary",3,"click","disabled"]],template:function(a,s){a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",0)(3,"mat-icon"),o(4,"arrow_back"),i()(),o(5," Create user "),i(),n(6,"div",1)(7,"form",2)(8,"label"),o(9," Username "),n(10,"span",3),o(11,"(required)"),i(),d(12,"br")(13,"input",4),i(),d(14,"br"),n(15,"label"),o(16," Display name "),n(17,"span",3),o(18,"(optional)"),i(),d(19,"br")(20,"input",5),i(),d(21,"br"),n(22,"label"),o(23," Email "),n(24,"span",3),o(25,"(optional)"),i(),d(26,"br")(27,"input",6),i(),n(28,"p"),o(29,"\xA0"),i(),n(30,"div",7),d(31,"mat-divider"),i(),d(32,"br"),n(33,"label"),o(34," Password "),n(35,"span",3),o(36,"(optional)"),i(),d(37,"br"),n(38,"span",3),o(39,"User without a password may still be able to login if an external identity provider is configured."),i(),d(40,"input",8),i(),d(41,"br"),n(42,"label"),o(43," Password confirmation"),d(44,"br")(45,"input",9),i()(),n(46,"p"),o(47,"\xA0"),i(),n(48,"div",10)(49,"button",11),o(50,"Cancel"),i(),n(51,"button",12),I("click",function(){return s.onConfirm()}),o(52," CREATE "),i()()()()),a&2&&(m(7),u("formGroup",s.form),m(44),u("disabled",!s.form.valid))},dependencies:[F,P,D,Ae,Ge,de,Ie,ke,$e,X,He,Y,Ve],encapsulation:2,changeDetection:0});let e=t;return e})();function Kr(e,t){e&1&&(n(0,"tr")(1,"td",9),o(2,"No rows to display"),i()())}function Jr(e,t){if(e&1){let r=U();n(0,"tr")(1,"td")(2,"mat-icon",10),o(3,"person"),i()(),n(4,"td"),o(5),i(),n(6,"td",11)(7,"ya-text-action",12),I("click",function(){let a=R(r).$implicit,s=_(3);return k(s.deleteItem(a))}),o(8,"DELETE"),i()()()}if(e&2){let r=t.$implicit;m(5),C(r.label)}}function Xr(e,t){if(e&1&&(n(0,"table",5)(1,"tr")(2,"th",8),o(3,"Type"),i(),n(4,"th"),o(5,"Member"),i(),d(6,"th"),i(),c(7,Kr,3,0,"tr"),H(8,Jr,9,1,"tr",null,B),i()),e&2){let r=t;m(7),S(r.length?-1:7),m(),V(r)}}function el(e,t){if(e&1){let r=U();n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2),i(),n(3,"div",0)(4,"form",1)(5,"label"),o(6," Name "),d(7,"br")(8,"input",2),i(),d(9,"br"),n(10,"label"),o(11," Description "),d(12,"textarea",3),i()(),n(13,"p"),o(14,"\xA0"),i(),n(15,"button",4),I("click",function(){R(r);let a=_();return k(a.showAddMembersDialog())}),n(16,"mat-icon"),o(17,"add_circle_outline"),i(),o(18," Add members "),i(),n(19,"p"),o(20,"\xA0"),i(),c(21,Xr,10,1,"table",5),h(22,"async"),n(23,"p"),o(24,"\xA0"),i(),n(25,"div",6)(26,"button",4),I("click",function(){R(r);let a=_();return k(a.location.back())}),o(27,"Cancel"),i(),n(28,"button",7),h(29,"async"),I("click",function(){R(r);let a=_();return k(a.onConfirm())}),o(30," SAVE CHANGES "),i()()()()}if(e&2){let r,l=_();m(2),g("Edit Group: ",t.name,""),m(2),u("formGroup",l.form),m(17),S((r=v(22,4,l.memberItems$))?21:-1,r),m(7),u("disabled",!v(29,6,l.dirty$)||!l.form.valid)}}var Dn=(()=>{let t=class t{constructor(l,a,s,p,E,w,oe,pe){this.router=s,this.yamcs=E,this.messageService=w,this.dialog=oe,this.location=pe,this.memberItems$=new G([]),this.dirty$=new G(!1),a.setTitle("Edit Group");let he=p.snapshot.paramMap.get("name");this.group$=E.yamcsClient.getGroup(he),this.group$.then(_e=>{this.group=_e,this.form=l.group({name:new Q(_e.name),description:new Q(_e.description)}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)});let ct=[];if(_e.users)for(let St of _e.users)ct.push({label:St.displayName||St.name,user:St});this.updateMemberItems(ct,!1)})}showAddMembersDialog(){this.dialog.open(ti,{data:{items:this.memberItems$.value},width:"600px"}).afterClosed().subscribe(a=>{a&&this.updateMemberItems([...this.memberItems$.value,...a])})}updateMemberItems(l,a=!0){l.sort((s,p)=>s.label<p.label?-1:s.label>p.label?1:0),this.memberItems$.next(l),this.dirty$.next(a)}deleteItem(l){this.updateMemberItems(this.memberItems$.value.filter(a=>a!==l))}onConfirm(){let l=this.form.value,a={newName:l.name,description:l.description,memberInfo:{users:this.memberItems$.value.filter(p=>p.user).map(p=>p.user.name)}},s=l.name;this.yamcs.yamcsClient.editGroup(this.group.name,a).then(()=>this.router.navigateByUrl(`/admin/iam/groups/${s}`)).catch(p=>this.messageService.showError(p))}ngOnDestroy(){this.formSubscription?.unsubscribe()}};t.\u0275fac=function(a){return new(a||t)(f(Ye),f($),f(z),f(L),f(M),f(xe),f(je),f(dt))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:2,vars:3,consts:[[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],["formControlName","name","type","text"],["formControlName","description","rows","5"],[1,"ya-button",3,"click"],["yaDataTable","",2,"width","100%"],[1,"action-bar"],["type","submit",1,"ya-button","primary",3,"click","disabled"],["width","1"],["colspan","3"],["matTooltip","User",2,"vertical-align","middle"],[2,"text-align","right"],["icon","delete",3,"click"]],template:function(a,s){if(a&1&&(c(0,el,31,8,"app-admin-page"),h(1,"async")),a&2){let p;S((p=v(1,1,s.group$))?0:-1,p)}},dependencies:[F,P,D,j,Ae,Ge,de,Ie,ke,$e,ye,Y,Ce,ft],encapsulation:2,changeDetection:0});let e=t;return e})();function tl(e,t){e&1&&d(0,"th",16)}function il(e,t){if(e&1){let r=U();n(0,"td",17)(1,"input",18),I("click",function(a){return R(r),k(a.stopPropagation())})("change",function(a){let s=R(r).$implicit,p=_(2);return k(a?p.selection.toggle(s):null)}),i()()}if(e&2){let r=t.$implicit,l=_(2);m(),u("checked",l.selection.isSelected(r))}}function nl(e,t){e&1&&(n(0,"th",19),o(1,"Role"),i())}function al(e,t){if(e&1&&(n(0,"td",20),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.label," ")}}function ol(e,t){e&1&&d(0,"tr",21)}function rl(e,t){if(e&1){let r=U();n(0,"tr",22),I("click",function(){let a=R(r).$implicit,s=_(2);return k(s.toggleOne(a))}),i()}if(e&2){let r=t.$implicit,l=_(2);Me("selected",l.selection.isSelected(r))}}function ll(e,t){if(e&1&&(n(0,"table",3),x(1,8),c(2,tl,1,0,"th",9)(3,il,2,1,"td",10),y(),x(4,11),c(5,nl,2,0,"th",12)(6,al,2,1,"td",13),y(),c(7,ol,1,0,"tr",14)(8,rl,1,2,"tr",15),i()),e&2){let r=_();u("dataSource",r.dataSource),m(7),u("matHeaderRowDef",r.displayedColumns),m(),u("matRowDefColumns",r.displayedColumns)}}function ml(e,t){e&1&&(n(0,"ya-empty-message"),o(1," No rows to display "),i())}var En=(()=>{let t=class t{constructor(l,a,s){this.dialogRef=l,this.data=s,this.displayedColumns=["select","name"],this.filterControl=new Q,this.dataSource=new W,this.selection=new Pt(!0,[]);let E=s.items.filter(w=>w.role).map(w=>w.role.name);a.yamcsClient.getRoles().then(w=>{let oe=(w||[]).filter(pe=>E.indexOf(pe.name)===-1).map(pe=>({label:pe.name,role:pe}));this.dataSource.data=oe})}ngAfterViewInit(){this.filterControl.valueChanges.subscribe(()=>{let l=this.filterControl.value||"";this.dataSource.filter=l.toLowerCase()}),this.dataSource.filterPredicate=(l,a)=>l.label.toLowerCase().indexOf(a)>=0,this.dataSource.paginator=this.paginator}toggleOne(l){(!this.selection.isSelected(l)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(l)}save(){this.dialogRef.close(this.selection.selected)}};t.\u0275fac=function(a){return new(a||t)(f(Ut),f(M),f(We))},t.\u0275cmp=b({type:t,selectors:[["app-add-roles-dialog"]],viewQuery:function(a,s){if(a&1&&me(Le,7),a&2){let p;se(p=ce())&&(s.paginator=p.first)}},standalone:!0,features:[T],decls:13,vars:7,consts:[["mat-dialog-title",""],[1,"filter-bar"],["placeholder","Filter roles",3,"formControl"],["mat-table","",1,"ya-data-table",2,"width","100%",3,"dataSource"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"click","disabled"],["matColumnDef","select"],["mat-header-cell","","class","checkbox",4,"matHeaderCellDef"],["mat-cell","","class","checkbox",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(a,s){a&1&&(n(0,"h2",0),o(1,"Add roles"),i(),n(2,"mat-dialog-content")(3,"div",1),d(4,"ya-search-filter",2),i(),c(5,ll,9,3,"table",3)(6,ml,2,0,"ya-empty-message"),d(7,"mat-paginator",4),i(),n(8,"mat-dialog-actions",5)(9,"button",6),o(10,"CANCEL"),i(),n(11,"button",7),I("click",function(){return s.save()}),o(12,"ADD"),i()()),a&2&&(m(4),u("formControl",s.filterControl),m(),S(s.dataSource?5:-1),m(),S(s.dataSource.data.length?-1:6),m(),u("pageSize",10)("hidePageSize",!0)("showFirstLastButtons",!1),m(4),u("disabled",s.selection.isEmpty()))},dependencies:[D,de,Re,ze,qe,Ke,Ze,Le,q,re,le,Z,ee,ie,te,K,ne,J,be,we],styles:[".selected[_ngcontent-%COMP%]{background-color:#f0f4fd!important}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0});let e=t;return e})();function sl(e,t){e&1&&(n(0,"span",5),o(1," This user has an external identity. Changes to this field may get overwritten on next login. "),i())}function cl(e,t){e&1&&(n(0,"span",5),o(1," This user has an external identity. Changes to this field may get overwritten on next login. "),i())}function pl(e,t){e&1&&(n(0,"tr")(1,"td",13),o(2,"No rows to display"),i()())}function dl(e,t){if(e&1){let r=U();n(0,"tr")(1,"td"),o(2),i(),n(3,"td",14)(4,"ya-text-action",15),I("click",function(){let a=R(r).$implicit,s=_(3);return k(s.deleteItem(a))}),o(5,"DELETE"),i()()()}if(e&2){let r=t.$implicit;m(2),C(r.label)}}function ul(e,t){if(e&1&&(n(0,"table",10)(1,"tr")(2,"th"),o(3,"Role"),i(),d(4,"th"),i(),c(5,pl,3,0,"tr"),H(6,dl,6,1,"tr",null,B),i()),e&2){let r=t;m(5),S(r.length?-1:5),m(),V(r)}}function fl(e,t){if(e&1){let r=U();n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2),i(),n(3,"div",0)(4,"form",1)(5,"div",2),o(6," Username "),d(7,"br")(8,"input",3),i(),d(9,"br"),n(10,"div",2),o(11," Display name "),d(12,"br")(13,"input",4),c(14,sl,2,0,"span",5),i(),d(15,"br"),n(16,"div",2),o(17," Email "),d(18,"br")(19,"input",6),c(20,cl,2,0,"span",5),i(),d(21,"br"),n(22,"div",2),o(23," Active "),d(24,"br")(25,"mat-slide-toggle",7)(26,"br"),n(27,"span",5),o(28,' Inactive users are considered "blocked". They are not or no longer able to login. '),i()(),d(29,"br"),n(30,"div",2),o(31," Superuser "),d(32,"br")(33,"mat-slide-toggle",8)(34,"br"),n(35,"span",5),o(36," Superusers bypass any permission checks. This attribute is intended for system administrators only. "),i()(),n(37,"p"),o(38,"\xA0"),i(),n(39,"button",9),I("click",function(){R(r);let a=_();return k(a.showAddRolesDialog())}),n(40,"mat-icon"),o(41,"add_circle_outline"),i(),o(42," Add roles "),i(),n(43,"p"),o(44,"\xA0"),i(),c(45,ul,8,1,"table",10),h(46,"async"),i(),n(47,"p"),o(48,"\xA0"),i(),n(49,"div",11)(50,"button",9),I("click",function(){R(r);let a=_();return k(a.location.back())}),o(51,"Cancel"),i(),n(52,"button",12),h(53,"async"),I("click",function(){R(r);let a=_();return k(a.onConfirm())}),o(54," SAVE CHANGES "),i()()()()}if(e&2){let r,l=t,a=_();m(2),g("Edit User: ",l.displayName||l.name,""),m(2),u("formGroup",a.form),m(4),u("value",l.name),m(6),S(l.identities&&l.identities.length>0?14:-1),m(6),S(l.identities&&l.identities.length>0?20:-1),m(25),S((r=v(46,7,a.roleItems$))?45:-1,r),m(7),u("disabled",!v(53,9,a.dirty$)||!a.form.valid)}}var wn=(()=>{let t=class t{constructor(l,a,s,p,E,w,oe,pe){this.router=s,this.route=p,this.yamcs=E,this.messageService=w,this.dialog=oe,this.location=pe,this.roleItems$=new G([]),this.dirty$=new G(!1),a.setTitle("Edit User");let he=p.snapshot.paramMap.get("username");this.user$=E.yamcsClient.getUser(he),this.user$.then(_e=>{this.user=_e,this.form=l.group({displayName:new Q(_e.displayName),email:new Q(_e.email),active:new Q(_e.active),superuser:new Q(_e.superuser)}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)});let ct=[];if(_e.roles)for(let St of _e.roles)ct.push({label:St.name,role:St});this.updateRoleItems(ct,!1)})}showAddRolesDialog(){this.dialog.open(En,{data:{items:this.roleItems$.value},width:"600px"}).afterClosed().subscribe(a=>{a&&this.updateRoleItems([...this.roleItems$.value,...a])})}updateRoleItems(l,a=!0){l.sort((s,p)=>s.label<p.label?-1:s.label>p.label?1:0),this.roleItems$.next(l),this.dirty$.next(a)}deleteItem(l){this.updateRoleItems(this.roleItems$.value.filter(a=>a!==l))}onConfirm(){let l=this.form.value,a={roleAssignment:{roles:this.roleItems$.value.filter(s=>s.role).map(s=>s.role.name)}};l.displayName!==this.user.displayName&&(a.displayName=l.displayName),l.email!==this.user.email&&(a.email=l.email),l.active!==this.user.active&&(a.active=l.active),l.superuser!==this.user.superuser&&(a.superuser=l.superuser),this.yamcs.yamcsClient.editUser(this.user.name,a).then(()=>this.router.navigate([".."],{relativeTo:this.route})).catch(s=>this.messageService.showError(s))}ngOnDestroy(){this.formSubscription?.unsubscribe()}};t.\u0275fac=function(a){return new(a||t)(f(Ye),f($),f(z),f(L),f(M),f(xe),f(je),f(dt))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:2,vars:3,consts:[[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"label"],["disabled","","type","text",3,"value"],["formControlName","displayName","type","text"],[1,"hint"],["formControlName","email","type","text"],["formControlName","active"],["formControlName","superuser"],[1,"ya-button",3,"click"],["yaDataTable","",2,"width","100%"],[1,"action-bar"],["type","submit",1,"ya-button","primary",3,"click","disabled"],["colspan","2"],[2,"text-align","right"],["icon","delete",3,"click"]],template:function(a,s){if(a&1&&(c(0,fl,55,11,"app-admin-page"),h(1,"async")),a&2){let p;S((p=v(1,1,s.user$))?0:-1,p)}},dependencies:[F,P,D,j,Ae,Ge,de,Ie,ke,$e,ye,Y,bi,ft],encapsulation:2,changeDetection:0});let e=t;return e})();var _l=e=>[e,"edit"];function hl(e,t){e&1&&(n(0,"th",13),o(1,"Group"),i())}function Cl(e,t){if(e&1&&(n(0,"td",14)(1,"a",15),o(2),i()()),e&2){let r=t.$implicit;m(),u("routerLink",r.name),m(),C(r.name)}}function Sl(e,t){e&1&&(n(0,"th",13),o(1,"Members"),i())}function vl(e,t){if(e&1&&(n(0,"mat-icon",16),o(1,"person"),i(),o(2),d(3,"br")),e&2){let r=t.$implicit;m(2),g(" ",r.displayName||r.name," ")}}function xl(e,t){if(e&1&&(n(0,"td",14),H(1,vl,4,1,null,null,B),i()),e&2){let r=t.$implicit;m(),V(r.users)}}function yl(e,t){e&1&&d(0,"th",17)}function gl(e,t){if(e&1){let r=U();n(0,"td",14)(1,"ya-more")(2,"a",18),o(3," Edit group "),i(),n(4,"button",19),I("click",function(){let a=R(r).$implicit,s=_();return k(s.deleteGroup(a.name))}),o(5,"Delete group"),i()()()}if(e&2){let r=t.$implicit;m(2),u("routerLink",ve(1,_l,r.name))}}function bl(e,t){e&1&&d(0,"tr",20)}function Tl(e,t){e&1&&d(0,"tr",21)}function Dl(e,t){e&1&&(n(0,"ya-empty-message"),o(1," No rows to display "),i())}var Mn=(()=>{let t=class t{constructor(l,a,s,p,E){this.yamcs=l,this.route=s,this.router=p,this.messageService=E,this.filterControl=new Q,this.displayedColumns=["name","members","actions"],this.dataSource=new W,a.setTitle("Groups"),this.dataSource.filterPredicate=(w,oe)=>w.name.toLowerCase().indexOf(oe)>=0}ngAfterViewInit(){let l=this.route.snapshot.queryParamMap;l.has("filter")&&(this.filterControl.setValue(l.get("filter")),this.dataSource.filter=l.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let a=this.filterControl.value||"";this.dataSource.filter=a.toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getGroups().then(l=>{this.dataSource.data=l})}updateURL(){let l=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:l||null},queryParamsHandling:"merge"})}deleteGroup(l){confirm(`Are you sure you want to delete group ${l}`)&&this.yamcs.yamcsClient.deleteGroup(l).then(()=>this.refresh()).catch(a=>this.messageService.showError(a))}};t.\u0275fac=function(a){return new(a||t)(f(M),f($),f(L),f(z),f(xe))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],viewQuery:function(a,s){if(a&1&&me(N,7),a&2){let p;se(p=ce())&&(s.sort=p.first)}},standalone:!0,features:[T],decls:23,vars:5,consts:[["mat-button","","color","primary","routerLink","create"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter groups",3,"formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","members"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],[1,"icon16",2,"vertical-align","middle"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(a,s){a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Groups \xA0\xA0\xA0 "),n(3,"a",0)(4,"mat-icon"),o(5,"add_circle_outline"),i(),o(6," Create group "),i()(),n(7,"div",1)(8,"div",2),d(9,"ya-search-filter",3),i(),n(10,"table",4),x(11,5),c(12,hl,2,0,"th",6)(13,Cl,3,2,"td",7),y(),x(14,8),c(15,Sl,2,0,"th",6)(16,xl,3,0,"td",7),y(),x(17,9),c(18,yl,1,0,"th",10)(19,gl,6,3,"td",7),y(),c(20,bl,1,0,"tr",11)(21,Tl,1,0,"tr",12),i(),c(22,Dl,2,0,"ya-empty-message"),i()()),a&2&&(m(9),u("formControl",s.filterControl),m(),u("dataSource",s.dataSource),m(10),u("matHeaderRowDef",s.displayedColumns),m(),u("matRowDefColumns",s.displayedColumns),m(),S(s.dataSource.data.length?-1:22))},dependencies:[F,P,D,de,Re,X,Qe,Y,rt,N,Se,q,re,le,Z,ee,ie,te,K,ne,J,be,_t,we],encapsulation:2,changeDetection:0});let e=t;return e})();var El=e=>["/admin/iam/users",e];function wl(e,t){if(e&1&&(n(0,"div",2),d(1,"mat-divider"),i(),n(2,"h4"),o(3,"Description"),i(),n(4,"div",3),o(5),i()),e&2){let r=_();m(5),C(r.description||"-")}}function Ml(e,t){if(e&1&&(n(0,"div")(1,"mat-icon",4),o(2,"person"),i(),n(3,"a",5),o(4),i()()),e&2){let r=t.$implicit;m(3),u("routerLink",ve(2,El,r.name)),m(),C(r.displayName||r.name)}}function Il(e,t){if(e&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2),n(3,"a",0)(4,"mat-icon"),o(5,"edit"),i(),o(6," Edit group "),i()(),n(7,"div",1),c(8,wl,6,1),d(9,"br"),n(10,"div",2),d(11,"mat-divider"),i(),n(12,"h4"),o(13),i(),H(14,Ml,5,4,"div",null,B),i()()),e&2){let r=t;m(2),g(" ",r.name," \xA0\xA0\xA0 "),m(6),S(r.description?8:-1),m(5),g("",(r.users==null?null:r.users.length)||0," members"),m(),V(r.users)}}var In=(()=>{let t=class t{constructor(l,a,s){this.yamcs=a,this.title=s,this.group$=new G(null),l.paramMap.subscribe(p=>{let E=p.get("name");this.changeGroup(E)})}changeGroup(l){this.yamcs.yamcsClient.getGroup(l).then(a=>{this.group$.next(a),this.title.setTitle(a.name)})}};t.\u0275fac=function(a){return new(a||t)(f(L),f(M),f($))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:2,vars:3,consts:[["mat-button","","color","primary","routerLink","edit"],[1,"panel-content","ya-link"],[1,"section-divider"],[2,"white-space","pre-wrap"],["matTooltip","User",1,"icon16",2,"vertical-align","middle"],[3,"routerLink"]],template:function(a,s){if(a&1&&(c(0,Il,16,3,"app-admin-page"),h(1,"async")),a&2){let p;S((p=v(1,1,s.group$))?0:-1,p)}},dependencies:[F,P,D,j,X,Qe,Y,Ve,Ce],encapsulation:2,changeDetection:0});let e=t;return e})();function Al(e,t){e&1&&(n(0,"th",13),o(1,"Role"),i())}function Rl(e,t){if(e&1&&(n(0,"td",14)(1,"a",15),o(2),i()()),e&2){let r=t.$implicit;m(),u("routerLink",r.name),m(),C(r.name)}}function kl(e,t){e&1&&(n(0,"th",16),o(1,"Default"),i())}function $l(e,t){if(e&1&&(n(0,"td",14),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.default?"Yes":"No"," ")}}function Ll(e,t){e&1&&d(0,"th",17)}function Fl(e,t){e&1&&d(0,"td",14)}function Pl(e,t){e&1&&d(0,"tr",18)}function Bl(e,t){e&1&&d(0,"tr",19)}function Hl(e,t){e&1&&(n(0,"ya-empty-message"),o(1,"No rows to display"),i())}var An=(()=>{let t=class t{constructor(l,a,s,p){this.yamcs=l,this.route=s,this.router=p,this.filterControl=new Q,this.displayedColumns=["name","default","actions"],this.dataSource=new W,a.setTitle("Roles"),this.dataSource.filterPredicate=(E,w)=>E.name.toLowerCase().indexOf(w)>=0}ngAfterViewInit(){let l=this.route.snapshot.queryParamMap;l.has("filter")&&(this.filterControl.setValue(l.get("filter")),this.dataSource.filter=l.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let a=this.filterControl.value||"";this.dataSource.filter=a.toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getRoles().then(l=>{this.dataSource.data=l})}updateURL(){let l=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:l||null},queryParamsHandling:"merge"})}};t.\u0275fac=function(a){return new(a||t)(f(M),f($),f(L),f(z))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],viewQuery:function(a,s){if(a&1&&me(N,7),a&2){let p;se(p=ce())&&(s.sort=p.first)}},standalone:!0,features:[T],decls:19,vars:5,consts:[[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter roles",3,"formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","default"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,s){a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2,"Roles"),i(),n(3,"div",0)(4,"div",1),d(5,"ya-search-filter",2),i(),n(6,"table",3),x(7,4),c(8,Al,2,0,"th",5)(9,Rl,3,2,"td",6),y(),x(10,7),c(11,kl,2,0,"th",8)(12,$l,2,1,"td",6),y(),x(13,9),c(14,Ll,1,0,"th",10)(15,Fl,1,0,"td",6),y(),c(16,Pl,1,0,"tr",11)(17,Bl,1,0,"tr",12),i(),c(18,Hl,2,0,"ya-empty-message"),i()()),a&2&&(m(5),u("formControl",s.filterControl),m(),u("dataSource",s.dataSource),m(10),u("matHeaderRowDef",s.displayedColumns),m(),u("matRowDefColumns",s.displayedColumns),m(),S(s.dataSource.data.length?-1:18))},dependencies:[F,P,D,de,Re,X,N,Se,q,re,le,Z,ee,ie,te,K,ne,J,be,we],encapsulation:2,changeDetection:0});let e=t;return e})();function Vl(e,t){if(e&1&&(n(0,"div"),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r," ")}}function jl(e,t){if(e&1&&(n(0,"dt"),o(1),i(),n(2,"dd"),o(3),i()),e&2){let r=t.$implicit;m(),C(r.type),m(2),C(r.objects)}}function Ul(e,t){if(e&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2),i(),n(3,"div",0)(4,"h4"),o(5,"Description"),i(),n(6,"div",1),o(7),i(),d(8,"br"),n(9,"div",2),d(10,"mat-divider"),i(),n(11,"h4"),o(12),i(),H(13,Vl,2,1,"div",null,B),d(15,"br"),n(16,"div",2),d(17,"mat-divider"),i(),n(18,"h4"),o(19),i(),n(20,"dl"),H(21,jl,4,2,null,null,B),i()()()),e&2){let r=t;m(2),g(" ",r.name," "),m(5),C(r.description||"-"),m(5),g("",(r.systemPrivileges==null?null:r.systemPrivileges.length)||0," assigned system privileges"),m(),V(r.systemPrivileges),m(6),g("",(r.objectPrivileges==null?null:r.objectPrivileges.length)||0," assigned object privileges"),m(2),V(r.objectPrivileges)}}var Rn=(()=>{let t=class t{constructor(l,a,s){this.yamcs=a,this.title=s,this.role$=new G(null),l.paramMap.subscribe(p=>{let E=p.get("name");this.changeRole(E)})}changeRole(l){this.yamcs.yamcsClient.getRole(l).then(a=>{this.role$.next(a),this.title.setTitle(a.name)})}};t.\u0275fac=function(a){return new(a||t)(f(L),f(M),f($))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:2,vars:3,consts:[[1,"panel-content","ya-link"],[2,"white-space","pre-wrap"],[1,"section-divider"]],template:function(a,s){if(a&1&&(c(0,Ul,23,4,"app-admin-page"),h(1,"async")),a&2){let p;S((p=v(1,1,s.role$))?0:-1,p)}},dependencies:[F,P,D,j,Ve],encapsulation:2,changeDetection:0});let e=t;return e})();function Nl(e,t){e&1&&(n(0,"th",12),o(1,"Service account"),i())}function Ol(e,t){if(e&1&&(n(0,"td",13),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.name," ")}}function Gl(e,t){e&1&&d(0,"th",14)}function Yl(e,t){if(e&1){let r=U();n(0,"td",13)(1,"ya-more")(2,"button",15),I("click",function(){let a=R(r).$implicit,s=_();return k(s.deleteServiceAccount(a.name))}),o(3," Delete service account "),i()()()}}function Ql(e,t){e&1&&d(0,"tr",16)}function Wl(e,t){e&1&&d(0,"tr",17)}function zl(e,t){e&1&&(n(0,"ya-empty-message"),o(1," No rows to display "),i())}var kn=(()=>{let t=class t{constructor(l,a,s,p,E){this.yamcs=l,this.route=s,this.router=p,this.messageService=E,this.filterControl=new Q,this.displayedColumns=["name","actions"],this.dataSource=new W,a.setTitle("Service accounts"),this.dataSource.filterPredicate=(w,oe)=>w.name.toLowerCase().indexOf(oe)>=0}ngAfterViewInit(){let l=this.route.snapshot.queryParamMap;l.has("filter")&&(this.filterControl.setValue(l.get("filter")),this.dataSource.filter=l.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let a=this.filterControl.value||"";this.dataSource.filter=a.toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getServiceAccounts().then(l=>{this.dataSource.data=l.serviceAccounts||[]})}updateURL(){let l=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:l||null},queryParamsHandling:"merge"})}deleteServiceAccount(l){confirm(`Are you sure you want to delete service account ${l}`)&&this.yamcs.yamcsClient.deleteServiceAccount(l).then(()=>this.refresh()).catch(a=>this.messageService.showError(a))}};t.\u0275fac=function(a){return new(a||t)(f(M),f($),f(L),f(z),f(xe))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],viewQuery:function(a,s){if(a&1&&me(N,7),a&2){let p;se(p=ce())&&(s.sort=p.first)}},standalone:!0,features:[T],decls:20,vars:5,consts:[["mat-button","","color","primary","routerLink","create"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter service accounts",3,"formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(a,s){a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Service accounts \xA0\xA0\xA0 "),n(3,"a",0)(4,"mat-icon"),o(5,"add_circle_outline"),i(),o(6," Create service account "),i()(),n(7,"div",1)(8,"div",2),d(9,"ya-search-filter",3),i(),n(10,"table",4),x(11,5),c(12,Nl,2,0,"th",6)(13,Ol,2,1,"td",7),y(),x(14,8),c(15,Gl,1,0,"th",9)(16,Yl,4,0,"td",7),y(),c(17,Ql,1,0,"tr",10)(18,Wl,1,0,"tr",11),i(),c(19,zl,2,0,"ya-empty-message"),i()()),a&2&&(m(9),u("formControl",s.filterControl),m(),u("dataSource",s.dataSource),m(7),u("matHeaderRowDef",s.displayedColumns),m(),u("matRowDefColumns",s.displayedColumns),m(),S(s.dataSource.data.length?-1:19))},dependencies:[F,P,D,de,Re,X,Qe,Y,rt,N,Se,q,re,le,Z,ee,ie,te,K,ne,J,be,_t,we],encapsulation:2,changeDetection:0});let e=t;return e})();var ql=e=>[e,"edit"];function Zl(e,t){e&1&&(n(0,"th",13),o(1,"Username"),i())}function Kl(e,t){if(e&1&&(n(0,"td",14)(1,"a",15),o(2),i()()),e&2){let r=t.$implicit;m(),u("routerLink",r.name),m(),g(" ",r.name," ")}}function Jl(e,t){e&1&&(n(0,"th",13),o(1,"Display name"),i())}function Xl(e,t){if(e&1&&(n(0,"td",14),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.displayName||"-"," ")}}function em(e,t){e&1&&(n(0,"th",16),o(1,"Groups"),i())}function tm(e,t){e&1&&o(0," , ")}function im(e,t){if(e&1&&(c(0,tm,1,0),o(1)),e&2){let r=t.$implicit,l=t.$index;S(l!==0?0:-1),m(),g(" ",r.name," ")}}function nm(e,t){e&1&&o(0," - ")}function am(e,t){if(e&1&&(n(0,"td",14),H(1,im,2,2,null,null,B),c(3,nm,1,0),i()),e&2){let r=t.$implicit;m(),V(r.groups),m(2),S(r.groups?-1:3)}}function om(e,t){e&1&&(n(0,"th",13),o(1,"Registered"),i())}function rm(e,t){if(e&1&&(n(0,"td",14),o(1),h(2,"datetime"),i()),e&2){let r=t.$implicit;m(),C(v(2,1,r.creationTime)||"never")}}function lm(e,t){e&1&&(n(0,"th",13),o(1,"Last Login"),i())}function mm(e,t){if(e&1&&(n(0,"td",14),o(1),h(2,"datetime"),i()),e&2){let r=t.$implicit;m(),C(v(2,1,r.lastLoginTime)||"never")}}function sm(e,t){e&1&&d(0,"th",17)}function cm(e,t){if(e&1){let r=U();n(0,"td",14)(1,"ya-more")(2,"a",18),o(3," Edit user "),i(),n(4,"button",19),I("click",function(){let a=R(r).$implicit,s=_(2);return k(s.deleteUser.next(a.name))}),o(5,"Delete user"),i()()()}if(e&2){let r=t.$implicit;m(2),u("routerLink",ve(1,ql,r.name))}}function pm(e,t){e&1&&d(0,"tr",20)}function dm(e,t){e&1&&d(0,"tr",21)}function um(e,t){if(e&1&&(n(0,"table",0),x(1,1),c(2,Zl,2,0,"th",2)(3,Kl,3,2,"td",3),y(),x(4,4),c(5,Jl,2,0,"th",2)(6,Xl,2,1,"td",3),y(),x(7,5),c(8,em,2,0,"th",6)(9,am,4,1,"td",3),y(),x(10,7),c(11,om,2,0,"th",2)(12,rm,3,3,"td",3),y(),x(13,8),c(14,lm,2,0,"th",2)(15,mm,3,3,"td",3),y(),x(16,9),c(17,sm,1,0,"th",10)(18,cm,6,3,"td",3),y(),c(19,pm,1,0,"tr",11)(20,dm,1,0,"tr",12),i()),e&2){let r=_();u("dataSource",r.dataSource),m(19),u("matHeaderRowDef",r.displayedColumns),m(),u("matRowDefColumns",r.displayedColumns)}}function fm(e,t){e&1&&(n(0,"ya-empty-message"),o(1," No rows to display "),i())}var $n=(()=>{let t=class t{constructor(){this.displayedColumns=["name","displayName","groups","actions"],this.deleteUser=new Mt,this.dataSource=new W}ngAfterViewInit(){this.dataSource.filterPredicate=(l,a)=>l.name.toLowerCase().indexOf(a)>=0,this.dataSource.sort=this.sort}ngOnChanges(){this.dataSource.data=this.users||[],this.dataSource.filter=this.filter}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=b({type:t,selectors:[["app-users-table"]],viewQuery:function(a,s){if(a&1&&me(N,5),a&2){let p;se(p=ce())&&(s.sort=p.first)}},inputs:{users:"users",filter:"filter"},outputs:{deleteUser:"deleteUser"},standalone:!0,features:[Rt,T],decls:2,vars:2,consts:[["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","displayName"],["matColumnDef","groups"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","registered"],["matColumnDef","lastLogin"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell",""],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(a,s){a&1&&c(0,um,21,3,"table",0)(1,fm,2,0,"ya-empty-message"),a&2&&(S(s.dataSource?0:-1),m(),S(s.dataSource.data.length?-1:1))},dependencies:[D,X,rt,N,Se,q,re,le,Z,ee,ie,te,K,ne,J,be,_t,Ct],encapsulation:2,changeDetection:0});let e=t;return e})();function _m(e,t){if(e&1&&(o(0),h(1,"async")),e&2){let r=_();g(" ACTIVE (",v(1,1,r.activeUserCount$),") ")}}function hm(e,t){if(e&1&&(o(0),h(1,"async")),e&2){let r=_();g(" SUPERUSERS (",v(1,1,r.superUserCount$),") ")}}function Cm(e,t){if(e&1&&(o(0),h(1,"async")),e&2){let r=_();g(" INTERNAL (",v(1,1,r.internalUserCount$),") ")}}function Sm(e,t){if(e&1&&(o(0),h(1,"async")),e&2){let r=_();g(" BLOCKED (",v(1,1,r.blockedUserCount$),") ")}}var Ln=(()=>{let t=class t{constructor(l,a,s,p,E){this.yamcs=l,this.route=s,this.router=p,this.messageService=E,this.filterControl=new Q,this.filterValue$=new G(null),this.users$=new G([]),a.setTitle("Users")}ngAfterViewInit(){let l=this.route.snapshot.queryParamMap;l.has("filter")&&(this.filterControl.setValue(l.get("filter")),this.filterValue$.next(l.get("filter").toLowerCase())),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let a=this.filterControl.value||"";this.filterValue$.next(a.toLowerCase())}),this.activeUsers$=this.users$.pipe(Te(a=>a.filter(s=>s.active))),this.activeUserCount$=this.activeUsers$.pipe(Te(a=>a.length)),this.superUsers$=this.users$.pipe(Te(a=>a.filter(s=>s.superuser))),this.superUserCount$=this.superUsers$.pipe(Te(a=>a.length)),this.internalUsers$=this.users$.pipe(Te(a=>a.filter(s=>!s.identities))),this.internalUserCount$=this.internalUsers$.pipe(Te(a=>a.length)),this.blockedUsers$=this.users$.pipe(Te(a=>a.filter(s=>!s.active))),this.blockedUserCount$=this.blockedUsers$.pipe(Te(a=>a.length)),this.refresh()}refresh(){this.yamcs.yamcsClient.getUsers().then(l=>{this.users$.next(l)})}updateURL(){let l=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:l||null},queryParamsHandling:"merge"})}deleteUser(l){confirm(`Are you sure you want to delete the user account '${l}'`)&&this.yamcs.yamcsClient.deleteUser(l).then(()=>this.refresh()).catch(a=>this.messageService.showError(a))}};t.\u0275fac=function(a){return new(a||t)(f(M),f($),f(L),f(z),f(xe))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:35,vars:26,consts:[["mat-button","","color","primary","routerLink","create"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter users",3,"formControl"],["animationDuration","0ms",1,"secondary",3,"mat-stretch-tabs"],["mat-tab-label",""],[3,"deleteUser","users","filter"]],template:function(a,s){a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Users \xA0\xA0\xA0 "),n(3,"a",0)(4,"mat-icon"),o(5,"add_circle_outline"),i(),o(6," Create user "),i()(),n(7,"div",1)(8,"div",2),d(9,"ya-search-filter",3),i(),n(10,"mat-tab-group",4)(11,"mat-tab"),c(12,_m,2,3,"ng-template",5),d(13,"br"),n(14,"app-users-table",6),h(15,"async"),h(16,"async"),I("deleteUser",function(E){return s.deleteUser(E)}),i()(),n(17,"mat-tab"),c(18,hm,2,3,"ng-template",5),d(19,"br"),n(20,"app-users-table",6),h(21,"async"),h(22,"async"),I("deleteUser",function(E){return s.deleteUser(E)}),i()(),n(23,"mat-tab"),c(24,Cm,2,3,"ng-template",5),d(25,"br"),n(26,"app-users-table",6),h(27,"async"),h(28,"async"),I("deleteUser",function(E){return s.deleteUser(E)}),i()(),n(29,"mat-tab"),c(30,Sm,2,3,"ng-template",5),d(31,"br"),n(32,"app-users-table",6),h(33,"async"),h(34,"async"),I("deleteUser",function(E){return s.deleteUser(E)}),i()()()()()),a&2&&(m(9),u("formControl",s.filterControl),m(),u("mat-stretch-tabs",!1),m(4),u("users",v(15,10,s.activeUsers$))("filter",v(16,12,s.filterValue$)),m(6),u("users",v(21,14,s.superUsers$))("filter",v(22,16,s.filterValue$)),m(6),u("users",v(27,18,s.internalUsers$))("filter",v(28,20,s.filterValue$)),m(6),u("users",v(33,22,s.blockedUsers$))("filter",v(34,24,s.filterValue$)))},dependencies:[F,P,D,j,de,Re,X,Qe,Y,Ot,Gt,Yt,we,$n],encapsulation:2,changeDetection:0});let e=t;return e})();function vm(e,t){e&1&&(n(0,"p"),o(1,"Confirmation does not match password"),i())}var xm=e=>{let t=e.get("password").value,r=e.get("passwordConfirmation").value;return t&&r&&t!==r?{passwordMismatch:!0}:null},Fn=(()=>{let t=class t{constructor(l,a,s){this.data=l,this.yamcs=a,this.user=l.user,this.form=s.group({password:new Q(null,mt.required),passwordConfirmation:new Q(null,mt.required)},{validator:xm})}changePassword(){let l=this.form.value;this.yamcs.yamcsClient.editUser(this.user.name,{password:l.password})}};t.\u0275fac=function(a){return new(a||t)(f(We),f(M),f(Ye))},t.\u0275cmp=b({type:t,selectors:[["app-change-user-password-dialog"]],standalone:!0,features:[T],decls:19,vars:4,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","password","formControlName","password"],["type","password","formControlName","passwordConfirmation"],["align","end"],["mat-dialog-close","",1,"ya-button"],["mat-dialog-close","",1,"ya-button","primary",3,"click","disabled"]],template:function(a,s){a&1&&(n(0,"h2",0),o(1),i(),n(2,"mat-dialog-content")(3,"form",1)(4,"label"),o(5," Password"),d(6,"br")(7,"input",2),i(),d(8,"br"),n(9,"label"),o(10," Password confirmation"),d(11,"br")(12,"input",3),i()(),c(13,vm,2,0,"p"),i(),n(14,"mat-dialog-actions",4)(15,"button",5),o(16,"CANCEL"),i(),n(17,"button",6),I("click",function(){return s.changePassword()}),o(18," OK "),i()()),a&2&&(m(),g("Change password of ",s.user.name,""),m(2),u("formGroup",s.form),m(10),S(s.form.errors!=null&&s.form.errors.passwordMismatch?13:-1),m(4),u("disabled",!s.form.valid))},dependencies:[D,Ae,Ge,de,Ie,ke,$e,ze,qe,Ke,Ze],encapsulation:2,changeDetection:0});let e=t;return e})();var ym=e=>[e];function gm(e,t){if(e&1&&(n(0,"a",5),o(1),i()),e&2){let r=_();u("routerLink",ve(2,ym,"../"+r.createdBy.name)),m(),C(r.createdBy.name||"-")}}function bm(e,t){e&1&&o(0," - ")}function Tm(e,t){if(e&1&&(o(0),d(1,"br")),e&2){let r=t.$implicit;g(" ",r.name," ")}}function Dm(e,t){if(e&1){let r=U();n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),i(),n(5,"td")(6,"ya-text-action",8),I("click",function(){let a=R(r).$implicit,s=_(3);return k(s.deleteIdentity(a))}),o(7," DELETE "),i()()()}if(e&2){let r=t.$implicit;m(2),C(r.identity),m(2),C(r.provider)}}function Em(e,t){if(e&1&&(n(0,"div",6),d(1,"mat-divider"),i(),n(2,"h4"),o(3,"External Identities"),i(),n(4,"table",7)(5,"tr")(6,"th"),o(7,"Identity"),i(),n(8,"th"),o(9,"Provider"),i(),d(10,"th"),i(),H(11,Dm,8,2,"tr",null,B),i()),e&2){let r=_();m(11),V(r.identities)}}function wm(e,t){if(e&1){let r=U();n(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",0)(3,"mat-icon"),o(4,"arrow_back"),i()(),o(5),n(6,"a",1)(7,"mat-icon"),o(8,"edit"),i(),o(9," Edit user "),i(),n(10,"a",2),I("click",function(){R(r);let a=_();return k(a.showChangeUserPasswordDialog())}),n(11,"mat-icon"),o(12,"account_box"),i(),o(13," Change password "),i()(),n(14,"div",3)(15,"dl",4)(16,"dt"),o(17,"Username"),i(),n(18,"dd"),o(19),i(),n(20,"dt"),o(21,"Display name"),i(),n(22,"dd"),o(23),i(),n(24,"dt"),o(25,"Email"),i(),n(26,"dd"),o(27),i(),n(28,"dt"),o(29,"Joined"),i(),n(30,"dd"),o(31),h(32,"datetime"),i(),n(33,"dt"),o(34,"Confirmed at"),i(),n(35,"dd"),o(36),h(37,"datetime"),i(),n(38,"dt"),o(39,"Last login"),i(),n(40,"dd"),o(41),h(42,"datetime"),i(),n(43,"dt"),o(44,"Active"),i(),n(45,"dd"),o(46),i(),n(47,"dt"),o(48,"Superuser"),i(),n(49,"dd"),o(50),i(),n(51,"dt"),o(52,"Created by"),i(),n(53,"dd"),c(54,gm,2,4,"a",5)(55,bm,1,0),i()(),n(56,"div",6),d(57,"mat-divider"),i(),n(58,"h4"),o(59),i(),H(60,Tm,2,1,"br",null,B),c(62,Em,13,0),i()()}if(e&2){let r=t;m(5),g(" ",r.displayName||r.name," \xA0\xA0\xA0 "),m(5),u("disabled",r.identities==null?null:r.identities.length),m(9),C(r.name),m(4),C(r.displayName||"-"),m(4),C(r.email||"-"),m(4),C(v(32,13,r.creationTime)),m(5),C(v(37,15,r.confirmationTime)||"never"),m(5),C(v(42,17,r.lastLoginTime)||"never"),m(5),C(r.active),m(4),C(r.superuser),m(4),S(r.createdBy?54:55),m(5),g("",(r.roles==null?null:r.roles.length)||"0"," assigned roles"),m(),V(r.roles),m(2),S(r.identities?62:-1)}}var Pn=(()=>{let t=class t{constructor(l,a,s,p,E){this.yamcs=a,this.title=s,this.dialog=p,this.messageService=E,this.user$=new G(null),l.paramMap.subscribe(w=>{let oe=w.get("username");this.changeUser(oe)})}changeUser(l){this.yamcs.yamcsClient.getUser(l).then(a=>{this.user$.next(a),this.title.setTitle(a.name)})}deleteIdentity(l){if(confirm(`Are you sure you want to delete the ${l.provider} identity?`)){let a=this.user$.value.name;this.yamcs.yamcsClient.deleteIdentity(a,l.provider).then(()=>this.changeUser(a)).catch(s=>this.messageService.showError(s))}}showChangeUserPasswordDialog(){this.dialog.open(Fn,{data:{user:this.user$.value},width:"400px"})}};t.\u0275fac=function(a){return new(a||t)(f(L),f(M),f($),f(je),f(xe))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:2,vars:3,consts:[["mat-icon-button","","routerLink","..","color","primary"],["mat-button","","color","primary","routerLink","edit"],["mat-button","","color","primary",3,"click","disabled"],[1,"panel-content","ya-link"],[1,"dl-horizontal"],[3,"routerLink"],[1,"section-divider"],["yaDataTable",""],["icon","delete",3,"click"]],template:function(a,s){if(a&1&&(c(0,wm,63,19,"app-admin-page"),h(1,"async")),a&2){let p;S((p=v(1,1,s.user$))?0:-1,p)}},dependencies:[F,P,D,j,X,ye,Qe,He,Y,Ve,ft,Ct],encapsulation:2,changeDetection:0});let e=t;return e})();function Mm(e,t){e&1&&(n(0,"th",12),o(1,"Valid period (at 0h UTC)"),i())}function Im(e,t){if(e&1&&(n(0,"td",13),o(1),h(2,"date"),h(3,"date"),i()),e&2){let r=t.$implicit;m(),ot(" ",Be(2,2,r.start,"y-MM-dd")," \u2013 ",Be(3,5,r.stop,"y-MM-dd")," ")}}function Am(e,t){e&1&&(n(0,"th",12),o(1,"Leap seconds"),i())}function Rm(e,t){if(e&1&&(n(0,"td",13),o(1),i()),e&2){let r=t.$implicit;m(),C(r.leapSeconds)}}function km(e,t){e&1&&(n(0,"th",12),o(1,"TAI - UTC"),i())}function $m(e,t){if(e&1&&(n(0,"td",13),o(1),i()),e&2){let r=t.$implicit;m(),g("",r.taiDifference," s")}}function Lm(e,t){e&1&&(n(0,"th",12),o(1,"UTC - TAI"),i())}function Fm(e,t){if(e&1&&(n(0,"td",13),o(1),i()),e&2){let r=t.$implicit;m(),g("",-r.taiDifference," s")}}function Pm(e,t){e&1&&d(0,"th",14)}function Bm(e,t){e&1&&d(0,"td",13)}function Hm(e,t){e&1&&d(0,"tr",15)}function Vm(e,t){e&1&&d(0,"tr",16)}var Bn=(()=>{let t=class t{constructor(l,a){this.displayedColumns=["period","leap-seconds","tai-utc","actions"],this.dataSource=new W,a.setTitle("Leap seconds"),l.yamcsClient.getLeapSeconds().then(s=>{this.dataSource.data=s.ranges})}};t.\u0275fac=function(a){return new(a||t)(f(M),f($))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:22,vars:3,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","period"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","leap-seconds"],["matColumnDef","tai-utc"],["matColumnDef","utc-tai"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,s){a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Leap seconds "),i(),n(3,"div",0)(4,"table",1),x(5,2),c(6,Mm,2,0,"th",3)(7,Im,4,8,"td",4),y(),x(8,5),c(9,Am,2,0,"th",3)(10,Rm,2,1,"td",4),y(),x(11,6),c(12,km,2,0,"th",3)(13,$m,2,1,"td",4),y(),x(14,7),c(15,Lm,2,0,"th",3)(16,Fm,2,1,"td",4),y(),x(17,8),c(18,Pm,1,0,"th",9)(19,Bm,1,0,"td",4),y(),c(20,Hm,1,0,"tr",10)(21,Vm,1,0,"tr",11),i()()()),a&2&&(m(4),u("dataSource",s.dataSource),m(16),u("matHeaderRowDef",s.displayedColumns),m(),u("matRowDefColumns",s.displayedColumns))},dependencies:[F,P,D,_i,q,re,le,Z,ee,ie,te,K,ne,J],encapsulation:2,changeDetection:0});let e=t;return e})();function jm(e,t){e&1&&(n(0,"th",7),o(1,"Name"),i())}function Um(e,t){if(e&1&&(n(0,"td",8),o(1),i()),e&2){let r=t.$implicit;m(),C(r)}}function Nm(e,t){e&1&&d(0,"tr",9)}function Om(e,t){e&1&&d(0,"tr",10)}var Hn=(()=>{let t=class t{constructor(l,a){this.displayedColumns=["name"],this.dataSource=new W,a.setTitle("Processor types"),l.yamcsClient.getProcessorTypes().then(s=>{this.dataSource.data=s.types||[]})}};t.\u0275fac=function(a){return new(a||t)(f(M),f($))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:10,vars:3,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(a,s){a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Processor types "),i(),n(3,"div",0)(4,"table",1),x(5,2),c(6,jm,2,0,"th",3)(7,Um,2,1,"td",4),y(),c(8,Nm,1,0,"tr",5)(9,Om,1,0,"tr",6),i()()()),a&2&&(m(4),u("dataSource",s.dataSource),m(4),u("matHeaderRowDef",s.displayedColumns),m(),u("matRowDefColumns",s.displayedColumns))},dependencies:[F,P,D,q,re,le,Z,ee,ie,te,K,ne,J],encapsulation:2,changeDetection:0});let e=t;return e})();function Gm(e,t){e&1&&(n(0,"mat-icon",0),o(1," check_circle "),i())}function Ym(e,t){e&1&&(n(0,"mat-icon",1),o(1," lens "),i())}var Vn=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=b({type:t,selectors:[["app-replication-state"]],inputs:{connected:"connected"},standalone:!0,features:[T],decls:2,vars:2,consts:[[1,"success"],[1,"down"]],template:function(a,s){a&1&&c(0,Gm,2,0,"mat-icon",0)(1,Ym,2,0,"mat-icon",1),a&2&&(S(s.connected===!0?0:-1),m(),S(s.connected===!1?1:-1))},dependencies:[D,Y],encapsulation:2,changeDetection:0});let e=t;return e})();function Qm(e,t){if(e&1&&(n(0,"tr")(1,"td"),o(2),i()()),e&2){let r=t.$implicit;m(2),C(r)}}var jn=(()=>{let t=class t{constructor(l){this.data=l}};t.\u0275fac=function(a){return new(a||t)(f(We))},t.\u0275cmp=b({type:t,selectors:[["app-show-streams-dialog"]],standalone:!0,features:[T],decls:9,vars:0,consts:[["mat-dialog-title",""],["yaDataTable","",2,"width","100%"],["align","end"],["mat-dialog-close","",1,"ya-button"]],template:function(a,s){a&1&&(n(0,"h2",0),o(1,"Replicated Streams"),i(),n(2,"mat-dialog-content")(3,"table",1),H(4,Qm,3,1,"tr",null,B),i()(),n(6,"mat-dialog-actions",2)(7,"button",3),o(8,"Close"),i()()),a&2&&(m(4),V(s.data.streams))},dependencies:[D,ye,ze,qe,Ke,Ze],encapsulation:2});let e=t;return e})();var Un=()=>[];function Wm(e,t){e&1&&d(0,"th",26)}function zm(e,t){if(e&1&&(n(0,"td",27),d(1,"app-replication-state",28),i()),e&2){let r=t.$implicit;m(),u("connected",!!r.localAddress&&!!r.remoteAddress)}}function qm(e,t){e&1&&(n(0,"th",29),o(1,"Instance"),i())}function Zm(e,t){if(e&1&&(n(0,"td",30),o(1),i()),e&2){let r=t.$implicit;m(),C(r.instance)}}function Km(e,t){e&1&&(n(0,"th",31),o(1,"Streams"),i())}function Jm(e,t){if(e&1){let r=U();n(0,"td",30)(1,"span",32),I("click",function(){let a=R(r).$implicit,s=_(2);return k(s.showReplicationStreams(a.streams||[]))}),o(2),i()()}if(e&2){let r=t.$implicit;m(2),g("",(r.streams||Xe(1,Un)).length," streams")}}function Xm(e,t){e&1&&(n(0,"th",33),o(1,"Mode"),i())}function es(e,t){if(e&1&&(n(0,"td",34),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.push?"PUSH":"PULL"," ")}}function ts(e,t){e&1&&(n(0,"th",35),o(1,"Local Address"),i())}function is(e,t){if(e&1&&(n(0,"td",30),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.localAddress||"-"," ")}}function ns(e,t){e&1&&(n(0,"th",35),o(1,"Remote Address"),i())}function as(e,t){if(e&1&&(n(0,"td",30),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.remoteAddress||"-"," ")}}function os(e,t){e&1&&(n(0,"th",29),o(1,"Pull From"),i())}function rs(e,t){if(e&1&&(n(0,"td",30),o(1),i()),e&2){let r=t.$implicit;m(),C(r.pullFrom||"-")}}function ls(e,t){e&1&&(n(0,"th",36),o(1,"TX"),i())}function ms(e,t){if(e&1&&(n(0,"td",30),o(1),h(2,"number"),i()),e&2){let r=t.$implicit;m(),C(v(2,1,r.tx)||"-")}}function ss(e,t){e&1&&d(0,"th",37)}function cs(e,t){e&1&&d(0,"td",30)}function ps(e,t){e&1&&d(0,"tr",38)}function ds(e,t){e&1&&d(0,"tr",39)}function us(e,t){if(e&1&&(n(0,"table",1),x(1,5),c(2,Wm,1,0,"th",6)(3,zm,2,1,"td",7),y(),x(4,8),c(5,qm,2,0,"th",9)(6,Zm,2,1,"td",10),y(),x(7,11),c(8,Km,2,0,"th",12)(9,Jm,3,2,"td",10),y(),x(10,13),c(11,Xm,2,0,"th",14)(12,es,2,1,"td",15),y(),x(13,16),c(14,ts,2,0,"th",17)(15,is,2,1,"td",10),y(),x(16,18),c(17,ns,2,0,"th",17)(18,as,2,1,"td",10),y(),x(19,19),c(20,os,2,0,"th",9)(21,rs,2,1,"td",10),y(),x(22,20),c(23,ls,2,0,"th",21)(24,ms,3,3,"td",10),y(),x(25,22),c(26,ss,1,0,"th",23)(27,cs,1,0,"td",10),y(),c(28,ps,1,0,"tr",24)(29,ds,1,0,"tr",25),i()),e&2){let r=_();u("dataSource",r.slavesDataSource),m(28),u("matHeaderRowDef",r.slaveColumns),m(),u("matRowDefColumns",r.slaveColumns)}}function fs(e,t){e&1&&(n(0,"ya-empty-message",2),o(1,"Not configured"),i())}function _s(e,t){e&1&&d(0,"th",26)}function hs(e,t){if(e&1&&(n(0,"td",27),d(1,"app-replication-state",28),i()),e&2){let r=t.$implicit;m(),u("connected",!!r.localAddress&&!!r.remoteAddress)}}function Cs(e,t){e&1&&(n(0,"th",29),o(1,"Instance"),i())}function Ss(e,t){if(e&1&&(n(0,"td",30),o(1),i()),e&2){let r=t.$implicit;m(),C(r.instance)}}function vs(e,t){e&1&&(n(0,"th",31),o(1,"Streams"),i())}function xs(e,t){if(e&1){let r=U();n(0,"td",30)(1,"span",32),I("click",function(){let a=R(r).$implicit,s=_(2);return k(s.showReplicationStreams(a.streams||[]))}),o(2),i()()}if(e&2){let r=t.$implicit;m(2),g("",(r.streams||Xe(1,Un)).length," streams")}}function ys(e,t){e&1&&(n(0,"th",33),o(1,"Mode"),i())}function gs(e,t){if(e&1&&(n(0,"td",30),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.push?"PUSH":"PULL"," ")}}function bs(e,t){e&1&&(n(0,"th",35),o(1,"Local Address"),i())}function Ts(e,t){if(e&1&&(n(0,"td",30),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.localAddress||"-"," ")}}function Ds(e,t){e&1&&(n(0,"th",35),o(1,"Remote Address"),i())}function Es(e,t){if(e&1&&(n(0,"td",30),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.remoteAddress||"-"," ")}}function ws(e,t){e&1&&(n(0,"th",29),o(1,"Push To"),i())}function Ms(e,t){if(e&1&&(n(0,"td",30),o(1),i()),e&2){let r=t.$implicit;m(),C(r.pushTo||"-")}}function Is(e,t){e&1&&(n(0,"th",44),o(1,"Local\xA0TX"),i())}function As(e,t){if(e&1&&(o(0),h(1,"number")),e&2){let r=_().$implicit;g(" ",v(1,1,r.localTx)||"-"," ")}}function Rs(e,t){e&1&&o(0," - ")}function ks(e,t){if(e&1&&(n(0,"td",30),c(1,As,2,3)(2,Rs,1,0),i()),e&2){let r=t.$implicit;m(),S(r.localTx>=0?1:-1),m(),S(r.localTx<0?2:-1)}}function $s(e,t){e&1&&(n(0,"th",44),o(1," Next\xA0TX "),n(2,"ya-help"),o(3," Next Transaction ID expected by the remote Yamcs instance "),i()())}function Ls(e,t){if(e&1&&(n(0,"td",30),o(1),h(2,"number"),i()),e&2){let r=t.$implicit;m(),C(v(2,1,r.nextTx)||"-")}}function Fs(e,t){e&1&&d(0,"th",37)}function Ps(e,t){e&1&&d(0,"td",30)}function Bs(e,t){e&1&&d(0,"tr",38)}function Hs(e,t){e&1&&d(0,"tr",39)}function Vs(e,t){if(e&1&&(n(0,"table",4),x(1,5),c(2,_s,1,0,"th",6)(3,hs,2,1,"td",7),y(),x(4,8),c(5,Cs,2,0,"th",9)(6,Ss,2,1,"td",10),y(),x(7,11),c(8,vs,2,0,"th",12)(9,xs,3,2,"td",10),y(),x(10,13),c(11,ys,2,0,"th",14)(12,gs,2,1,"td",10),y(),x(13,16),c(14,bs,2,0,"th",17)(15,Ts,2,1,"td",10),y(),x(16,18),c(17,Ds,2,0,"th",17)(18,Es,2,1,"td",10),y(),x(19,40),c(20,ws,2,0,"th",9)(21,Ms,2,1,"td",10),y(),x(22,41),c(23,Is,2,0,"th",42)(24,ks,3,2,"td",10),y(),x(25,43),c(26,$s,4,0,"th",42)(27,Ls,3,3,"td",10),y(),x(28,22),c(29,Fs,1,0,"th",23)(30,Ps,1,0,"td",10),y(),c(31,Bs,1,0,"tr",24)(32,Hs,1,0,"tr",25),i()),e&2){let r=_();u("dataSource",r.mastersDataSource),m(31),u("matHeaderRowDef",r.masterColumns),m(),u("matRowDefColumns",r.masterColumns)}}function js(e,t){e&1&&(n(0,"ya-empty-message",2),o(1,"Not configured"),i())}var Nn=(()=>{let t=class t{constructor(l,a,s){this.dialog=s,this.slaveColumns=["state","instance","streams","mode","localAddress","remoteAddress","pullFrom","tx","actions"],this.masterColumns=["state","instance","streams","mode","localAddress","remoteAddress","pushTo","localTx","nextTx","actions"],this.slavesDataSource=new W,this.mastersDataSource=new W,this.hasSlaves$=new G(!1),this.hasMasters$=new G(!1),a.setTitle("Replication"),this.replicationInfoSubscription=l.yamcsClient.createReplicationInfoSubscription(p=>{this.slavesDataSource.data=p.slaves||[],this.mastersDataSource.data=p.masters||[],this.hasSlaves$.next(this.slavesDataSource.data.length>0),this.hasMasters$.next(this.mastersDataSource.data.length>0)})}showReplicationStreams(l){this.dialog.open(jn,{width:"500px",data:{streams:l}})}ngOnDestroy(){this.replicationInfoSubscription?.cancel()}};t.\u0275fac=function(a){return new(a||t)(f(M),f($),f(je))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:18,vars:6,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["marginTop","0"],[1,"section-divider"],["mat-table","",1,"ya-data-table",3,"dataSource"],["matColumnDef","state"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status",4,"matCellDef"],["matColumnDef","instance"],["mat-header-cell","","style","min-width: 130px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","streams"],["mat-header-cell","","style","min-width: 100px",4,"matHeaderCellDef"],["matColumnDef","mode"],["mat-header-cell","","style","min-width: 70px",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center",4,"matCellDef"],["matColumnDef","localAddress"],["mat-header-cell","","style","min-width: 200px",4,"matHeaderCellDef"],["matColumnDef","remoteAddress"],["matColumnDef","pullFrom"],["matColumnDef","tx"],["mat-header-cell","","style","width: 130px",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"status"],["mat-cell","",1,"status"],[3,"connected"],["mat-header-cell","",2,"min-width","130px"],["mat-cell",""],["mat-header-cell","",2,"min-width","100px"],["matTooltip","Show streams",1,"streams",3,"click"],["mat-header-cell","",2,"min-width","70px"],["mat-cell","",2,"text-align","center"],["mat-header-cell","",2,"min-width","200px"],["mat-header-cell","",2,"width","130px"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""],["matColumnDef","pushTo"],["matColumnDef","localTx"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","nextTx"],["mat-header-cell",""]],template:function(a,s){a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Replication "),i(),n(3,"div",0)(4,"h4"),o(5,"Inbound"),i(),c(6,us,30,3,"table",1),h(7,"async"),c(8,fs,2,0,"ya-empty-message",2),n(9,"p"),o(10,"\xA0"),i(),n(11,"div",3),d(12,"mat-divider"),i(),n(13,"h4"),o(14,"Outbound"),i(),c(15,Vs,33,3,"table",4),h(16,"async"),c(17,js,2,0,"ya-empty-message",2),i()()),a&2&&(m(6),S(v(7,2,s.hasSlaves$)?6:8),m(9),S(v(16,4,s.hasMasters$)?15:17))},dependencies:[F,P,Vn,D,j,yt,Ve,q,re,le,Z,ee,ie,te,K,ne,J,Ce,be,Pi],styles:[".streams[_ngcontent-%COMP%]{border-bottom:1px dotted #888;cursor:pointer}"],changeDetection:0});let e=t;return e})();var Us=(e,t)=>[e,t];function Ns(e,t){e&1&&(n(0,"th",11),o(1,"Tablespace"),i())}function Os(e,t){if(e&1&&(n(0,"td",12),o(1),i()),e&2){let r=t.$implicit;m(),C(r.tablespace||"-")}}function Gs(e,t){e&1&&(n(0,"th",11),o(1,"Data Dir"),i())}function Ys(e,t){if(e&1&&o(0),e&2){let r=_().$implicit;g(" /",r.dbPath," ")}}function Qs(e,t){if(e&1&&(n(0,"td",12)(1,"a",13),o(2),c(3,Ys,1,1),i()()),e&2){let r=t.$implicit;m(),u("routerLink",lt(3,Us,r.tablespace,r.dbPath)),m(),g(" ",r.dataDir," "),m(),S(r.dbPath?3:-1)}}function Ws(e,t){e&1&&(n(0,"th",11),o(1,"DB Path"),i())}function zs(e,t){if(e&1&&(n(0,"td",12),o(1),i()),e&2){let r=t.$implicit;m(),C(r.dbPath||"(root)")}}function qs(e,t){e&1&&d(0,"th",14)}function Zs(e,t){e&1&&d(0,"td",12)}function Ks(e,t){e&1&&d(0,"tr",15)}function Js(e,t){e&1&&d(0,"tr",16)}var On=(()=>{let t=class t{constructor(l,a){this.displayedColumns=["dataDir","tablespace","dbPath","actions"],this.dataSource=new W,a.setTitle("Open Databases"),l.yamcsClient.getRocksDbDatabases().then(s=>{this.dataSource.data=s})}};t.\u0275fac=function(a){return new(a||t)(f(M),f($))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:19,vars:3,consts:[[1,"panel-content"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","tablespace"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","dataDir"],["matColumnDef","dbPath"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,s){a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Open databases "),i(),n(3,"div",0)(4,"table",1),x(5,2),c(6,Ns,2,0,"th",3)(7,Os,2,1,"td",4),y(),x(8,5),c(9,Gs,2,0,"th",3)(10,Qs,4,6,"td",4),y(),x(11,6),c(12,Ws,2,0,"th",3)(13,zs,2,1,"td",4),y(),x(14,7),c(15,qs,1,0,"th",8)(16,Zs,1,0,"td",4),y(),c(17,Ks,1,0,"tr",9)(18,Js,1,0,"tr",10),i()()()),a&2&&(m(4),u("dataSource",s.dataSource),m(13),u("matHeaderRowDef",s.displayedColumns),m(),u("matRowDefColumns",s.displayedColumns))},dependencies:[F,P,D,X,q,re,le,Z,ee,ie,te,K,ne,J],encapsulation:2,changeDetection:0});let e=t;return e})();function Xs(e,t){if(e&1){let r=U();n(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",1)(3,"mat-icon"),o(4,"arrow_back"),i()(),o(5),n(6,"button",2)(7,"mat-icon"),o(8,"fullscreen_exit"),i(),o(9," Compact \u25BE "),i(),n(10,"mat-menu",3,0)(12,"button",4),I("click",function(){R(r);let a=_();return k(a.compact("_metadata_"))}),o(13," _metadata_ "),i(),n(14,"button",5),I("click",function(){R(r);let a=_();return k(a.compact("rt_data"))}),o(15," rt_data "),i(),n(16,"button",6),I("click",function(){R(r);let a=_();return k(a.compact("parameter_archive"))}),o(17," parameter_archive "),i(),n(18,"button",7),I("click",function(){R(r);let a=_();return k(a.compact("default"))}),o(19," default "),i()()(),n(20,"div",8)(21,"dl",9)(22,"dt"),o(23,"Tablespace"),i(),n(24,"dd"),o(25),i(),n(26,"dt"),o(27,"DB Path"),i(),n(28,"dd"),o(29),i()(),n(30,"pre",10),o(31),i()()()}if(e&2){let r=Ee(11),l=_();m(5),ot(" ",l.tablespace,"://",l.dbPath," \xA0\xA0\xA0 "),m(),u("matMenuTriggerFor",r),m(19),C(l.tablespace||"-"),m(4),C(l.dbPath||"-"),m(2),C(t)}}var Gn=(()=>{let t=class t{constructor(l,a,s,p){this.yamcs=l,this.snackBar=p,this.tablespace=s.snapshot.paramMap.get("tablespace");let E=s.snapshot.url;E.length?this.dbPath=E.map(w=>w.path).join("/"):this.dbPath="",a.setTitle(this.tablespace+"://"+this.dbPath),this.properties$=l.yamcsClient.getRocksDbDatabaseProperties(this.tablespace,this.dbPath)}compact(l){this.snackBar.open(`Compacting ${this.tablespace}://${this.dbPath}...`,void 0,{horizontalPosition:"end"}),this.yamcs.yamcsClient.compactRocksDbDatabase(this.tablespace,this.dbPath,{cfname:l}).then(()=>{this.snackBar.open(`Compaction of ${this.tablespace}://${this.dbPath} successful`,void 0,{duration:3e3,horizontalPosition:"end"})}).catch(a=>{this.snackBar.open(`Compaction of ${this.tablespace}://${this.dbPath} failed`,void 0,{duration:3e3,horizontalPosition:"end"})})}};t.\u0275fac=function(a){return new(a||t)(f(M),f($),f(L),f(yi))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:2,vars:3,consts:[["compactMenu","matMenu"],["mat-icon-button","","routerLink","/admin/rocksdb/databases","color","primary"],["mat-button","","color","primary",3,"matMenuTriggerFor"],[1,"ya-menu"],["mat-menu-item","","matTooltip","Information about tables and partitions","matTooltipPosition","right",3,"click"],["mat-menu-item","","matTooltip","TM, PP and events","matTooltipPosition","right",3,"click"],["mat-menu-item","","matTooltip","Parameter Archive","matTooltipPosition","right",3,"click"],["mat-menu-item","","matTooltip","Command history, alarms completeness, timeline, activities, users, buckets, ...","matTooltipPosition","right",3,"click"],[1,"panel-content"],[1,"dl-horizontal"],[2,"font-size","10px","margin","0"]],template:function(a,s){if(a&1&&(c(0,Xs,32,6,"app-admin-page"),h(1,"async")),a&2){let p;S((p=v(1,1,s.properties$))?0:-1,p)}},dependencies:[F,P,D,j,X,xi,He,Y,Si,rt,vi,Ce],encapsulation:2,changeDetection:0});let e=t;return e})();var Yn=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=b({type:t,selectors:[["app-route-detail"]],inputs:{route:"route"},standalone:!0,features:[T],decls:12,vars:3,consts:[[1,"block-title"],[1,"block"]],template:function(a,s){a&1&&(n(0,"div",0),o(1,"Input Type"),i(),n(2,"div",1),o(3),i(),n(4,"div",0),o(5,"Output Type"),i(),n(6,"div",1),o(7),i(),n(8,"div",0),o(9,"Log Format"),i(),n(10,"div",1),o(11),i()),a&2&&(m(3),g(" ",s.route.inputType,`
`),m(4),g(" ",s.route.outputType,`
`),m(4),g(" ",s.route.logFormat||"-",`
`))},dependencies:[D],encapsulation:2,changeDetection:0});let e=t;return e})();var ec=e=>({selected:e});function tc(e,t){e&1&&(n(0,"ya-detail-toolbar"),o(1," Route Detail "),i(),n(2,"div",17),d(3,"app-route-detail",18),i()),e&2&&(m(3),u("route",t))}function ic(e,t){e&1&&(n(0,"ya-detail-toolbar"),o(1," Select a route "),i())}function nc(e,t){e&1&&(n(0,"th",19),o(1,"Service"),i())}function ac(e,t){if(e&1&&(n(0,"td",20),o(1),i()),e&2){let r=t.$implicit;m(),C(r.service||"Other")}}function oc(e,t){e&1&&(n(0,"th",19),o(1,"Method"),i())}function rc(e,t){if(e&1&&(n(0,"td",20),o(1),i()),e&2){let r=t.$implicit;m(),C(r.description||"-")}}function lc(e,t){e&1&&(n(0,"th",19),o(1,"Requests"),i())}function mc(e,t){if(e&1&&(n(0,"td",20),o(1),i()),e&2){let r=t.$implicit;m(),C(r.requestCount)}}function sc(e,t){e&1&&(n(0,"th",19),o(1,"Errors"),i())}function cc(e,t){if(e&1&&(n(0,"td",20),o(1),i()),e&2){let r=t.$implicit;m(),C(r.errorCount)}}function pc(e,t){e&1&&(n(0,"th",19),o(1,"HTTP"),i())}function dc(e,t){if(e&1&&(n(0,"td",20),o(1),i()),e&2){let r=t.$implicit;m(),ot("",r.httpMethod," ",r.url,"")}}function uc(e,t){e&1&&d(0,"th",21)}function fc(e,t){e&1&&d(0,"td",20)}function _c(e,t){e&1&&d(0,"tr",22)}function hc(e,t){if(e&1){let r=U();n(0,"tr",23),h(1,"async"),I("click",function(){let a=R(r).$implicit,s=_();return k(s.selectRoute(a))}),i()}if(e&2){let r=t.$implicit,l=_();Me("deprecated",r.deprecated),u("ngClass",ve(5,ec,r===v(1,3,l.selectedRoute$)))}}var Qn=(()=>{let t=class t{constructor(l,a,s,p){this.yamcs=l,this.route=s,this.router=p,this.filterControl=new Q,this.displayedColumns=["method","requestCount","errorCount","http","actions"],this.dataSource=new W,this.selectedRoute$=new G(null),a.setTitle("API routes"),this.dataSource.filterPredicate=(E,w)=>E.url.toLowerCase().indexOf(w)>=0||E.description.toLowerCase().indexOf(w)>=0}ngAfterViewInit(){let l=this.route.snapshot.queryParamMap;l.has("filter")&&(this.filterControl.setValue(l.get("filter")),this.dataSource.filter=l.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let a=this.filterControl.value||"";this.dataSource.filter=a.toLowerCase()}),this.refresh(),this.dataSource.sort=this.sort}refresh(){this.yamcs.yamcsClient.getRoutes().then(l=>{this.dataSource.data=l.routes||[]})}selectRoute(l){this.selectedRoute$.next(l)}updateURL(){let l=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:l||null},queryParamsHandling:"merge"})}};t.\u0275fac=function(a){return new(a||t)(f(M),f($),f(L),f(z))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],viewQuery:function(a,s){if(a&1&&me(N,7),a&2){let p;se(p=ce())&&(s.sort=p.first)}},standalone:!0,features:[T],decls:35,vars:7,consts:[["mat-icon-button","","color","primary","matTooltip","Refresh view",3,"click"],[1,"table-wrapper"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter routes",3,"formControl"],["mat-table","","matSort","","matSortActive","requestCount","matSortDirection","desc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","service"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","method"],["matColumnDef","requestCount"],["matColumnDef","errorCount"],["matColumnDef","http"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","deprecated","click",4,"matRowDef","matRowDefColumns"],[2,"padding","0 16px"],[3,"route"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click","ngClass"]],template:function(a,s){if(a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," API routes \xA0\xA0\xA0 "),n(3,"button",0),I("click",function(){return s.refresh()}),n(4,"mat-icon"),o(5,"refresh"),i()()(),n(6,"ya-detail-pane"),c(7,tc,4,1),h(8,"async"),c(9,ic,2,0,"ya-detail-toolbar"),i(),n(10,"div",1)(11,"div",2)(12,"div",3),d(13,"ya-search-filter",4),i(),n(14,"table",5),x(15,6),c(16,nc,2,0,"th",7)(17,ac,2,1,"td",8),y(),x(18,9),c(19,oc,2,0,"th",7)(20,rc,2,1,"td",8),y(),x(21,10),c(22,lc,2,0,"th",7)(23,mc,2,1,"td",8),y(),x(24,11),c(25,sc,2,0,"th",7)(26,cc,2,1,"td",8),y(),x(27,12),c(28,pc,2,0,"th",7)(29,dc,2,2,"td",8),y(),x(30,13),c(31,uc,1,0,"th",14)(32,fc,1,0,"td",8),y(),c(33,_c,1,0,"tr",15)(34,hc,2,7,"tr",16),i()()()()),a&2){let p;m(7),S((p=v(8,5,s.selectedRoute$))?7:9,p),m(6),u("formControl",s.filterControl),m(),u("dataSource",s.dataSource),m(19),u("matHeaderRowDef",s.displayedColumns),m(),u("matRowDefColumns",s.displayedColumns)}},dependencies:[F,P,Yn,D,xt,j,de,Re,Ht,Y,N,Se,q,re,le,Z,ee,ie,te,K,ne,J,Ce,gt,bt,we],styles:[".deprecated[_ngcontent-%COMP%]{text-decoration:line-through}.detail[_ngcontent-%COMP%]{background-color:#fafafa;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}.mat-mdc-row[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0});let e=t;return e})();function Cc(e,t){if(e&1&&(n(0,"mat-icon",0),o(1," check_circle "),i()),e&2){let r=_();u("matTooltip",r.service.state)}}function Sc(e,t){if(e&1&&(n(0,"mat-icon",1),o(1," check_circle "),i()),e&2){let r=_();u("matTooltip",r.service.state)}}function vc(e,t){if(e&1&&(n(0,"mat-icon",2),o(1," highlight_off "),i()),e&2){let r=_();u("matTooltip",r.service.state)}}function xc(e,t){if(e&1&&(n(0,"mat-icon",3),o(1," lens "),i()),e&2){let r=_();u("matTooltip",r.service.state)}}var Wn=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=b({type:t,selectors:[["app-service-state"]],inputs:{service:"service"},standalone:!0,features:[T],decls:4,vars:4,consts:[[2,"color","lightgreen",3,"matTooltip"],[1,"success",3,"matTooltip"],[1,"alert",3,"matTooltip"],[1,"down",3,"matTooltip"]],template:function(a,s){a&1&&c(0,Cc,2,1,"mat-icon",0)(1,Sc,2,1,"mat-icon",1)(2,vc,2,1,"mat-icon",2)(3,xc,2,1,"mat-icon",3),a&2&&(S(s.service.state==="STARTING"?0:-1),m(),S(s.service.state==="RUNNING"?1:-1),m(),S(s.service.state==="STOPPING"||s.service.state==="FAILED"?2:-1),m(),S(s.service.state==="TERMINATED"||s.service.state==="NEW"?3:-1))},dependencies:[D,Y,Ce],encapsulation:2,changeDetection:0});let e=t;return e})();var yc=()=>["detail"];function gc(e,t){e&1&&(n(0,"th",15),o(1,"Name"),i())}function bc(e,t){if(e&1&&(n(0,"td",16),o(1),i()),e&2){let r=t.$implicit;m(),C(r.name)}}function Tc(e,t){e&1&&(n(0,"th",15),o(1,"Class"),i())}function Dc(e,t){if(e&1&&(n(0,"td",16),o(1),i()),e&2){let r=t.$implicit;m(),C(r.className)}}function Ec(e,t){e&1&&d(0,"th",17)}function wc(e,t){if(e&1&&(n(0,"td",18),d(1,"app-service-state",19),i()),e&2){let r=t.$implicit;m(),u("service",r)}}function Mc(e,t){e&1&&(n(0,"th",15),o(1,"Failure"),i())}function Ic(e,t){if(e&1){let r=U();n(0,"ya-icon-action",22),I("click",function(){R(r);let a=_(2).$implicit;return k(a.expanded=!1)}),i()}}function Ac(e,t){if(e&1){let r=U();n(0,"ya-icon-action",23),I("click",function(){R(r);let a=_(2).$implicit;return k(a.expanded=!0)}),i()}}function Rc(e,t){if(e&1&&c(0,Ic,1,0,"ya-icon-action",20)(1,Ac,1,0,"ya-icon-action",21),e&2){let r=_().$implicit;S(r.expanded?0:1)}}function kc(e,t){if(e&1&&(n(0,"td",16),o(1),c(2,Rc,2,1),i()),e&2){let r=t.$implicit;m(),g(" ",r.failureMessage||"-"," "),m(),S(r.failureCause?2:-1)}}function $c(e,t){if(e&1&&(n(0,"td",16)(1,"pre"),o(2),i()()),e&2){let r=t.$implicit,l=_();$t("colspan",l.displayedColumns.length),m(2),C(r.failureCause||"-")}}function Lc(e,t){e&1&&d(0,"th",24)}function Fc(e,t){if(e&1){let r=U();n(0,"ya-more")(1,"button",25),I("click",function(){R(r);let a=_().$implicit,s=_();return k(s.startService.emit(a.name))}),o(2," Start service "),i(),n(3,"button",25),I("click",function(){R(r);let a=_().$implicit,s=_();return k(s.stopService.emit(a.name))}),o(4," Stop service "),i()()}if(e&2){let r=_().$implicit;m(),u("disabled",r.state!=="TERMINATED"&&r.state!=="NEW"),m(2),u("disabled",r.state!=="RUNNING")}}function Pc(e,t){if(e&1&&(n(0,"td",16),c(1,Fc,5,2,"ya-more"),i()),e&2){let r=_();m(),S(r.readonly?-1:1)}}function Bc(e,t){e&1&&d(0,"tr",26)}function Hc(e,t){e&1&&d(0,"tr",27)}function Vc(e,t){if(e&1){let r=U();n(0,"tr",28),I("click",function(){let a=R(r).$implicit;return k(a.expanded=!a.expanded)}),i()}if(e&2){let r=t.$implicit;Me("expanded",r.expanded)}}var zn=(()=>{let t=class t{constructor(){this.displayedColumns=["state","name","className","failureMessage","actions"],this.dataSource=new W,this.readonly=!1,this.startService=new Mt,this.stopService=new Mt}ngAfterViewInit(){this.dataSource.sort=this.sort}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=b({type:t,selectors:[["app-services-table"]],viewQuery:function(a,s){if(a&1&&me(N,7),a&2){let p;se(p=ce())&&(s.sort=p.first)}},inputs:{dataSource:"dataSource",readonly:"readonly"},outputs:{startService:"startService",stopService:"stopService"},standalone:!0,features:[T],decls:21,vars:5,consts:[["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","","multiTemplateDataRows","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","className"],["matColumnDef","state"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status",4,"matCellDef"],["matColumnDef","failureMessage"],["matColumnDef","detail"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-row","","class","item-detail",3,"expanded","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell","",1,"status"],["mat-cell","",1,"status"],[3,"service"],["icon","expand_less"],["icon","expand_more"],["icon","expand_less",3,"click"],["icon","expand_more",3,"click"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"click","disabled"],["mat-header-row",""],["mat-row",""],["mat-row","",1,"item-detail",3,"click"]],template:function(a,s){a&1&&(n(0,"table",0),x(1,1),c(2,gc,2,0,"th",2)(3,bc,2,1,"td",3),y(),x(4,4),c(5,Tc,2,0,"th",2)(6,Dc,2,1,"td",3),y(),x(7,5),c(8,Ec,1,0,"th",6)(9,wc,2,1,"td",7),y(),x(10,8),c(11,Mc,2,0,"th",2)(12,kc,3,2,"td",3),y(),x(13,9),c(14,$c,3,2,"td",3),y(),x(15,10),c(16,Lc,1,0,"th",11)(17,Pc,2,1,"td",3),y(),c(18,Bc,1,0,"tr",12)(19,Hc,1,0,"tr",13)(20,Vc,1,2,"tr",14),i()),a&2&&(u("dataSource",s.dataSource),m(18),u("matHeaderRowDef",s.displayedColumns),m(),u("matRowDefColumns",s.displayedColumns),m(),u("matRowDefColumns",Xe(4,yc)))},dependencies:[Wn,D,rt,N,Se,q,re,le,Z,ee,ie,te,K,ne,J,Bi,_t],styles:["tr.item-detail[_ngcontent-%COMP%]:not(.expanded){display:none}"],changeDetection:0});let e=t;return e})();var qn=(()=>{let t=class t{constructor(l,a,s,p){this.yamcs=l,this.router=a,this.route=s,this.instance="_global",this.filterForm=new Bt({instance:new Q("_global")}),this.instanceOptions$=new G([{id:"_global",label:"_global"}]),this.dataSource=new W,p.setTitle("Services"),l.yamcsClient.getInstances({filter:"state=RUNNING"}).then(E=>{for(let w of E)this.instanceOptions$.next([...this.instanceOptions$.value,{id:w.name,label:w.name}])}),this.initializeOptions(),this.refresh(),this.filterForm.get("instance").valueChanges.forEach(E=>{this.instance=E,this.refresh()})}initializeOptions(){let l=this.route.snapshot.queryParamMap;l.has("instance")&&(this.instance=l.get("instance"),this.filterForm.get("instance").setValue(this.instance))}startService(l){if(confirm(`Are you sure you want to start ${l} ?`)){let a=this.filterForm.get("instance").value;this.yamcs.yamcsClient.startService(a,l).then(()=>this.refresh())}}stopService(l){if(confirm(`Are you sure you want to stop ${l} ?`)){let a=this.filterForm.get("instance").value;this.yamcs.yamcsClient.stopService(a,l).then(()=>this.refresh())}}refresh(){this.updateURL();let l=this.filterForm.get("instance").value;this.yamcs.yamcsClient.getServices(l).then(a=>{this.dataSource.data=a})}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{instance:this.instance||null},queryParamsHandling:"merge"})}};t.\u0275fac=function(a){return new(a||t)(f(M),f(z),f(L),f($))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:12,vars:5,consts:[["mat-icon-button","","color","primary","matTooltip","Refresh view",3,"click"],[1,"panel-content"],[3,"formGroup"],[1,"filter-bar"],["formControlName","instance",3,"options"],[3,"startService","stopService","dataSource"]],template:function(a,s){a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Services \xA0\xA0\xA0 "),n(3,"button",0),I("click",function(){return s.refresh()}),n(4,"mat-icon"),o(5,"refresh"),i()()(),n(6,"div",1)(7,"form",2)(8,"div",3),d(9,"ya-select",4),h(10,"async"),i()(),n(11,"app-services-table",5),I("startService",function(E){return s.startService(E)})("stopService",function(E){return s.stopService(E)}),i()()()),a&2&&(m(7),u("formGroup",s.filterForm),m(2),u("options",v(10,3,s.instanceOptions$)),m(2),u("dataSource",s.dataSource))},dependencies:[F,P,zn,D,j,Ae,de,Ie,ke,$e,Ht,Y,Ce,Qt],encapsulation:2,changeDetection:0});let e=t;return e})();var jc=()=>[];function Uc(e,t){e&1&&(n(0,"th",16),o(1,"Id"),i())}function Nc(e,t){if(e&1&&(n(0,"td",17),o(1),i()),e&2){let r=t.$implicit;m(),C(r.id)}}function Oc(e,t){e&1&&(n(0,"th",16),o(1,"User"),i())}function Gc(e,t){if(e&1&&(n(0,"td",17),o(1),i()),e&2){let r=t.$implicit;m(),C(r.username||"-")}}function Yc(e,t){e&1&&(n(0,"th",16),o(1,"IP address"),i())}function Qc(e,t){if(e&1&&(n(0,"td",17),o(1),i()),e&2){let r=t.$implicit;m(),C(r.ipAddress||"-")}}function Wc(e,t){e&1&&(n(0,"th",16),o(1,"Hostname"),i())}function zc(e,t){if(e&1&&(n(0,"td",17),o(1),i()),e&2){let r=t.$implicit;m(),C(r.hostname||"-")}}function qc(e,t){e&1&&(n(0,"th",16),o(1,"Started"),i())}function Zc(e,t){if(e&1&&(n(0,"td",17),o(1),h(2,"datetime"),i()),e&2){let r=t.$implicit;m(),C(v(2,1,r.startTime)||"-")}}function Kc(e,t){e&1&&(n(0,"th",16),o(1,"Last renewed"),i())}function Jc(e,t){if(e&1&&(n(0,"td",17),d(1,"app-ago",18),i()),e&2){let r=t.$implicit;m(),u("time",r.lastAccessTime)("useMissionTime",!1)}}function Xc(e,t){e&1&&(n(0,"th",16),o(1,"Expires in"),i())}function e0(e,t){if(e&1&&(n(0,"td",17),d(1,"app-ago",18),i()),e&2){let r=t.$implicit;m(),u("time",r.expirationTime)("useMissionTime",!1)}}function t0(e,t){e&1&&(n(0,"th",19),o(1,"Client"),i())}function i0(e,t){e&1&&o(0," , ")}function n0(e,t){if(e&1&&(c(0,i0,1,0),o(1),h(2,"userAgent")),e&2){let r=t.$implicit,l=t.$index;S(l!==0?0:-1),m(),g(" ",v(2,2,r)," ")}}function a0(e,t){e&1&&o(0," - ")}function o0(e,t){if(e&1&&(n(0,"td",17),H(1,n0,3,4,null,null,B),c(3,a0,1,0),i()),e&2){let r=t.$implicit;m(),V(r.clients||Xe(1,jc)),m(2),S(r.clients?-1:3)}}function r0(e,t){e&1&&d(0,"tr",20)}function l0(e,t){e&1&&d(0,"tr",21)}var Zn=(()=>{let t=class t{constructor(l,a,s){this.yamcs=l,this.displayedColumns=["id","user","ipAddress","hostname","started","lastAccessTime","expirationTime","clients"],this.tableTrackerFn=(p,E)=>E.id,this.dataSource=new W,a.setTitle("Sessions"),this.refresh(),this.syncSubscription=s.syncSlow(()=>this.refresh())}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}refresh(){this.yamcs.yamcsClient.getSessions().then(l=>{this.dataSource.data=l||[]})}ngOnDestroy(){this.syncSubscription?.unsubscribe()}};t.\u0275fac=function(a){return new(a||t)(f(M),f($),f(Tt))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],viewQuery:function(a,s){if(a&1&&(me(N,5),me(Le,5)),a&2){let p;se(p=ce())&&(s.sort=p.first),se(p=ce())&&(s.paginator=p.first)}},standalone:!0,features:[T],decls:32,vars:7,consts:[[1,"panel-content"],["mat-table","","matSort","","matSortActive","started","matSortDirection","desc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["matColumnDef","ipAddress"],["matColumnDef","hostname"],["matColumnDef","started"],["matColumnDef","lastAccessTime"],["matColumnDef","expirationTime"],["matColumnDef","clients"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","hidePageSize","showFirstLastButtons"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"time","useMissionTime"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,s){a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Sessions "),i(),n(3,"div",0)(4,"table",1),x(5,2),c(6,Uc,2,0,"th",3)(7,Nc,2,1,"td",4),y(),x(8,5),c(9,Oc,2,0,"th",3)(10,Gc,2,1,"td",4),y(),x(11,6),c(12,Yc,2,0,"th",3)(13,Qc,2,1,"td",4),y(),x(14,7),c(15,Wc,2,0,"th",3)(16,zc,2,1,"td",4),y(),x(17,8),c(18,qc,2,0,"th",3)(19,Zc,3,3,"td",4),y(),x(20,9),c(21,Kc,2,0,"th",3)(22,Jc,2,2,"td",4),y(),x(23,10),c(24,Xc,2,0,"th",3)(25,e0,2,2,"td",4),y(),x(26,11),c(27,t0,2,0,"th",12)(28,o0,4,2,"td",4),y(),c(29,r0,1,0,"tr",13)(30,l0,1,0,"tr",14),i(),d(31,"mat-paginator",15),i()()),a&2&&(m(4),u("dataSource",s.dataSource)("trackBy",s.tableTrackerFn),m(25),u("matHeaderRowDef",s.displayedColumns),m(),u("matRowDefColumns",s.displayedColumns),m(),u("pageSize",100)("hidePageSize",!0)("showFirstLastButtons",!0))},dependencies:[F,P,zi,D,Le,N,Se,q,re,le,Z,ee,ie,te,K,ne,J,Ct,ei],encapsulation:2,changeDetection:0});let e=t;return e})();function m0(e,t){if(e&1){let r=U();n(0,"ya-sidebar-nav-group",22),I("toggle",function(){R(r);let a=_();return k(a.toggleUserManagementGroup())}),n(1,"ya-sidebar-nav-item",23),o(2," Users "),i(),n(3,"ya-sidebar-nav-item",24),o(4," Service accounts "),i(),n(5,"ya-sidebar-nav-item",25),o(6," Groups "),i(),n(7,"ya-sidebar-nav-item",26),o(8," Roles "),i()()}if(e&2){let r=_();u("active",r.userManagementActive)("expanded",r.userManagementExpanded),m(),u("subitem",!0),m(2),u("subitem",!0),m(2),u("subitem",!0),m(2),u("subitem",!0)}}function s0(e,t){e&1&&(n(0,"ya-sidebar-nav-item",9)(1,"mat-icon",7),o(2,"devices"),i(),o(3," Sessions "),i())}function c0(e,t){e&1&&(n(0,"ya-sidebar-nav-item",10)(1,"mat-icon",7),o(2,"attractions"),i(),o(3," Services "),i())}function p0(e,t){e&1&&(n(0,"ya-sidebar-nav-item",11)(1,"mat-icon",7),o(2,"flip_camera_android"),i(),o(3," Processor types "),i())}function d0(e,t){e&1&&(n(0,"ya-sidebar-nav-item",13)(1,"mat-icon",7),o(2,"share"),i(),o(3," Replication "),i())}function u0(e,t){if(e&1){let r=U();n(0,"ya-sidebar-nav-group",27),I("toggle",function(){R(r);let a=_();return k(a.toggleRocksDbGroup())}),n(1,"ya-sidebar-nav-item",28),o(2," Open databases "),i()()}if(e&2){let r=_();u("active",r.rocksDbActive)("expanded",r.rocksDbExpanded),m(),u("subitem",!0)}}function f0(e,t){e&1&&(n(0,"ya-sidebar-nav-item",15)(1,"mat-icon",7),o(2,"traffic"),i(),o(3," HTTP traffic "),i())}function _0(e,t){e&1&&(n(0,"ya-sidebar-nav-item",16)(1,"mat-icon",7),o(2,"api"),i(),o(3," API routes "),i())}function h0(e,t){e&1&&(n(0,"ya-sidebar-nav-item",17)(1,"mat-icon",7),o(2,"access_time"),i(),o(3," Leap seconds "),i())}function C0(e,t){e&1&&(n(0,"ya-sidebar-nav-item",18)(1,"mat-icon",7),o(2,"receipt"),i(),o(3," Threads "),i())}function S0(e,t){e&1&&(n(0,"ya-sidebar-nav-item",19)(1,"mat-icon",7),o(2,"memory"),i(),o(3," System "),i())}function v0(e,t){if(e&1&&(n(0,"div",21),d(1,"img",29),i()),e&2){let r=_();m(),u("src",r.config.logo,kt)}}var Kn=(()=>{let t=class t{constructor(l,a,s){this.userManagementActive=!1,this.userManagementExpanded=!1,this.rocksDbActive=!1,this.rocksDbExpanded=!1,this.config=l.getConfig(),this.user=a.getUser(),this.routerSubscription=s.events.pipe(It(p=>p instanceof Ft)).subscribe(p=>{let E=p.url;this.collapseAllGroups(),this.userManagementActive=!1,this.rocksDbActive=!1,E.match(/\/iam.*/)?(this.userManagementActive=!0,this.userManagementExpanded=!0):E.match(/\/rocksdb.*/)&&(this.rocksDbActive=!0,this.rocksDbExpanded=!0)})}collapseAllGroups(){this.userManagementExpanded=!1,this.rocksDbExpanded=!1}toggleUserManagementGroup(){let l=this.userManagementExpanded;this.collapseAllGroups(),this.userManagementExpanded=!l}toggleRocksDbGroup(){let l=this.rocksDbExpanded;this.collapseAllGroups(),this.rocksDbExpanded=!l}showRocksDbItem(){return this.user.hasSystemPrivilege("ControlArchiving")}showAccessControlItem(){return this.user.hasSystemPrivilege("ControlAccess")}showServicesItem(){return this.user.hasSystemPrivilege("ControlServices")}showSystemInfo(){return this.user.hasSystemPrivilege("ReadSystemInfo")}ngOnDestroy(){this.routerSubscription?.unsubscribe()}};t.\u0275fac=function(a){return new(a||t)(f(Li),f(Ue),f(z))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:35,vars:19,consts:[["messageBar",""],["mode","side",3,"opened","disableClose"],[1,"sidenav-content"],[1,"top","module-title"],[1,"icon32",2,"margin-right","16px"],["dense",""],["routerLink","/admin",3,"exact"],[1,"item-icon"],["label","Access control","icon","supervised_user_circle",3,"active","expanded"],["routerLink","/admin/sessions"],["routerLink","/admin/services"],["routerLink","/admin/processor-types"],["routerLink","/admin/databases"],["routerLink","/admin/replication"],["label","RocksDB","icon","dataset",3,"active","expanded"],["routerLink","/admin/http-traffic"],["routerLink","/admin/routes"],["routerLink","/admin/leap-seconds"],["routerLink","/admin/threads"],["routerLink","/admin/system"],[2,"flex","1 1 auto"],[1,"navbar-logo"],["label","Access control","icon","supervised_user_circle",3,"toggle","active","expanded"],["routerLink","/admin/iam/users",3,"subitem"],["routerLink","/admin/iam/service-accounts",3,"subitem"],["routerLink","/admin/iam/groups",3,"subitem"],["routerLink","/admin/iam/roles",3,"subitem"],["label","RocksDB","icon","dataset",3,"toggle","active","expanded"],["routerLink","/admin/rocksdb/databases",3,"subitem"],[3,"src"]],template:function(a,s){if(a&1&&(d(0,"ya-message-bar",null,0),n(2,"mat-sidenav-container"),h(3,"async"),n(4,"mat-sidenav",1)(5,"div",2)(6,"mat-toolbar",3)(7,"mat-toolbar-row")(8,"mat-icon",4),o(9,"security"),i(),o(10," Admin Area "),i()(),n(11,"mat-nav-list",5)(12,"ya-sidebar-nav-item",6)(13,"mat-icon",7),o(14,"recent_actors"),i(),o(15," Action log "),i(),c(16,m0,9,6,"ya-sidebar-nav-group",8)(17,s0,4,0,"ya-sidebar-nav-item",9)(18,c0,4,0,"ya-sidebar-nav-item",10)(19,p0,4,0,"ya-sidebar-nav-item",11),n(20,"ya-sidebar-nav-item",12)(21,"mat-icon",7),o(22,"storage"),i(),o(23," Databases "),i(),c(24,d0,4,0,"ya-sidebar-nav-item",13)(25,u0,3,3,"ya-sidebar-nav-group",14)(26,f0,4,0,"ya-sidebar-nav-item",15)(27,_0,4,0,"ya-sidebar-nav-item",16)(28,h0,4,0,"ya-sidebar-nav-item",17)(29,C0,4,0,"ya-sidebar-nav-item",18)(30,S0,4,0,"ya-sidebar-nav-item",19),i(),d(31,"div",20),c(32,v0,2,1,"div",21),i()(),n(33,"mat-sidenav-content"),d(34,"router-outlet"),i()()),a&2){let p=Ee(1);m(2),Me("message-bar-visible",v(3,17,p.show$)),m(2),u("opened",!0)("disableClose",!0),m(8),u("exact",!0),m(4),S(s.showAccessControlItem()?16:-1),m(),S(s.showAccessControlItem()?17:-1),m(),S(s.showServicesItem()?18:-1),m(),S(s.showSystemInfo()?19:-1),m(5),S(s.showSystemInfo()?24:-1),m(),S(s.showRocksDbItem()?25:-1),m(),S(s.showSystemInfo()?26:-1),m(),S(s.showSystemInfo()?27:-1),m(),S(s.showSystemInfo()?28:-1),m(),S(s.showSystemInfo()?29:-1),m(),S(s.showSystemInfo()?30:-1),m(2),S(s.config.logo?32:-1)}},dependencies:[D,j,ut,X,Y,gi,Ii,Ai,Mi,jt,Vt,Hi,Vi,ji],styles:["mat-sidenav-container[_ngcontent-%COMP%]{position:absolute;inset:48px 0 0;background-color:var(--y-background-color)}mat-sidenav-container.message-bar-visible[_ngcontent-%COMP%]{top:96px}mat-sidenav[_ngcontent-%COMP%]{width:250px;background-color:#181818;border-right:0!important}.sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column}mat-toolbar[_ngcontent-%COMP%]{background-color:#181818;border-bottom:1px solid rgba(255,255,255,.1);box-sizing:content-box;color:#d3d3d3;font-weight:300;font-size:14px}.navbar-logo[_ngcontent-%COMP%]{text-align:center;line-height:0}.navbar-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}"],changeDetection:0});let e=t;return e})();var x0=e=>({process:e,indent:0,last:!1}),y0=()=>[],g0=(e,t,r)=>({process:e,indent:t,last:r});function b0(e,t){if(e&1&&(n(0,"tr")(1,"td"),o(2),i(),n(3,"td",7),o(4),i(),n(5,"td"),o(6),i(),n(7,"td"),o(8),i(),d(9,"td"),i()),e&2){let r=t.$implicit;m(2),C(r.name),m(2),C(r.description||"-"),m(2),C(r.version||"-"),m(2),C(r.vendor||"-")}}function T0(e,t){e&1&&(n(0,"h4"),o(1,"Plugins"),i(),n(2,"table",4)(3,"tr")(4,"th"),o(5,"Name"),i(),n(6,"th"),o(7,"Description"),i(),n(8,"th"),o(9,"Version"),i(),n(10,"th"),o(11,"Maintainer"),i(),d(12,"th",5),i(),H(13,b0,10,4,"tr",null,B),i(),d(15,"br")),e&2&&(m(13),V(t))}function D0(e,t){if(e&1&&(n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),i(),n(5,"td"),o(6),h(7,"formatBytes"),i(),n(8,"td"),o(9),h(10,"formatBytes"),i(),n(11,"td"),o(12),h(13,"formatBytes"),i(),d(14,"td"),i()),e&2){let r=t.$implicit;m(2),C(r.directory),m(2),C(r.type||"-"),m(2),C(v(7,5,r.totalSpace)),m(3),C(v(10,7,r.unallocatedSpace)),m(3),C(v(13,9,r.usableSpace))}}function E0(e,t){e&1&&ai(0)}function w0(e,t){if(e&1&&(n(0,"div",1)(1,"dl",2)(2,"dt"),o(3,"Yamcs version"),i(),n(4,"dd"),o(5),i(),n(6,"dt"),o(7,"Build"),i(),n(8,"dd"),o(9),i(),n(10,"dt"),o(11,"Server ID"),i(),n(12,"dd"),o(13),i()(),n(14,"dl",3)(15,"dt"),o(16,"OS"),i(),n(17,"dd"),o(18),i(),n(19,"dt"),o(20,"Architecture"),i(),n(21,"dd"),o(22),i(),n(23,"dt"),o(24,"JVM"),i(),n(25,"dd"),o(26),i()(),n(27,"dl",3)(28,"dt"),o(29,"Working directory"),i(),n(30,"dd"),o(31),i(),n(32,"dt"),o(33,"Config directory"),i(),n(34,"dd"),o(35),i(),n(36,"dt"),o(37,"Cache directory"),i(),n(38,"dd"),o(39),i(),n(40,"dt"),o(41,"Data directory"),i(),n(42,"dd"),o(43),i()(),n(44,"dl",3)(45,"dt"),o(46,"Uptime"),i(),n(47,"dd"),o(48),h(49,"duration"),i(),n(50,"dt"),o(51,"Load average"),i(),n(52,"dd"),o(53),h(54,"number"),i(),n(55,"dt"),o(56,"Available processors"),i(),n(57,"dd"),o(58),i(),n(59,"dt"),o(60,"Heap memory"),i(),n(61,"dd"),o(62),h(63,"formatBytes"),h(64,"formatBytes"),h(65,"formatBytes"),i(),n(66,"dt"),o(67,"Non-heap memory"),i(),n(68,"dd"),o(69),h(70,"formatBytes"),h(71,"formatBytes"),h(72,"formatBytes"),i(),n(73,"dt"),o(74,"Thread count"),i(),n(75,"dd"),o(76),i()(),c(77,T0,16,0),h(78,"async"),n(79,"h4"),o(80,"Root directories"),i(),n(81,"table",4)(82,"tr")(83,"th"),o(84,"Directory"),i(),n(85,"th"),o(86,"Type"),i(),n(87,"th"),o(88,"Total space"),i(),n(89,"th"),o(90,"Unallocated space"),i(),n(91,"th"),o(92,"Usable space"),i(),d(93,"th",5),i(),H(94,D0,15,11,"tr",null,B),i(),d(96,"br"),n(97,"h4"),o(98,"Process tree"),i(),n(99,"table",4)(100,"tr")(101,"th"),o(102,"PID"),i(),n(103,"th"),o(104,"User"),i(),n(105,"th"),o(106,"Start time"),i(),n(107,"th",5),o(108,"Command"),i()(),c(109,E0,1,0,"ng-container",6),i()()),e&2){let r,l=t,a=_(),s=Ee(6);m(5),C(l.yamcsVersion||"-"),m(4),C(l.revision||"-"),m(4),C(l.serverId||"-"),m(5),C(l.os),m(4),C(l.arch),m(4),C(l.jvm),m(5),C(l.workingDirectory),m(4),C(l.configDirectory),m(4),C(l.cacheDirectory),m(4),C(l.dataDirectory),m(5),C(v(49,23,l.uptime)),m(5),C(Be(54,25,l.loadAverage,"1.2-2")||"-"),m(5),C(l.availableProcessors),m(4),oi(" ",v(63,28,l.heapMemory)," (used: ",v(64,30,l.heapMemory-l.usedHeapMemory),", limit: ",v(65,32,l.maxHeapMemory)||"n/a",") "),m(7),oi(" ",v(70,34,l.nonHeapMemory)," (used: ",v(71,36,l.nonHeapMemory-l.usedNonHeapMemory),", limit: ",v(72,38,l.maxNonHeapMemory)||"n/a",") "),m(7),C(l.jvmThreadCount),m(),S((r=v(78,40,a.plugins$))?77:-1,r),m(17),V(l.rootDirectories),m(15),u("ngTemplateOutlet",s)("ngTemplateOutletContext",ve(42,x0,l.process))}}function M0(e,t){e&1&&(n(0,"span",8),o(1,"\u2514\u2500\u2500"),i())}function I0(e,t){e&1&&(n(0,"span",8),o(1,"\u251C\u2500\u2500"),i())}function A0(e,t){if(e&1&&(n(0,"span",8),o(1),i(),c(2,M0,2,0,"span",8)(3,I0,2,0,"span",8)),e&2){let r=_(),l=r.indent,a=r.last;m(),C(" ".repeat(l)),m(),S(a?2:3)}}function R0(e,t){e&1&&ai(0)}function k0(e,t){if(e&1&&c(0,R0,1,0,"ng-container",6),e&2){let r=t.$implicit,l=t.$index,a=t.$count,s=_().indent;_();let p=Ee(6);u("ngTemplateOutlet",p)("ngTemplateOutletContext",pi(2,g0,r,s+2,l===a-1))}}function $0(e,t){if(e&1&&(n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),i(),n(5,"td"),o(6),h(7,"datetime"),i(),n(8,"td"),c(9,A0,4,2),o(10),i()(),H(11,k0,1,6,"ng-container",null,B)),e&2){let r=t.process,l=t.indent;m(2),C(r.pid),m(2),C(r.user),m(2),C(v(7,5,r.startTime)||"-"),m(3),S(l?9:-1),m(),g(" ",r.command," "),m(),V(r.children||Xe(7,y0))}}var Jn=(()=>{let t=class t{constructor(l,a){this.yamcs=l,this.info$=new G(null),this.plugins$=new G([]),a.setTitle("System"),this.yamcs.yamcsClient.getGeneralInfo().then(s=>this.plugins$.next(s.plugins||[])),this.systemInfoSubscription=l.yamcsClient.createSystemInfoSubscription(s=>{this.info$.next(s)})}ngOnDestroy(){this.systemInfoSubscription?.cancel()}};t.\u0275fac=function(a){return new(a||t)(f(M),f($))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:7,vars:3,consts:[["processTemplate",""],[1,"panel-content"],[1,"dl-horizontal",2,"margin-top","0"],[1,"dl-horizontal"],["yaDataTable","",1,"expand"],[1,"expand"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"wrap200"],[1,"tree","mono"]],template:function(a,s){if(a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2,"System"),i(),c(3,w0,110,44,"div",1),h(4,"async"),i(),c(5,$0,13,8,"ng-template",null,0,di)),a&2){let p;m(3),S((p=v(4,1,s.info$))?3:-1,p)}},dependencies:[F,P,D,ui,j,yt,ye,Ct,Gi,Wt],styles:["table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap}.tree[_ngcontent-%COMP%]{white-space:pre;color:var(--y-accent)}"],changeDetection:0});let e=t;return e})();function L0(e,t){if(e&1&&(n(0,"small"),o(1),i()),e&2){let r=_();m(),g("(line: ",r.element.lineNumber,")")}}var ni=(()=>{let t=class t{};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=b({type:t,selectors:[["app-trace-element"]],inputs:{element:"element"},standalone:!0,features:[T],decls:4,vars:5,consts:[[3,"innerHTML"]],template:function(a,s){a&1&&(d(0,"span",0),h(1,"classNameHtml"),o(2),c(3,L0,2,1,"small")),a&2&&(u("innerHTML",v(1,3,s.element.className),pt),m(2),g(".",s.element.methodName,`
`),m(),S(s.element.lineNumber?3:-1))},dependencies:[D,Ni],encapsulation:2,changeDetection:0});let e=t;return e})();function F0(e,t){e&1&&(n(0,"th",17),o(1,"ID"),i())}function P0(e,t){if(e&1&&(n(0,"td",18),o(1),i()),e&2){let r=t.$implicit;m(),C(r.id)}}function B0(e,t){e&1&&(n(0,"th",17),o(1,"Name"),i())}function H0(e,t){if(e&1&&(n(0,"td",18)(1,"a",19),o(2),i()()),e&2){let r=t.$implicit;m(),u("routerLink",r.id),m(),g(" ",r.name," ")}}function V0(e,t){e&1&&d(0,"th",20)}function j0(e,t){if(e&1&&(n(0,"mat-icon",22),o(1,"playlist_play"),i()),e&2){let r=_().$implicit;u("matTooltip",r.state)}}function U0(e,t){if(e&1&&(n(0,"mat-icon",22),o(1,"timer"),i()),e&2){let r=_().$implicit;u("matTooltip",r.state)}}function N0(e,t){if(e&1&&(n(0,"mat-icon",22),o(1,"pause"),i()),e&2){let r=_().$implicit;u("matTooltip",r.state)}}function O0(e,t){if(e&1&&(n(0,"mat-icon",22),o(1,"block"),i()),e&2){let r=_().$implicit;u("matTooltip",r.state)}}function G0(e,t){if(e&1&&(n(0,"td",21),c(1,j0,2,1,"mat-icon",22)(2,U0,2,1,"mat-icon",22)(3,N0,2,1,"mat-icon",22)(4,O0,2,1,"mat-icon",22),i()),e&2){let r=t.$implicit;m(),S(r.state==="RUNNABLE"?1:r.state==="TIMED_WAITING"?2:r.state==="WAITING"?3:r.state==="BLOCKED"?4:-1)}}function Y0(e,t){e&1&&(n(0,"th",23),o(1,"Native"),i())}function Q0(e,t){if(e&1&&(n(0,"td",18),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.native?"Yes":"-"," ")}}function W0(e,t){e&1&&(n(0,"th",23),o(1,"Suspended"),i())}function z0(e,t){if(e&1&&(n(0,"td",18),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",r.suspended?"Yes":"-"," ")}}function q0(e,t){e&1&&(n(0,"th",23),o(1,"Group"),i())}function Z0(e,t){if(e&1&&(n(0,"td",18),o(1),i()),e&2){let r=t.$implicit;m(),g(" ",(r.group==null?null:r.group.name)||"-"," ")}}function K0(e,t){e&1&&(n(0,"th",23),o(1,"Frame"),i())}function J0(e,t){if(e&1&&d(0,"app-trace-element",24),e&2){let r=_().$implicit;u("element",r.trace[0])}}function X0(e,t){e&1&&o(0," - ")}function ep(e,t){if(e&1&&(n(0,"td",18),c(1,J0,1,1,"app-trace-element",24)(2,X0,1,0),i()),e&2){let r=t.$implicit;m(),S(r.trace?1:2)}}function tp(e,t){e&1&&d(0,"th",25)}function ip(e,t){e&1&&d(0,"td",18)}function np(e,t){e&1&&d(0,"tr",26)}function ap(e,t){e&1&&d(0,"tr",27)}function op(e,t){if(e&1&&(n(0,"table",0),x(1,1),c(2,F0,2,0,"th",2)(3,P0,2,1,"td",3),y(),x(4,4),c(5,B0,2,0,"th",2)(6,H0,3,2,"td",3),y(),x(7,5),c(8,V0,1,0,"th",6)(9,G0,5,1,"td",7),y(),x(10,8),c(11,Y0,2,0,"th",9)(12,Q0,2,1,"td",3),y(),x(13,10),c(14,W0,2,0,"th",9)(15,z0,2,1,"td",3),y(),x(16,11),c(17,q0,2,0,"th",9)(18,Z0,2,1,"td",3),y(),x(19,12),c(20,K0,2,0,"th",9)(21,ep,3,1,"td",3),y(),x(22,13),c(23,tp,1,0,"th",14)(24,ip,1,0,"td",3),y(),c(25,np,1,0,"tr",15)(26,ap,1,0,"tr",16),i()),e&2){let r=_();u("dataSource",r.dataSource),m(25),u("matHeaderRowDef",r.displayedColumns),m(),u("matRowDefColumns",r.displayedColumns)}}var Xn=(()=>{let t=class t{constructor(){this.displayedColumns=["id","state","name","trace","native","suspended","group","actions"],this.dataSource=new W}ngAfterViewInit(){this.dataSource.filterPredicate=(l,a)=>l.name.toLowerCase().indexOf(a)>=0,this.dataSource.sort=this.sort}ngOnChanges(){this.dataSource.data=this.threads||[],this.dataSource.filter=this.filter}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=b({type:t,selectors:[["app-threads-table"]],viewQuery:function(a,s){if(a&1&&me(N,5),a&2){let p;se(p=ce())&&(s.sort=p.first)}},inputs:{threads:"threads",filter:"filter"},standalone:!0,features:[Rt,T],decls:1,vars:1,consts:[["mat-table","","matSort","","matSortActive","id","matSortDirection","desc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","state"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status",4,"matCellDef"],["matColumnDef","native"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","suspended"],["matColumnDef","group"],["matColumnDef","trace"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","",1,"status"],["mat-cell","",1,"status"],[3,"matTooltip"],["mat-header-cell",""],[3,"element"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(a,s){a&1&&c(0,op,27,3,"table",0),a&2&&S(s.dataSource?0:-1)},dependencies:[D,X,Y,N,Se,q,re,le,Z,ee,ie,te,K,ne,J,Ce,ni],encapsulation:2,changeDetection:0});let e=t;return e})();function rp(e,t){if(e&1&&(o(0),h(1,"async")),e&2){let r=_();g(" ALL (",v(1,1,r.allThreadCount$),") ")}}function lp(e,t){if(e&1&&(o(0),h(1,"async")),e&2){let r=_();g(" RUNNABLE (",v(1,1,r.runnableThreadCount$),") ")}}function mp(e,t){if(e&1&&(o(0),h(1,"async")),e&2){let r=_();g(" TIMED WAITING (",v(1,1,r.timedWaitingThreadCount$),") ")}}function sp(e,t){if(e&1&&(o(0),h(1,"async")),e&2){let r=_();g(" WAITING (",v(1,1,r.waitingThreadCount$),") ")}}function cp(e,t){if(e&1&&(o(0),h(1,"async")),e&2){let r=_();g(" BLOCKED (",v(1,1,r.blockedThreadCount$),") ")}}var ea=(()=>{let t=class t{constructor(l,a,s,p,E){this.yamcs=l,this.route=s,this.router=p,this.filterControl=new Q,this.filterValue$=new G(null),this.allThreads$=new mi,this.allThreadCount$=this.allThreads$.pipe(Te(w=>w.length)),this.runnableThreads$=this.allThreads$.pipe(Te(w=>w.filter(oe=>oe.state==="RUNNABLE"))),this.runnableThreadCount$=this.runnableThreads$.pipe(Te(w=>w.length)),this.timedWaitingThreads$=this.allThreads$.pipe(Te(w=>w.filter(oe=>oe.state==="TIMED_WAITING"))),this.timedWaitingThreadCount$=this.timedWaitingThreads$.pipe(Te(w=>w.length)),this.waitingThreads$=this.allThreads$.pipe(Te(w=>w.filter(oe=>oe.state==="WAITING"))),this.waitingThreadCount$=this.waitingThreads$.pipe(Te(w=>w.length)),this.blockedThreads$=this.allThreads$.pipe(Te(w=>w.filter(oe=>oe.state==="BLOCKED"))),this.blockedThreadCount$=this.blockedThreads$.pipe(Te(w=>w.length)),a.setTitle("Threads"),this.threadDumpURL=l.yamcsClient.getThreadDumpURL(),this.refresh(),this.syncSubscription=E.syncSlow(()=>this.refresh())}refresh(){this.yamcs.yamcsClient.getThreads().then(l=>{this.allThreads$.next(l.threads||[])})}ngAfterViewInit(){let l=this.route.snapshot.queryParamMap;l.has("filter")&&(this.filterControl.setValue(l.get("filter")),this.filterValue$.next(l.get("filter").toLowerCase())),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let a=this.filterControl.value||"";this.filterValue$.next(a.toLowerCase())})}updateURL(){let l=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:l||null},queryParamsHandling:"merge"})}ngOnDestroy(){this.syncSubscription?.unsubscribe()}};t.\u0275fac=function(a){return new(a||t)(f(M),f($),f(L),f(z),f(Tt))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:41,vars:33,consts:[["mat-button","","color","primary",3,"href"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter threads",3,"formControl"],["animationDuration","0ms",1,"secondary",3,"mat-stretch-tabs"],["mat-tab-label",""],[3,"threads","filter"]],template:function(a,s){a&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar"),o(2," Threads \xA0\xA0\xA0 "),n(3,"a",0)(4,"mat-icon"),o(5,"notes"),i(),o(6," Text dump "),i()(),n(7,"div",1)(8,"div",2),d(9,"ya-search-filter",3),i(),n(10,"mat-tab-group",4)(11,"mat-tab"),c(12,rp,2,3,"ng-template",5),d(13,"br")(14,"app-threads-table",6),h(15,"async"),h(16,"async"),i(),n(17,"mat-tab"),c(18,lp,2,3,"ng-template",5),d(19,"br")(20,"app-threads-table",6),h(21,"async"),h(22,"async"),i(),n(23,"mat-tab"),c(24,mp,2,3,"ng-template",5),d(25,"br")(26,"app-threads-table",6),h(27,"async"),h(28,"async"),i(),n(29,"mat-tab"),c(30,sp,2,3,"ng-template",5),d(31,"br")(32,"app-threads-table",6),h(33,"async"),h(34,"async"),i(),n(35,"mat-tab"),c(36,cp,2,3,"ng-template",5),d(37,"br")(38,"app-threads-table",6),h(39,"async"),h(40,"async"),i()()()()),a&2&&(m(3),u("href",s.threadDumpURL,kt),m(6),u("formControl",s.filterControl),m(),u("mat-stretch-tabs",!1),m(4),u("threads",v(15,13,s.allThreads$))("filter",v(16,15,s.filterValue$)),m(6),u("threads",v(21,17,s.runnableThreads$))("filter",v(22,19,s.filterValue$)),m(6),u("threads",v(27,21,s.timedWaitingThreads$))("filter",v(28,23,s.filterValue$)),m(6),u("threads",v(33,25,s.waitingThreads$))("filter",v(34,27,s.filterValue$)),m(6),u("threads",v(39,29,s.blockedThreads$))("filter",v(40,31,s.filterValue$)))},dependencies:[F,P,D,j,de,Re,Qe,Y,Ot,Gt,Yt,we,Xn],encapsulation:2,changeDetection:0});let e=t;return e})();function pp(e,t){if(e&1&&(n(0,"tr")(1,"td"),d(2,"app-trace-element",5),i()()),e&2){let r=t.$implicit;m(2),u("element",r)}}function dp(e,t){if(e&1&&(n(0,"table",4),H(1,pp,3,1,"tr",null,B),i()),e&2){let r=_();m(),V(r.trace)}}function up(e,t){e&1&&o(0," Information not available ")}function fp(e,t){if(e&1&&(n(0,"app-admin-page")(1,"app-admin-toolbar")(2,"a",0)(3,"mat-icon"),o(4,"arrow_back"),i()(),o(5),i(),n(6,"div",1)(7,"dl",2)(8,"dt"),o(9,"ID"),i(),n(10,"dd"),o(11),i(),n(12,"dt"),o(13,"Name"),i(),n(14,"dd"),o(15),i(),n(16,"dt"),o(17,"Native"),i(),n(18,"dd"),o(19),i(),n(20,"dt"),o(21,"Suspended"),i(),n(22,"dd"),o(23),i(),n(24,"dt"),o(25,"Group"),i(),n(26,"dd"),o(27),i()(),n(28,"div",3),d(29,"mat-divider"),i(),n(30,"h4"),o(31,"Stack trace"),i(),c(32,dp,3,0,"table",4)(33,up,1,0),i()()),e&2){let r=t;m(5),g(" ",r.name," "),m(6),C(r.id),m(4),C(r.name),m(4),g(" ",r.native?"Yes":"No"," "),m(4),g(" ",r.suspended?"Yes":"No"," "),m(4),C((r.group==null?null:r.group.name)||"-"),m(5),S(r.trace?32:33)}}var ta=(()=>{let t=class t{constructor(l,a,s){this.yamcs=a,this.title=s,this.thread$=new G(null),l.paramMap.subscribe(p=>{let E=p.get("id");this.changeThread(Number(E))})}changeThread(l){this.yamcs.yamcsClient.getThread(l).then(a=>{this.thread$.next(a),this.title.setTitle(a.name)})}};t.\u0275fac=function(a){return new(a||t)(f(L),f(M),f($))},t.\u0275cmp=b({type:t,selectors:[["ng-component"]],standalone:!0,features:[T],decls:2,vars:3,consts:[["mat-icon-button","","routerLink","..","color","primary"],[1,"panel-content","ya-link"],[1,"dl-horizontal","no-lead"],[1,"section-divider"],["yaDataTable",""],[3,"element"]],template:function(a,s){if(a&1&&(c(0,fp,34,7,"app-admin-page"),h(1,"async")),a&2){let p;S((p=v(1,1,s.thread$))?0:-1,p)}},dependencies:[F,P,D,j,X,ye,He,Y,Ve,ni],encapsulation:2,changeDetection:0});let e=t;return e})();var eC=[{path:"",canActivate:[Yi,Wi,qi],canActivateChild:[Qi],runGuardsAndResolvers:"always",component:Kn,children:[{path:"",pathMatch:"full",component:Ki},{path:"http-traffic",canActivate:[st],component:xn},{path:"sessions",canActivate:[Ne],component:Zn},{path:"routes",canActivate:[st],component:Qn},{path:"leap-seconds",canActivate:[st],component:Bn},{path:"processor-types",canActivate:[st],component:Hn},{path:"replication",canActivate:[st],component:Nn},{path:"services",canActivate:[Zi],component:qn},{path:"databases",canActivate:[ri],children:[{path:"",pathMatch:"full",component:Ji},{path:":database",component:nn,children:[{path:"",pathMatch:"full",redirectTo:"tables"},{path:"tables",pathMatch:"full",component:Cn},{path:"tables/:table",component:vn,children:[{path:"",pathMatch:"full",redirectTo:"info"},{path:"info",component:hn},{path:"data",component:fn},{path:"script",component:Sn}]},{path:"shell",pathMatch:"full",component:an},{path:"streams",pathMatch:"full",component:mn},{path:"streams/:stream",component:dn,children:[{path:"",pathMatch:"full",redirectTo:"columns"},{path:"columns",component:on},{path:"data",component:ln},{path:"script",component:pn}]}]}]},{path:"rocksdb",runGuardsAndResolvers:"always",canActivate:[ri],children:[{path:"",pathMatch:"full",redirectTo:"databases"},{path:"databases",pathMatch:"full",component:On},{path:"databases/:tablespace",children:[{path:"**",component:Gn}]}]},{path:"iam/service-accounts",pathMatch:"full",component:kn,canActivate:[Ne]},{path:"iam/service-accounts/create",pathMatch:"full",component:bn,canActivate:[Ne]},{path:"iam/users",pathMatch:"full",component:Ln,canActivate:[Ne]},{path:"iam/users/create",pathMatch:"full",component:Tn,canActivate:[Ne]},{path:"iam/users/:username",pathMatch:"full",component:Pn,canActivate:[Ne]},{path:"iam/users/:username/edit",pathMatch:"full",component:wn,canActivate:[Ne]},{path:"iam/groups",pathMatch:"full",component:Mn,canActivate:[Ne]},{path:"iam/groups/create",pathMatch:"full",component:yn,canActivate:[Ne]},{path:"iam/groups/:name",pathMatch:"full",component:In,canActivate:[Ne]},{path:"iam/groups/:name/edit",pathMatch:"full",component:Dn,canActivate:[Ne]},{path:"iam/roles",pathMatch:"full",component:An,canActivate:[Ne]},{path:"iam/roles/:name",pathMatch:"full",component:Rn,canActivate:[Ne]},{path:"threads",pathMatch:"full",component:ea,canActivate:[st]},{path:"threads/:id",component:ta,canActivate:[st]},{path:"system",pathMatch:"full",component:Jn,canActivate:[st]}]}];export{eC as ROUTES};
