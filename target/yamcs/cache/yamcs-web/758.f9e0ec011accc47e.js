"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[758],{9758:(In,$,_)=>{_.r($),_.d($,{TimelineModule:()=>Pn});var ke=_(4421),v=_(5619),e=_(5879),l=_(6516),g=_(6814),o=_(6223);function Se(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"form",1)(2,"label"),e._uU(3," Label "),e.TgZ(4,"span",2),e._uU(5,"(required)"),e.qZA(),e._UZ(6,"br")(7,"input",3),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"label"),e._uU(10," Description "),e.TgZ(11,"span",2),e._uU(12,"(optional)"),e.qZA(),e._UZ(13,"br")(14,"textarea",4),e.qZA()(),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form)}}let H=(()=>{class i{constructor(t,n){this.yamcs=t,this.changeDetection=n,this.formConfigured$=new v.X(!1)}ngAfterViewInit(){this.formConfigured$.next(!0),this.changeDetection.detectChanges()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(l.C8),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-command-band"]],inputs:{form:"form",band:"band"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"]],template:function(n,a){1&n&&(e.YNc(0,Se,15,1,"ng-container",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,a.formConfigured$))},dependencies:[g.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,g.Ov],encapsulation:2,changeDetection:0})}return i})();var h=_(7700);function Be(i,s){if(1&i&&e._UZ(0,"app-edit-item-band",8),2&i){const t=e.oxw().ngIf,n=e.oxw();e.Q6J("form",n.form)("band",t)}}function De(i,s){if(1&i&&e._UZ(0,"app-edit-spacer",8),2&i){const t=e.oxw().ngIf,n=e.oxw();e.Q6J("form",n.form)("band",t)}}function Pe(i,s){if(1&i&&e._UZ(0,"app-edit-time-ruler",8),2&i){const t=e.oxw().ngIf,n=e.oxw();e.Q6J("form",n.form)("band",t)}}function Ie(i,s){if(1&i&&e._UZ(0,"app-edit-command-band",8),2&i){const t=e.oxw().ngIf,n=e.oxw();e.Q6J("form",n.form)("band",t)}}function Ne(i,s){if(1&i&&(e.TgZ(0,"div",5)(1,"h2"),e._uU(2,"Edit Band"),e.qZA(),e.TgZ(3,"form",6),e.YNc(4,Be,1,2,"app-edit-item-band",7),e.YNc(5,De,1,2,"app-edit-spacer",7),e.YNc(6,Pe,1,2,"app-edit-time-ruler",7),e.YNc(7,Ie,1,2,"app-edit-command-band",7),e.qZA()()),2&i){const t=s.ngIf,n=e.oxw();e.xp6(3),e.Q6J("formGroup",n.form),e.xp6(1),e.Q6J("ngIf","ITEM_BAND"===t.type),e.xp6(1),e.Q6J("ngIf","SPACER"===t.type),e.xp6(1),e.Q6J("ngIf","TIME_RULER"===t.type),e.xp6(1),e.Q6J("ngIf","COMMAND_BAND"===t.type)}}let X=(()=>{class i{constructor(t,n,a,r,c){this.dialogRef=t,this.yamcs=n,this.messageService=a,this.data=c,this.dirty$=new v.X(!1);const m=c.band;this.form=r.group({name:[m.name,[o.kI.required]],description:[m.description||""],tags:[m.tags||[]],properties:r.group({})}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)})}doOnConfirm(){const t=this.form.value;this.yamcs.yamcsClient.updateTimelineBand(this.yamcs.instance,this.data.band.id,{name:t.name,description:t.description,shared:this.data.band.shared,tags:t.tags,properties:t.properties}).then(a=>this.dialogRef.close(a)).catch(a=>this.messageService.showError(a))}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(h.so),e.Y36(l.C8),e.Y36(l.ez),e.Y36(o.QS),e.Y36(h.WI))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:11,vars:4,consts:[[1,"central-pane"],["class","mat-typography ya-form","style","max-width: 600px;",4,"ngIf"],[1,"footer","mat-typography"],["mat-dialog-close","",1,"ya-button"],["type","submit",1,"ya-button","primary",3,"disabled","click"],[1,"mat-typography","ya-form",2,"max-width","600px"],["novalidate","","autocomplete","off",3,"formGroup"],[3,"form","band",4,"ngIf"],[3,"form","band"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0),e.YNc(1,Ne,8,5,"div",1),e.qZA(),e.TgZ(2,"div",2)(3,"mat-toolbar")(4,"mat-toolbar-row")(5,"button",3),e._uU(6,"Cancel"),e.qZA(),e._uU(7,"\xa0\xa0 "),e.TgZ(8,"button",4),e.NdJ("click",function(){return a.doOnConfirm()}),e.ALo(9,"async"),e._uU(10,"SAVE CHANGES"),e.qZA()()()()),2&n&&(e.xp6(1),e.Q6J("ngIf",a.data.band),e.xp6(7),e.Q6J("disabled",!e.lcZ(9,2,a.dirty$)||!a.form.valid))},styles:[".mat-mdc-dialog-container{border-radius:0;position:relative}.central-pane[_ngcontent-%COMP%]{position:absolute;inset:0 0 64px;overflow:auto;padding:24px}.footer[_ngcontent-%COMP%]{position:absolute;bottom:0;height:64px;left:0;right:0;border-top:1px solid #d3d3d3}"],changeDetection:0})}return i})();const j={};function Je(i){let s=j[i];if(!s){const t=document.createElement("canvas").getContext("2d");t.fillStyle=i,s=String(t.fillStyle),j[i]=s}return s}var k=function(i){return i[i.BOOLEAN=0]="BOOLEAN",i[i.COLOR=1]="COLOR",i[i.NUMBER=2]="NUMBER",i[i.SELECT=3]="SELECT",i[i.TEXT=4]="TEXT",i}(k||{});class K{constructor(s){this.inputType=k.BOOLEAN,this.defaultValue=s}}class I{constructor(s){this.inputType=k.COLOR,this.defaultValue=s}}class T{constructor(s){this.inputType=k.NUMBER,this.defaultValue=s}}function N(i,s){const t={};for(const n in i)t[n]=i[n].defaultValue;return{...t,...Qe(i,s)}}function Qe(i,s){const t={...s};for(const n in s){const a=i[n];a?.inputType===k.BOOLEAN?t[n]="true"===s[n]:a?.inputType===k.NUMBER?t[n]=Number(s[n]):a?.inputType===k.COLOR&&(t[n]=Je(s[n]))}return t}var D=_(347),A=_(6385),E=_(4104),W=_(2599);let L=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-item-styles"]],inputs:{form:"form"},decls:53,vars:15,consts:[[1,"hint"],[3,"formGroup"],["yaSimpleTable","","formGroupName","properties",1,"style-table"],[1,"property"],["formControlName","backgroundColor_overrideBand"],["backgroundColor_overrideBand",""],[1,"widget"],["type","color","formControlName","backgroundColor"],["formControlName","textColor_overrideBand"],["textColor_overrideBand",""],["type","color","formControlName","textColor"],["formControlName","textSize_overrideBand"],["textSize_overrideBand",""],["type","number","formControlName","textSize","min","0",2,"width","100px"],["formControlName","marginLeft_overrideBand"],["marginLeft_overrideBand",""],["type","number","formControlName","marginLeft","min","0",2,"width","100px"],["formControlName","borderColor_overrideBand"],["borderColor_overrideBand",""],["type","color","formControlName","borderColor"],["formControlName","borderWidth_overrideBand"],["borderWidth_overrideBand",""],["type","number","formControlName","borderWidth","min","0",2,"width","100px"],["formControlName","cornerRadius_overrideBand"],["cornerRadius_overrideBand",""],["type","number","formControlName","cornerRadius","min","0",2,"width","100px"]],template:function(n,a){if(1&n&&(e.TgZ(0,"p",0),e._uU(1," When unset, items inherit the styling of the band they are displayed on.\n"),e.qZA(),e.TgZ(2,"form",1)(3,"table",2)(4,"tr")(5,"td",3),e._UZ(6,"mat-slide-toggle",4,5),e._uU(8," Background Color "),e.qZA(),e.TgZ(9,"td",6),e._UZ(10,"input",7),e.qZA()(),e.TgZ(11,"tr")(12,"td",3),e._UZ(13,"mat-slide-toggle",8,9),e._uU(15," Text Color "),e.qZA(),e.TgZ(16,"td",6),e._UZ(17,"input",10),e.qZA()(),e.TgZ(18,"tr")(19,"td",3),e._UZ(20,"mat-slide-toggle",11,12),e._uU(22," Text Size "),e.qZA(),e.TgZ(23,"td",6),e._UZ(24,"input",13),e.qZA()(),e.TgZ(25,"tr")(26,"td",3),e._UZ(27,"mat-slide-toggle",14,15),e._uU(29," Margin Left "),e.qZA(),e.TgZ(30,"td",6),e._UZ(31,"input",16),e.qZA()(),e.TgZ(32,"tr")(33,"td",3),e._UZ(34,"mat-slide-toggle",17,18),e._uU(36," Border Color "),e.qZA(),e.TgZ(37,"td",6),e._UZ(38,"input",19),e.qZA()(),e.TgZ(39,"tr")(40,"td",3),e._UZ(41,"mat-slide-toggle",20,21),e._uU(43," Border Width "),e.qZA(),e.TgZ(44,"td",6),e._UZ(45,"input",22),e.qZA()(),e.TgZ(46,"tr")(47,"td",3),e._UZ(48,"mat-slide-toggle",23,24),e._uU(50," Corner Radius "),e.qZA(),e.TgZ(51,"td",6),e._UZ(52,"input",25),e.qZA()()()()),2&n){const r=e.MAs(7),c=e.MAs(14),m=e.MAs(21),d=e.MAs(28),p=e.MAs(35),Z=e.MAs(42),q=e.MAs(49);e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(2),e.ekj("disabled",!r.checked),e.xp6(7),e.ekj("disabled",!c.checked),e.xp6(7),e.ekj("disabled",!m.checked),e.xp6(7),e.ekj("disabled",!d.checked),e.xp6(7),e.ekj("disabled",!p.checked),e.xp6(7),e.ekj("disabled",!Z.checked),e.xp6(7),e.ekj("disabled",!q.checked)}},dependencies:[o._Y,o.Fj,o.wV,o.JJ,o.JL,o.qQ,o.sg,o.u,o.x0,l.Vy,W.Rr],styles:[".style-table[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{font-weight:500;font-size:11px;letter-spacing:.02em;line-height:12px;color:#000;width:150px}.style-table[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{font-style:italic;color:gray}"],changeDetection:0})}return i})();let Me=(()=>{class i{constructor(t,n,a,r,c){this.dialogRef=t,this.yamcs=a,this.messageService=r,this.data=c,this.resolutionOptions=[{id:"seconds",label:"seconds"},{id:"minutes",label:"minutes"},{id:"hours",label:"hours"}],this.startConstraintOptions=[{id:"START_ON",label:"Start on"}];const m=c.item,d=m.properties||{},p=N(R,d);this.form=n.group({name:[m.name,o.kI.required],start:[m.start,o.kI.required],duration:[m.duration,o.kI.required],tags:[m.tags||[],[]],properties:n.group({backgroundColor:[p.backgroundColor,[]],backgroundColor_overrideBand:"backgroundColor"in d,borderColor:[p.borderColor,[]],borderColor_overrideBand:"borderColor"in d,borderWidth:[p.borderWidth,[]],borderWidth_overrideBand:"borderWidth"in d,cornerRadius:[p.cornerRadius,[]],cornerRadius_overrideBand:"cornerRadius"in d,marginLeft:[p.marginLeft,[]],marginLeft_overrideBand:"marginLeft"in d,textColor:[p.textColor,[]],textColor_overrideBand:"textColor"in d,textSize:[p.textSize,[]],textSize_overrideBand:"textSize"in d})}),this.updateDisabledState(),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.updateDisabledState()})}save(){const t=this.form.value,n={name:t.name,start:l.P6.toISOString(t.start),duration:t.duration,tags:t.tags,properties:t.properties};this.yamcs.yamcsClient.updateTimelineItem(this.yamcs.instance,this.data.item.id,n).then(a=>this.dialogRef.close(a)).catch(a=>this.messageService.showError(a))}delete(){confirm("Are you sure you want to delete this item?")&&this.yamcs.yamcsClient.deleteTimelineItem(this.yamcs.instance,this.data.item.id).then(()=>this.dialogRef.close()).catch(t=>this.messageService.showError(t))}updateDisabledState(){const{controls:t}=this.propertiesGroup;for(const n in t)if(n.endsWith("_overrideBand")){const a=t[n.substring(0,n.length-13)];t[n].value?a.enable({onlySelf:!0}):a.disable({onlySelf:!0})}}get propertiesGroup(){return this.form.controls.properties}ngOnDestroy(){this.formSubscription?.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(h.so),e.Y36(o.QS),e.Y36(l.C8),e.Y36(l.ez),e.Y36(h.WI))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:39,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"ya-form",3,"formGroup"],["animationDuration","0ms",1,"small-tabs",3,"mat-stretch-tabs"],["label","General"],[2,"margin-top","1em"],["cdkFocusRegionstart","","type","text","formControlName","name",2,"width","100%"],[1,"half-break"],["dialogTitle","Tags"],["formControlName","tags"],["formControlName","duration"],[1,"section-divider","half-break"],["formControlName","start"],["label","Styles"],[3,"form"],["align","end"],[1,"ya-button",3,"click"],[2,"flex","1 1 auto"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"]],template:function(n,a){1&n&&(e.TgZ(0,"h2",0),e._uU(1,"Update item"),e.qZA(),e.TgZ(2,"mat-dialog-content",1)(3,"form",2)(4,"mat-tab-group",3)(5,"mat-tab",4)(6,"div",5)(7,"label"),e._uU(8," Name"),e._UZ(9,"br")(10,"input",6),e.qZA(),e._UZ(11,"hr",7),e.TgZ(12,"label"),e._uU(13," Tags "),e.TgZ(14,"ya-help",8),e._uU(15," Tags allow to categorise items per band. Bands only show items for which one of the tags is matching. "),e.qZA(),e._UZ(16,"br")(17,"ya-tag-select",9),e.qZA(),e._UZ(18,"hr",7),e.TgZ(19,"label"),e._uU(20," Duration "),e._UZ(21,"ya-duration-input",10),e.qZA(),e.TgZ(22,"div",11),e._UZ(23,"mat-divider"),e.qZA(),e.TgZ(24,"label"),e._uU(25," Start"),e._UZ(26,"br")(27,"ya-date-time-input",12),e.qZA()()(),e.TgZ(28,"mat-tab",13)(29,"div",5),e._UZ(30,"app-item-styles",14),e.qZA()()()()(),e.TgZ(31,"mat-dialog-actions",15)(32,"button",16),e.NdJ("click",function(){return a.delete()}),e._uU(33,"DELETE THIS ITEM"),e.qZA(),e._UZ(34,"div",17),e.TgZ(35,"button",18),e._uU(36,"CANCEL"),e.qZA(),e.TgZ(37,"button",19),e.NdJ("click",function(){return a.save()}),e._uU(38,"SAVE"),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("formGroup",a.form),e.xp6(1),e.Q6J("mat-stretch-tabs",!1),e.xp6(26),e.Q6J("form",a.form),e.xp6(7),e.Q6J("disabled",!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,h.ZT,h.uh,h.xY,h.H8,A.d,E.uX,E.SP,l.t,l.JD,l.IR,l.PX,L],encapsulation:2,changeDetection:0})}return i})();const b={frozen:new K(!1),itemBackgroundColor:new I("#77b1e1"),itemBorderColor:new I("#3d94c7"),itemBorderWidth:new T(1),itemCornerRadius:new T(0),itemHeight:new T(20),itemMarginLeft:new T(5),itemTextColor:new I("#333333"),itemTextOverflow:new class Ye{constructor(s){this.inputType=k.SELECT,this.defaultValue=s}}("show"),itemTextSize:new T(10),marginBottom:new T(7),marginTop:new T(7),multiline:new K(!0),spaceBetweenItems:new T(0),spaceBetweenLines:new T(2)},R={backgroundColor:new I(b.itemBackgroundColor.defaultValue),borderColor:new I(b.itemBorderColor.defaultValue),borderWidth:new T(b.itemBorderWidth.defaultValue),cornerRadius:new T(b.itemCornerRadius.defaultValue),marginLeft:new T(b.itemMarginLeft.defaultValue),textColor:new I(b.itemTextColor.defaultValue),textSize:new T(b.itemTextSize.defaultValue)};class te extends D.rK{constructor(s,t,n){super(s.timeline),this.label=t.name,this.data={band:t};const a=N(b,t.properties||{});this.frozen=a.frozen,this.itemBackground=a.itemBackgroundColor,this.itemBorderColor=a.itemBorderColor,this.itemBorderWidth=a.itemBorderWidth,this.itemCornerRadius=a.itemCornerRadius,this.itemHeight=a.itemHeight,this.itemMarginLeft=a.itemMarginLeft,this.itemTextColor=a.itemTextColor,this.itemTextOverflow=a.itemTextOverflow,this.itemTextSize=a.itemTextSize,this.marginBottom=a.marginBottom,this.marginTop=a.marginTop,this.multiline=a.multiline,this.spaceBetween=a.spaceBetweenItems,this.lineSpacing=a.spaceBetweenLines,this.addItemClickListener(r=>{n.open(Me,{width:"600px",panelClass:"dialog-force-no-scrollbar",data:{item:r.item.data.item}}).afterClosed().subscribe(()=>s.refreshData())})}}let ne=(()=>{class i{constructor(){this.itemTextOverflowOptions=[{id:"show",label:"Show"},{id:"clip",label:"Clip"},{id:"hide",label:"Hide"}]}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-item-band-styles"]],inputs:{form:"form"},decls:85,vars:2,consts:[[3,"formGroup"],["yaSimpleTable","","formGroupName","properties",1,"style-table"],[1,"property"],["dialogTitle","Frozen"],[1,"widget"],["formControlName","frozen"],["dialogTitle","Multiline"],["formControlName","multiline"],["dialogTitle","Space Between Lines"],["type","number","formControlName","spaceBetweenLines","min","0",2,"width","100px"],["dialogTitle","Space Between Items"],["type","number","formControlName","spaceBetweenItems","min","0",2,"width","100px"],["type","number","formControlName","marginTop","min","0",2,"width","100px"],["type","number","formControlName","marginBottom","min","0",2,"width","100px"],["type","number","formControlName","itemHeight","min","0",2,"width","100px"],["type","color","formControlName","itemBackgroundColor"],["type","color","formControlName","itemTextColor"],["formControlName","itemTextOverflow",3,"options"],["type","number","formControlName","itemTextSize","min","0",2,"width","100px"],["type","number","formControlName","itemMarginLeft","min","0",2,"width","100px"],["type","color","formControlName","itemBorderColor"],["type","number","formControlName","itemBorderWidth","min","0",2,"width","100px"],["type","number","formControlName","itemCornerRadius","min","0",2,"width","100px"]],template:function(n,a){1&n&&(e.TgZ(0,"form",0)(1,"table",1)(2,"tr")(3,"td",2),e._uU(4," Frozen "),e.TgZ(5,"ya-help",3),e._uU(6," Fix this line to the top of the view. Frozen bands are always rendered above other bands. "),e.qZA()(),e.TgZ(7,"td",4),e._UZ(8,"mat-slide-toggle",5),e.qZA()(),e.TgZ(9,"tr")(10,"td",2),e._uU(11," Multiline "),e.TgZ(12,"ya-help",6),e._uU(13," Draw items on multiple lines if otherwise there would be collisions. "),e.qZA()(),e.TgZ(14,"td",4),e._UZ(15,"mat-slide-toggle",7),e.qZA()(),e.TgZ(16,"tr")(17,"td",2),e._uU(18," Space Between Lines "),e.TgZ(19,"ya-help",8),e._uU(20," In case of multilining, this indicates the vertical space between lines. "),e.qZA()(),e.TgZ(21,"td",4),e._UZ(22,"input",9),e.qZA()(),e.TgZ(23,"tr")(24,"td",2),e._uU(25," Space Between Items "),e.TgZ(26,"ya-help",10),e._uU(27," In case of multilining, this indicates the minimum horizontal space between items. If an item does not meet this treshold, it gets rendered on a different line. "),e.qZA()(),e.TgZ(28,"td",4),e._UZ(29,"input",11),e.qZA()(),e.TgZ(30,"tr")(31,"td",2),e._uU(32," Margin Top "),e.qZA(),e.TgZ(33,"td",4),e._UZ(34,"input",12),e.qZA()(),e.TgZ(35,"tr")(36,"td",2),e._uU(37," Margin Bottom "),e.qZA(),e.TgZ(38,"td",4),e._UZ(39,"input",13),e.qZA()(),e.TgZ(40,"tr")(41,"td",2),e._uU(42," Item Height "),e.qZA(),e.TgZ(43,"td",4),e._UZ(44,"input",14),e.qZA()(),e.TgZ(45,"tr")(46,"td",2),e._uU(47," Item Background Color "),e.qZA(),e.TgZ(48,"td",4),e._UZ(49,"input",15),e.qZA()(),e.TgZ(50,"tr")(51,"td",2),e._uU(52," Item Text Color "),e.qZA(),e.TgZ(53,"td",4),e._UZ(54,"input",16),e.qZA()(),e.TgZ(55,"tr")(56,"td",2),e._uU(57," Item Text Overflow "),e.qZA(),e.TgZ(58,"td",4),e._UZ(59,"ya-select",17),e.qZA()(),e.TgZ(60,"tr")(61,"td",2),e._uU(62," Item Text Size "),e.qZA(),e.TgZ(63,"td",4),e._UZ(64,"input",18),e.qZA()(),e.TgZ(65,"tr")(66,"td",2),e._uU(67," Item Margin Left "),e.qZA(),e.TgZ(68,"td",4),e._UZ(69,"input",19),e.qZA()(),e.TgZ(70,"tr")(71,"td",2),e._uU(72," Item Border Color "),e.qZA(),e.TgZ(73,"td",4),e._UZ(74,"input",20),e.qZA()(),e.TgZ(75,"tr")(76,"td",2),e._uU(77," Item Border Width "),e.qZA(),e.TgZ(78,"td",4),e._UZ(79,"input",21),e.qZA()(),e.TgZ(80,"tr")(81,"td",2),e._uU(82," Item Corner Radius "),e.qZA(),e.TgZ(83,"td",4),e._UZ(84,"input",22),e.qZA()()()()),2&n&&(e.Q6J("formGroup",a.form),e.xp6(59),e.Q6J("options",a.itemTextOverflowOptions))},dependencies:[o._Y,o.Fj,o.wV,o.JJ,o.JL,o.qQ,o.sg,o.u,o.x0,l.Vy,W.Rr,l.IR,l.Hr],styles:[".style-table[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{font-weight:500;font-size:11px;letter-spacing:.02em;line-height:12px;color:#000;width:150px}.style-table[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{font-style:italic;color:gray}"],changeDetection:0})}return i})();function Ee(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"form",1)(2,"label"),e._uU(3," Label "),e.TgZ(4,"span",2),e._uU(5,"(required)"),e.qZA(),e._UZ(6,"br")(7,"input",3),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"label"),e._uU(10," Description "),e.TgZ(11,"span",2),e._uU(12,"(optional)"),e.qZA(),e._UZ(13,"br")(14,"textarea",4),e.qZA(),e._UZ(15,"br"),e.TgZ(16,"label"),e._uU(17," Tags"),e._UZ(18,"br")(19,"ya-tag-select",5),e.qZA(),e._UZ(20,"br"),e.TgZ(21,"div",6),e._UZ(22,"mat-divider"),e.qZA(),e.TgZ(23,"h4"),e._uU(24,"Styles"),e.qZA(),e._UZ(25,"app-item-band-styles",7),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(24),e.Q6J("form",t.form)}}let ie=(()=>{class i{constructor(t,n){this.yamcs=t,this.changeDetection=n,this.formConfigured$=new v.X(!1)}ngAfterViewInit(){const t=N(b,this.band.properties||{}),n={frozen:[t.frozen,[o.kI.required]],itemBackgroundColor:[t.itemBackgroundColor,[o.kI.required]],itemBorderColor:[t.itemBorderColor,[o.kI.required]],itemBorderWidth:[t.itemBorderWidth,[o.kI.required]],itemCornerRadius:[t.itemCornerRadius,[o.kI.required]],itemHeight:[t.itemHeight,[o.kI.required]],itemMarginLeft:[t.itemMarginLeft,[o.kI.required]],itemTextColor:[t.itemTextColor,[o.kI.required]],itemTextOverflow:[t.itemTextOverflow,[o.kI.required]],itemTextSize:[t.itemTextSize,[o.kI.required]],marginBottom:[t.marginBottom,[o.kI.required]],marginTop:[t.marginTop,[o.kI.required]],multiline:[t.multiline,[o.kI.required]],spaceBetweenItems:[t.spaceBetweenItems,[o.kI.required]],spaceBetweenLines:[t.spaceBetweenLines,[o.kI.required]]},a=this.form.get("properties");for(const r in n){const c=n[r];a.addControl(r,new o.p4(c[0],c[1]))}this.formConfigured$.next(!0),this.changeDetection.detectChanges()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(l.C8),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-item-band"]],inputs:{form:"form",band:"band"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"formGroup"],[1,"hint"],["type","text","formControlName","name"],["formControlName","description","rows","3"],["formControlName","tags"],[1,"section-divider"],[3,"form"]],template:function(n,a){1&n&&(e.YNc(0,Ee,26,2,"ng-container",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,a.formConfigured$))},dependencies:[g.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,A.d,l.PX,ne,g.Ov],encapsulation:2,changeDetection:0})}return i})();const F={height:new T(34)};let ae=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-spacer-styles"]],inputs:{form:"form"},decls:7,vars:1,consts:[[3,"formGroup"],["yaSimpleTable","","formGroupName","properties",1,"style-table"],[1,"property"],[1,"widget"],["type","number","formControlName","height","min","0",2,"width","100px"]],template:function(n,a){1&n&&(e.TgZ(0,"form",0)(1,"table",1)(2,"tr")(3,"td",2),e._uU(4," Height "),e.qZA(),e.TgZ(5,"td",3),e._UZ(6,"input",4),e.qZA()()()()),2&n&&e.Q6J("formGroup",a.form)},dependencies:[o._Y,o.Fj,o.wV,o.JJ,o.JL,o.qQ,o.sg,o.u,o.x0,l.Vy],styles:[".style-table[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{font-weight:500;font-size:11px;letter-spacing:.02em;line-height:12px;color:#000;width:150px}.style-table[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{font-style:italic;color:gray}"],changeDetection:0})}return i})();function Oe(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"form",1)(2,"label"),e._uU(3," Label "),e.TgZ(4,"span",2),e._uU(5,"(optional)"),e.qZA(),e._UZ(6,"br")(7,"input",3),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"label"),e._uU(10," Description "),e.TgZ(11,"span",2),e._uU(12,"(optional)"),e.qZA(),e._UZ(13,"br")(14,"textarea",4),e.qZA(),e._UZ(15,"br"),e.TgZ(16,"div",5),e._UZ(17,"mat-divider"),e.qZA(),e.TgZ(18,"h4"),e._uU(19,"Styles"),e.qZA(),e._UZ(20,"app-spacer-styles",6),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(19),e.Q6J("form",t.form)}}let oe=(()=>{class i{constructor(t,n){this.yamcs=t,this.changeDetection=n,this.formConfigured$=new v.X(!1)}ngAfterViewInit(){const n={height:[N(F,this.band.properties||{}).height,[o.kI.required]]},a=this.form.get("properties");for(const r in n){const c=n[r];a.addControl(r,new o.p4(c[0],c[1]))}this.formConfigured$.next(!0),this.changeDetection.detectChanges()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(l.C8),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-spacer"]],inputs:{form:"form",band:"band"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"],[1,"section-divider"],[3,"form"]],template:function(n,a){1&n&&(e.YNc(0,Oe,21,2,"ng-container",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,a.formConfigured$))},dependencies:[g.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,A.d,ae,g.Ov],encapsulation:2,changeDetection:0})}return i})();var f=_(1896),Ve=_(664),re=_(1293),Le=_(9295),S=_(3566),u=_(9538),z=_(886),C=_(6593),y=_(4643),U=_(2296),B=_(617),x=_(2755),w=_(1237);function Re(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"th",21)(1,"input",22),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(a?r.masterToggle():null)}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())}}function Fe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"td",23)(1,"input",24),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const c=e.CHM(t).$implicit,m=e.oxw(2);return e.KtG(a?m.selection.toggle(c):null)}),e.qZA()()}if(2&i){const t=s.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.selection.isSelected(t))}}function ze(i,s){1&i&&(e.TgZ(0,"th",25),e._uU(1,"Label"),e.qZA())}function Ge(i,s){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.name)}}function $e(i,s){1&i&&(e.TgZ(0,"i"),e._uU(1,"(none)"),e.qZA())}const se=function(i){return{c:i}};function He(i,s){if(1&i&&(e.TgZ(0,"td",26)(1,"a",27),e.YNc(2,Ge,2,1,"ng-container",28),e.YNc(3,$e,2,0,"i",28),e.qZA()()),2&i){const t=s.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("routerLink",t.id)("queryParams",e.VKq(4,se,n.yamcs.context)),e.xp6(1),e.Q6J("ngIf",t.name),e.xp6(1),e.Q6J("ngIf",!t.name)}}function Xe(i,s){1&i&&(e.TgZ(0,"th",29),e._uU(1,"Description"),e.qZA())}function je(i,s){if(1&i&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.hij(" ",t.description||"-"," ")}}function Ke(i,s){1&i&&(e.TgZ(0,"th",30),e._uU(1,"Tags"),e.qZA())}function We(i,s){if(1&i&&(e.TgZ(0,"ya-label"),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Oqu(t)}}function et(i,s){1&i&&(e.ynx(0),e._uU(1,"-"),e.BQk())}const tt=function(){return[]};function nt(i,s){if(1&i&&(e.TgZ(0,"td",26),e.YNc(1,We,2,1,"ya-label",31),e.YNc(2,et,2,0,"ng-container",28),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",t.tags||e.DdM(2,tt)),e.xp6(1),e.Q6J("ngIf",!t.tags)}}function it(i,s){1&i&&(e.TgZ(0,"th",25),e._uU(1,"Type"),e.qZA())}function at(i,s){if(1&i&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.hij(" ",t.type," ")}}function ot(i,s){1&i&&e._UZ(0,"th",32)}function rt(i,s){1&i&&e._UZ(0,"td",26)}function st(i,s){1&i&&e._UZ(0,"tr",33)}function ct(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr",34),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.toggleOne(r))}),e.qZA()}if(2&i){const t=s.$implicit,n=e.oxw(2);e.ekj("selected",n.selection.isSelected(t))}}function lt(i,s){if(1&i&&(e.TgZ(0,"table",4),e.ynx(1,5),e.YNc(2,Re,2,1,"th",6),e.YNc(3,Fe,2,1,"td",7),e.BQk(),e.ynx(4,8),e.YNc(5,ze,2,0,"th",9),e.YNc(6,He,4,6,"td",10),e.BQk(),e.ynx(7,11),e.YNc(8,Xe,2,0,"th",12),e.YNc(9,je,2,1,"td",10),e.BQk(),e.ynx(10,13),e.YNc(11,Ke,2,0,"th",14),e.YNc(12,nt,3,3,"td",15),e.BQk(),e.ynx(13,16),e.YNc(14,it,2,0,"th",9),e.YNc(15,at,2,1,"td",10),e.BQk(),e.ynx(16,17),e.YNc(17,ot,1,0,"th",18),e.YNc(18,rt,1,0,"td",10),e.BQk(),e.YNc(19,st,1,0,"tr",19),e.YNc(20,ct,1,2,"tr",20),e.qZA()),2&i){const t=e.oxw();e.Q6J("dataSource",t.dataSource)("trackBy",t.tableTrackerFn),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}let ce=(()=>{class i{constructor(t,n,a){this.yamcs=t,this.messageService=a,this.displayedColumns=["select","name","description","tags","type","actions"],this.tableTrackerFn=(r,c)=>c.id,this.dataSource=new u.by,this.selection=new z.O(this.tableTrackerFn,!0,[]),n.setTitle("Timeline Bands"),this.refreshData()}ngAfterViewInit(){this.dataSource.sort=this.sort}isAllSelected(){const n=this.dataSource.filteredData.length;return this.selection.selected.length===n&&n>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(t=>this.selection.select(t))}toggleOne(t){(!this.selection.isSelected(t)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(t)}deleteSelectedBands(){if(confirm("Are you sure you want to delete the selected bands?"))for(const t of this.selection.selected)this.deleteBand(t.id,!1)}deleteBand(t,n=!0){(!n||confirm("Are you sure you want to delete the selected band?"))&&this.yamcs.yamcsClient.deleteTimelineBand(this.yamcs.instance,t).then(()=>this.refreshData()).catch(a=>this.messageService.showError(a))}isGroupDeleteEnabled(){return!this.selection.isEmpty()}refreshData(){this.yamcs.yamcsClient.getTimelineBands(this.yamcs.instance).then(t=>{this.selection.matchNewValues(t.bands||[]),this.dataSource.data=t.bands||[]}).catch(t=>this.messageService.showError(t))}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(l.C8),e.Y36(C.Dx),e.Y36(l.ez))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(n,a){if(1&n&&e.Gf(S.YE,5),2&n){let r;e.iGM(r=e.CRH())&&(a.sort=r.first)}},decls:13,vars:5,consts:[["mat-button","","color","primary","routerLink","create",3,"queryParams"],["mat-button","","color","primary",3,"disabled","click"],[1,"panel-content"],["mat-table","","class","ya-data-table expand","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",3,"dataSource","trackBy",4,"ngIf"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["mat-header-cell","","class","wrap200",4,"matHeaderCellDef"],["cdkColumnDef","tags"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["matColumnDef","type"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"checked","change"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"checked","click","change"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink","queryParams"],[4,"ngIf"],["mat-header-cell","",1,"wrap200"],["mat-header-cell",""],[4,"ngFor","ngForOf"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(n,a){1&n&&(e.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),e._uU(2," Bands \xa0\xa0\xa0 "),e.TgZ(3,"a",0)(4,"mat-icon"),e._uU(5,"add_circle_outline"),e.qZA(),e._uU(6," Create band "),e.qZA(),e.TgZ(7,"button",1),e.NdJ("click",function(){return a.deleteSelectedBands()}),e.TgZ(8,"mat-icon"),e._uU(9,"close"),e.qZA(),e._uU(10," Delete "),e.qZA()(),e.TgZ(11,"div",2),e.YNc(12,lt,21,4,"table",3),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("queryParams",e.VKq(3,se,a.yamcs.context)),e.xp6(4),e.Q6J("disabled",!a.isGroupDeleteEnabled()),e.xp6(5),e.Q6J("ngIf",a.dataSource))},dependencies:[g.sg,g.O5,f.rH,y.O_,y.D5,y.fo,U.zs,U.lW,B.Hw,S.YE,S.nU,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,l._n,x.a,w.k],encapsulation:2,changeDetection:0})}return i})();var J=_(1274);let Q=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-band-wizard-step"]],inputs:{step:"step"},decls:8,vars:4,consts:[[1,"sub"]],template:function(n,a){1&n&&(e.TgZ(0,"mat-toolbar",0)(1,"mat-toolbar-row")(2,"span")(3,"span"),e._uU(4,"1. Select band type"),e.qZA(),e._uU(5," \xa0\xa0\xa0\xa0\xa0\xa0\xa0 "),e.TgZ(6,"span"),e._uU(7,"2. Configure band"),e.qZA()()()()),2&n&&(e.xp6(3),e.ekj("active","1"===a.step),e.xp6(3),e.ekj("active","2"===a.step))},dependencies:[J.Ye,J.rD],styles:["span[_ngcontent-%COMP%]{cursor:default}span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:.3}span[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{opacity:1}mat-toolbar.sub[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3;background-color:#fff;font-size:12px}.mat-toolbar-row[_ngcontent-%COMP%]{height:32px;padding:0 24px}.mat-toolbar-multiple-rows[_ngcontent-%COMP%]{min-height:32px}"],changeDetection:0})}return i})();const M=function(i){return{c:i}};let le=(()=>{class i{constructor(t,n){this.yamcs=n,t.setTitle("Create a Band")}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(C.Dx),e.Y36(l.C8))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:40,vars:15,consts:[["mat-icon-button","","routerLink","..","color","primary",3,"queryParams"],["step","1"],[1,"panel-content"],[1,"category-title"],[1,"band-type-list"],["routerLink","time-ruler",1,"band-type",3,"queryParams"],[1,"card"],[1,"card-title"],[1,"card-content"],["routerLink","item-band",1,"band-type",3,"queryParams"],["routerLink","spacer",1,"band-type",3,"queryParams"],["routerLink","command-band",1,"band-type",3,"queryParams"]],template:function(n,a){1&n&&(e.TgZ(0,"app-instance-page")(1,"app-instance-toolbar")(2,"a",0)(3,"mat-icon"),e._uU(4,"arrow_back"),e.qZA()(),e._uU(5," Create band "),e.qZA(),e._UZ(6,"app-create-band-wizard-step",1),e.TgZ(7,"div",2)(8,"div",3),e._uU(9,"General"),e.qZA(),e.TgZ(10,"div",4)(11,"a",5)(12,"div",6)(13,"div",7),e._uU(14,"Time Ruler"),e.qZA(),e.TgZ(15,"div",8),e._uU(16," Display absolute time, formatted in a timezone of choice. "),e.qZA()()(),e.TgZ(17,"a",9)(18,"div",6)(19,"div",7),e._uU(20,"Item Band"),e.qZA(),e.TgZ(21,"div",8),e._uU(22," Show a selection of timeline items. "),e.qZA()()(),e.TgZ(23,"a",10)(24,"div",6)(25,"div",7),e._uU(26,"Spacer"),e.qZA(),e.TgZ(27,"div",8),e._uU(28," Insert empty vertical space. "),e.qZA()()()(),e.TgZ(29,"p"),e._uU(30,"\xa0"),e.qZA(),e.TgZ(31,"div",3),e._uU(32,"Yamcs entities"),e.qZA(),e.TgZ(33,"div",4)(34,"a",11)(35,"div",6)(36,"div",7),e._uU(37,"Commands"),e.qZA(),e.TgZ(38,"div",8),e._uU(39," Display issued commands. "),e.qZA()()()()()()),2&n&&(e.xp6(2),e.Q6J("queryParams",e.VKq(5,M,a.yamcs.context)),e.xp6(9),e.Q6J("queryParams",e.VKq(7,M,a.yamcs.context)),e.xp6(6),e.Q6J("queryParams",e.VKq(9,M,a.yamcs.context)),e.xp6(6),e.Q6J("queryParams",e.VKq(11,M,a.yamcs.context)),e.xp6(11),e.Q6J("queryParams",e.VKq(13,M,a.yamcs.context)))},dependencies:[f.rH,U.o6,B.Hw,x.a,w.k,Q],styles:["div.category-title[_ngcontent-%COMP%]{font-size:18px;line-height:1.5;margin-bottom:1em}a.band-type[_ngcontent-%COMP%]{display:inline-block;width:260px;margin-right:20px;margin-bottom:20px;vertical-align:top;text-decoration:none}.card[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.12);background:#fff;border-radius:4px;overflow:hidden}.card-title[_ngcontent-%COMP%]{align-items:center;display:flex;padding:15px;font-size:20px;font-weight:500;color:#000000de}.card-content[_ngcontent-%COMP%]{padding:0 15px 15px;min-height:2.4em;font-size:15px;color:#0000008a}a.band-type[_ngcontent-%COMP%]:hover   .card[_ngcontent-%COMP%]{background-color:#f2f2f2}"],changeDetection:0})}return i})();function mt(i,s){1&i&&(e.TgZ(0,"th",13),e._uU(1,"Available"),e.qZA())}function dt(i,s){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.name)}}function ut(i,s){1&i&&(e.TgZ(0,"i"),e._uU(1,"(no name)"),e.qZA())}function pt(i,s){if(1&i&&(e.ynx(0),e._UZ(1,"br"),e.TgZ(2,"span",16),e._uU(3),e.qZA(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.description)}}function _t(i,s){if(1&i&&(e.TgZ(0,"td",14),e.YNc(1,dt,2,1,"ng-container",15),e.YNc(2,ut,2,0,"i",15),e.YNc(3,pt,4,1,"ng-container",15),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",t.name),e.xp6(1),e.Q6J("ngIf",!t.name),e.xp6(1),e.Q6J("ngIf",t.description)}}function gt(i,s){1&i&&e._UZ(0,"tr",17)}function ht(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr",18),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.selectBand(r))}),e.qZA()}if(2&i){const t=s.$implicit,n=e.oxw();e.ekj("selected",n.isLeftSelected(t))}}function ft(i,s){1&i&&(e.TgZ(0,"th",13),e._uU(1,"Selected"),e.qZA())}function bt(i,s){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.name)}}function Zt(i,s){1&i&&(e.TgZ(0,"i"),e._uU(1,"(no name)"),e.qZA())}function Tt(i,s){if(1&i&&(e.ynx(0),e._UZ(1,"br"),e.TgZ(2,"span",16),e._uU(3),e.qZA(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.description)}}function yt(i,s){if(1&i&&(e.TgZ(0,"td",14),e.YNc(1,bt,2,1,"ng-container",15),e.YNc(2,Zt,2,0,"i",15),e.YNc(3,Tt,4,1,"ng-container",15),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",t.name),e.xp6(1),e.Q6J("ngIf",!t.name),e.xp6(1),e.Q6J("ngIf",t.description)}}function Ct(i,s){1&i&&e._UZ(0,"tr",17)}function xt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr",18),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.selectBand(r))}),e.qZA()}if(2&i){const t=s.$implicit,n=e.oxw();e.ekj("selected",n.isRightSelected(t))}}let G=(()=>{class i{constructor(t){this.displayedColumns=["name"],this.availableDataSource=new u.by([]),this.selectedDataSource=new u.by([]),this.onChange=n=>{},this.bands$=t.yamcsClient.getTimelineBands(t.instance),this.bands$.then(n=>{this.availableDataSource.data=n.bands||[]})}writeValue(t){this.bands$.then(n=>{const a=n.bands||[];if(t){const r=t.map(d=>d.id),c=[],m=[];for(const d of a)-1===r.indexOf(d.id)&&c.push(d);for(const d of r)for(const p of a)p.id===d&&m.push(p);this.availableDataSource.data=c,this.selectedDataSource.data=m}else this.availableDataSource.data=[...a],this.selectedDataSource.data=[]})}registerOnChange(t){this.onChange=t}registerOnTouched(t){}selectBand(t){this.selectedBand=t}isLeftSelected(t){return t===this.selectedBand&&-1!==this.availableDataSource.data.indexOf(t)}isAnyLeftSelected(){return this.selectedBand&&-1!==this.availableDataSource.data.indexOf(this.selectedBand)}isRightSelected(t){return t===this.selectedBand&&-1!==this.selectedDataSource.data.indexOf(t)}isAnyRightSelected(){return this.selectedBand&&-1!==this.selectedDataSource.data.indexOf(this.selectedBand)}moveRight(){const t=this.selectedBand,n=[...this.availableDataSource.data],a=[...this.selectedDataSource.data],r=n.indexOf(t);-1!==r&&n.splice(r,1),-1===a.indexOf(t)&&a.push(t),this.availableDataSource.data=n,this.selectedDataSource.data=a,this.onChange(a)}moveLeft(){const t=this.selectedBand,n=[...this.availableDataSource.data],a=[...this.selectedDataSource.data],r=a.indexOf(t);-1!==r&&a.splice(r,1),-1===n.indexOf(t)&&n.push(t),this.availableDataSource.data=n,this.selectedDataSource.data=a,this.onChange(a)}moveUp(){const t=this.selectedBand,n=[...this.selectedDataSource.data],a=n.indexOf(t);0!==a&&(n[a]=n[a-1],n[a-1]=t),this.selectedDataSource.data=n,this.onChange(n)}moveDown(){const t=this.selectedBand,n=[...this.selectedDataSource.data],a=n.indexOf(t);a!==n.length-1&&(n[a]=n[a+1],n[a+1]=t),this.selectedDataSource.data=n,this.onChange(n)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(l.C8))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-band-multi-select"]],features:[e._Bn([{provide:o.JU,useExisting:(0,e.Gpc)(()=>i),multi:!0}])],decls:32,vars:10,consts:[[2,"display","flex"],[1,"bands-from"],["mat-table","",1,"ya-data-table",2,"width","100%",3,"dataSource"],["cdkColumnDef","name"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["mat-header-row","",4,"cdkHeaderRowDef"],["mat-row","",3,"selected","click",4,"cdkRowDef","cdkRowDefColumns"],[2,"display","inline-block","margin","1em","align-self","center"],[1,"ya-button",2,"width","90px",3,"disabled","click"],[1,"bands-to"],[2,"text-align","right"],[1,"ya-button",3,"disabled","click"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],[1,"hint"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"table",2),e.ynx(3,3),e.YNc(4,mt,2,0,"th",4),e.YNc(5,_t,4,3,"td",5),e.BQk(),e.YNc(6,gt,1,0,"tr",6),e.YNc(7,ht,1,2,"tr",7),e.qZA()(),e.TgZ(8,"div",8)(9,"button",9),e.NdJ("click",function(){return a.moveRight()}),e._uU(10," Add "),e.TgZ(11,"mat-icon"),e._uU(12,"chevron_right"),e.qZA()(),e._UZ(13,"br"),e.TgZ(14,"button",9),e.NdJ("click",function(){return a.moveLeft()}),e.TgZ(15,"mat-icon"),e._uU(16,"chevron_left"),e.qZA(),e._uU(17," Remove "),e.qZA()(),e.TgZ(18,"div",10)(19,"table",2),e.ynx(20,3),e.YNc(21,ft,2,0,"th",4),e.YNc(22,yt,4,3,"td",5),e.BQk(),e.YNc(23,Ct,1,0,"tr",6),e.YNc(24,xt,1,2,"tr",7),e.qZA()()(),e.TgZ(25,"div",11)(26,"button",12),e.NdJ("click",function(){return a.moveDown()}),e.TgZ(27,"mat-icon"),e._uU(28,"keyboard_arrow_down"),e.qZA()(),e.TgZ(29,"button",12),e.NdJ("click",function(){return a.moveUp()}),e.TgZ(30,"mat-icon"),e._uU(31,"keyboard_arrow_up"),e.qZA()()()),2&n&&(e.xp6(2),e.Q6J("dataSource",a.availableDataSource),e.xp6(4),e.Q6J("cdkHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("cdkRowDefColumns",a.displayedColumns),e.xp6(2),e.Q6J("disabled",!a.isAnyLeftSelected()),e.xp6(5),e.Q6J("disabled",!a.isAnyRightSelected()),e.xp6(5),e.Q6J("dataSource",a.selectedDataSource),e.xp6(4),e.Q6J("cdkHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("cdkRowDefColumns",a.displayedColumns),e.xp6(2),e.Q6J("disabled",!a.isAnyRightSelected()),e.xp6(3),e.Q6J("disabled",!a.isAnyRightSelected()))},dependencies:[g.O5,y.Sq,y.O_,y.D5,y.fo,y.s$,B.Hw,u.BZ,u.ge,u.ev,u.XQ,u.Gk],styles:[".bands-from[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]{border:1px solid #d3d3d3;flex:1 1 auto}.bands-from[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.bands-from[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{cursor:pointer}.bands-from[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-left:none;border-right:none}.bands-from[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none}.bands-from[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type{border-bottom:none}"],changeDetection:0})}return i})();const me=function(i){return{c:i}};let de=(()=>{class i{constructor(t,n,a,r,c){this.yamcs=n,this.formBuilder=a,this.messageService=r,this.router=c,t.setTitle("Create a View"),this.form=this.formBuilder.group({name:["",[o.kI.required]],bands:[[],[]]})}onConfirm(){const t=this.form.value;this.yamcs.yamcsClient.createTimelineView(this.yamcs.instance,{name:t.name,bands:t.bands.map(n=>n.id)}).then(n=>this.router.navigateByUrl(`/timeline/chart?c=${this.yamcs.context}&view=${n.id}`)).catch(n=>this.messageService.showError(n))}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(C.Dx),e.Y36(l.C8),e.Y36(o.QS),e.Y36(l.ez),e.Y36(f.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:27,vars:8,consts:[["mat-icon-button","","routerLink","..","color","primary",3,"queryParams"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name"],[1,"section-divider"],["formControlName","bands"],[1,"action-bar"],["routerLink","..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(n,a){1&n&&(e.TgZ(0,"app-instance-page")(1,"app-instance-toolbar")(2,"a",0)(3,"mat-icon"),e._uU(4,"arrow_back"),e.qZA()(),e._uU(5," Create view "),e.qZA(),e.TgZ(6,"div",1)(7,"form",2)(8,"label"),e._uU(9," Name "),e.TgZ(10,"span",3),e._uU(11,"(required)"),e.qZA(),e._UZ(12,"br")(13,"input",4),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"div",5),e._UZ(16,"mat-divider"),e.qZA(),e.TgZ(17,"h4"),e._uU(18,"Bands"),e.qZA(),e._UZ(19,"app-band-multi-select",6),e.qZA(),e.TgZ(20,"p"),e._uU(21,"\xa0"),e.qZA(),e.TgZ(22,"div",7)(23,"button",8),e._uU(24,"Cancel"),e.qZA(),e.TgZ(25,"button",9),e.NdJ("click",function(){return a.onConfirm()}),e._uU(26,"CREATE"),e.qZA()()()()),2&n&&(e.xp6(2),e.Q6J("queryParams",e.VKq(4,me,a.yamcs.context)),e.xp6(5),e.Q6J("formGroup",a.form),e.xp6(16),e.Q6J("queryParams",e.VKq(6,me,a.yamcs.context)),e.xp6(2),e.Q6J("disabled",!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,f.rH,U.o6,B.Hw,A.d,x.a,w.k,G],encapsulation:2,changeDetection:0})}return i})();function wt(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"form",1)(2,"label"),e._uU(3," Label "),e.TgZ(4,"span",2),e._uU(5,"(required)"),e.qZA(),e._UZ(6,"br")(7,"input",3),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"label"),e._uU(10," Description "),e.TgZ(11,"span",2),e._uU(12,"(optional)"),e.qZA(),e._UZ(13,"br")(14,"textarea",4),e.qZA(),e.ynx(15,5),e._UZ(16,"br"),e.TgZ(17,"label"),e._uU(18," Timezone"),e._UZ(19,"br")(20,"ya-timezone-select",6),e.qZA(),e.BQk(),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form)}}let ue=(()=>{class i{constructor(t,n){this.yamcs=t,this.changeDetection=n,this.formConfigured$=new v.X(!1)}ngAfterViewInit(){const t={timezone:[this.band.properties.timezone,[o.kI.required]]},n=this.form.get("properties");for(const a in t){const r=t[a];n.addControl(a,new o.p4(r[0],r[1]))}this.formConfigured$.next(!0),this.changeDetection.detectChanges()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(l.C8),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-time-ruler"]],inputs:{form:"form",band:"band"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"],["formGroupName","properties"],["formControlName","timezone"]],template:function(n,a){1&n&&(e.YNc(0,wt,21,1,"ng-container",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,a.formConfigured$))},dependencies:[g.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,o.x0,l.Q1,g.Ov],encapsulation:2,changeDetection:0})}return i})();function vt(i,s){if(1&i&&e._UZ(0,"app-edit-item-band",7),2&i){const t=e.oxw().ngIf,n=e.oxw();e.Q6J("form",n.form)("band",t)}}function At(i,s){if(1&i&&e._UZ(0,"app-edit-spacer",7),2&i){const t=e.oxw().ngIf,n=e.oxw();e.Q6J("form",n.form)("band",t)}}function Ut(i,s){if(1&i&&e._UZ(0,"app-edit-time-ruler",7),2&i){const t=e.oxw().ngIf,n=e.oxw();e.Q6J("form",n.form)("band",t)}}function qt(i,s){if(1&i&&e._UZ(0,"app-edit-command-band",7),2&i){const t=e.oxw().ngIf,n=e.oxw();e.Q6J("form",n.form)("band",t)}}function kt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),e._uU(2,"Edit band"),e.qZA(),e.TgZ(3,"div",1)(4,"form",2),e.YNc(5,vt,1,2,"app-edit-item-band",3),e.YNc(6,At,1,2,"app-edit-spacer",3),e.YNc(7,Ut,1,2,"app-edit-time-ruler",3),e.YNc(8,qt,1,2,"app-edit-command-band",3),e.qZA(),e.TgZ(9,"p"),e._uU(10,"\xa0"),e.qZA(),e.TgZ(11,"div",4)(12,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.location.back())}),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.doOnConfirm())}),e.ALo(15,"async"),e._uU(16,"SAVE CHANGES"),e.qZA()()()()}if(2&i){const t=s.ngIf,n=e.oxw();e.xp6(4),e.Q6J("formGroup",n.form),e.xp6(1),e.Q6J("ngIf","ITEM_BAND"===t.type),e.xp6(1),e.Q6J("ngIf","SPACER"===t.type),e.xp6(1),e.Q6J("ngIf","TIME_RULER"===t.type),e.xp6(1),e.Q6J("ngIf","COMMAND_BAND"===t.type),e.xp6(6),e.Q6J("disabled",!e.lcZ(15,6,n.dirty$)||!n.form.valid)}}let pe=(()=>{class i{constructor(t,n,a,r,c,m,d){this.yamcs=n,this.messageService=a,this.route=r,this.router=c,this.location=d,this.dirty$=new v.X(!1),t.setTitle("Edit Band");const p=r.snapshot.paramMap.get("band");this.band$=n.yamcsClient.getTimelineBand(n.instance,p),this.band$.then(Z=>{this.form=m.group({name:[Z.name,[o.kI.required]],description:[Z.description||""],tags:[Z.tags||[]],properties:m.group({})}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)})}).catch(Z=>this.messageService.showError(Z))}doOnConfirm(){const t=this.route.snapshot.paramMap.get("band"),n=this.form.value;this.yamcs.yamcsClient.updateTimelineBand(this.yamcs.instance,t,{name:n.name,description:n.description,shared:!0,tags:n.tags,properties:n.properties}).then(()=>this.router.navigateByUrl(`/timeline/bands?c=${this.yamcs.context}`)).catch(r=>this.messageService.showError(r))}ngOnDestroy(){this.formSubscription?.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(C.Dx),e.Y36(l.C8),e.Y36(l.ez),e.Y36(f.gz),e.Y36(f.F0),e.Y36(o.QS),e.Y36(g.Ye))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[3,"form","band",4,"ngIf"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"disabled","click"],[3,"form","band"]],template:function(n,a){1&n&&(e.YNc(0,kt,17,8,"app-instance-page",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,a.band$))},dependencies:[g.O5,o._Y,o.JL,o.sg,x.a,w.k,H,ie,oe,ue,g.Ov],encapsulation:2,changeDetection:0})}return i})();function St(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),e._uU(2,"Edit item"),e.qZA(),e.TgZ(3,"div",1)(4,"form",2)(5,"div",3),e._uU(6," Name "),e.TgZ(7,"span",4),e._uU(8,"(required)"),e.qZA(),e._UZ(9,"br")(10,"input",5),e.qZA(),e._UZ(11,"br"),e.TgZ(12,"div",3),e._uU(13," Tags "),e.TgZ(14,"ya-help",6),e._uU(15," Tags allow to categorise items per band. Bands only show items for which one of the tags is matching. "),e.qZA(),e._UZ(16,"br")(17,"ya-tag-select",7),e.qZA(),e._UZ(18,"br"),e.TgZ(19,"div",3),e._uU(20," Duration "),e._UZ(21,"ya-duration-input",8),e.qZA(),e._UZ(22,"br"),e.TgZ(23,"div",9),e._UZ(24,"mat-divider"),e.qZA(),e._UZ(25,"br"),e.TgZ(26,"div",3),e._uU(27," Start"),e._UZ(28,"br")(29,"ya-date-time-input",10),e.qZA(),e._UZ(30,"br"),e.TgZ(31,"div",9),e._UZ(32,"mat-divider"),e.qZA(),e.TgZ(33,"h4"),e._uU(34,"Styles"),e.qZA(),e._UZ(35,"app-item-styles",11)(36,"br"),e.qZA(),e.TgZ(37,"p"),e._uU(38,"\xa0"),e.qZA(),e.TgZ(39,"div",12)(40,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.location.back())}),e._uU(41,"Cancel"),e.qZA(),e.TgZ(42,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.doOnConfirm())}),e.ALo(43,"async"),e._uU(44,"SAVE CHANGES"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(31),e.Q6J("form",t.form),e.xp6(7),e.Q6J("disabled",!e.lcZ(43,3,t.dirty$)||!t.form.valid)}}const O="_overrideBand";let _e=(()=>{class i{constructor(t,n,a,r,c,m,d){this.yamcs=n,this.messageService=a,this.route=r,this.router=c,this.location=d,this.resolutionOptions=[{id:"seconds",label:"seconds"},{id:"minutes",label:"minutes"},{id:"hours",label:"hours"}],this.startConstraintOptions=[{id:"START_ON",label:"Start on"}],this.dirty$=new v.X(!1),t.setTitle("Edit Item");const p=r.snapshot.paramMap.get("item");this.item$=n.yamcsClient.getTimelineItem(n.instance,p),this.item$.then(Z=>{const q=Z.properties||{},P=N(R,q);this.form=m.group({name:[Z.name,[o.kI.required]],start:[Z.start,o.kI.required],duration:[Z.duration,o.kI.required],tags:[Z.tags||[],[]],properties:m.group({backgroundColor:[P.backgroundColor,[]],backgroundColor_overrideBand:"backgroundColor"in q,borderColor:[P.borderColor,[]],borderColor_overrideBand:"borderColor"in q,borderWidth:[P.borderWidth,[]],borderWidth_overrideBand:"borderWidth"in q,cornerRadius:[P.cornerRadius,[]],cornerRadius_overrideBand:"cornerRadius"in q,marginLeft:[P.marginLeft,[]],marginLeft_overrideBand:"marginLeft"in q,textColor:[P.textColor,[]],textColor_overrideBand:"textColor"in q,textSize:[P.textSize,[]],textSize_overrideBand:"textSize"in q})}),this.updateDisabledState(),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.updateDisabledState(),this.dirty$.next(!0)})}).catch(Z=>this.messageService.showError(Z))}updateDisabledState(){const{controls:t}=this.propertiesGroup;for(const n in t)if(n.endsWith(O)){const a=t[n.substring(0,n.length-13)];t[n].value?a.enable({onlySelf:!0}):a.disable({onlySelf:!0})}}get propertiesGroup(){return this.form.controls.properties}doOnConfirm(){const t=this.route.snapshot.paramMap.get("item"),n=this.form.value,a={name:n.name,start:l.P6.toISOString(n.start),duration:n.duration,tags:n.tags,properties:{}};a.tags?.length||(a.clearTags=!0);const{controls:r}=this.propertiesGroup;for(const c in r)if(c.endsWith(O)&&r[c].value){const m=c.substring(0,c.length-13);a.properties[m]=r[m].value}a.properties?.length||(a.clearProperties=!0),this.yamcs.yamcsClient.updateTimelineItem(this.yamcs.instance,t,a).then(()=>this.router.navigateByUrl(`/timeline/items?c=${this.yamcs.context}`)).catch(c=>this.messageService.showError(c))}ngOnDestroy(){this.formSubscription?.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(C.Dx),e.Y36(l.C8),e.Y36(l.ez),e.Y36(f.gz),e.Y36(f.F0),e.Y36(o.QS),e.Y36(g.Ye))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"label"],[1,"hint"],["type","text","formControlName","name"],["dialogTitle","Tags"],["formControlName","tags"],["formControlName","duration"],[1,"section-divider"],["formControlName","start"],[3,"form"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(n,a){1&n&&(e.YNc(0,St,45,5,"app-instance-page",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,a.item$))},dependencies:[g.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,A.d,l.t,l.JD,l.IR,l.PX,x.a,w.k,L,g.Ov],encapsulation:2,changeDetection:0})}return i})();const ge=function(i){return{c:i}};let he=(()=>{class i{constructor(t,n,a,r,c,m,d){this.yamcs=n,this.messageService=a,this.route=r,this.router=c,this.location=m,this.dirty$=new v.X(!1),t.setTitle("Edit View");const p=r.snapshot.paramMap.get("view");this.form=d.group({name:[null,o.kI.required],bands:[null,[]]}),n.yamcsClient.getTimelineView(n.instance,p).then(Z=>{this.form.setValue({name:Z.name,bands:Z.bands||[]}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)})}).catch(Z=>this.messageService.showError(Z))}onConfirm(){const t=this.form.value,n={name:t.name,bands:t.bands.map(r=>r.id)},a=this.route.snapshot.paramMap.get("view");this.yamcs.yamcsClient.updateTimelineView(this.yamcs.instance,a,n).then(()=>this.router.navigateByUrl(`/timeline/views?c=${this.yamcs.context}`)).catch(r=>this.messageService.showError(r))}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(C.Dx),e.Y36(l.C8),e.Y36(l.ez),e.Y36(f.gz),e.Y36(f.F0),e.Y36(g.Ye),e.Y36(o.QS))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:28,vars:10,consts:[["mat-icon-button","","routerLink","..","color","primary",3,"queryParams"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name"],[1,"section-divider"],["formControlName","bands"],[1,"action-bar"],["routerLink","..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(n,a){1&n&&(e.TgZ(0,"app-instance-page")(1,"app-instance-toolbar")(2,"a",0)(3,"mat-icon"),e._uU(4,"arrow_back"),e.qZA()(),e._uU(5," Update view "),e.qZA(),e.TgZ(6,"div",1)(7,"form",2)(8,"label"),e._uU(9," Name "),e.TgZ(10,"span",3),e._uU(11,"(required)"),e.qZA(),e._UZ(12,"br")(13,"input",4),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"div",5),e._UZ(16,"mat-divider"),e.qZA(),e.TgZ(17,"h4"),e._uU(18,"Bands"),e.qZA(),e._UZ(19,"app-band-multi-select",6),e.qZA(),e.TgZ(20,"p"),e._uU(21,"\xa0"),e.qZA(),e.TgZ(22,"div",7)(23,"button",8),e._uU(24,"Cancel"),e.qZA(),e.TgZ(25,"button",9),e.NdJ("click",function(){return a.onConfirm()}),e.ALo(26,"async"),e._uU(27,"SAVE CHANGES"),e.qZA()()()()),2&n&&(e.xp6(2),e.Q6J("queryParams",e.VKq(6,ge,a.yamcs.context)),e.xp6(5),e.Q6J("formGroup",a.form),e.xp6(16),e.Q6J("queryParams",e.VKq(8,ge,a.yamcs.context)),e.xp6(2),e.Q6J("disabled",!e.lcZ(26,4,a.dirty$)||!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,f.rH,U.o6,B.Hw,A.d,x.a,w.k,G,g.Ov],encapsulation:2,changeDetection:0})}return i})();const V="_overrideBand";let fe=(()=>{class i{constructor(t,n,a,r,c){this.dialogRef=t,this.yamcs=a,this.messageService=r,this.data=c,this.startConstraintOptions=[{id:"START_ON",label:"Start on"}];const m=N(R,{});this.form=n.group({name:["",o.kI.required],start:[l.P6.toISOString(a.getMissionTime()),o.kI.required],duration:["",o.kI.required],tags:[[],[]],properties:n.group({backgroundColor:[m.backgroundColor,[]],backgroundColor_overrideBand:!1,borderColor:[m.borderColor,[]],borderColor_overrideBand:!1,borderWidth:[m.borderWidth,[]],borderWidth_overrideBand:!1,cornerRadius:[m.cornerRadius,[]],cornerRadius_overrideBand:!1,marginLeft:[m.marginLeft,[]],marginLeft_overrideBand:!1,textColor:[m.textColor,[]],textColor_overrideBand:!1,textSize:[m.textSize,[]],textSize_overrideBand:!1})}),this.updateDisabledState(),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.updateDisabledState()})}updateDisabledState(){const{controls:t}=this.propertiesGroup;for(const n in t)if(n.endsWith(V)){const a=t[n.substring(0,n.length-13)];t[n].value?a.enable({onlySelf:!0}):a.disable({onlySelf:!0})}}get propertiesGroup(){return this.form.controls.properties}save(){const t={type:this.data.type,name:this.form.value.name,start:l.P6.toISOString(this.form.value.start),duration:this.form.value.duration,tags:this.form.value.tags,properties:{}},{controls:n}=this.propertiesGroup;for(const a in n)if(a.endsWith(V)&&n[a].value){const r=a.substring(0,a.length-13);t.properties[r]=n[r].value}this.yamcs.yamcsClient.createTimelineItem(this.yamcs.instance,t).then(a=>this.dialogRef.close(a)).catch(a=>this.messageService.showError(a))}ngOnDestroy(){this.formSubscription?.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(h.so),e.Y36(o.QS),e.Y36(l.C8),e.Y36(l.ez),e.Y36(h.WI))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:37,vars:7,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"ya-form",3,"formGroup"],["animationDuration","0ms",1,"small-tabs",3,"mat-stretch-tabs"],["label","General"],[2,"margin-top","1em"],["cdkFocusRegionstart","","type","text","formControlName","name",2,"width","100%"],[1,"half-break"],["dialogTitle","Tags"],["formControlName","tags"],["formControlName","duration"],[1,"section-divider","half-break"],["formControlName","start"],["label","Styles"],[3,"form"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"]],template:function(n,a){1&n&&(e.TgZ(0,"h2",0),e._uU(1),e.ALo(2,"lowercase"),e.qZA(),e.TgZ(3,"mat-dialog-content",1)(4,"form",2)(5,"mat-tab-group",3)(6,"mat-tab",4)(7,"div",5)(8,"label"),e._uU(9," Name"),e._UZ(10,"br")(11,"input",6),e.qZA(),e._UZ(12,"hr",7),e.TgZ(13,"label"),e._uU(14," Tags "),e.TgZ(15,"ya-help",8),e._uU(16," Tags allow to categorise items per band. Bands only show items for which one of the tags is matching. "),e.qZA(),e._UZ(17,"br")(18,"ya-tag-select",9),e.qZA(),e._UZ(19,"hr",7),e.TgZ(20,"label"),e._uU(21," Duration "),e._UZ(22,"ya-duration-input",10),e.qZA(),e.TgZ(23,"div",11),e._UZ(24,"mat-divider"),e.qZA(),e.TgZ(25,"label"),e._uU(26," Start"),e._UZ(27,"br")(28,"ya-date-time-input",12),e.qZA()()(),e.TgZ(29,"mat-tab",13)(30,"div",5),e._UZ(31,"app-item-styles",14),e.qZA()()()()(),e.TgZ(32,"mat-dialog-actions",15)(33,"button",16),e._uU(34,"CANCEL"),e.qZA(),e.TgZ(35,"button",17),e.NdJ("click",function(){return a.save()}),e._uU(36,"SAVE"),e.qZA()()),2&n&&(e.xp6(1),e.hij("Add ",e.lcZ(2,5,a.data.type)," item"),e.xp6(3),e.Q6J("formGroup",a.form),e.xp6(1),e.Q6J("mat-stretch-tabs",!1),e.xp6(26),e.Q6J("form",a.form),e.xp6(4),e.Q6J("disabled",!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,h.ZT,h.uh,h.xY,h.H8,A.d,E.uX,E.SP,l.t,l.JD,l.IR,l.PX,L,g.i8],encapsulation:2,changeDetection:0})}return i})();var Y=_(7988),be=_(2596);function Bt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"th",25)(1,"input",26),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(a?r.masterToggle():null)}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())}}function Dt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"td",27)(1,"input",28),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const c=e.CHM(t).$implicit,m=e.oxw(2);return e.KtG(a?m.selection.toggle(c):null)}),e.qZA()()}if(2&i){const t=s.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.selection.isSelected(t))}}function Pt(i,s){1&i&&(e.TgZ(0,"th",29),e._uU(1,"Label"),e.qZA())}function It(i,s){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.name)}}function Nt(i,s){1&i&&(e.TgZ(0,"i"),e._uU(1,"(none)"),e.qZA())}const Jt=function(i){return{c:i}};function Yt(i,s){if(1&i&&(e.TgZ(0,"td",30)(1,"a",31),e.YNc(2,It,2,1,"ng-container",32),e.YNc(3,Nt,2,0,"i",32),e.qZA()()),2&i){const t=s.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("routerLink",t.id)("queryParams",e.VKq(4,Jt,n.yamcs.context)),e.xp6(1),e.Q6J("ngIf",t.name),e.xp6(1),e.Q6J("ngIf",!t.name)}}function Qt(i,s){1&i&&(e.TgZ(0,"th",29),e._uU(1,"Tags"),e.qZA())}function Mt(i,s){if(1&i&&(e.TgZ(0,"ya-label"),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Oqu(t)}}function Et(i,s){1&i&&(e.ynx(0),e._uU(1,"-"),e.BQk())}const Ot=function(){return[]};function Vt(i,s){if(1&i&&(e.TgZ(0,"td",30),e.YNc(1,Mt,2,1,"ya-label",33),e.YNc(2,Et,2,0,"ng-container",32),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",t.tags||e.DdM(2,Ot)),e.xp6(1),e.Q6J("ngIf",!t.tags)}}function Lt(i,s){1&i&&(e.TgZ(0,"th",29),e._uU(1,"Start"),e.qZA())}function Rt(i,s){if(1&i&&(e.TgZ(0,"td",30),e._uU(1),e.ALo(2,"datetime"),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.start)||"-"," ")}}function Ft(i,s){1&i&&(e.TgZ(0,"th",29),e._uU(1,"Duration"),e.qZA())}function zt(i,s){if(1&i&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.hij(" ",t.duration," ")}}function Gt(i,s){1&i&&(e.TgZ(0,"th",29),e._uU(1,"Type"),e.qZA())}function $t(i,s){if(1&i&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.hij(" ",t.type," ")}}function Ht(i,s){1&i&&e._UZ(0,"th",34)}function Xt(i,s){1&i&&e._UZ(0,"td",30)}function jt(i,s){1&i&&e._UZ(0,"tr",35)}function Kt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr",36),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.toggleOne(r))}),e.qZA()}if(2&i){const t=s.$implicit,n=e.oxw(2);e.ekj("selected",n.selection.isSelected(t))}}function Wt(i,s){if(1&i&&(e.TgZ(0,"table",8),e.ynx(1,9),e.YNc(2,Bt,2,1,"th",10),e.YNc(3,Dt,2,1,"td",11),e.BQk(),e.ynx(4,12),e.YNc(5,Pt,2,0,"th",13),e.YNc(6,Yt,4,6,"td",14),e.BQk(),e.ynx(7,15),e.YNc(8,Qt,2,0,"th",16),e.YNc(9,Vt,3,3,"td",17),e.BQk(),e.ynx(10,18),e.YNc(11,Lt,2,0,"th",13),e.YNc(12,Rt,3,3,"td",14),e.BQk(),e.ynx(13,19),e.YNc(14,Ft,2,0,"th",13),e.YNc(15,zt,2,1,"td",14),e.BQk(),e.ynx(16,20),e.YNc(17,Gt,2,0,"th",13),e.YNc(18,$t,2,1,"td",14),e.BQk(),e.ynx(19,21),e.YNc(20,Ht,1,0,"th",22),e.YNc(21,Xt,1,0,"td",14),e.BQk(),e.YNc(22,jt,1,0,"tr",23),e.YNc(23,Kt,1,2,"tr",24),e.qZA()),2&i){const t=e.oxw();e.Q6J("dataSource",t.dataSource)("trackBy",t.tableTrackerFn),e.xp6(22),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}let Ze=(()=>{class i{constructor(t,n,a,r){this.yamcs=t,this.messageService=a,this.dialog=r,this.displayedColumns=["select","name","tags","start","duration","type","actions"],this.tableTrackerFn=(c,m)=>m.id,this.dataSource=new u.by,this.selection=new z.O(this.tableTrackerFn,!0,[]),n.setTitle("Timeline Items"),this.refreshData()}ngAfterViewInit(){this.dataSource.sort=this.sort}isAllSelected(){const n=this.dataSource.filteredData.length;return this.selection.selected.length===n&&n>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(t=>this.selection.select(t))}toggleOne(t){(!this.selection.isSelected(t)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(t)}deleteSelectedItems(){if(confirm("Are you sure you want to delete the selected items?"))for(const t of this.selection.selected)this.deleteItem(t.id,!1)}deleteItem(t,n=!0){(!n||confirm("Are you sure you want to delete the selected item?"))&&this.yamcs.yamcsClient.deleteTimelineItem(this.yamcs.instance,t).then(()=>this.refreshData()).catch(a=>this.messageService.showError(a))}isGroupDeleteEnabled(){return!this.selection.isEmpty()}openCreateItemDialog(t){this.dialog.open(fe,{width:"600px",panelClass:"dialog-force-no-scrollbar",data:{type:t}}).afterClosed().subscribe(()=>this.refreshData())}refreshData(){this.yamcs.yamcsClient.getTimelineItems(this.yamcs.instance,{source:"rdb"}).then(t=>{this.selection.matchNewValues(t.items||[]),this.dataSource.data=t.items||[]}).catch(t=>this.messageService.showError(t))}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(l.C8),e.Y36(C.Dx),e.Y36(l.ez),e.Y36(h.uw))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(n,a){if(1&n&&e.Gf(S.YE,5),2&n){let r;e.iGM(r=e.CRH())&&(a.sort=r.first)}},decls:19,vars:4,consts:[["mat-button","","color","primary",3,"matMenuTriggerFor"],[1,"ya-menu",3,"overlapTrigger"],["itemMenu","matMenu"],["mat-menu-item","","matTooltipShowDelay","1000","matTooltip","Events are items that simply appear on the timeline",3,"click"],["mat-menu-item","","matTooltipShowDelay","1000","matTooltip","Activities are like events, but in addition have an execution status",3,"click"],["mat-button","","color","primary",3,"disabled","click"],[1,"panel-content"],["mat-table","","class","ya-data-table expand","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",3,"dataSource","trackBy",4,"ngIf"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["cdkColumnDef","tags"],["mat-header-cell","","mat-sort-header","",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["matColumnDef","start"],["matColumnDef","duration"],["matColumnDef","type"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"checked","change"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"checked","click","change"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink","queryParams"],[4,"ngIf"],[4,"ngFor","ngForOf"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(n,a){if(1&n&&(e.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),e._uU(2," Items \xa0\xa0\xa0 "),e.TgZ(3,"button",0)(4,"mat-icon"),e._uU(5,"add_circle_outline"),e.qZA(),e._uU(6," Create item "),e.qZA(),e.TgZ(7,"mat-menu",1,2)(9,"button",3),e.NdJ("click",function(){return a.openCreateItemDialog("EVENT")}),e._uU(10," Event item "),e.qZA(),e.TgZ(11,"button",4),e.NdJ("click",function(){return a.openCreateItemDialog("ACTIVITY")}),e._uU(12," Activity item "),e.qZA()(),e.TgZ(13,"button",5),e.NdJ("click",function(){return a.deleteSelectedItems()}),e.TgZ(14,"mat-icon"),e._uU(15,"close"),e.qZA(),e._uU(16," Delete "),e.qZA()(),e.TgZ(17,"div",6),e.YNc(18,Wt,24,4,"table",7),e.qZA()()),2&n){const r=e.MAs(8);e.xp6(3),e.Q6J("matMenuTriggerFor",r),e.xp6(4),e.Q6J("overlapTrigger",!1),e.xp6(6),e.Q6J("disabled",!a.isGroupDeleteEnabled()),e.xp6(5),e.Q6J("ngIf",a.dataSource)}},dependencies:[g.sg,g.O5,f.rH,y.O_,y.D5,y.fo,U.lW,B.Hw,Y.VK,Y.OP,Y.p6,S.YE,S.nU,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,be.gM,l._n,x.a,w.k,l.id],encapsulation:2,changeDetection:0})}return i})();var en=_(3620);class Te extends D.rK{constructor(s,t){super(s.timeline),this.label=t.name,this.marginBottom=7,this.marginTop=7,this.lineSpacing=2,this.itemHeight=20,this.data={band:t}}}let tn=(()=>{class i{constructor(t,n,a,r,c){this.dialogRef=t,this.yamcs=n,this.messageService=r,this.data=c,this.dirty$=new v.X(!1);const m=c.view;this.form=a.group({name:[m.name,o.kI.required],bands:[m.bands||[],[]]}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)})}onConfirm(){const t=this.form.value,n={name:t.name,bands:t.bands.map(r=>r.id)};this.yamcs.yamcsClient.updateTimelineView(this.yamcs.instance,this.data.view.id,n).then(r=>this.dialogRef.close(r)).catch(r=>this.messageService.showError(r))}ngOnDestroy(){this.formSubscription&&this.formSubscription.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(h.so),e.Y36(l.C8),e.Y36(o.QS),e.Y36(l.ez),e.Y36(h.WI))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-view-dialog"]],decls:25,vars:4,consts:[[1,"mat-typography","ya-form",2,"max-width","600px"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name"],[1,"section-divider"],["formControlName","bands"],[1,"footer","mat-typography"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"disabled","click"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0)(1,"form",1)(2,"h2"),e._uU(3,"Edit View"),e.qZA(),e.TgZ(4,"label"),e._uU(5," Name "),e.TgZ(6,"span",2),e._uU(7,"(required)"),e.qZA(),e._UZ(8,"br")(9,"input",3),e.qZA(),e._UZ(10,"br"),e.TgZ(11,"div",4),e._UZ(12,"mat-divider"),e.qZA(),e.TgZ(13,"h4"),e._uU(14,"Bands"),e.qZA(),e._UZ(15,"app-band-multi-select",5),e.qZA()(),e.TgZ(16,"div",6)(17,"mat-toolbar")(18,"mat-toolbar-row")(19,"button",7),e._uU(20,"CANCEL"),e.qZA(),e._uU(21,"\xa0\xa0 "),e.TgZ(22,"button",8),e.NdJ("click",function(){return a.onConfirm()}),e.ALo(23,"async"),e._uU(24,"SAVE CHANGES"),e.qZA()()()()),2&n&&(e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(21),e.Q6J("disabled",!e.lcZ(23,2,a.dirty$)||!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,h.ZT,A.d,J.Ye,J.rD,G,g.Ov],styles:[".mat-mdc-dialog-container{border-radius:0;position:relative}.footer[_ngcontent-%COMP%]{position:absolute;bottom:0;height:64px;left:0;right:0;border-top:1px solid #d3d3d3}"],changeDetection:0})}return i})(),nn=(()=>{class i{constructor(t,n){this.dialogRef=t,this.data=n,this.date=new o.p4(null,[o.kI.required]),this.data.date&&this.date.setValue(l.P6.toISOString(this.data.date))}select(){const t=l.P6.toDate(this.date.value);this.dialogRef.close({date:t})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(h.so),e.Y36(h.WI))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:11,vars:1,consts:[["mat-dialog-title",""],[1,"ya-form","mat-typography"],[3,"formControl"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"click"]],template:function(n,a){1&n&&(e.TgZ(0,"h2",0),e._uU(1,"Jump to date"),e.qZA(),e.TgZ(2,"mat-dialog-content",1)(3,"label"),e._uU(4," Date "),e._UZ(5,"ya-date-time-input",2),e.qZA()(),e.TgZ(6,"mat-dialog-actions",3)(7,"button",4),e._uU(8,"CANCEL"),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return a.select()}),e._uU(10,"OK"),e.qZA()()),2&n&&(e.xp6(5),e.Q6J("formControl",a.date))},dependencies:[o.JJ,o.oH,h.ZT,h.uh,h.xY,h.H8,l.t],encapsulation:2,changeDetection:0})}return i})();class an extends D.nY{constructor(s,t){super(s.timeline),this.contentHeight=20,this.label=t.name,this.timezone=t.properties.timezone,this.data={band:t}}}var on=_(5394);const rn=["container"];function sn(i,s){if(1&i&&(e.TgZ(0,"button",13),e._uU(1),e.ALo(2,"async"),e.qZA()),2&i){e.oxw();const t=e.MAs(4),n=e.oxw();let a;e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.hij(" ",(null==(a=e.lcZ(2,2,n.view$))?null:a.name)||"select view"," \u25be ")}}function cn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.switchView(r))}),e._uU(1),e.qZA()}if(2&i){const t=s.$implicit;e.xp6(1),e.Oqu(t.name)}}const ye=function(i){return{c:i}};function ln(i,s){if(1&i&&(e.ynx(0),e.YNc(1,sn,3,4,"button",8),e.ALo(2,"async"),e.TgZ(3,"mat-menu",9,10),e.YNc(5,cn,2,1,"button",11),e._UZ(6,"mat-divider"),e.TgZ(7,"a",12)(8,"mat-icon"),e._uU(9,"add_circle_outline"),e.qZA(),e._uU(10," Create view "),e.qZA()(),e.BQk()),2&i){const t=s.ngIf,n=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,n.view$)&&n.mayControlTimeline()),e.xp6(4),e.Q6J("ngForOf",t),e.xp6(2),e.Q6J("queryParams",e.VKq(5,ye,n.yamcs.context))}}function mn(i,s){if(1&i&&(e.TgZ(0,"a",22)(1,"mat-icon"),e._uU(2,"add_circle_outline"),e.qZA(),e._uU(3," Create view "),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("queryParams",e.VKq(1,ye,t.yamcs.context))}}function dn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){const r=e.CHM(t).ngIf,c=e.oxw(2);return e.KtG(c.openEditViewDialog(r))}),e.TgZ(1,"mat-icon"),e._uU(2,"settings"),e.qZA(),e._uU(3," Edit view "),e.qZA()}}function un(i,s){if(1&i&&(e.TgZ(0,"button",24)(1,"mat-icon"),e._uU(2,"add_circle_outline"),e.qZA(),e._uU(3," Add item "),e.qZA()),2&i){e.oxw();const t=e.MAs(8);e.Q6J("matMenuTriggerFor",t)}}function pn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.saveSnapshot())}),e.TgZ(1,"mat-icon"),e._uU(2,"photo_camera"),e.qZA(),e._uU(3," Save snapshot "),e.qZA()}}function _n(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,mn,4,3,"a",15),e.ALo(2,"async"),e.YNc(3,dn,4,0,"button",16),e.ALo(4,"async"),e.YNc(5,un,4,1,"button",17),e.ALo(6,"async"),e.TgZ(7,"mat-menu",18,19)(9,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openCreateItemDialog("EVENT"))}),e._uU(10," Event item "),e.qZA(),e.TgZ(11,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openCreateItemDialog("ACTIVITY"))}),e._uU(12," Activity item "),e.qZA()(),e.YNc(13,pn,4,0,"button",16),e.ALo(14,"async"),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!e.lcZ(2,5,t.view$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,7,t.view$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,9,t.view$)),e.xp6(2),e.Q6J("overlapTrigger",!1),e.xp6(6),e.Q6J("ngIf",e.lcZ(14,11,t.view$))}}function gn(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"datetime"),e.ALo(3,"datetime"),e.qZA()),2&i){const t=s.ngIf;e.xp6(1),e.AsE(" ",e.xi3(2,2,null==t?null:t.start,!1)," \u2013 ",e.lcZ(3,5,null==t?null:t.stop)," ")}}let Ce=(()=>{class i{constructor(t,n,a,r,c,m,d,p){this.yamcs=n,this.dialog=a,this.messageService=r,this.route=c,this.router=m,this.authService=d,this.synchronizer=p,this.views$=new v.X([]),this.view$=new v.X(null),this.viewportRange$=new v.X(null),this.bands=[],this.subscriptions=[],t.setTitle("Timeline Chart")}ngAfterViewInit(){const t=this.route.snapshot.queryParamMap,n=t.get("view");if(this.yamcs.yamcsClient.getTimelineViews(this.yamcs.instance).then(r=>{this.views$.next(r.views||[]);let c=null;for(const m of r.views||[])if(n===m.id){c=m;break}!c&&!n&&(c=r.views?.length?r.views[0]:null),c&&this.switchView(c)}),this.timeline=new D.TY(this.container.nativeElement),this.timeline.addViewportChangeListener(r=>{this.viewportRange$.next({start:new Date(r.start),stop:new Date(r.stop)})}),this.viewportRange$.pipe((0,en.b)(400)).forEach(r=>{this.refreshData(),this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParamsHandling:"merge",queryParams:{start:r.start.toISOString(),stop:r.stop.toISOString()}})}),t.get("start")&&t.get("stop")){const r=l.P6.toDate(t.get("start")),c=l.P6.toDate(t.get("stop"));this.timeline.setViewRange(r.getTime(),c.getTime())}else{const r=this.yamcs.getMissionTime();r.setUTCHours(0,0,0,0);const c=new Date(r.getTime());c.setUTCDate(r.getUTCDate()+1),this.timeline.setViewRange(r.getTime(),c.getTime())}const a=new D._G(this.timeline);a.time=this.yamcs.getMissionTime().getTime(),this.subscriptions.push(this.synchronizer.sync(()=>{a.time=this.yamcs.getMissionTime().getTime()})),new D.zp(this.timeline),this.refreshData()}refreshView(){const t=this.view$.value;t&&this.yamcs.yamcsClient.getTimelineView(this.yamcs.instance,t.id).then(n=>this.switchView(n)).catch(n=>this.messageService.showError(n))}switchView(t){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{view:t?.id||null},queryParamsHandling:"merge"}),this.view$.next(t);for(const n of this.timeline.getBands())this.timeline.removeChild(n);if(t){for(const n of t.bands||[])if("TIME_RULER"===n.type){const a=new an(this,n);this.bands.push(a),this.installBandListeners(a)}else if("ITEM_BAND"===n.type){const a=new te(this,n,this.dialog);this.bands.push(a),this.installBandListeners(a)}else if("SPACER"===n.type){const a=new D.jL(this.timeline);this.bands.push(a)}else if("COMMAND_BAND"===n.type){const a=new Te(this,n);this.bands.push(a),this.installBandListeners(a)}this.refreshData()}}installBandListeners(t){t.addHeaderClickListener(n=>{this.dialog.open(X,{width:"70%",height:"100%",autoFocus:!1,position:{right:"0"},panelClass:"dialog-full-size",data:{band:n.band.data.band}}).afterClosed().subscribe(c=>{c&&this.refreshView()})})}refreshData(){const t=[],n=[],a=this.timeline.stop-this.timeline.start,r=this.timeline.start-a,c=this.timeline.stop+a;for(const m of this.bands)m instanceof te?(t.push(m),n.push(this.yamcs.yamcsClient.getTimelineItems(this.yamcs.instance,{source:"rdb",band:m.data.band.id,start:new Date(r).toISOString(),stop:new Date(c).toISOString()}))):m instanceof Te&&(t.push(m),n.push(this.yamcs.yamcsClient.getTimelineItems(this.yamcs.instance,{source:"commands",band:m.data.band.id,start:new Date(r).toISOString(),stop:new Date(c).toISOString()})));n.length&&Promise.all(n).then(m=>{for(let d=0;d<m.length;d++)this.populateItems(t[d],m[d].items||[])}).catch(m=>this.messageService.showError(m))}populateItems(t,n){const a=[];for(const r of n){const c=l.P6.toDate(r.start).getTime(),m=l.P6.convertProtoDurationToMillis(r.duration),d={start:c,stop:m?c+m:void 0,label:r.name,data:{item:r}},{properties:p}=r;if(p&&("backgroundColor"in p&&(d.background=p.backgroundColor),"borderColor"in p&&(d.borderColor=p.borderColor),"borderWidth"in p&&(d.borderWidth=Number(p.borderWidth)),"cornerRadius"in p&&(d.cornerRadius=Number(p.cornerRadius)),"marginLeft"in p&&(d.marginLeft=Number(p.marginLeft)),"textColor"in p&&(d.textColor=p.textColor),"textSize"in p&&(d.textSize=Number(p.textSize))),r.status)switch(r.status){case"COMPLETED":d.label=d.label?d.label+" \u2713":"\u2713";break;case"FAILED":d.label=d.label?d.label+" \u2717":"\u2717";break;case"PLANNED":case"IN_PROGRESS":d.label=d.label?d.label+" \u25f7":"\u25f7";break;case"ABORTED":d.label=d.label?d.label+" \u23f9":"\u23f9"}a.push(d)}t.items=a}openCreateItemDialog(t){this.dialog.open(fe,{width:"600px",panelClass:"dialog-force-no-scrollbar",data:{type:t}}).afterClosed().subscribe(()=>this.refreshData())}openEditViewDialog(t){this.dialog.open(tn,{width:"70%",height:"100%",panelClass:"dialog-full-size",autoFocus:!1,position:{right:"0"},data:{view:t}}).afterClosed().subscribe(n=>{n&&this.switchView(n)})}toggleMove(t){this.timeline.panBy(t),window.clearInterval(this.moveInterval),this.moveInterval=window.setInterval(()=>this.timeline.panBy(t),50)}untoggleMove(){window.clearInterval(this.moveInterval),this.moveInterval=void 0}pageLeft(){const{start:t,stop:n}=this.timeline,a=this.timeline.distanceBetween(t,n);this.timeline.panBy(-a)}pageRight(){const{start:t,stop:n}=this.timeline,a=this.timeline.distanceBetween(t,n);this.timeline.panBy(a)}zoomIn(){this.timeline.zoomIn()}zoomOut(){this.timeline.zoomOut()}jumpToToday(){const t=this.yamcs.getMissionTime();t.setUTCHours(0,0,0,0);const n=t.getTime();t.setUTCDate(t.getUTCDate()+1);const a=t.getTime();this.timeline.setViewRange(n,a)}jumpToNow(){const t=this.yamcs.getMissionTime();this.timeline.panTo(t.getTime())}openJumpToDialog(){this.dialog.open(nn,{width:"400px",data:{date:new Date(this.timeline.center)}}).afterClosed().subscribe(n=>{n&&this.timeline.panTo(n.date.getTime())})}saveSnapshot(){const t=document.createElement("a");try{t.href=this.timeline.toDataURL(),t.download="timeline_"+this.view$.value.name+"_export.png",document.body.appendChild(t),t.click()}finally{document.body.removeChild(t)}}mayControlTimeline(){return this.authService.getUser().hasSystemPrivilege("ControlTimeline")}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.timeline.disconnect()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(C.Dx),e.Y36(l.C8),e.Y36(h.uw),e.Y36(l.ez),e.Y36(f.gz),e.Y36(f.F0),e.Y36(on.e),e.Y36(l.jF))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(n,a){if(1&n&&e.Gf(rn,7),2&n){let r;e.iGM(r=e.CRH())&&(a.container=r.first)}},decls:43,vars:8,consts:[[3,"noscroll"],[4,"ngIf"],[2,"height","24px","margin","6px"],[1,"ya-button",3,"click"],[1,"ya-button",3,"mousedown","mouseup","mouseleave"],[1,"timeline-container"],["container",""],[1,"info"],["mat-button","",3,"matMenuTriggerFor",4,"ngIf"],[1,"ya-menu"],["viewMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","","routerLink","/timeline/views/create",3,"queryParams"],["mat-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-button","","color","primary","routerLink","/timeline/views/create",3,"queryParams",4,"ngIf"],["mat-button","","color","primary",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"matMenuTriggerFor",4,"ngIf"],[1,"ya-menu",3,"overlapTrigger"],["itemMenu","matMenu"],["mat-menu-item","","matTooltipShowDelay","1000","matTooltip","Events are items that simply appear on the timeline",3,"click"],["mat-menu-item","","matTooltipShowDelay","1000","matTooltip","Activities are like events, but in addition have an execution status",3,"click"],["mat-button","","color","primary","routerLink","/timeline/views/create",3,"queryParams"],["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"matMenuTriggerFor"]],template:function(n,a){1&n&&(e.TgZ(0,"app-instance-page",0)(1,"app-instance-toolbar"),e._uU(2," Timeline Chart \xa0\xa0\xa0 "),e.YNc(3,ln,11,7,"ng-container",1),e.ALo(4,"async"),e.YNc(5,_n,15,13,"ng-container",1),e.qZA(),e.TgZ(6,"div",2)(7,"button",3),e.NdJ("click",function(){return a.pageLeft()}),e.TgZ(8,"mat-icon"),e._uU(9,"west"),e.qZA()(),e.TgZ(10,"button",4),e.NdJ("mousedown",function(){return a.toggleMove(-50)})("mouseup",function(){return a.untoggleMove()})("mouseleave",function(){return a.untoggleMove()}),e.TgZ(11,"mat-icon"),e._uU(12,"chevron_left"),e.qZA()(),e.TgZ(13,"button",4),e.NdJ("mousedown",function(){return a.toggleMove(50)})("mouseup",function(){return a.untoggleMove()})("mouseleave",function(){return a.untoggleMove()}),e.TgZ(14,"mat-icon"),e._uU(15,"chevron_right"),e.qZA()(),e.TgZ(16,"button",3),e.NdJ("click",function(){return a.pageRight()}),e.TgZ(17,"mat-icon"),e._uU(18,"east"),e.qZA()(),e._uU(19," \xa0 "),e.TgZ(20,"button",3),e.NdJ("click",function(){return a.jumpToToday()}),e.TgZ(21,"mat-icon"),e._uU(22,"today"),e.qZA(),e._uU(23," Today "),e.qZA(),e.TgZ(24,"button",3),e.NdJ("click",function(){return a.jumpToNow()}),e.TgZ(25,"mat-icon"),e._uU(26,"my_location"),e.qZA()(),e.TgZ(27,"button",3),e.NdJ("click",function(){return a.openJumpToDialog()}),e.TgZ(28,"mat-icon"),e._uU(29,"directions"),e.qZA(),e._uU(30," Jump to... "),e.qZA(),e._uU(31," \xa0 "),e.TgZ(32,"button",3),e.NdJ("click",function(){return a.zoomIn()}),e.TgZ(33,"mat-icon"),e._uU(34,"add"),e.qZA()(),e.TgZ(35,"button",3),e.NdJ("click",function(){return a.zoomOut()}),e.TgZ(36,"mat-icon"),e._uU(37,"remove"),e.qZA()()(),e._UZ(38,"div",5,6),e.TgZ(40,"div",7),e.YNc(41,gn,4,7,"span",1),e.ALo(42,"async"),e.qZA()()),2&n&&(e.Q6J("noscroll",!0),e.xp6(3),e.Q6J("ngIf",e.lcZ(4,4,a.views$)),e.xp6(2),e.Q6J("ngIf",a.mayControlTimeline()),e.xp6(36),e.Q6J("ngIf",e.lcZ(42,6,a.viewportRange$)))},dependencies:[g.sg,g.O5,f.rH,U.zs,U.lW,B.Hw,A.d,Y.VK,Y.OP,Y.p6,be.gM,x.a,w.k,g.Ov,l.id],styles:[".timeline-container[_ngcontent-%COMP%]{line-height:0;border-top:1px solid #d1d5da;position:absolute;inset:36px 0 0}.info[_ngcontent-%COMP%]{position:absolute;bottom:35px;right:0;padding:0 16px;opacity:.75;font-size:small}"],changeDetection:0})}return i})();function hn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"th",17)(1,"input",18),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(a?r.masterToggle():null)}),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())}}function fn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"td",19)(1,"input",20),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){const c=e.CHM(t).$implicit,m=e.oxw(2);return e.KtG(a?m.selection.toggle(c):null)}),e.qZA()()}if(2&i){const t=s.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("checked",n.selection.isSelected(t))}}function bn(i,s){1&i&&(e.TgZ(0,"th",21),e._uU(1,"Label"),e.qZA())}const xe=function(i){return{c:i}};function Zn(i,s){if(1&i&&(e.TgZ(0,"td",22)(1,"a",23),e._uU(2),e.qZA()()),2&i){const t=s.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("routerLink",t.id)("queryParams",e.VKq(3,xe,n.yamcs.context)),e.xp6(1),e.hij(" ",t.name," ")}}function Tn(i,s){1&i&&(e.TgZ(0,"th",24),e._uU(1,"Description"),e.qZA())}function yn(i,s){if(1&i&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.hij(" ",t.description||"-"," ")}}function Cn(i,s){1&i&&e._UZ(0,"th",25)}function xn(i,s){1&i&&e._UZ(0,"td",22)}function wn(i,s){1&i&&e._UZ(0,"tr",26)}function vn(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr",27),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.toggleOne(r))}),e.qZA()}if(2&i){const t=s.$implicit,n=e.oxw(2);e.ekj("selected",n.selection.isSelected(t))}}function An(i,s){if(1&i&&(e.TgZ(0,"table",4),e.ynx(1,5),e.YNc(2,hn,2,1,"th",6),e.YNc(3,fn,2,1,"td",7),e.BQk(),e.ynx(4,8),e.YNc(5,bn,2,0,"th",9),e.YNc(6,Zn,3,5,"td",10),e.BQk(),e.ynx(7,11),e.YNc(8,Tn,2,0,"th",12),e.YNc(9,yn,2,1,"td",10),e.BQk(),e.ynx(10,13),e.YNc(11,Cn,1,0,"th",14),e.YNc(12,xn,1,0,"td",10),e.BQk(),e.YNc(13,wn,1,0,"tr",15),e.YNc(14,vn,1,2,"tr",16),e.qZA()),2&i){const t=e.oxw();e.Q6J("dataSource",t.dataSource)("trackBy",t.tableTrackerFn),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}let we=(()=>{class i{constructor(t,n,a){this.yamcs=t,this.messageService=a,this.displayedColumns=["select","name","description","actions"],this.tableTrackerFn=(r,c)=>c.id,this.dataSource=new u.by,this.selection=new z.O(this.tableTrackerFn,!0,[]),n.setTitle("Timeline Views"),this.refreshData()}ngAfterViewInit(){this.dataSource.sort=this.sort}isAllSelected(){const n=this.dataSource.filteredData.length;return this.selection.selected.length===n&&n>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(t=>this.selection.select(t))}toggleOne(t){(!this.selection.isSelected(t)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(t)}deleteSelectedViews(){if(confirm("Are you sure you want to delete the selected views?"))for(const t of this.selection.selected)this.deleteView(t.id,!1)}deleteView(t,n=!0){(!n||confirm("Are you sure you want to delete the selected view?"))&&this.yamcs.yamcsClient.deleteTimelineView(this.yamcs.instance,t).then(()=>this.refreshData()).catch(a=>this.messageService.showError(a))}isGroupDeleteEnabled(){return!this.selection.isEmpty()}refreshData(){this.yamcs.yamcsClient.getTimelineViews(this.yamcs.instance).then(t=>{this.selection.matchNewValues(t.views||[]),this.dataSource.data=t.views||[]}).catch(t=>this.messageService.showError(t))}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(l.C8),e.Y36(C.Dx),e.Y36(l.ez))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(n,a){if(1&n&&e.Gf(S.YE,5),2&n){let r;e.iGM(r=e.CRH())&&(a.sort=r.first)}},decls:13,vars:5,consts:[["mat-button","","color","primary","routerLink","create",3,"queryParams"],["mat-button","","color","primary",3,"disabled","click"],[1,"panel-content"],["mat-table","","class","ya-data-table expand","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",3,"dataSource","trackBy",4,"ngIf"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"checked","change"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"checked","click","change"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink","queryParams"],["mat-header-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(n,a){1&n&&(e.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),e._uU(2," Views \xa0\xa0\xa0 "),e.TgZ(3,"a",0)(4,"mat-icon"),e._uU(5,"add_circle_outline"),e.qZA(),e._uU(6," Create view "),e.qZA(),e.TgZ(7,"button",1),e.NdJ("click",function(){return a.deleteSelectedViews()}),e.TgZ(8,"mat-icon"),e._uU(9,"close"),e.qZA(),e._uU(10," Delete "),e.qZA()(),e.TgZ(11,"div",2),e.YNc(12,An,15,4,"table",3),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("queryParams",e.VKq(3,xe,a.yamcs.context)),e.xp6(4),e.Q6J("disabled",!a.isGroupDeleteEnabled()),e.xp6(5),e.Q6J("ngIf",a.dataSource))},dependencies:[g.O5,f.rH,y.O_,y.D5,y.fo,U.zs,U.lW,B.Hw,S.YE,S.nU,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,x.a,w.k],encapsulation:2,changeDetection:0})}return i})();const Un=function(i){return{c:i}};let ve=(()=>{class i{constructor(t,n,a,r,c){this.yamcs=a,this.messageService=r,this.router=c,t.setTitle("Configure Command Band"),this.form=n.group({name:["",[o.kI.required]],description:"",properties:n.group({})})}onConfirm(){const t=this.form.value;this.yamcs.yamcsClient.createTimelineBand(this.yamcs.instance,{name:t.name,description:t.description,type:"COMMAND_BAND",shared:!0,properties:t.properties}).then(()=>this.router.navigateByUrl(`/timeline/bands?c=${this.yamcs.context}`)).catch(n=>this.messageService.showError(n))}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(C.Dx),e.Y36(o.QS),e.Y36(l.C8),e.Y36(l.ez),e.Y36(f.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:29,vars:5,consts:[["step","2"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"],[1,"section-divider"],[1,"action-bar"],["routerLink","../..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(n,a){1&n&&(e.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),e._uU(2," Create band "),e.qZA(),e._UZ(3,"app-create-band-wizard-step",0),e.TgZ(4,"div",1)(5,"form",2)(6,"label"),e._uU(7," Label "),e.TgZ(8,"span",3),e._uU(9,"(required)"),e.qZA(),e._UZ(10,"br")(11,"input",4),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"label"),e._uU(14," Description "),e.TgZ(15,"span",3),e._uU(16,"(optional)"),e.qZA(),e._UZ(17,"br")(18,"textarea",5),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"div",6),e._UZ(21,"mat-divider"),e.qZA()(),e.TgZ(22,"p"),e._uU(23,"\xa0"),e.qZA(),e.TgZ(24,"div",7)(25,"button",8),e._uU(26,"Cancel"),e.qZA(),e.TgZ(27,"button",9),e.NdJ("click",function(){return a.onConfirm()}),e._uU(28,"CREATE"),e.qZA()()()()),2&n&&(e.xp6(5),e.Q6J("formGroup",a.form),e.xp6(20),e.Q6J("queryParams",e.VKq(3,Un,a.yamcs.context)),e.xp6(2),e.Q6J("disabled",!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,f.rH,A.d,x.a,w.k,Q],encapsulation:2,changeDetection:0})}return i})();const qn=function(i){return{c:i}};const kn=function(i){return{c:i}};const Sn=function(i){return{c:i}};const Bn=[{path:"",canActivate:[re.r,Ve._],canActivateChild:[re.q],runGuardsAndResolvers:"always",component:Le.K,children:[{path:"",pathMatch:"full",redirectTo:"chart"},{path:"chart",component:Ce},{path:"views",pathMatch:"full",component:we},{path:"views/create",pathMatch:"full",component:de},{path:"views/:view",pathMatch:"full",component:he},{path:"bands",pathMatch:"full",component:ce},{path:"bands/create",pathMatch:"full",component:le},{path:"bands/create/item-band",pathMatch:"full",component:(()=>{class i{constructor(t,n,a,r,c){this.yamcs=a,this.messageService=r,this.router=c,t.setTitle("Configure Item Band"),this.form=n.group({name:["",[o.kI.required]],description:"",properties:n.group({frozen:[b.frozen.defaultValue,[o.kI.required]],itemBackgroundColor:[b.itemBackgroundColor.defaultValue,[o.kI.required]],itemBorderColor:[b.itemBorderColor.defaultValue,[o.kI.required]],itemBorderWidth:[b.itemBorderWidth.defaultValue,[o.kI.required]],itemCornerRadius:[b.itemCornerRadius.defaultValue,[o.kI.required]],itemHeight:[b.itemHeight.defaultValue,[o.kI.required]],itemMarginLeft:[b.itemMarginLeft.defaultValue,[o.kI.required]],itemTextColor:[b.itemTextColor.defaultValue,[o.kI.required]],itemTextOverflow:[b.itemTextOverflow.defaultValue,[o.kI.required]],itemTextSize:[b.itemTextSize.defaultValue,[o.kI.required]],marginBottom:[b.marginBottom.defaultValue,[o.kI.required]],marginTop:[b.marginTop.defaultValue,[o.kI.required]],multiline:[b.multiline.defaultValue,[o.kI.required]],spaceBetweenItems:[b.spaceBetweenItems.defaultValue,[o.kI.required]],spaceBetweenLines:[b.spaceBetweenLines.defaultValue,[o.kI.required]]}),tags:[[],[]]})}onConfirm(){const t=this.form.value;this.yamcs.yamcsClient.createTimelineBand(this.yamcs.instance,{name:t.name,description:t.description,type:"ITEM_BAND",shared:!0,tags:t.tags,properties:t.properties}).then(()=>this.router.navigateByUrl(`/timeline/bands?c=${this.yamcs.context}`)).catch(n=>this.messageService.showError(n))}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(C.Dx),e.Y36(o.QS),e.Y36(l.C8),e.Y36(l.ez),e.Y36(f.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:37,vars:6,consts:[["step","2"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name"],["formControlName","description","rows","3"],["formControlName","tags"],[1,"section-divider"],[3,"form"],[1,"action-bar"],["routerLink","../..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(n,a){1&n&&(e.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),e._uU(2," Create band "),e.qZA(),e._UZ(3,"app-create-band-wizard-step",0),e.TgZ(4,"div",1)(5,"form",2)(6,"label"),e._uU(7," Label "),e.TgZ(8,"span",3),e._uU(9,"(required)"),e.qZA(),e._UZ(10,"br")(11,"input",4),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"label"),e._uU(14," Description "),e.TgZ(15,"span",3),e._uU(16,"(optional)"),e.qZA(),e._UZ(17,"br")(18,"textarea",5),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"label"),e._uU(21," Tags"),e._UZ(22,"br")(23,"ya-tag-select",6),e.qZA(),e._UZ(24,"br"),e.TgZ(25,"div",7),e._UZ(26,"mat-divider"),e.qZA(),e.TgZ(27,"h4"),e._uU(28,"Styles"),e.qZA(),e._UZ(29,"app-item-band-styles",8),e.qZA(),e.TgZ(30,"p"),e._uU(31,"\xa0"),e.qZA(),e.TgZ(32,"div",9)(33,"button",10),e._uU(34,"Cancel"),e.qZA(),e.TgZ(35,"button",11),e.NdJ("click",function(){return a.onConfirm()}),e._uU(36,"CREATE"),e.qZA()()()()),2&n&&(e.xp6(5),e.Q6J("formGroup",a.form),e.xp6(24),e.Q6J("form",a.form),e.xp6(4),e.Q6J("queryParams",e.VKq(4,qn,a.yamcs.context)),e.xp6(2),e.Q6J("disabled",!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,f.rH,A.d,l.PX,x.a,w.k,Q,ne],encapsulation:2,changeDetection:0})}return i})()},{path:"bands/create/spacer",pathMatch:"full",component:(()=>{class i{constructor(t,n,a,r,c){this.yamcs=a,this.messageService=r,this.router=c,t.setTitle("Configure Spacer"),this.form=n.group({name:"",description:"",properties:n.group({height:[F.height.defaultValue,[o.kI.required]]})})}onConfirm(){const t=this.form.value;this.yamcs.yamcsClient.createTimelineBand(this.yamcs.instance,{name:t.name,description:t.description,type:"SPACER",shared:!0,properties:t.properties}).then(()=>this.router.navigateByUrl(`/timeline/bands?c=${this.yamcs.context}`)).catch(n=>this.messageService.showError(n))}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(C.Dx),e.Y36(o.QS),e.Y36(l.C8),e.Y36(l.ez),e.Y36(f.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:32,vars:6,consts:[["step","2"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"],[1,"section-divider"],[3,"form"],[1,"action-bar"],["routerLink","../..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(n,a){1&n&&(e.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),e._uU(2," Create band "),e.qZA(),e._UZ(3,"app-create-band-wizard-step",0),e.TgZ(4,"div",1)(5,"form",2)(6,"label"),e._uU(7," Label "),e.TgZ(8,"span",3),e._uU(9,"(optional)"),e.qZA(),e._UZ(10,"br")(11,"input",4),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"label"),e._uU(14," Description "),e.TgZ(15,"span",3),e._uU(16,"(optional)"),e.qZA(),e._UZ(17,"br")(18,"textarea",5),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"div",6),e._UZ(21,"mat-divider"),e.qZA(),e.TgZ(22,"h4"),e._uU(23,"Styles"),e.qZA(),e._UZ(24,"app-spacer-styles",7),e.qZA(),e.TgZ(25,"p"),e._uU(26,"\xa0"),e.qZA(),e.TgZ(27,"div",8)(28,"button",9),e._uU(29,"Cancel"),e.qZA(),e.TgZ(30,"button",10),e.NdJ("click",function(){return a.onConfirm()}),e._uU(31,"CREATE"),e.qZA()()()()),2&n&&(e.xp6(5),e.Q6J("formGroup",a.form),e.xp6(19),e.Q6J("form",a.form),e.xp6(4),e.Q6J("queryParams",e.VKq(4,kn,a.yamcs.context)),e.xp6(2),e.Q6J("disabled",!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,f.rH,A.d,x.a,w.k,Q,ae],encapsulation:2,changeDetection:0})}return i})()},{path:"bands/create/time-ruler",pathMatch:"full",component:(()=>{class i{constructor(t,n,a,r,c){this.yamcs=a,this.messageService=r,this.router=c,t.setTitle("Configure Time Ruler"),this.form=n.group({name:["",[o.kI.required]],description:"",properties:n.group({timezone:["UTC",[o.kI.required]]})})}onConfirm(){const t=this.form.value;this.yamcs.yamcsClient.createTimelineBand(this.yamcs.instance,{name:t.name,description:t.description,type:"TIME_RULER",shared:!0,properties:t.properties}).then(()=>this.router.navigateByUrl(`/timeline/bands?c=${this.yamcs.context}`)).catch(n=>this.messageService.showError(n))}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(C.Dx),e.Y36(o.QS),e.Y36(l.C8),e.Y36(l.ez),e.Y36(f.F0))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:32,vars:5,consts:[["step","2"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"],["formGroupName","properties"],["formControlName","timezone"],[1,"action-bar"],["routerLink","../..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"disabled","click"]],template:function(n,a){1&n&&(e.TgZ(0,"app-instance-page")(1,"app-instance-toolbar"),e._uU(2," Create band "),e.qZA(),e._UZ(3,"app-create-band-wizard-step",0),e.TgZ(4,"div",1)(5,"form",2)(6,"label"),e._uU(7," Label "),e.TgZ(8,"span",3),e._uU(9,"(required)"),e.qZA(),e._UZ(10,"br")(11,"input",4),e.qZA(),e._UZ(12,"br"),e.TgZ(13,"label"),e._uU(14," Description "),e.TgZ(15,"span",3),e._uU(16,"(optional)"),e.qZA(),e._UZ(17,"br")(18,"textarea",5),e.qZA(),e.ynx(19,6),e._UZ(20,"br"),e.TgZ(21,"label"),e._uU(22," Timezone"),e._UZ(23,"br")(24,"ya-timezone-select",7),e.qZA(),e.BQk(),e.qZA(),e.TgZ(25,"p"),e._uU(26,"\xa0"),e.qZA(),e.TgZ(27,"div",8)(28,"button",9),e._uU(29,"Cancel"),e.qZA(),e.TgZ(30,"button",10),e.NdJ("click",function(){return a.onConfirm()}),e._uU(31,"CREATE"),e.qZA()()()()),2&n&&(e.xp6(5),e.Q6J("formGroup",a.form),e.xp6(23),e.Q6J("queryParams",e.VKq(3,Sn,a.yamcs.context)),e.xp6(2),e.Q6J("disabled",!a.form.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,o.x0,f.rH,l.Q1,x.a,w.k,Q],encapsulation:2,changeDetection:0})}return i})()},{path:"bands/create/command-band",pathMatch:"full",component:ve},{path:"bands/:band",pathMatch:"full",component:pe},{path:"items",pathMatch:"full",component:Ze},{path:"items/:item",pathMatch:"full",component:_e}]}];let Dn=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[f.Bz.forChild(Bn),f.Bz]})}return i})(),Pn=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[ke.m,Dn]})}return i})();e.B6R(X,[g.O5,o._Y,o.JL,o.sg,h.ZT,J.Ye,J.rD,H,ie,oe,ue],[g.Ov])}}]);