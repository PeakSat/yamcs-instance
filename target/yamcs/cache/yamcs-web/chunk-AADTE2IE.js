import{b as Ut,f as ui,g as Lt,h as fi,i as hi,j as Ci}from"./chunk-ISJZ4IJQ.js";import{b as $,d as z,e as si,f as pi}from"./chunk-FTOGDGWN.js";import{$a as ti,Aa as m,Ba as qe,Bb as _,Bd as Pe,Ca as ee,Da as Kt,Db as V,Eb as k,F as v,Fa as Zt,Fc as Ie,Ga as S,Gc as Be,Ha as yt,Hc as Ve,Hd as ai,Ia as P,Ib as Me,Ic as oi,Id as ct,Jb as I,Jc as ri,K as T,Kb as Ye,L as E,La as N,Ma as L,Mb as ni,Na as ei,Nb as B,Ob as fe,Od as Oe,Qb as A,Qc as se,Rc as nt,Re as D,Sa as Ee,Sc as Ne,Tc as ot,Td as Bt,Ub as Qe,Uc as rt,Ue as mi,Ve as y,Wa as Ue,Wc as at,We as li,X as d,Xc as Le,Xe as ci,Y as u,Yb as Y,Yd as F,Ye as di,Zc as Re,_a as te,_b as re,_c as mt,a as St,aa as g,ad as lt,bc as xt,bd as Ae,ca as p,dc as wt,dd as Fe,e as J,ea as Z,ec as Tt,ed as Se,fc as ke,fe as ge,ga as w,gc as Je,gd as kt,ge as Vt,ha as ze,hd as It,ia as He,ib as q,ic as Xe,ja as We,ka as r,la as o,ma as s,mb as De,mc as Et,md as st,me as dt,na as O,nc as Ke,oa as G,ob as ne,oc as Ze,p as Jt,pb as X,pc as Q,qa as j,qc as he,ra as C,rc as Ce,sa as h,sc as Dt,tc as _e,te as Nt,uc as et,vc as tt,wa as xe,wc as it,xa as we,xb as ii,y as Xt,ya as Te,yd as ae,za as me,zb as R,zc as Mt}from"./chunk-YLFXKKOP.js";var gi=i=>({c:i}),$i=()=>[];function zi(i,n){if(i&1){let l=j();r(0,"th",20)(1,"input",21),C("change",function(e){T(l);let a=h(2);return E(e?a.masterToggle():null)}),o()()}if(i&2){let l=h(2);d(),p("checked",l.selection.hasValue()&&l.isAllSelected())}}function Hi(i,n){if(i&1){let l=j();r(0,"td",22)(1,"input",23),C("click",function(e){return T(l),E(e.stopPropagation())})("change",function(e){let a=T(l).$implicit,c=h(2);return E(e?c.selection.toggle(a):null)}),o()()}if(i&2){let l=n.$implicit,t=h(2);d(),p("checked",t.selection.isSelected(l))}}function Wi(i,n){i&1&&(r(0,"th",24),m(1,"Label"),o())}function Ui(i,n){if(i&1&&m(0),i&2){let l=h().$implicit;ee(" ",l.name," ")}}function Yi(i,n){i&1&&(r(0,"i"),m(1,"(none)"),o())}function Qi(i,n){if(i&1&&(r(0,"td",25)(1,"a",26),g(2,Ui,1,1)(3,Yi,2,0,"i"),o()()),i&2){let l=n.$implicit,t=h(2);d(),p("routerLink",l.id)("queryParams",P(4,gi,t.yamcs.context)),d(),w(l.name?2:-1),d(),w(l.name?-1:3)}}function Ji(i,n){i&1&&(r(0,"th",27),m(1,"Description"),o())}function Xi(i,n){if(i&1&&(r(0,"td",25),m(1),o()),i&2){let l=n.$implicit;d(),ee(" ",l.description||"-"," ")}}function Ki(i,n){i&1&&(r(0,"th",28),m(1,"Tags"),o())}function Zi(i,n){if(i&1&&(r(0,"ya-label"),m(1),o()),i&2){let l=n.$implicit;d(),qe(l)}}function en(i,n){i&1&&m(0," - ")}function tn(i,n){if(i&1&&(r(0,"td",25),He(1,Zi,2,1,"ya-label",null,ze),g(3,en,1,0),o()),i&2){let l=n.$implicit;d(),We(l.tags||yt(1,$i)),d(2),w(l.tags?-1:3)}}function nn(i,n){i&1&&(r(0,"th",24),m(1,"Type"),o())}function on(i,n){if(i&1&&(r(0,"td",25),m(1),o()),i&2){let l=n.$implicit;d(),ee(" ",l.type," ")}}function rn(i,n){i&1&&s(0,"th",29)}function an(i,n){i&1&&s(0,"td",25)}function mn(i,n){i&1&&s(0,"tr",30)}function ln(i,n){if(i&1){let l=j();r(0,"tr",31),C("click",function(){let e=T(l).$implicit,a=h(2);return E(a.toggleOne(e))}),o()}if(i&2){let l=n.$implicit,t=h(2);Z("selected",t.selection.isSelected(l))}}function sn(i,n){if(i&1&&(r(0,"table",3),O(1,4),g(2,zi,2,1,"th",5)(3,Hi,2,1,"td",6),G(),O(4,7),g(5,Wi,2,0,"th",8)(6,Qi,4,6,"td",9),G(),O(7,10),g(8,Ji,2,0,"th",11)(9,Xi,2,1,"td",9),G(),O(10,12),g(11,Ki,2,0,"th",13)(12,tn,4,2,"td",14),G(),O(13,15),g(14,nn,2,0,"th",8)(15,on,2,1,"td",9),G(),O(16,16),g(17,rn,1,0,"th",17)(18,an,1,0,"td",9),G(),g(19,mn,1,0,"tr",18)(20,ln,1,2,"tr",19),o()),i&2){let l=h();p("dataSource",l.dataSource)("trackBy",l.tableTrackerFn),d(19),p("matHeaderRowDef",l.displayedColumns),d(),p("matRowDefColumns",l.displayedColumns)}}var bi=(()=>{let n=class n{constructor(t,e,a){this.yamcs=t,this.messageService=a,this.displayedColumns=["select","name","description","tags","type","actions"],this.tableTrackerFn=(c,f)=>f.id,this.dataSource=new Se,this.selection=new st(this.tableTrackerFn,!0,[]),e.setTitle("Timeline Bands"),this.refreshData()}ngAfterViewInit(){this.dataSource.sort=this.sort}isAllSelected(){let t=this.selection.selected.length,e=this.dataSource.filteredData.length;return t===e&&e>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(t=>this.selection.select(t))}toggleOne(t){(!this.selection.isSelected(t)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(t)}deleteSelectedBands(){if(confirm("Are you sure you want to delete the selected bands?"))for(let t of this.selection.selected)this.deleteBand(t.id,!1)}deleteBand(t,e=!0){(!e||confirm("Are you sure you want to delete the selected band?"))&&this.yamcs.yamcsClient.deleteTimelineBand(this.yamcs.instance,t).then(()=>this.refreshData()).catch(a=>this.messageService.showError(a))}isGroupDeleteEnabled(){return!this.selection.isEmpty()}refreshData(){this.yamcs.yamcsClient.getTimelineBands(this.yamcs.instance).then(t=>{this.selection.matchNewValues(t.bands||[]),this.dataSource.data=t.bands||[]}).catch(t=>this.messageService.showError(t))}};n.\u0275fac=function(e){return new(e||n)(u(D),u(q),u(F))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],viewQuery:function(e,a){if(e&1&&xe(se,5),e&2){let c;we(c=Te())&&(a.sort=c.first)}},standalone:!0,features:[S],decls:13,vars:5,consts:[["mat-button","","color","primary","routerLink","create",3,"queryParams"],["mat-button","","color","primary",3,"click","disabled"],[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["mat-header-cell","","class","wrap200",4,"matHeaderCellDef"],["cdkColumnDef","tags"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["matColumnDef","type"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"change","checked"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink","queryParams"],["mat-header-cell","",1,"wrap200"],["mat-header-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,a){e&1&&(r(0,"app-instance-page")(1,"app-instance-toolbar"),m(2," Bands \xA0\xA0\xA0 "),r(3,"a",0)(4,"mat-icon"),m(5,"add_circle_outline"),o(),m(6," Create band "),o(),r(7,"button",1),C("click",function(){return a.deleteSelectedBands()}),r(8,"mat-icon"),m(9,"close"),o(),m(10," Delete "),o()(),r(11,"div",2),g(12,sn,21,4,"table",3),o()()),e&2&&(d(3),p("queryParams",P(3,gi,a.yamcs.context)),d(4),p("disabled",!a.isGroupDeleteEnabled()),d(5),w(a.dataSource?12:-1))},dependencies:[z,$,y,X,Ie,Be,Ve,Je,ke,re,se,nt,Ne,rt,mt,at,ot,lt,Le,Re,Ae,Fe,Bt],encapsulation:2,changeDetection:0});let i=n;return i})();var be=(()=>{let n=class n{};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=v({type:n,selectors:[["app-create-band-wizard-step"]],inputs:{step:"step"},standalone:!0,features:[S],decls:8,vars:4,consts:[[1,"sub"]],template:function(e,a){e&1&&(r(0,"mat-toolbar",0)(1,"mat-toolbar-row")(2,"span")(3,"span"),m(4,"1. Select band type"),o(),m(5," \xA0\xA0\xA0\xA0\xA0\xA0\xA0 "),r(6,"span"),m(7,"2. Configure band"),o()()()()),e&2&&(d(3),Z("active",a.step==="1"),d(3),Z("active",a.step==="2"))},dependencies:[y,Ze,Ke],styles:["span[_ngcontent-%COMP%]{cursor:default}span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:.3}span[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{opacity:1}mat-toolbar.sub[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3;background-color:#fff;font-size:12px}.mat-toolbar-row[_ngcontent-%COMP%]{height:32px;padding:0 24px}.mat-toolbar-multiple-rows[_ngcontent-%COMP%]{min-height:32px}"],changeDetection:0});let i=n;return i})();var cn=i=>({c:i}),Si=(()=>{let n=class n{constructor(t,e,a,c,f){this.yamcs=a,this.messageService=c,this.router=f,t.setTitle("Configure Command Band"),this.form=e.group({name:["",[_.required]],description:"",properties:e.group({})})}onConfirm(){let t=this.form.value;this.yamcs.yamcsClient.createTimelineBand(this.yamcs.instance,{name:t.name,description:t.description,type:"COMMAND_BAND",shared:!0,properties:t.properties}).then(()=>this.router.navigateByUrl(`/timeline/bands?c=${this.yamcs.context}`)).catch(e=>this.messageService.showError(e))}};n.\u0275fac=function(e){return new(e||n)(u(q),u(Y),u(D),u(F),u(ne))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],standalone:!0,features:[S],decls:29,vars:5,consts:[["step","2"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"],[1,"section-divider"],[1,"action-bar"],["routerLink","../..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"click","disabled"]],template:function(e,a){e&1&&(r(0,"app-instance-page")(1,"app-instance-toolbar"),m(2," Create band "),o(),s(3,"app-create-band-wizard-step",0),r(4,"div",1)(5,"form",2)(6,"label"),m(7," Label "),r(8,"span",3),m(9,"(required)"),o(),s(10,"br")(11,"input",4),o(),s(12,"br"),r(13,"label"),m(14," Description "),r(15,"span",3),m(16,"(optional)"),o(),s(17,"br")(18,"textarea",5),o(),s(19,"br"),r(20,"div",6),s(21,"mat-divider"),o()(),r(22,"p"),m(23,"\xA0"),o(),r(24,"div",7)(25,"button",8),m(26," Cancel "),o(),r(27,"button",9),C("click",function(){return a.onConfirm()}),m(28," CREATE "),o()()()()),e&2&&(d(5),p("formGroup",a.form),d(20),p("queryParams",P(3,cn,a.yamcs.context)),d(2),p("disabled",!a.form.valid))},dependencies:[be,z,$,y,I,R,V,k,B,A,X,Q],encapsulation:2,changeDetection:0});let i=n;return i})();var _t=i=>({c:i}),yi=(()=>{let n=class n{constructor(t,e){this.yamcs=e,t.setTitle("Create a Band")}};n.\u0275fac=function(e){return new(e||n)(u(q),u(D))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],standalone:!0,features:[S],decls:40,vars:15,consts:[["mat-icon-button","","routerLink","..","color","primary",3,"queryParams"],["step","1"],[1,"panel-content"],[1,"category-title"],[1,"band-type-list"],["routerLink","time-ruler",1,"band-type",3,"queryParams"],[1,"card"],[1,"card-title"],[1,"card-content"],["routerLink","item-band",1,"band-type",3,"queryParams"],["routerLink","spacer",1,"band-type",3,"queryParams"],["routerLink","command-band",1,"band-type",3,"queryParams"]],template:function(e,a){e&1&&(r(0,"app-instance-page")(1,"app-instance-toolbar")(2,"a",0)(3,"mat-icon"),m(4,"arrow_back"),o()(),m(5," Create band "),o(),s(6,"app-create-band-wizard-step",1),r(7,"div",2)(8,"div",3),m(9,"General"),o(),r(10,"div",4)(11,"a",5)(12,"div",6)(13,"div",7),m(14,"Time Ruler"),o(),r(15,"div",8),m(16,"Display absolute time, formatted in a timezone of choice."),o()()(),r(17,"a",9)(18,"div",6)(19,"div",7),m(20,"Item Band"),o(),r(21,"div",8),m(22,"Show a selection of timeline items."),o()()(),r(23,"a",10)(24,"div",6)(25,"div",7),m(26,"Spacer"),o(),r(27,"div",8),m(28,"Insert empty vertical space."),o()()()(),r(29,"p"),m(30,"\xA0"),o(),r(31,"div",3),m(32,"Yamcs entities"),o(),r(33,"div",4)(34,"a",11)(35,"div",6)(36,"div",7),m(37,"Commands"),o(),r(38,"div",8),m(39,"Display issued commands."),o()()()()()()),e&2&&(d(2),p("queryParams",P(5,_t,a.yamcs.context)),d(9),p("queryParams",P(7,_t,a.yamcs.context)),d(6),p("queryParams",P(9,_t,a.yamcs.context)),d(6),p("queryParams",P(11,_t,a.yamcs.context)),d(11),p("queryParams",P(13,_t,a.yamcs.context)))},dependencies:[be,z,$,y,X,Xe,re],styles:["div.category-title[_ngcontent-%COMP%]{font-size:18px;line-height:1.5;margin-bottom:1em}a.band-type[_ngcontent-%COMP%]{display:inline-block;width:260px;margin-right:20px;margin-bottom:20px;vertical-align:top;text-decoration:none}.card[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.12);background:#fff;border-radius:4px;overflow:hidden}.card-title[_ngcontent-%COMP%]{align-items:center;display:flex;padding:15px;font-size:20px;font-weight:500;color:#000000de}.card-content[_ngcontent-%COMP%]{padding:0 15px 15px;min-height:2.4em;font-size:15px;color:#0000008a}a.band-type[_ngcontent-%COMP%]:hover   .card[_ngcontent-%COMP%]{background-color:#f2f2f2}"],changeDetection:0});let i=n;return i})();function dn(i,n){i&1&&(r(0,"th",13),m(1,"Available"),o())}function pn(i,n){if(i&1&&m(0),i&2){let l=h().$implicit;ee(" ",l.name," ")}}function un(i,n){i&1&&(r(0,"i"),m(1,"(no name)"),o())}function fn(i,n){if(i&1&&(s(0,"br"),r(1,"span",15),m(2),o()),i&2){let l=h().$implicit;d(2),qe(l.description)}}function hn(i,n){if(i&1&&(r(0,"td",14),g(1,pn,1,1)(2,un,2,0,"i")(3,fn,3,1),o()),i&2){let l=n.$implicit;d(),w(l.name?1:-1),d(),w(l.name?-1:2),d(),w(l.description?3:-1)}}function Cn(i,n){i&1&&s(0,"tr",16)}function _n(i,n){if(i&1){let l=j();r(0,"tr",17),C("click",function(){let e=T(l).$implicit,a=h();return E(a.selectBand(e))}),o()}if(i&2){let l=n.$implicit,t=h();Z("selected",t.isLeftSelected(l))}}function gn(i,n){i&1&&(r(0,"th",13),m(1,"Selected"),o())}function bn(i,n){if(i&1&&m(0),i&2){let l=h().$implicit;ee(" ",l.name," ")}}function vn(i,n){i&1&&(r(0,"i"),m(1,"(no name)"),o())}function Sn(i,n){if(i&1&&(s(0,"br"),r(1,"span",15),m(2),o()),i&2){let l=h().$implicit;d(2),qe(l.description)}}function yn(i,n){if(i&1&&(r(0,"td",14),g(1,bn,1,1)(2,vn,2,0,"i")(3,Sn,3,1),o()),i&2){let l=n.$implicit;d(),w(l.name?1:-1),d(),w(l.name?-1:2),d(),w(l.description?3:-1)}}function xn(i,n){i&1&&s(0,"tr",16)}function wn(i,n){if(i&1){let l=j();r(0,"tr",17),C("click",function(){let e=T(l).$implicit,a=h();return E(a.selectBand(e))}),o()}if(i&2){let l=n.$implicit,t=h();Z("selected",t.isRightSelected(l))}}var ut=(()=>{let n=class n{constructor(t){this.displayedColumns=["name"],this.availableDataSource=new Se([]),this.selectedDataSource=new Se([]),this.onChange=e=>{},this.bands$=t.yamcsClient.getTimelineBands(t.instance),this.bands$.then(e=>{this.availableDataSource.data=e.bands||[]})}writeValue(t){this.bands$.then(e=>{let a=e.bands||[];if(t){let c=t.map(x=>x.id),f=[],b=[];for(let x of a)c.indexOf(x.id)===-1&&f.push(x);for(let x of c)for(let M of a)M.id===x&&b.push(M);this.availableDataSource.data=f,this.selectedDataSource.data=b}else this.availableDataSource.data=[...a],this.selectedDataSource.data=[]})}registerOnChange(t){this.onChange=t}registerOnTouched(t){}selectBand(t){this.selectedBand=t}isLeftSelected(t){return t===this.selectedBand&&this.availableDataSource.data.indexOf(t)!==-1}isAnyLeftSelected(){return this.selectedBand&&this.availableDataSource.data.indexOf(this.selectedBand)!==-1}isRightSelected(t){return t===this.selectedBand&&this.selectedDataSource.data.indexOf(t)!==-1}isAnyRightSelected(){return this.selectedBand&&this.selectedDataSource.data.indexOf(this.selectedBand)!==-1}moveRight(){let t=this.selectedBand,e=[...this.availableDataSource.data],a=[...this.selectedDataSource.data],c=e.indexOf(t);c!==-1&&e.splice(c,1),a.indexOf(t)===-1&&a.push(t),this.availableDataSource.data=e,this.selectedDataSource.data=a,this.onChange(a)}moveLeft(){let t=this.selectedBand,e=[...this.availableDataSource.data],a=[...this.selectedDataSource.data],c=a.indexOf(t);c!==-1&&a.splice(c,1),e.indexOf(t)===-1&&e.push(t),this.availableDataSource.data=e,this.selectedDataSource.data=a,this.onChange(a)}moveUp(){let t=this.selectedBand,e=[...this.selectedDataSource.data],a=e.indexOf(t);a!==0&&(e[a]=e[a-1],e[a-1]=t),this.selectedDataSource.data=e,this.onChange(e)}moveDown(){let t=this.selectedBand,e=[...this.selectedDataSource.data],a=e.indexOf(t);a!==e.length-1&&(e[a]=e[a+1],e[a+1]=t),this.selectedDataSource.data=e,this.onChange(e)}};n.\u0275fac=function(e){return new(e||n)(u(D))},n.\u0275cmp=v({type:n,selectors:[["app-band-multi-select"]],standalone:!0,features:[Zt([{provide:ii,useExisting:Xt(()=>n),multi:!0}]),S],decls:32,vars:10,consts:[[2,"display","flex"],[1,"bands-from"],["mat-table","",1,"ya-data-table",2,"width","100%",3,"dataSource"],["cdkColumnDef","name"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["mat-header-row","",4,"cdkHeaderRowDef"],["mat-row","",3,"selected","click",4,"cdkRowDef","cdkRowDefColumns"],[2,"display","inline-block","margin","1em","align-self","center"],[1,"ya-button",2,"width","90px",3,"click","disabled"],[1,"bands-to"],[2,"text-align","right"],[1,"ya-button",3,"click","disabled"],["mat-header-cell",""],["mat-cell",""],[1,"hint"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,a){e&1&&(r(0,"div",0)(1,"div",1)(2,"table",2),O(3,3),g(4,dn,2,0,"th",4)(5,hn,4,3,"td",5),G(),g(6,Cn,1,0,"tr",6)(7,_n,1,2,"tr",7),o()(),r(8,"div",8)(9,"button",9),C("click",function(){return a.moveRight()}),m(10," Add "),r(11,"mat-icon"),m(12,"chevron_right"),o()(),s(13,"br"),r(14,"button",9),C("click",function(){return a.moveLeft()}),r(15,"mat-icon"),m(16,"chevron_left"),o(),m(17," Remove "),o()(),r(18,"div",10)(19,"table",2),O(20,3),g(21,gn,2,0,"th",4)(22,yn,4,3,"td",5),G(),g(23,xn,1,0,"tr",6)(24,wn,1,2,"tr",7),o()()(),r(25,"div",11)(26,"button",12),C("click",function(){return a.moveDown()}),r(27,"mat-icon"),m(28,"keyboard_arrow_down"),o()(),r(29,"button",12),C("click",function(){return a.moveUp()}),r(30,"mat-icon"),m(31,"keyboard_arrow_up"),o()()()),e&2&&(d(2),p("dataSource",a.availableDataSource),d(4),p("cdkHeaderRowDef",a.displayedColumns),d(),p("cdkRowDefColumns",a.displayedColumns),d(2),p("disabled",!a.isAnyLeftSelected()),d(5),p("disabled",!a.isAnyRightSelected()),d(5),p("dataSource",a.selectedDataSource),d(4),p("cdkHeaderRowDef",a.displayedColumns),d(),p("cdkRowDefColumns",a.displayedColumns),d(2),p("disabled",!a.isAnyRightSelected()),d(3),p("disabled",!a.isAnyRightSelected()))},dependencies:[y,ri,Ie,Be,Ve,oi,re,Ne,Le,Re,Ae,Fe],styles:[".bands-from[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]{border:1px solid #d3d3d3;flex:1 1 auto}.bands-from[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.bands-from[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{cursor:pointer}.bands-from[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-left:none;border-right:none}.bands-from[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:none}.bands-from[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   td[_ngcontent-%COMP%], .bands-to[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type{border-bottom:none}"],changeDetection:0});let i=n;return i})();var xi=i=>({c:i}),wi=(()=>{let n=class n{constructor(t,e,a,c,f){this.yamcs=e,this.formBuilder=a,this.messageService=c,this.router=f,t.setTitle("Create a View"),this.form=this.formBuilder.group({name:["",[_.required]],bands:[[],[]]})}onConfirm(){let t=this.form.value;this.yamcs.yamcsClient.createTimelineView(this.yamcs.instance,{name:t.name,bands:t.bands.map(e=>e.id)}).then(e=>this.router.navigateByUrl(`/timeline/chart?c=${this.yamcs.context}&view=${e.id}`)).catch(e=>this.messageService.showError(e))}};n.\u0275fac=function(e){return new(e||n)(u(q),u(D),u(Y),u(F),u(ne))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],standalone:!0,features:[S],decls:27,vars:8,consts:[["mat-icon-button","","routerLink","..","color","primary",3,"queryParams"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name"],[1,"section-divider"],["formControlName","bands"],[1,"action-bar"],["routerLink","..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"click","disabled"]],template:function(e,a){e&1&&(r(0,"app-instance-page")(1,"app-instance-toolbar")(2,"a",0)(3,"mat-icon"),m(4,"arrow_back"),o()(),m(5," Create view "),o(),r(6,"div",1)(7,"form",2)(8,"label"),m(9," Name "),r(10,"span",3),m(11,"(required)"),o(),s(12,"br")(13,"input",4),o(),s(14,"br"),r(15,"div",5),s(16,"mat-divider"),o(),r(17,"h4"),m(18,"Bands"),o(),s(19,"app-band-multi-select",6),o(),r(20,"p"),m(21,"\xA0"),o(),r(22,"div",7)(23,"button",8),m(24,"Cancel"),o(),r(25,"button",9),C("click",function(){return a.onConfirm()}),m(26," CREATE "),o()()()()),e&2&&(d(2),p("queryParams",P(4,xi,a.yamcs.context)),d(5),p("formGroup",a.form),d(16),p("queryParams",P(6,xi,a.yamcs.context)),d(2),p("disabled",!a.form.valid))},dependencies:[ut,z,$,y,I,R,V,k,B,A,X,Xe,re,Q],encapsulation:2,changeDetection:0});let i=n;return i})();function Tn(i,n){if(i&1&&(r(0,"form",0)(1,"label"),m(2," Label "),r(3,"span",1),m(4,"(required)"),o(),s(5,"br")(6,"input",2),o(),s(7,"br"),r(8,"label"),m(9," Description "),r(10,"span",1),m(11,"(optional)"),o(),s(12,"br")(13,"textarea",3),o()()),i&2){let l=h();p("formGroup",l.form)}}var Rt=(()=>{let n=class n{constructor(t,e){this.yamcs=t,this.changeDetection=e,this.formConfigured$=new J(!1)}ngAfterViewInit(){this.formConfigured$.next(!0),this.changeDetection.detectChanges()}};n.\u0275fac=function(e){return new(e||n)(u(D),u(Ee))},n.\u0275cmp=v({type:n,selectors:[["app-edit-command-band"]],inputs:{form:"form",band:"band"},standalone:!0,features:[S],decls:2,vars:3,consts:[[3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"]],template:function(e,a){e&1&&(g(0,Tn,14,1,"form",0),N(1,"async")),e&2&&w(L(1,1,a.formConfigured$)?0:-1)},dependencies:[y,te,I,R,V,k,B,A],encapsulation:2,changeDetection:0});let i=n;return i})();var Ti={};function En(i){let n=Ti[i];if(!n){let l=document.createElement("canvas").getContext("2d");l.fillStyle=i,n=String(l.fillStyle),Ti[i]=n}return n}var Ge=function(i){return i[i.BOOLEAN=0]="BOOLEAN",i[i.COLOR=1]="COLOR",i[i.NUMBER=2]="NUMBER",i[i.SELECT=3]="SELECT",i[i.TEXT=4]="TEXT",i}(Ge||{}),gt=class{constructor(n){this.inputType=Ge.BOOLEAN,this.defaultValue=n}},ye=class{constructor(n){this.inputType=Ge.COLOR,this.defaultValue=n}},oe=class{constructor(n){this.inputType=Ge.NUMBER,this.defaultValue=n}};var At=class{constructor(n){this.inputType=Ge.SELECT,this.defaultValue=n}};function le(i,n){let l={};for(let t in i)l[t]=i[t].defaultValue;return St(St({},l),Dn(i,n))}function Dn(i,n){let l=St({},n);for(let t in n){let e=i[t];e?.inputType===Ge.BOOLEAN?l[t]=n[t]==="true":e?.inputType===Ge.NUMBER?l[t]=Number(n[t]):e?.inputType===Ge.COLOR&&(l[t]=En(n[t]))}return l}var ft=(()=>{let n=class n{};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=v({type:n,selectors:[["app-item-styles"]],inputs:{form:"form"},standalone:!0,features:[S],decls:53,vars:15,consts:[["backgroundColor_overrideBand",""],["textColor_overrideBand",""],["textSize_overrideBand",""],["marginLeft_overrideBand",""],["borderColor_overrideBand",""],["borderWidth_overrideBand",""],["cornerRadius_overrideBand",""],[1,"hint"],[3,"formGroup"],["yaSimpleTable","","formGroupName","properties",1,"style-table"],[1,"property"],["formControlName","backgroundColor_overrideBand"],[1,"widget"],["type","color","formControlName","backgroundColor"],["formControlName","textColor_overrideBand"],["type","color","formControlName","textColor"],["formControlName","textSize_overrideBand"],["type","number","formControlName","textSize","min","0",2,"width","100px"],["formControlName","marginLeft_overrideBand"],["type","number","formControlName","marginLeft","min","0",2,"width","100px"],["formControlName","borderColor_overrideBand"],["type","color","formControlName","borderColor"],["formControlName","borderWidth_overrideBand"],["type","number","formControlName","borderWidth","min","0",2,"width","100px"],["formControlName","cornerRadius_overrideBand"],["type","number","formControlName","cornerRadius","min","0",2,"width","100px"]],template:function(e,a){if(e&1&&(r(0,"p",7),m(1,"When unset, items inherit the styling of the band they are displayed on."),o(),r(2,"form",8)(3,"table",9)(4,"tr")(5,"td",10),s(6,"mat-slide-toggle",11,0),m(8," Background Color "),o(),r(9,"td",12),s(10,"input",13),o()(),r(11,"tr")(12,"td",10),s(13,"mat-slide-toggle",14,1),m(15," Text Color "),o(),r(16,"td",12),s(17,"input",15),o()(),r(18,"tr")(19,"td",10),s(20,"mat-slide-toggle",16,2),m(22," Text Size "),o(),r(23,"td",12),s(24,"input",17),o()(),r(25,"tr")(26,"td",10),s(27,"mat-slide-toggle",18,3),m(29," Margin Left "),o(),r(30,"td",12),s(31,"input",19),o()(),r(32,"tr")(33,"td",10),s(34,"mat-slide-toggle",20,4),m(36," Border Color "),o(),r(37,"td",12),s(38,"input",21),o()(),r(39,"tr")(40,"td",10),s(41,"mat-slide-toggle",22,5),m(43," Border Width "),o(),r(44,"td",12),s(45,"input",23),o()(),r(46,"tr")(47,"td",10),s(48,"mat-slide-toggle",24,6),m(50," Corner Radius "),o(),r(51,"td",12),s(52,"input",25),o()()()()),e&2){let c=me(7),f=me(14),b=me(21),x=me(28),M=me(35),K=me(42),ue=me(49);d(2),p("formGroup",a.form),d(2),Z("disabled",!c.checked),d(7),Z("disabled",!f.checked),d(7),Z("disabled",!b.checked),d(7),Z("disabled",!x.checked),d(7),Z("disabled",!M.checked),d(7),Z("disabled",!K.checked),d(7),Z("disabled",!ue.checked)}},dependencies:[y,I,R,Ye,V,k,Qe,B,A,fe,dt,Mt],styles:[".style-table[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{font-weight:500;font-size:11px;letter-spacing:.02em;line-height:12px;color:#000;width:150px}.style-table[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{font-style:italic;color:gray}"],changeDetection:0});let i=n;return i})();var Ei="_overrideBand",Di=(()=>{let n=class n{constructor(t,e,a,c,f){this.dialogRef=t,this.yamcs=a,this.messageService=c,this.data=f,this.resolutionOptions=[{id:"seconds",label:"seconds"},{id:"minutes",label:"minutes"},{id:"hours",label:"hours"}],this.startConstraintOptions=[{id:"START_ON",label:"Start on"}];let b=f.item,x=b.properties||{},M=le(Ct,x);this.form=e.group({name:[b.name,_.required],start:[b.start,_.required],duration:[b.duration,_.required],tags:[b.tags||[],[]],properties:e.group({backgroundColor:[M.backgroundColor,[]],backgroundColor_overrideBand:"backgroundColor"in x,borderColor:[M.borderColor,[]],borderColor_overrideBand:"borderColor"in x,borderWidth:[M.borderWidth,[]],borderWidth_overrideBand:"borderWidth"in x,cornerRadius:[M.cornerRadius,[]],cornerRadius_overrideBand:"cornerRadius"in x,marginLeft:[M.marginLeft,[]],marginLeft_overrideBand:"marginLeft"in x,textColor:[M.textColor,[]],textColor_overrideBand:"textColor"in x,textSize:[M.textSize,[]],textSize_overrideBand:"textSize"in x})}),this.updateDisabledState(),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.updateDisabledState()})}save(){let t=this.form.value,e={name:t.name,start:ae.toISOString(t.start),duration:t.duration,tags:t.tags,properties:t.properties};this.yamcs.yamcsClient.updateTimelineItem(this.yamcs.instance,this.data.item.id,e).then(a=>this.dialogRef.close(a)).catch(a=>this.messageService.showError(a))}delete(){confirm("Are you sure you want to delete this item?")&&this.yamcs.yamcsClient.deleteTimelineItem(this.yamcs.instance,this.data.item.id).then(()=>this.dialogRef.close()).catch(t=>this.messageService.showError(t))}updateDisabledState(){let{controls:t}=this.propertiesGroup;for(let e in t)if(e.endsWith(Ei)){let a=t[e.substring(0,e.length-Ei.length)];t[e].value?a.enable({onlySelf:!0}):a.disable({onlySelf:!0})}}get propertiesGroup(){return this.form.controls.properties}ngOnDestroy(){this.formSubscription?.unsubscribe()}};n.\u0275fac=function(e){return new(e||n)(u(he),u(Y),u(D),u(F),u(Ce))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],standalone:!0,features:[S],decls:39,vars:4,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["animationDuration","0ms",1,"small-tabs",3,"mat-stretch-tabs"],["label","General"],[2,"margin-top","1em"],["cdkFocusRegionstart","","type","text","formControlName","name",2,"width","100%"],[1,"half-break"],["dialogTitle","Tags"],["formControlName","tags"],["formControlName","duration"],[1,"section-divider","half-break"],["formControlName","start"],["label","Styles"],[3,"form"],["align","end"],[1,"ya-button",3,"click"],[2,"flex","1 1 auto"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"click","disabled"]],template:function(e,a){e&1&&(r(0,"h2",0),m(1,"Update item"),o(),r(2,"mat-dialog-content")(3,"form",1)(4,"mat-tab-group",2)(5,"mat-tab",3)(6,"div",4)(7,"label"),m(8," Name"),s(9,"br")(10,"input",5),o(),s(11,"hr",6),r(12,"label"),m(13," Tags "),r(14,"ya-help",7),m(15," Tags allow to categorise items per band. Bands only show items for which one of the tags is matching. "),o(),s(16,"br")(17,"ya-tag-select",8),o(),s(18,"hr",6),r(19,"label"),m(20," Duration "),s(21,"ya-duration-input",9),o(),r(22,"div",10),s(23,"mat-divider"),o(),r(24,"label"),m(25," Start"),s(26,"br")(27,"ya-date-time-input",11),o()()(),r(28,"mat-tab",12)(29,"div",4),s(30,"app-item-styles",13),o()()()()(),r(31,"mat-dialog-actions",14)(32,"button",15),C("click",function(){return a.delete()}),m(33,"DELETE THIS ITEM"),o(),s(34,"div",16),r(35,"button",17),m(36,"CANCEL"),o(),r(37,"button",18),C("click",function(){return a.save()}),m(38,"SAVE"),o()()),e&2&&(d(3),p("formGroup",a.form),d(),p("mat-stretch-tabs",!1),d(26),p("form",a.form),d(7),p("disabled",!a.form.valid))},dependencies:[ft,y,I,R,V,k,B,A,_e,et,it,tt,Q,kt,It,Pe,ct,Oe,ge],encapsulation:2,changeDetection:0});let i=n;return i})();var W={frozen:new gt(!1),itemBackgroundColor:new ye("#77b1e1"),itemBorderColor:new ye("#3d94c7"),itemBorderWidth:new oe(1),itemCornerRadius:new oe(0),itemHeight:new oe(20),itemMarginLeft:new oe(5),itemTextColor:new ye("#333333"),itemTextOverflow:new At("show"),itemTextSize:new oe(10),marginBottom:new oe(7),marginTop:new oe(7),multiline:new gt(!0),spaceBetweenItems:new oe(0),spaceBetweenLines:new oe(2)},Ct={backgroundColor:new ye(W.itemBackgroundColor.defaultValue),borderColor:new ye(W.itemBorderColor.defaultValue),borderWidth:new oe(W.itemBorderWidth.defaultValue),cornerRadius:new oe(W.itemCornerRadius.defaultValue),marginLeft:new oe(W.itemMarginLeft.defaultValue),textColor:new ye(W.itemTextColor.defaultValue),textSize:new oe(W.itemTextSize.defaultValue)},bt=class extends Lt{constructor(n,l,t){super(n.timeline),this.label=l.name,this.data={band:l};let e=le(W,l.properties||{});this.frozen=e.frozen,this.itemBackground=e.itemBackgroundColor,this.itemBorderColor=e.itemBorderColor,this.itemBorderWidth=e.itemBorderWidth,this.itemCornerRadius=e.itemCornerRadius,this.itemHeight=e.itemHeight,this.itemMarginLeft=e.itemMarginLeft,this.itemTextColor=e.itemTextColor,this.itemTextOverflow=e.itemTextOverflow,this.itemTextSize=e.itemTextSize,this.marginBottom=e.marginBottom,this.marginTop=e.marginTop,this.multiline=e.multiline,this.spaceBetween=e.spaceBetweenItems,this.lineSpacing=e.spaceBetweenLines,this.addItemClickListener(a=>{t.open(Di,{width:"600px",panelClass:"dialog-force-no-scrollbar",data:{item:a.item.data.item}}).afterClosed().subscribe(()=>n.refreshData())})}};var Ft=(()=>{let n=class n{constructor(){this.itemTextOverflowOptions=[{id:"show",label:"Show"},{id:"clip",label:"Clip"},{id:"hide",label:"Hide"}]}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=v({type:n,selectors:[["app-item-band-styles"]],inputs:{form:"form"},standalone:!0,features:[S],decls:85,vars:2,consts:[[3,"formGroup"],["yaSimpleTable","","formGroupName","properties",1,"style-table"],[1,"property"],["dialogTitle","Frozen"],[1,"widget"],["formControlName","frozen"],["dialogTitle","Multiline"],["formControlName","multiline"],["dialogTitle","Space Between Lines"],["type","number","formControlName","spaceBetweenLines","min","0",2,"width","100px"],["dialogTitle","Space Between Items"],["type","number","formControlName","spaceBetweenItems","min","0",2,"width","100px"],["type","number","formControlName","marginTop","min","0",2,"width","100px"],["type","number","formControlName","marginBottom","min","0",2,"width","100px"],["type","number","formControlName","itemHeight","min","0",2,"width","100px"],["type","color","formControlName","itemBackgroundColor"],["type","color","formControlName","itemTextColor"],["formControlName","itemTextOverflow",3,"options"],["type","number","formControlName","itemTextSize","min","0",2,"width","100px"],["type","number","formControlName","itemMarginLeft","min","0",2,"width","100px"],["type","color","formControlName","itemBorderColor"],["type","number","formControlName","itemBorderWidth","min","0",2,"width","100px"],["type","number","formControlName","itemCornerRadius","min","0",2,"width","100px"]],template:function(e,a){e&1&&(r(0,"form",0)(1,"table",1)(2,"tr")(3,"td",2),m(4," Frozen "),r(5,"ya-help",3),m(6," Fix this line to the top of the view. Frozen bands are always rendered above other bands. "),o()(),r(7,"td",4),s(8,"mat-slide-toggle",5),o()(),r(9,"tr")(10,"td",2),m(11," Multiline "),r(12,"ya-help",6),m(13," Draw items on multiple lines if otherwise there would be collisions. "),o()(),r(14,"td",4),s(15,"mat-slide-toggle",7),o()(),r(16,"tr")(17,"td",2),m(18," Space Between Lines "),r(19,"ya-help",8),m(20," In case of multilining, this indicates the vertical space between lines. "),o()(),r(21,"td",4),s(22,"input",9),o()(),r(23,"tr")(24,"td",2),m(25," Space Between Items "),r(26,"ya-help",10),m(27," In case of multilining, this indicates the minimum horizontal space between items. If an item does not meet this treshold, it gets rendered on a different line. "),o()(),r(28,"td",4),s(29,"input",11),o()(),r(30,"tr")(31,"td",2),m(32,"Margin Top"),o(),r(33,"td",4),s(34,"input",12),o()(),r(35,"tr")(36,"td",2),m(37,"Margin Bottom"),o(),r(38,"td",4),s(39,"input",13),o()(),r(40,"tr")(41,"td",2),m(42,"Item Height"),o(),r(43,"td",4),s(44,"input",14),o()(),r(45,"tr")(46,"td",2),m(47,"Item Background Color"),o(),r(48,"td",4),s(49,"input",15),o()(),r(50,"tr")(51,"td",2),m(52,"Item Text Color"),o(),r(53,"td",4),s(54,"input",16),o()(),r(55,"tr")(56,"td",2),m(57,"Item Text Overflow"),o(),r(58,"td",4),s(59,"ya-select",17),o()(),r(60,"tr")(61,"td",2),m(62,"Item Text Size"),o(),r(63,"td",4),s(64,"input",18),o()(),r(65,"tr")(66,"td",2),m(67,"Item Margin Left"),o(),r(68,"td",4),s(69,"input",19),o()(),r(70,"tr")(71,"td",2),m(72,"Item Border Color"),o(),r(73,"td",4),s(74,"input",20),o()(),r(75,"tr")(76,"td",2),m(77,"Item Border Width"),o(),r(78,"td",4),s(79,"input",21),o()(),r(80,"tr")(81,"td",2),m(82,"Item Corner Radius"),o(),r(83,"td",4),s(84,"input",22),o()()()()),e&2&&(p("formGroup",a.form),d(59),p("options",a.itemTextOverflowOptions))},dependencies:[y,I,R,Ye,V,k,Qe,B,A,fe,dt,Mt,Oe,ai],styles:[".style-table[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{font-weight:500;font-size:11px;letter-spacing:.02em;line-height:12px;color:#000;width:150px}.style-table[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{font-style:italic;color:gray}"],changeDetection:0});let i=n;return i})();function In(i,n){if(i&1&&(r(0,"form",0)(1,"label"),m(2," Label "),r(3,"span",1),m(4,"(required)"),o(),s(5,"br")(6,"input",2),o(),s(7,"br"),r(8,"label"),m(9," Description "),r(10,"span",1),m(11,"(optional)"),o(),s(12,"br")(13,"textarea",3),o(),s(14,"br"),r(15,"label"),m(16," Tags"),s(17,"br")(18,"ya-tag-select",4),o(),s(19,"br"),r(20,"div",5),s(21,"mat-divider"),o(),r(22,"h4"),m(23,"Styles"),o(),s(24,"app-item-band-styles",6),o()),i&2){let l=h();p("formGroup",l.form),d(24),p("form",l.form)}}var Pt=(()=>{let n=class n{constructor(t,e){this.yamcs=t,this.changeDetection=e,this.formConfigured$=new J(!1)}ngAfterViewInit(){let t=le(W,this.band.properties||{}),e={frozen:[t.frozen,[_.required]],itemBackgroundColor:[t.itemBackgroundColor,[_.required]],itemBorderColor:[t.itemBorderColor,[_.required]],itemBorderWidth:[t.itemBorderWidth,[_.required]],itemCornerRadius:[t.itemCornerRadius,[_.required]],itemHeight:[t.itemHeight,[_.required]],itemMarginLeft:[t.itemMarginLeft,[_.required]],itemTextColor:[t.itemTextColor,[_.required]],itemTextOverflow:[t.itemTextOverflow,[_.required]],itemTextSize:[t.itemTextSize,[_.required]],marginBottom:[t.marginBottom,[_.required]],marginTop:[t.marginTop,[_.required]],multiline:[t.multiline,[_.required]],spaceBetweenItems:[t.spaceBetweenItems,[_.required]],spaceBetweenLines:[t.spaceBetweenLines,[_.required]]},a=this.form.get("properties");for(let c in e){let f=e[c];a.addControl(c,new Me(f[0],f[1]))}this.formConfigured$.next(!0),this.changeDetection.detectChanges()}};n.\u0275fac=function(e){return new(e||n)(u(D),u(Ee))},n.\u0275cmp=v({type:n,selectors:[["app-edit-item-band"]],inputs:{form:"form",band:"band"},standalone:!0,features:[S],decls:2,vars:3,consts:[[3,"formGroup"],[1,"hint"],["type","text","formControlName","name"],["formControlName","description","rows","3"],["formControlName","tags"],[1,"section-divider"],[3,"form"]],template:function(e,a){e&1&&(g(0,In,25,2,"form",0),N(1,"async")),e&2&&w(L(1,1,a.formConfigured$)?0:-1)},dependencies:[Ft,y,te,I,R,V,k,B,A,Q,ge],encapsulation:2,changeDetection:0});let i=n;return i})();var Ot={height:new oe(34)};var Gt=(()=>{let n=class n{};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=v({type:n,selectors:[["app-spacer-styles"]],inputs:{form:"form"},standalone:!0,features:[S],decls:7,vars:1,consts:[[3,"formGroup"],["yaSimpleTable","","formGroupName","properties",1,"style-table"],[1,"property"],[1,"widget"],["type","number","formControlName","height","min","0",2,"width","100px"]],template:function(e,a){e&1&&(r(0,"form",0)(1,"table",1)(2,"tr")(3,"td",2),m(4,"Height"),o(),r(5,"td",3),s(6,"input",4),o()()()()),e&2&&p("formGroup",a.form)},dependencies:[y,I,R,Ye,V,k,Qe,B,A,fe,dt],styles:[".style-table[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{font-weight:500;font-size:11px;letter-spacing:.02em;line-height:12px;color:#000;width:150px}.style-table[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{font-style:italic;color:gray}"],changeDetection:0});let i=n;return i})();function Bn(i,n){if(i&1&&(r(0,"form",0)(1,"label"),m(2," Label "),r(3,"span",1),m(4,"(optional)"),o(),s(5,"br")(6,"input",2),o(),s(7,"br"),r(8,"label"),m(9," Description "),r(10,"span",1),m(11,"(optional)"),o(),s(12,"br")(13,"textarea",3),o(),s(14,"br"),r(15,"div",4),s(16,"mat-divider"),o(),r(17,"h4"),m(18,"Styles"),o(),s(19,"app-spacer-styles",5),o()),i&2){let l=h();p("formGroup",l.form),d(19),p("form",l.form)}}var jt=(()=>{let n=class n{constructor(t,e){this.yamcs=t,this.changeDetection=e,this.formConfigured$=new J(!1)}ngAfterViewInit(){let e={height:[le(Ot,this.band.properties||{}).height,[_.required]]},a=this.form.get("properties");for(let c in e){let f=e[c];a.addControl(c,new Me(f[0],f[1]))}this.formConfigured$.next(!0),this.changeDetection.detectChanges()}};n.\u0275fac=function(e){return new(e||n)(u(D),u(Ee))},n.\u0275cmp=v({type:n,selectors:[["app-edit-spacer"]],inputs:{form:"form",band:"band"},standalone:!0,features:[S],decls:2,vars:3,consts:[[3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"],[1,"section-divider"],[3,"form"]],template:function(e,a){e&1&&(g(0,Bn,20,2,"form",0),N(1,"async")),e&2&&w(L(1,1,a.formConfigured$)?0:-1)},dependencies:[y,te,I,R,V,k,B,A,Q,Gt],encapsulation:2,changeDetection:0});let i=n;return i})();function Vn(i,n){if(i&1&&(r(0,"form",0)(1,"label"),m(2," Label "),r(3,"span",1),m(4,"(required)"),o(),s(5,"br")(6,"input",2),o(),s(7,"br"),r(8,"label"),m(9," Description "),r(10,"span",1),m(11,"(optional)"),o(),s(12,"br")(13,"textarea",3),o(),O(14,4),s(15,"br"),r(16,"label"),m(17," Timezone"),s(18,"br")(19,"ya-timezone-select",5),o(),G(),o()),i&2){let l=h();p("formGroup",l.form)}}var qt=(()=>{let n=class n{constructor(t,e){this.yamcs=t,this.changeDetection=e,this.formConfigured$=new J(!1)}ngAfterViewInit(){let t={timezone:[this.band.properties.timezone,[_.required]]},e=this.form.get("properties");for(let a in t){let c=t[a];e.addControl(a,new Me(c[0],c[1]))}this.formConfigured$.next(!0),this.changeDetection.detectChanges()}};n.\u0275fac=function(e){return new(e||n)(u(D),u(Ee))},n.\u0275cmp=v({type:n,selectors:[["app-edit-time-ruler"]],inputs:{form:"form",band:"band"},standalone:!0,features:[S],decls:2,vars:3,consts:[[3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"],["formGroupName","properties"],["formControlName","timezone"]],template:function(e,a){e&1&&(g(0,Vn,20,1,"form",0),N(1,"async")),e&2&&w(L(1,1,a.formConfigured$)?0:-1)},dependencies:[y,te,I,R,V,k,B,A,fe,Vt],encapsulation:2,changeDetection:0});let i=n;return i})();function Nn(i,n){if(i&1&&s(0,"app-edit-item-band",2),i&2){let l=h(),t=h();p("form",t.form)("band",l)}}function Ln(i,n){if(i&1&&s(0,"app-edit-spacer",2),i&2){let l=h(),t=h();p("form",t.form)("band",l)}}function Rn(i,n){if(i&1&&s(0,"app-edit-time-ruler",2),i&2){let l=h(),t=h();p("form",t.form)("band",l)}}function An(i,n){if(i&1&&s(0,"app-edit-command-band",2),i&2){let l=h(),t=h();p("form",t.form)("band",l)}}function Fn(i,n){if(i&1){let l=j();r(0,"app-instance-page")(1,"app-instance-toolbar"),m(2,"Edit band"),o(),r(3,"div",0)(4,"form",1),g(5,Nn,1,2,"app-edit-item-band",2)(6,Ln,1,2,"app-edit-spacer",2)(7,Rn,1,2,"app-edit-time-ruler",2)(8,An,1,2,"app-edit-command-band",2),o(),r(9,"p"),m(10,"\xA0"),o(),r(11,"div",3)(12,"button",4),C("click",function(){T(l);let e=h();return E(e.location.back())}),m(13,"Cancel"),o(),r(14,"button",5),N(15,"async"),C("click",function(){T(l);let e=h();return E(e.doOnConfirm())}),m(16," SAVE CHANGES "),o()()()()}if(i&2){let l=n,t=h();d(4),p("formGroup",t.form),d(),w(l.type==="ITEM_BAND"?5:-1),d(),w(l.type==="SPACER"?6:-1),d(),w(l.type==="TIME_RULER"?7:-1),d(),w(l.type==="COMMAND_BAND"?8:-1),d(6),p("disabled",!L(15,6,t.dirty$)||!t.form.valid)}}var Mi=(()=>{let n=class n{constructor(t,e,a,c,f,b,x){this.yamcs=e,this.messageService=a,this.route=c,this.router=f,this.location=x,this.dirty$=new J(!1),t.setTitle("Edit Band");let M=c.snapshot.paramMap.get("band");this.band$=e.yamcsClient.getTimelineBand(e.instance,M),this.band$.then(K=>{this.form=b.group({name:[K.name,[_.required]],description:[K.description||""],tags:[K.tags||[]],properties:b.group({})}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)})}).catch(K=>this.messageService.showError(K))}doOnConfirm(){let t=this.route.snapshot.paramMap.get("band"),e=this.form.value,a={name:e.name,description:e.description,shared:!0,tags:e.tags,properties:e.properties};this.yamcs.yamcsClient.updateTimelineBand(this.yamcs.instance,t,a).then(()=>this.router.navigateByUrl(`/timeline/bands?c=${this.yamcs.context}`)).catch(c=>this.messageService.showError(c))}ngOnDestroy(){this.formSubscription?.unsubscribe()}};n.\u0275fac=function(e){return new(e||n)(u(q),u(D),u(F),u(De),u(ne),u(Y),u(Ue))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],standalone:!0,features:[S],decls:2,vars:3,consts:[[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[3,"form","band"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"click","disabled"]],template:function(e,a){if(e&1&&(g(0,Fn,17,8,"app-instance-page"),N(1,"async")),e&2){let c;w((c=L(1,1,a.band$))?0:-1,c)}},dependencies:[Rt,Pt,jt,qt,z,$,y,te,I,k,B],encapsulation:2,changeDetection:0});let i=n;return i})();function Pn(i,n){if(i&1){let l=j();r(0,"app-instance-page")(1,"app-instance-toolbar"),m(2,"Edit item"),o(),r(3,"div",0)(4,"form",1)(5,"div",2),m(6," Name "),r(7,"span",3),m(8,"(required)"),o(),s(9,"br")(10,"input",4),o(),s(11,"br"),r(12,"div",2),m(13," Tags "),r(14,"ya-help",5),m(15," Tags allow to categorise items per band. Bands only show items for which one of the tags is matching. "),o(),s(16,"br")(17,"ya-tag-select",6),o(),s(18,"br"),r(19,"div",2),m(20," Duration "),s(21,"ya-duration-input",7),o(),s(22,"br"),r(23,"div",8),s(24,"mat-divider"),o(),s(25,"br"),r(26,"div",2),m(27," Start"),s(28,"br")(29,"ya-date-time-input",9),o(),s(30,"br"),r(31,"div",8),s(32,"mat-divider"),o(),r(33,"h4"),m(34,"Styles"),o(),s(35,"app-item-styles",10)(36,"br"),o(),r(37,"p"),m(38,"\xA0"),o(),r(39,"div",11)(40,"button",12),C("click",function(){T(l);let e=h();return E(e.location.back())}),m(41,"Cancel"),o(),r(42,"button",13),N(43,"async"),C("click",function(){T(l);let e=h();return E(e.doOnConfirm())}),m(44," SAVE CHANGES "),o()()()()}if(i&2){let l=h();d(4),p("formGroup",l.form),d(31),p("form",l.form),d(7),p("disabled",!L(43,3,l.dirty$)||!l.form.valid)}}var $t="_overrideBand",ki=(()=>{let n=class n{constructor(t,e,a,c,f,b,x){this.yamcs=e,this.messageService=a,this.route=c,this.router=f,this.location=x,this.resolutionOptions=[{id:"seconds",label:"seconds"},{id:"minutes",label:"minutes"},{id:"hours",label:"hours"}],this.startConstraintOptions=[{id:"START_ON",label:"Start on"}],this.dirty$=new J(!1),t.setTitle("Edit Item");let M=c.snapshot.paramMap.get("item");this.item$=e.yamcsClient.getTimelineItem(e.instance,M),this.item$.then(K=>{let ue=K.properties||{},je=le(Ct,ue);this.form=b.group({name:[K.name,[_.required]],start:[K.start,_.required],duration:[K.duration,_.required],tags:[K.tags||[],[]],properties:b.group({backgroundColor:[je.backgroundColor,[]],backgroundColor_overrideBand:"backgroundColor"in ue,borderColor:[je.borderColor,[]],borderColor_overrideBand:"borderColor"in ue,borderWidth:[je.borderWidth,[]],borderWidth_overrideBand:"borderWidth"in ue,cornerRadius:[je.cornerRadius,[]],cornerRadius_overrideBand:"cornerRadius"in ue,marginLeft:[je.marginLeft,[]],marginLeft_overrideBand:"marginLeft"in ue,textColor:[je.textColor,[]],textColor_overrideBand:"textColor"in ue,textSize:[je.textSize,[]],textSize_overrideBand:"textSize"in ue})}),this.updateDisabledState(),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.updateDisabledState(),this.dirty$.next(!0)})}).catch(K=>this.messageService.showError(K))}updateDisabledState(){let{controls:t}=this.propertiesGroup;for(let e in t)if(e.endsWith($t)){let a=t[e.substring(0,e.length-$t.length)];t[e].value?a.enable({onlySelf:!0}):a.disable({onlySelf:!0})}}get propertiesGroup(){return this.form.controls.properties}doOnConfirm(){let t=this.route.snapshot.paramMap.get("item"),e=this.form.value,a={name:e.name,start:ae.toISOString(e.start),duration:e.duration,tags:e.tags,properties:{}};a.tags?.length||(a.clearTags=!0);let{controls:c}=this.propertiesGroup;for(let f in c)if(f.endsWith($t)&&c[f].value){let b=f.substring(0,f.length-$t.length);a.properties[b]=c[b].value}a.properties?.length||(a.clearProperties=!0),this.yamcs.yamcsClient.updateTimelineItem(this.yamcs.instance,t,a).then(()=>this.router.navigateByUrl(`/timeline/items?c=${this.yamcs.context}`)).catch(f=>this.messageService.showError(f))}ngOnDestroy(){this.formSubscription?.unsubscribe()}};n.\u0275fac=function(e){return new(e||n)(u(q),u(D),u(F),u(De),u(ne),u(Y),u(Ue))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],standalone:!0,features:[S],decls:2,vars:3,consts:[[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"label"],[1,"hint"],["type","text","formControlName","name"],["dialogTitle","Tags"],["formControlName","tags"],["formControlName","duration"],[1,"section-divider"],["formControlName","start"],[3,"form"],[1,"action-bar"],[1,"ya-button",3,"click"],["type","submit",1,"ya-button","primary",3,"click","disabled"]],template:function(e,a){if(e&1&&(g(0,Pn,45,5,"app-instance-page"),N(1,"async")),e&2){let c;w((c=L(1,1,a.item$))?0:-1,c)}},dependencies:[z,$,ft,y,te,I,R,V,k,B,A,Q,Pe,ct,Oe,ge],encapsulation:2,changeDetection:0});let i=n;return i})();var Ii=i=>({c:i}),Bi=(()=>{let n=class n{constructor(t,e,a,c,f,b,x){this.yamcs=e,this.messageService=a,this.route=c,this.router=f,this.location=b,this.dirty$=new J(!1),t.setTitle("Edit View");let M=c.snapshot.paramMap.get("view");this.form=x.group({name:[null,_.required],bands:[null,[]]}),e.yamcsClient.getTimelineView(e.instance,M).then(K=>{this.form.setValue({name:K.name,bands:K.bands||[]}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)})}).catch(K=>this.messageService.showError(K))}onConfirm(){let t=this.form.value,e={name:t.name,bands:t.bands.map(c=>c.id)},a=this.route.snapshot.paramMap.get("view");this.yamcs.yamcsClient.updateTimelineView(this.yamcs.instance,a,e).then(()=>this.router.navigateByUrl(`/timeline/views?c=${this.yamcs.context}`)).catch(c=>this.messageService.showError(c))}ngOnDestroy(){this.formSubscription?.unsubscribe()}};n.\u0275fac=function(e){return new(e||n)(u(q),u(D),u(F),u(De),u(ne),u(Ue),u(Y))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],standalone:!0,features:[S],decls:28,vars:10,consts:[["mat-icon-button","","routerLink","..","color","primary",3,"queryParams"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name"],[1,"section-divider"],["formControlName","bands"],[1,"action-bar"],["routerLink","..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"click","disabled"]],template:function(e,a){e&1&&(r(0,"app-instance-page")(1,"app-instance-toolbar")(2,"a",0)(3,"mat-icon"),m(4,"arrow_back"),o()(),m(5," Update view "),o(),r(6,"div",1)(7,"form",2)(8,"label"),m(9," Name "),r(10,"span",3),m(11,"(required)"),o(),s(12,"br")(13,"input",4),o(),s(14,"br"),r(15,"div",5),s(16,"mat-divider"),o(),r(17,"h4"),m(18,"Bands"),o(),s(19,"app-band-multi-select",6),o(),r(20,"p"),m(21,"\xA0"),o(),r(22,"div",7)(23,"button",8),m(24,"Cancel"),o(),r(25,"button",9),N(26,"async"),C("click",function(){return a.onConfirm()}),m(27," SAVE CHANGES "),o()()()()),e&2&&(d(2),p("queryParams",P(6,Ii,a.yamcs.context)),d(5),p("formGroup",a.form),d(16),p("queryParams",P(8,Ii,a.yamcs.context)),d(2),p("disabled",!L(26,4,a.dirty$)||!a.form.valid))},dependencies:[ut,z,$,y,te,I,R,V,k,B,A,X,Xe,re,Q],encapsulation:2,changeDetection:0});let i=n;return i})();var On=i=>({c:i}),Vi=(()=>{let n=class n{constructor(t,e,a,c,f){this.yamcs=a,this.messageService=c,this.router=f,t.setTitle("Configure Item Band"),this.form=e.group({name:["",[_.required]],description:"",properties:e.group({frozen:[W.frozen.defaultValue,[_.required]],itemBackgroundColor:[W.itemBackgroundColor.defaultValue,[_.required]],itemBorderColor:[W.itemBorderColor.defaultValue,[_.required]],itemBorderWidth:[W.itemBorderWidth.defaultValue,[_.required]],itemCornerRadius:[W.itemCornerRadius.defaultValue,[_.required]],itemHeight:[W.itemHeight.defaultValue,[_.required]],itemMarginLeft:[W.itemMarginLeft.defaultValue,[_.required]],itemTextColor:[W.itemTextColor.defaultValue,[_.required]],itemTextOverflow:[W.itemTextOverflow.defaultValue,[_.required]],itemTextSize:[W.itemTextSize.defaultValue,[_.required]],marginBottom:[W.marginBottom.defaultValue,[_.required]],marginTop:[W.marginTop.defaultValue,[_.required]],multiline:[W.multiline.defaultValue,[_.required]],spaceBetweenItems:[W.spaceBetweenItems.defaultValue,[_.required]],spaceBetweenLines:[W.spaceBetweenLines.defaultValue,[_.required]]}),tags:[[],[]]})}onConfirm(){let t=this.form.value;this.yamcs.yamcsClient.createTimelineBand(this.yamcs.instance,{name:t.name,description:t.description,type:"ITEM_BAND",shared:!0,tags:t.tags,properties:t.properties}).then(()=>this.router.navigateByUrl(`/timeline/bands?c=${this.yamcs.context}`)).catch(e=>this.messageService.showError(e))}};n.\u0275fac=function(e){return new(e||n)(u(q),u(Y),u(D),u(F),u(ne))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],standalone:!0,features:[S],decls:37,vars:6,consts:[["step","2"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name"],["formControlName","description","rows","3"],["formControlName","tags"],[1,"section-divider"],[3,"form"],[1,"action-bar"],["routerLink","../..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"click","disabled"]],template:function(e,a){e&1&&(r(0,"app-instance-page")(1,"app-instance-toolbar"),m(2," Create band "),o(),s(3,"app-create-band-wizard-step",0),r(4,"div",1)(5,"form",2)(6,"label"),m(7," Label "),r(8,"span",3),m(9,"(required)"),o(),s(10,"br")(11,"input",4),o(),s(12,"br"),r(13,"label"),m(14," Description "),r(15,"span",3),m(16,"(optional)"),o(),s(17,"br")(18,"textarea",5),o(),s(19,"br"),r(20,"label"),m(21," Tags"),s(22,"br")(23,"ya-tag-select",6),o(),s(24,"br"),r(25,"div",7),s(26,"mat-divider"),o(),r(27,"h4"),m(28,"Styles"),o(),s(29,"app-item-band-styles",8),o(),r(30,"p"),m(31,"\xA0"),o(),r(32,"div",9)(33,"button",10),m(34," Cancel "),o(),r(35,"button",11),C("click",function(){return a.onConfirm()}),m(36," CREATE "),o()()()()),e&2&&(d(5),p("formGroup",a.form),d(24),p("form",a.form),d(4),p("queryParams",P(4,On,a.yamcs.context)),d(2),p("disabled",!a.form.valid))},dependencies:[be,z,$,Ft,y,I,R,V,k,B,A,X,Q,ge],encapsulation:2,changeDetection:0});let i=n;return i})();var zt="_overrideBand",Ht=(()=>{let n=class n{constructor(t,e,a,c,f){this.dialogRef=t,this.yamcs=a,this.messageService=c,this.data=f,this.startConstraintOptions=[{id:"START_ON",label:"Start on"}];let b=le(Ct,{});this.form=e.group({name:["",_.required],start:[ae.toISOString(a.getMissionTime()),_.required],duration:["",_.required],tags:[[],[]],properties:e.group({backgroundColor:[b.backgroundColor,[]],backgroundColor_overrideBand:!1,borderColor:[b.borderColor,[]],borderColor_overrideBand:!1,borderWidth:[b.borderWidth,[]],borderWidth_overrideBand:!1,cornerRadius:[b.cornerRadius,[]],cornerRadius_overrideBand:!1,marginLeft:[b.marginLeft,[]],marginLeft_overrideBand:!1,textColor:[b.textColor,[]],textColor_overrideBand:!1,textSize:[b.textSize,[]],textSize_overrideBand:!1})}),this.updateDisabledState(),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.updateDisabledState()})}updateDisabledState(){let{controls:t}=this.propertiesGroup;for(let e in t)if(e.endsWith(zt)){let a=t[e.substring(0,e.length-zt.length)];t[e].value?a.enable({onlySelf:!0}):a.disable({onlySelf:!0})}}get propertiesGroup(){return this.form.controls.properties}save(){let t={type:this.data.type,name:this.form.value.name,start:ae.toISOString(this.form.value.start),duration:this.form.value.duration,tags:this.form.value.tags,properties:{}},{controls:e}=this.propertiesGroup;for(let a in e)if(a.endsWith(zt)&&e[a].value){let c=a.substring(0,a.length-zt.length);t.properties[c]=e[c].value}this.yamcs.yamcsClient.createTimelineItem(this.yamcs.instance,t).then(a=>this.dialogRef.close(a)).catch(a=>this.messageService.showError(a))}ngOnDestroy(){this.formSubscription?.unsubscribe()}};n.\u0275fac=function(e){return new(e||n)(u(he),u(Y),u(D),u(F),u(Ce))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],standalone:!0,features:[S],decls:37,vars:7,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["animationDuration","0ms",1,"small-tabs",3,"mat-stretch-tabs"],["label","General"],[2,"margin-top","1em"],["cdkFocusRegionstart","","type","text","formControlName","name",2,"width","100%"],[1,"half-break"],["dialogTitle","Tags"],["formControlName","tags"],["formControlName","duration"],[1,"section-divider","half-break"],["formControlName","start"],["label","Styles"],[3,"form"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"click","disabled"]],template:function(e,a){e&1&&(r(0,"h2",0),m(1),N(2,"lowercase"),o(),r(3,"mat-dialog-content")(4,"form",1)(5,"mat-tab-group",2)(6,"mat-tab",3)(7,"div",4)(8,"label"),m(9," Name"),s(10,"br")(11,"input",5),o(),s(12,"hr",6),r(13,"label"),m(14," Tags "),r(15,"ya-help",7),m(16," Tags allow to categorise items per band. Bands only show items for which one of the tags is matching. "),o(),s(17,"br")(18,"ya-tag-select",8),o(),s(19,"hr",6),r(20,"label"),m(21," Duration "),s(22,"ya-duration-input",9),o(),r(23,"div",10),s(24,"mat-divider"),o(),r(25,"label"),m(26," Start"),s(27,"br")(28,"ya-date-time-input",11),o()()(),r(29,"mat-tab",12)(30,"div",4),s(31,"app-item-styles",13),o()()()()(),r(32,"mat-dialog-actions",14)(33,"button",15),m(34,"CANCEL"),o(),r(35,"button",16),C("click",function(){return a.save()}),m(36,"SAVE"),o()()),e&2&&(d(),ee("Add ",L(2,5,a.data.type)," item"),d(3),p("formGroup",a.form),d(),p("mat-stretch-tabs",!1),d(26),p("form",a.form),d(4),p("disabled",!a.form.valid))},dependencies:[ft,y,ti,I,R,V,k,B,A,_e,et,it,tt,Q,kt,It,Pe,ct,Oe,ge],encapsulation:2,changeDetection:0});let i=n;return i})();var qn=i=>({c:i}),$n=()=>[];function zn(i,n){if(i&1){let l=j();r(0,"th",24)(1,"input",25),C("change",function(e){T(l);let a=h(2);return E(e?a.masterToggle():null)}),o()()}if(i&2){let l=h(2);d(),p("checked",l.selection.hasValue()&&l.isAllSelected())}}function Hn(i,n){if(i&1){let l=j();r(0,"td",26)(1,"input",27),C("click",function(e){return T(l),E(e.stopPropagation())})("change",function(e){let a=T(l).$implicit,c=h(2);return E(e?c.selection.toggle(a):null)}),o()()}if(i&2){let l=n.$implicit,t=h(2);d(),p("checked",t.selection.isSelected(l))}}function Wn(i,n){i&1&&(r(0,"th",28),m(1,"Label"),o())}function Un(i,n){if(i&1&&m(0),i&2){let l=h().$implicit;ee(" ",l.name," ")}}function Yn(i,n){i&1&&(r(0,"i"),m(1,"(none)"),o())}function Qn(i,n){if(i&1&&(r(0,"td",29)(1,"a",30),g(2,Un,1,1)(3,Yn,2,0,"i"),o()()),i&2){let l=n.$implicit,t=h(2);d(),p("routerLink",l.id)("queryParams",P(4,qn,t.yamcs.context)),d(),w(l.name?2:-1),d(),w(l.name?-1:3)}}function Jn(i,n){i&1&&(r(0,"th",28),m(1,"Tags"),o())}function Xn(i,n){if(i&1&&(r(0,"ya-label"),m(1),o()),i&2){let l=n.$implicit;d(),qe(l)}}function Kn(i,n){i&1&&m(0," - ")}function Zn(i,n){if(i&1&&(r(0,"td",29),He(1,Xn,2,1,"ya-label",null,ze),g(3,Kn,1,0),o()),i&2){let l=n.$implicit;d(),We(l.tags||yt(1,$n)),d(2),w(l.tags?-1:3)}}function eo(i,n){i&1&&(r(0,"th",28),m(1,"Start"),o())}function to(i,n){if(i&1&&(r(0,"td",29),m(1),N(2,"datetime"),o()),i&2){let l=n.$implicit;d(),ee(" ",L(2,1,l.start)||"-"," ")}}function io(i,n){i&1&&(r(0,"th",28),m(1,"Duration"),o())}function no(i,n){if(i&1&&(r(0,"td",29),m(1),o()),i&2){let l=n.$implicit;d(),ee(" ",l.duration," ")}}function oo(i,n){i&1&&(r(0,"th",28),m(1,"Type"),o())}function ro(i,n){if(i&1&&(r(0,"td",29),m(1),o()),i&2){let l=n.$implicit;d(),ee(" ",l.type," ")}}function ao(i,n){i&1&&s(0,"th",31)}function mo(i,n){i&1&&s(0,"td",29)}function lo(i,n){i&1&&s(0,"tr",32)}function so(i,n){if(i&1){let l=j();r(0,"tr",33),C("click",function(){let e=T(l).$implicit,a=h(2);return E(a.toggleOne(e))}),o()}if(i&2){let l=n.$implicit,t=h(2);Z("selected",t.selection.isSelected(l))}}function co(i,n){if(i&1&&(r(0,"table",7),O(1,8),g(2,zn,2,1,"th",9)(3,Hn,2,1,"td",10),G(),O(4,11),g(5,Wn,2,0,"th",12)(6,Qn,4,6,"td",13),G(),O(7,14),g(8,Jn,2,0,"th",15)(9,Zn,4,2,"td",16),G(),O(10,17),g(11,eo,2,0,"th",12)(12,to,3,3,"td",13),G(),O(13,18),g(14,io,2,0,"th",12)(15,no,2,1,"td",13),G(),O(16,19),g(17,oo,2,0,"th",12)(18,ro,2,1,"td",13),G(),O(19,20),g(20,ao,1,0,"th",21)(21,mo,1,0,"td",13),G(),g(22,lo,1,0,"tr",22)(23,so,1,2,"tr",23),o()),i&2){let l=h();p("dataSource",l.dataSource)("trackBy",l.tableTrackerFn),d(22),p("matHeaderRowDef",l.displayedColumns),d(),p("matRowDefColumns",l.displayedColumns)}}var Ni=(()=>{let n=class n{constructor(t,e,a,c){this.yamcs=t,this.messageService=a,this.dialog=c,this.displayedColumns=["select","name","tags","start","duration","type","actions"],this.tableTrackerFn=(f,b)=>b.id,this.dataSource=new Se,this.selection=new st(this.tableTrackerFn,!0,[]),e.setTitle("Timeline Items"),this.refreshData()}ngAfterViewInit(){this.dataSource.sort=this.sort}isAllSelected(){let t=this.selection.selected.length,e=this.dataSource.filteredData.length;return t===e&&e>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(t=>this.selection.select(t))}toggleOne(t){(!this.selection.isSelected(t)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(t)}deleteSelectedItems(){if(confirm("Are you sure you want to delete the selected items?"))for(let t of this.selection.selected)this.deleteItem(t.id,!1)}deleteItem(t,e=!0){(!e||confirm("Are you sure you want to delete the selected item?"))&&this.yamcs.yamcsClient.deleteTimelineItem(this.yamcs.instance,t).then(()=>this.refreshData()).catch(a=>this.messageService.showError(a))}isGroupDeleteEnabled(){return!this.selection.isEmpty()}openCreateItemDialog(t){this.dialog.open(Ht,{width:"600px",panelClass:"dialog-force-no-scrollbar",data:{type:t}}).afterClosed().subscribe(()=>this.refreshData())}refreshData(){this.yamcs.yamcsClient.getTimelineItems(this.yamcs.instance,{source:"rdb"}).then(t=>{this.selection.matchNewValues(t.items||[]),this.dataSource.data=t.items||[]}).catch(t=>this.messageService.showError(t))}};n.\u0275fac=function(e){return new(e||n)(u(D),u(q),u(F),u(Dt))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],viewQuery:function(e,a){if(e&1&&xe(se,5),e&2){let c;we(c=Te())&&(a.sort=c.first)}},standalone:!0,features:[S],decls:19,vars:4,consts:[["itemMenu","matMenu"],["mat-button","","color","primary",3,"matMenuTriggerFor"],[1,"ya-menu",3,"overlapTrigger"],["mat-menu-item","","matTooltipShowDelay","1000","matTooltip","Events are items that simply appear on the timeline",3,"click"],["mat-menu-item","","matTooltipShowDelay","1000","matTooltip","Activities are like events, but in addition have an execution status",3,"click"],["mat-button","","color","primary",3,"click","disabled"],[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["cdkColumnDef","tags"],["mat-header-cell","","mat-sort-header","",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["matColumnDef","start"],["matColumnDef","duration"],["matColumnDef","type"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"change","checked"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink","queryParams"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,a){if(e&1){let c=j();r(0,"app-instance-page")(1,"app-instance-toolbar"),m(2," Items \xA0\xA0\xA0 "),r(3,"button",1)(4,"mat-icon"),m(5,"add_circle_outline"),o(),m(6," Create item "),o(),r(7,"mat-menu",2,0)(9,"button",3),C("click",function(){return T(c),E(a.openCreateItemDialog("EVENT"))}),m(10," Event item "),o(),r(11,"button",4),C("click",function(){return T(c),E(a.openCreateItemDialog("ACTIVITY"))}),m(12," Activity item "),o()(),r(13,"button",5),C("click",function(){return T(c),E(a.deleteSelectedItems())}),r(14,"mat-icon"),m(15,"close"),o(),m(16," Delete "),o()(),r(17,"div",6),g(18,co,24,4,"table",7),o()()}if(e&2){let c=me(8);d(3),p("matMenuTriggerFor",c),d(4),p("overlapTrigger",!1),d(6),p("disabled",!a.isGroupDeleteEnabled()),d(5),w(a.dataSource?18:-1)}},dependencies:[z,$,y,X,Ie,Be,Ve,ke,re,wt,xt,Tt,se,nt,Ne,rt,mt,at,ot,lt,Le,Re,Ae,Fe,Et,Bt,Nt],encapsulation:2,changeDetection:0});let i=n;return i})();var po=i=>({c:i}),Li=(()=>{let n=class n{constructor(t,e,a,c,f){this.yamcs=a,this.messageService=c,this.router=f,t.setTitle("Configure Spacer"),this.form=e.group({name:"",description:"",properties:e.group({height:[Ot.height.defaultValue,[_.required]]})})}onConfirm(){let t=this.form.value;this.yamcs.yamcsClient.createTimelineBand(this.yamcs.instance,{name:t.name,description:t.description,type:"SPACER",shared:!0,properties:t.properties}).then(()=>this.router.navigateByUrl(`/timeline/bands?c=${this.yamcs.context}`)).catch(e=>this.messageService.showError(e))}};n.\u0275fac=function(e){return new(e||n)(u(q),u(Y),u(D),u(F),u(ne))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],standalone:!0,features:[S],decls:32,vars:6,consts:[["step","2"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"],[1,"section-divider"],[3,"form"],[1,"action-bar"],["routerLink","../..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"click","disabled"]],template:function(e,a){e&1&&(r(0,"app-instance-page")(1,"app-instance-toolbar"),m(2," Create band "),o(),s(3,"app-create-band-wizard-step",0),r(4,"div",1)(5,"form",2)(6,"label"),m(7," Label "),r(8,"span",3),m(9,"(optional)"),o(),s(10,"br")(11,"input",4),o(),s(12,"br"),r(13,"label"),m(14," Description "),r(15,"span",3),m(16,"(optional)"),o(),s(17,"br")(18,"textarea",5),o(),s(19,"br"),r(20,"div",6),s(21,"mat-divider"),o(),r(22,"h4"),m(23,"Styles"),o(),s(24,"app-spacer-styles",7),o(),r(25,"p"),m(26,"\xA0"),o(),r(27,"div",8)(28,"button",9),m(29," Cancel "),o(),r(30,"button",10),C("click",function(){return a.onConfirm()}),m(31," CREATE "),o()()()()),e&2&&(d(5),p("formGroup",a.form),d(19),p("form",a.form),d(4),p("queryParams",P(4,po,a.yamcs.context)),d(2),p("disabled",!a.form.valid))},dependencies:[be,z,$,y,I,R,V,k,B,A,X,Q,Gt],encapsulation:2,changeDetection:0});let i=n;return i})();var uo=i=>({c:i}),Ri=(()=>{let n=class n{constructor(t,e,a,c,f){this.yamcs=a,this.messageService=c,this.router=f,t.setTitle("Configure Time Ruler"),this.form=e.group({name:["",[_.required]],description:"",properties:e.group({timezone:["UTC",[_.required]]})})}onConfirm(){let t=this.form.value;this.yamcs.yamcsClient.createTimelineBand(this.yamcs.instance,{name:t.name,description:t.description,type:"TIME_RULER",shared:!0,properties:t.properties}).then(()=>this.router.navigateByUrl(`/timeline/bands?c=${this.yamcs.context}`)).catch(e=>this.messageService.showError(e))}};n.\u0275fac=function(e){return new(e||n)(u(q),u(Y),u(D),u(F),u(ne))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],standalone:!0,features:[S],decls:32,vars:5,consts:[["step","2"],[1,"form-content","ya-form"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name",2,"width","100%"],["formControlName","description","rows","3"],["formGroupName","properties"],["formControlName","timezone"],[1,"action-bar"],["routerLink","../..",1,"ya-button",3,"queryParams"],["type","submit",1,"ya-button","primary",3,"click","disabled"]],template:function(e,a){e&1&&(r(0,"app-instance-page")(1,"app-instance-toolbar"),m(2," Create band "),o(),s(3,"app-create-band-wizard-step",0),r(4,"div",1)(5,"form",2)(6,"label"),m(7," Label "),r(8,"span",3),m(9,"(required)"),o(),s(10,"br")(11,"input",4),o(),s(12,"br"),r(13,"label"),m(14," Description "),r(15,"span",3),m(16,"(optional)"),o(),s(17,"br")(18,"textarea",5),o(),O(19,6),s(20,"br"),r(21,"label"),m(22," Timezone"),s(23,"br")(24,"ya-timezone-select",7),o(),G(),o(),r(25,"p"),m(26,"\xA0"),o(),r(27,"div",8)(28,"button",9),m(29," Cancel "),o(),r(30,"button",10),C("click",function(){return a.onConfirm()}),m(31," CREATE "),o()()()()),e&2&&(d(5),p("formGroup",a.form),d(23),p("queryParams",P(3,uo,a.yamcs.context)),d(2),p("disabled",!a.form.valid))},dependencies:[be,z,$,y,I,R,V,k,B,A,fe,X,Vt],encapsulation:2,changeDetection:0});let i=n;return i})();var vt=class extends Lt{constructor(n,l){super(n.timeline),this.label=l.name,this.marginBottom=7,this.marginTop=7,this.lineSpacing=2,this.itemHeight=20,this.data={band:l}}};function fo(i,n){if(i&1&&s(0,"app-edit-item-band",6),i&2){let l=h(),t=h();p("form",t.form)("band",l)}}function ho(i,n){if(i&1&&s(0,"app-edit-spacer",6),i&2){let l=h(),t=h();p("form",t.form)("band",l)}}function Co(i,n){if(i&1&&s(0,"app-edit-time-ruler",6),i&2){let l=h(),t=h();p("form",t.form)("band",l)}}function _o(i,n){if(i&1&&s(0,"app-edit-command-band",6),i&2){let l=h(),t=h();p("form",t.form)("band",l)}}function go(i,n){if(i&1&&(r(0,"div",1)(1,"h2"),m(2,"Edit Band"),o(),r(3,"form",5),g(4,fo,1,2,"app-edit-item-band",6)(5,ho,1,2,"app-edit-spacer",6)(6,Co,1,2,"app-edit-time-ruler",6)(7,_o,1,2,"app-edit-command-band",6),o()()),i&2){let l=n,t=h();d(3),p("formGroup",t.form),d(),w(l.type==="ITEM_BAND"?4:-1),d(),w(l.type==="SPACER"?5:-1),d(),w(l.type==="TIME_RULER"?6:-1),d(),w(l.type==="COMMAND_BAND"?7:-1)}}var Ai=(()=>{let n=class n{constructor(t,e,a,c,f){this.dialogRef=t,this.yamcs=e,this.messageService=a,this.data=f,this.dirty$=new J(!1);let b=f.band;this.form=c.group({name:[b.name,[_.required]],description:[b.description||""],tags:[b.tags||[]],properties:c.group({})}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)})}doOnConfirm(){let t=this.form.value,e={name:t.name,description:t.description,shared:this.data.band.shared,tags:t.tags,properties:t.properties};this.yamcs.yamcsClient.updateTimelineBand(this.yamcs.instance,this.data.band.id,e).then(a=>this.dialogRef.close(a)).catch(a=>this.messageService.showError(a))}ngOnDestroy(){this.formSubscription?.unsubscribe()}};n.\u0275fac=function(e){return new(e||n)(u(he),u(D),u(F),u(Y),u(Ce))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],standalone:!0,features:[S],decls:11,vars:4,consts:[[1,"central-pane"],[1,"ya-form",2,"max-width","600px"],[1,"footer"],["mat-dialog-close","",1,"ya-button"],["type","submit",1,"ya-button","primary",3,"click","disabled"],["novalidate","","autocomplete","off",3,"formGroup"],[3,"form","band"]],template:function(e,a){if(e&1&&(r(0,"div",0),g(1,go,8,5,"div",1),o(),r(2,"div",2)(3,"mat-toolbar")(4,"mat-toolbar-row")(5,"button",3),m(6,"Cancel"),o(),m(7,"\xA0\xA0 "),r(8,"button",4),N(9,"async"),C("click",function(){return a.doOnConfirm()}),m(10," SAVE CHANGES "),o()()()()),e&2){let c;d(),w((c=a.data.band)?1:-1,c),d(7),p("disabled",!L(9,2,a.dirty$)||!a.form.valid)}},dependencies:[Rt,Pt,jt,qt,y,te,I,k,B,_e,Ze,Ke],styles:[".mat-mdc-dialog-container{border-radius:0;position:relative}.central-pane[_ngcontent-%COMP%]{position:absolute;inset:0 0 64px;overflow:auto;padding:24px}.footer[_ngcontent-%COMP%]{position:absolute;bottom:0;height:64px;left:0;right:0;border-top:1px solid #d3d3d3}"],changeDetection:0});let i=n;return i})();var Fi=(()=>{let n=class n{constructor(t,e,a,c,f){this.dialogRef=t,this.yamcs=e,this.messageService=c,this.data=f,this.dirty$=new J(!1);let b=f.view;this.form=a.group({name:[b.name,_.required],bands:[b.bands||[],[]]}),this.formSubscription=this.form.valueChanges.subscribe(()=>{this.dirty$.next(!0)})}onConfirm(){let t=this.form.value,e={name:t.name,bands:t.bands.map(c=>c.id)},a=this.data.view;this.yamcs.yamcsClient.updateTimelineView(this.yamcs.instance,a.id,e).then(c=>this.dialogRef.close(c)).catch(c=>this.messageService.showError(c))}ngOnDestroy(){this.formSubscription?.unsubscribe()}};n.\u0275fac=function(e){return new(e||n)(u(he),u(D),u(Y),u(F),u(Ce))},n.\u0275cmp=v({type:n,selectors:[["app-edit-view-dialog"]],standalone:!0,features:[S],decls:25,vars:4,consts:[[1,"ya-form",2,"max-width","600px"],["novalidate","","autocomplete","off",3,"formGroup"],[1,"hint"],["type","text","formControlName","name"],[1,"section-divider"],["formControlName","bands"],[1,"footer"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"click","disabled"]],template:function(e,a){e&1&&(r(0,"div",0)(1,"form",1)(2,"h2"),m(3,"Edit View"),o(),r(4,"label"),m(5," Name "),r(6,"span",2),m(7,"(required)"),o(),s(8,"br")(9,"input",3),o(),s(10,"br"),r(11,"div",4),s(12,"mat-divider"),o(),r(13,"h4"),m(14,"Bands"),o(),s(15,"app-band-multi-select",5),o()(),r(16,"div",6)(17,"mat-toolbar")(18,"mat-toolbar-row")(19,"button",7),m(20,"CANCEL"),o(),m(21,"\xA0\xA0 "),r(22,"button",8),N(23,"async"),C("click",function(){return a.onConfirm()}),m(24," SAVE CHANGES "),o()()()()),e&2&&(d(),p("formGroup",a.form),d(21),p("disabled",!L(23,2,a.dirty$)||!a.form.valid))},dependencies:[ut,y,te,I,R,V,k,B,A,_e,Q,Ze,Ke],styles:[".mat-mdc-dialog-container{border-radius:0;position:relative}.footer[_ngcontent-%COMP%]{position:absolute;bottom:0;height:64px;left:0;right:0;border-top:1px solid #d3d3d3}"],changeDetection:0});let i=n;return i})();var Pi=(()=>{let n=class n{constructor(t,e){this.dialogRef=t,this.data=e,this.date=new Me(null,[_.required]),this.data.date&&this.date.setValue(ae.toISOString(this.data.date))}select(){let t=ae.toDate(this.date.value);this.dialogRef.close({date:t})}};n.\u0275fac=function(e){return new(e||n)(u(he),u(Ce))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],standalone:!0,features:[S],decls:11,vars:1,consts:[["mat-dialog-title",""],[1,"ya-form"],[3,"formControl"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"click"]],template:function(e,a){e&1&&(r(0,"h2",0),m(1,"Jump to date"),o(),r(2,"mat-dialog-content",1)(3,"label"),m(4," Date "),s(5,"ya-date-time-input",2),o()(),r(6,"mat-dialog-actions",3)(7,"button",4),m(8,"CANCEL"),o(),r(9,"button",5),C("click",function(){return a.select()}),m(10,"OK"),o()()),e&2&&(d(5),p("formControl",a.date))},dependencies:[y,V,ni,_e,et,it,tt,Pe],encapsulation:2,changeDetection:0});let i=n;return i})();var Wt=class extends Ci{constructor(n,l){super(n.timeline),this.contentHeight=20,this.label=l.name,this.timezone=l.properties.timezone,this.data={band:l}}};var bo=["container"],Oi=i=>({c:i});function vo(i,n){if(i&1&&(r(0,"button",10),m(1),N(2,"async"),o()),i&2){let l;h();let t=me(3),e=h();p("matMenuTriggerFor",t),d(),ee(" ",((l=L(2,2,e.view$))==null?null:l.name)||"select view"," \u25BE ")}}function So(i,n){if(i&1){let l=j();r(0,"button",13),C("click",function(){let e=T(l).$implicit,a=h(2);return E(a.switchView(e))}),m(1),o()}if(i&2){let l=n.$implicit;d(),ee(" ",l.name," ")}}function yo(i,n){if(i&1&&(g(0,vo,3,4,"button",10),N(1,"async"),r(2,"mat-menu",4,1),He(4,So,2,1,"button",11,ze),s(6,"mat-divider"),r(7,"a",12)(8,"mat-icon"),m(9,"add_circle_outline"),o(),m(10," Create view "),o()()),i&2){let l=h();w(L(1,2,l.view$)&&l.mayControlTimeline()?0:-1),d(4),We(n),d(3),p("queryParams",P(4,Oi,l.yamcs.context))}}function xo(i,n){if(i&1&&(r(0,"a",14)(1,"mat-icon"),m(2,"add_circle_outline"),o(),m(3," Create view "),o()),i&2){let l=h(2);p("queryParams",P(1,Oi,l.yamcs.context))}}function wo(i,n){if(i&1){let l=j();r(0,"button",20),C("click",function(){let e=T(l),a=h(2);return E(a.openEditViewDialog(e))}),r(1,"mat-icon"),m(2,"settings"),o(),m(3," Edit view "),o()}}function To(i,n){if(i&1&&(r(0,"button",16)(1,"mat-icon"),m(2,"add_circle_outline"),o(),m(3," Add item "),o()),i&2){h();let l=me(7);p("matMenuTriggerFor",l)}}function Eo(i,n){if(i&1){let l=j();r(0,"button",20),C("click",function(){T(l);let e=h(2);return E(e.saveSnapshot())}),r(1,"mat-icon"),m(2,"photo_camera"),o(),m(3," Save snapshot "),o()}}function Do(i,n){if(i&1){let l=j();g(0,xo,4,3,"a",14),N(1,"async"),g(2,wo,4,0,"button",15),N(3,"async"),g(4,To,4,1,"button",16),N(5,"async"),r(6,"mat-menu",17,2)(8,"button",18),C("click",function(){T(l);let e=h();return E(e.openCreateItemDialog("EVENT"))}),m(9," Event item "),o(),r(10,"button",19),C("click",function(){T(l);let e=h();return E(e.openCreateItemDialog("ACTIVITY"))}),m(11," Activity item "),o()(),g(12,Eo,4,0,"button",15),N(13,"async")}if(i&2){let l,t=h();w(L(1,5,t.view$)?-1:0),d(2),w((l=L(3,7,t.view$))?2:-1,l),d(2),w(L(5,9,t.view$)?4:-1),d(2),p("overlapTrigger",!1),d(6),w(L(13,11,t.view$)?12:-1)}}function Mo(i,n){if(i&1&&(r(0,"span"),m(1),N(2,"datetime"),N(3,"datetime"),o()),i&2){let l=n;d(),Kt(" ",ei(2,2,l==null?null:l.start,!1)," \u2013 ",L(3,5,l==null?null:l.stop)," ")}}var Gi=(()=>{let n=class n{constructor(t,e,a,c,f,b,x,M){this.yamcs=e,this.dialog=a,this.messageService=c,this.route=f,this.router=b,this.authService=x,this.synchronizer=M,this.views$=new J([]),this.view$=new J(null),this.viewportRange$=new J(null),this.bands=[],this.subscriptions=[],t.setTitle("Timeline Chart")}ngAfterViewInit(){let t=this.route.snapshot.queryParamMap,e=t.get("view");if(this.yamcs.yamcsClient.getTimelineViews(this.yamcs.instance).then(c=>{this.views$.next(c.views||[]);let f=null;for(let b of c.views||[])if(e===b.id){f=b;break}!f&&!e&&(f=c.views?.length?c.views[0]:null),f&&this.switchView(f)}),this.timeline=new ui(this.container.nativeElement),this.timeline.addViewportChangeListener(c=>{this.viewportRange$.next({start:new Date(c.start),stop:new Date(c.stop)})}),this.viewportRange$.pipe(Jt(400)).forEach(c=>{this.refreshData(),this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParamsHandling:"merge",queryParams:{start:c.start.toISOString(),stop:c.stop.toISOString()}})}),t.get("start")&&t.get("stop")){let c=ae.toDate(t.get("start")),f=ae.toDate(t.get("stop"));this.timeline.setViewRange(c.getTime(),f.getTime())}else{let c=this.yamcs.getMissionTime();c.setUTCHours(0,0,0,0);let f=new Date(c.getTime());f.setUTCDate(c.getUTCDate()+1),this.timeline.setViewRange(c.getTime(),f.getTime())}let a=new fi(this.timeline);a.time=this.yamcs.getMissionTime().getTime(),this.subscriptions.push(this.synchronizer.sync(()=>{a.time=this.yamcs.getMissionTime().getTime()})),new hi(this.timeline),this.refreshData()}refreshView(){let t=this.view$.value;t&&this.yamcs.yamcsClient.getTimelineView(this.yamcs.instance,t.id).then(e=>this.switchView(e)).catch(e=>this.messageService.showError(e))}switchView(t){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{view:t?.id||null},queryParamsHandling:"merge"}),this.view$.next(t);for(let e of this.timeline.getBands())this.timeline.removeChild(e);if(t){for(let e of t.bands||[])if(e.type==="TIME_RULER"){let a=new Wt(this,e);this.bands.push(a),this.installBandListeners(a)}else if(e.type==="ITEM_BAND"){let a=new bt(this,e,this.dialog);this.bands.push(a),this.installBandListeners(a)}else if(e.type==="SPACER"){let a=new Ut(this.timeline);this.bands.push(a)}else if(e.type==="COMMAND_BAND"){let a=new vt(this,e);this.bands.push(a),this.installBandListeners(a)}this.refreshData()}}installBandListeners(t){t.addHeaderClickListener(e=>{let a=e.band.data.band;this.dialog.open(Ai,{width:"70%",height:"100%",autoFocus:!1,position:{right:"0"},panelClass:"dialog-full-size",data:{band:a}}).afterClosed().subscribe(f=>{f&&this.refreshView()})})}refreshData(){let t=[],e=[],a=this.timeline.stop-this.timeline.start,c=this.timeline.start-a,f=this.timeline.stop+a;for(let b of this.bands)b instanceof bt?(t.push(b),e.push(this.yamcs.yamcsClient.getTimelineItems(this.yamcs.instance,{source:"rdb",band:b.data.band.id,start:new Date(c).toISOString(),stop:new Date(f).toISOString()}))):b instanceof vt&&(t.push(b),e.push(this.yamcs.yamcsClient.getTimelineItems(this.yamcs.instance,{source:"commands",band:b.data.band.id,start:new Date(c).toISOString(),stop:new Date(f).toISOString()})));e.length&&Promise.all(e).then(b=>{for(let x=0;x<b.length;x++){let M=t[x];this.populateItems(M,b[x].items||[])}}).catch(b=>this.messageService.showError(b))}populateItems(t,e){let a=[];for(let c of e){let f=ae.toDate(c.start).getTime(),b=ae.convertProtoDurationToMillis(c.duration),x={start:f,stop:b?f+b:void 0,label:c.name,data:{item:c}},{properties:M}=c;if(M&&("backgroundColor"in M&&(x.background=M.backgroundColor),"borderColor"in M&&(x.borderColor=M.borderColor),"borderWidth"in M&&(x.borderWidth=Number(M.borderWidth)),"cornerRadius"in M&&(x.cornerRadius=Number(M.cornerRadius)),"marginLeft"in M&&(x.marginLeft=Number(M.marginLeft)),"textColor"in M&&(x.textColor=M.textColor),"textSize"in M&&(x.textSize=Number(M.textSize))),c.status)switch(c.status){case"COMPLETED":x.label=x.label?x.label+" \u2713":"\u2713";break;case"FAILED":x.label=x.label?x.label+" \u2717":"\u2717";break;case"PLANNED":case"IN_PROGRESS":x.label=x.label?x.label+" \u25F7":"\u25F7";break;case"ABORTED":x.label=x.label?x.label+" \u23F9":"\u23F9";break}a.push(x)}t.items=a}openCreateItemDialog(t){this.dialog.open(Ht,{width:"600px",panelClass:"dialog-force-no-scrollbar",data:{type:t}}).afterClosed().subscribe(()=>this.refreshData())}openEditViewDialog(t){this.dialog.open(Fi,{width:"70%",height:"100%",panelClass:"dialog-full-size",autoFocus:!1,position:{right:"0"},data:{view:t}}).afterClosed().subscribe(e=>{e&&this.switchView(e)})}toggleMove(t){this.timeline.panBy(t),window.clearInterval(this.moveInterval),this.moveInterval=window.setInterval(()=>this.timeline.panBy(t),50)}untoggleMove(){window.clearInterval(this.moveInterval),this.moveInterval=void 0}pageLeft(){let{start:t,stop:e}=this.timeline,a=this.timeline.distanceBetween(t,e);this.timeline.panBy(-a)}pageRight(){let{start:t,stop:e}=this.timeline,a=this.timeline.distanceBetween(t,e);this.timeline.panBy(a)}zoomIn(){this.timeline.zoomIn()}zoomOut(){this.timeline.zoomOut()}jumpToToday(){let t=this.yamcs.getMissionTime();t.setUTCHours(0,0,0,0);let e=t.getTime();t.setUTCDate(t.getUTCDate()+1);let a=t.getTime();this.timeline.setViewRange(e,a)}jumpToNow(){let t=this.yamcs.getMissionTime();this.timeline.panTo(t.getTime())}openJumpToDialog(){let t=this.timeline.center;this.dialog.open(Pi,{width:"400px",data:{date:new Date(t)}}).afterClosed().subscribe(e=>{e&&this.timeline.panTo(e.date.getTime())})}saveSnapshot(){let t=document.createElement("a");try{t.href=this.timeline.toDataURL(),t.download="timeline_"+this.view$.value.name+"_export.png",document.body.appendChild(t),t.click()}finally{document.body.removeChild(t)}}mayControlTimeline(){return this.authService.getUser().hasSystemPrivilege("ControlTimeline")}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.timeline.disconnect()}};n.\u0275fac=function(e){return new(e||n)(u(q),u(D),u(Dt),u(F),u(De),u(ne),u(li),u(mi))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],viewQuery:function(e,a){if(e&1&&xe(bo,7),e&2){let c;we(c=Te())&&(a.container=c.first)}},standalone:!0,features:[S],decls:43,vars:8,consts:[["container",""],["viewMenu","matMenu"],["itemMenu","matMenu"],[3,"noscroll"],[1,"ya-menu"],[2,"height","24px","margin","6px"],[1,"ya-button",3,"click"],[1,"ya-button",3,"mousedown","mouseup","mouseleave"],[1,"timeline-container"],[1,"info"],["mat-button","",3,"matMenuTriggerFor"],["mat-menu-item",""],["mat-menu-item","","routerLink","/timeline/views/create",3,"queryParams"],["mat-menu-item","",3,"click"],["mat-button","","color","primary","routerLink","/timeline/views/create",3,"queryParams"],["mat-button","","color","primary"],["mat-button","","color","primary",3,"matMenuTriggerFor"],[1,"ya-menu",3,"overlapTrigger"],["mat-menu-item","","matTooltipShowDelay","1000","matTooltip","Events are items that simply appear on the timeline",3,"click"],["mat-menu-item","","matTooltipShowDelay","1000","matTooltip","Activities are like events, but in addition have an execution status",3,"click"],["mat-button","","color","primary",3,"click"]],template:function(e,a){if(e&1){let c=j();r(0,"app-instance-page",3)(1,"app-instance-toolbar"),m(2," Timeline Chart \xA0\xA0\xA0 "),g(3,yo,11,6,"mat-menu",4),N(4,"async"),g(5,Do,14,13),o(),r(6,"div",5)(7,"button",6),C("click",function(){return T(c),E(a.pageLeft())}),r(8,"mat-icon"),m(9,"west"),o()(),r(10,"button",7),C("mousedown",function(){return T(c),E(a.toggleMove(-50))})("mouseup",function(){return T(c),E(a.untoggleMove())})("mouseleave",function(){return T(c),E(a.untoggleMove())}),r(11,"mat-icon"),m(12,"chevron_left"),o()(),r(13,"button",7),C("mousedown",function(){return T(c),E(a.toggleMove(50))})("mouseup",function(){return T(c),E(a.untoggleMove())})("mouseleave",function(){return T(c),E(a.untoggleMove())}),r(14,"mat-icon"),m(15,"chevron_right"),o()(),r(16,"button",6),C("click",function(){return T(c),E(a.pageRight())}),r(17,"mat-icon"),m(18,"east"),o()(),m(19," \xA0 "),r(20,"button",6),C("click",function(){return T(c),E(a.jumpToToday())}),r(21,"mat-icon"),m(22,"today"),o(),m(23," Today "),o(),r(24,"button",6),C("click",function(){return T(c),E(a.jumpToNow())}),r(25,"mat-icon"),m(26,"my_location"),o()(),r(27,"button",6),C("click",function(){return T(c),E(a.openJumpToDialog())}),r(28,"mat-icon"),m(29,"directions"),o(),m(30," Jump to... "),o(),m(31," \xA0 "),r(32,"button",6),C("click",function(){return T(c),E(a.zoomIn())}),r(33,"mat-icon"),m(34,"add"),o()(),r(35,"button",6),C("click",function(){return T(c),E(a.zoomOut())}),r(36,"mat-icon"),m(37,"remove"),o()()(),s(38,"div",8,0),r(40,"div",9),g(41,Mo,4,7,"span"),N(42,"async"),o()()}if(e&2){let c,f;p("noscroll",!0),d(3),w((c=L(4,4,a.views$))?3:-1,c),d(2),w(a.mayControlTimeline()?5:-1),d(36),w((f=L(42,6,a.viewportRange$))?41:-1,f)}},dependencies:[z,$,y,te,X,Je,ke,re,Q,wt,xt,Tt,Et,Nt],styles:[".timeline-container[_ngcontent-%COMP%]{line-height:0;border-top:1px solid #d1d5da;position:absolute;inset:36px 0 0}.info[_ngcontent-%COMP%]{position:absolute;bottom:35px;right:0;padding:0 16px;opacity:.75;font-size:small}"],changeDetection:0});let i=n;return i})();var ji=i=>({c:i});function ko(i,n){if(i&1){let l=j();r(0,"th",16)(1,"input",17),C("change",function(e){T(l);let a=h(2);return E(e?a.masterToggle():null)}),o()()}if(i&2){let l=h(2);d(),p("checked",l.selection.hasValue()&&l.isAllSelected())}}function Io(i,n){if(i&1){let l=j();r(0,"td",18)(1,"input",19),C("click",function(e){return T(l),E(e.stopPropagation())})("change",function(e){let a=T(l).$implicit,c=h(2);return E(e?c.selection.toggle(a):null)}),o()()}if(i&2){let l=n.$implicit,t=h(2);d(),p("checked",t.selection.isSelected(l))}}function Bo(i,n){i&1&&(r(0,"th",20),m(1,"Label"),o())}function Vo(i,n){if(i&1&&(r(0,"td",21)(1,"a",22),m(2),o()()),i&2){let l=n.$implicit,t=h(2);d(),p("routerLink",l.id)("queryParams",P(3,ji,t.yamcs.context)),d(),ee(" ",l.name," ")}}function No(i,n){i&1&&(r(0,"th",23),m(1,"Description"),o())}function Lo(i,n){if(i&1&&(r(0,"td",21),m(1),o()),i&2){let l=n.$implicit;d(),ee(" ",l.description||"-"," ")}}function Ro(i,n){i&1&&s(0,"th",24)}function Ao(i,n){i&1&&s(0,"td",21)}function Fo(i,n){i&1&&s(0,"tr",25)}function Po(i,n){if(i&1){let l=j();r(0,"tr",26),C("click",function(){let e=T(l).$implicit,a=h(2);return E(a.toggleOne(e))}),o()}if(i&2){let l=n.$implicit,t=h(2);Z("selected",t.selection.isSelected(l))}}function Oo(i,n){if(i&1&&(r(0,"table",3),O(1,4),g(2,ko,2,1,"th",5)(3,Io,2,1,"td",6),G(),O(4,7),g(5,Bo,2,0,"th",8)(6,Vo,3,5,"td",9),G(),O(7,10),g(8,No,2,0,"th",11)(9,Lo,2,1,"td",9),G(),O(10,12),g(11,Ro,1,0,"th",13)(12,Ao,1,0,"td",9),G(),g(13,Fo,1,0,"tr",14)(14,Po,1,2,"tr",15),o()),i&2){let l=h();p("dataSource",l.dataSource)("trackBy",l.tableTrackerFn),d(13),p("matHeaderRowDef",l.displayedColumns),d(),p("matRowDefColumns",l.displayedColumns)}}var qi=(()=>{let n=class n{constructor(t,e,a){this.yamcs=t,this.messageService=a,this.displayedColumns=["select","name","description","actions"],this.tableTrackerFn=(c,f)=>f.id,this.dataSource=new Se,this.selection=new st(this.tableTrackerFn,!0,[]),e.setTitle("Timeline Views"),this.refreshData()}ngAfterViewInit(){this.dataSource.sort=this.sort}isAllSelected(){let t=this.selection.selected.length,e=this.dataSource.filteredData.length;return t===e&&e>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(t=>this.selection.select(t))}toggleOne(t){(!this.selection.isSelected(t)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(t)}deleteSelectedViews(){if(confirm("Are you sure you want to delete the selected views?"))for(let t of this.selection.selected)this.deleteView(t.id,!1)}deleteView(t,e=!0){(!e||confirm("Are you sure you want to delete the selected view?"))&&this.yamcs.yamcsClient.deleteTimelineView(this.yamcs.instance,t).then(()=>this.refreshData()).catch(a=>this.messageService.showError(a))}isGroupDeleteEnabled(){return!this.selection.isEmpty()}refreshData(){this.yamcs.yamcsClient.getTimelineViews(this.yamcs.instance).then(t=>{this.selection.matchNewValues(t.views||[]),this.dataSource.data=t.views||[]}).catch(t=>this.messageService.showError(t))}};n.\u0275fac=function(e){return new(e||n)(u(D),u(q),u(F))},n.\u0275cmp=v({type:n,selectors:[["ng-component"]],viewQuery:function(e,a){if(e&1&&xe(se,5),e&2){let c;we(c=Te())&&(a.sort=c.first)}},standalone:!0,features:[S],decls:13,vars:5,consts:[["mat-button","","color","primary","routerLink","create",3,"queryParams"],["mat-button","","color","primary",3,"click","disabled"],[1,"panel-content"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"change","checked"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"routerLink","queryParams"],["mat-header-cell",""],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,a){e&1&&(r(0,"app-instance-page")(1,"app-instance-toolbar"),m(2," Views \xA0\xA0\xA0 "),r(3,"a",0)(4,"mat-icon"),m(5,"add_circle_outline"),o(),m(6," Create view "),o(),r(7,"button",1),C("click",function(){return a.deleteSelectedViews()}),r(8,"mat-icon"),m(9,"close"),o(),m(10," Delete "),o()(),r(11,"div",2),g(12,Oo,15,4,"table",3),o()()),e&2&&(d(3),p("queryParams",P(3,ji,a.yamcs.context)),d(4),p("disabled",!a.isGroupDeleteEnabled()),d(5),w(a.dataSource?12:-1))},dependencies:[z,$,y,X,Ie,Be,Ve,Je,ke,re,se,nt,Ne,rt,mt,at,ot,lt,Le,Re,Ae,Fe],encapsulation:2,changeDetection:0});let i=n;return i})();var wl=[{path:"",canActivate:[ci,si],canActivateChild:[di],runGuardsAndResolvers:"always",component:pi,children:[{path:"",pathMatch:"full",redirectTo:"chart"},{path:"chart",component:Gi},{path:"views",pathMatch:"full",component:qi},{path:"views/create",pathMatch:"full",component:wi},{path:"views/:view",pathMatch:"full",component:Bi},{path:"bands",pathMatch:"full",component:bi},{path:"bands/create",pathMatch:"full",component:yi},{path:"bands/create/item-band",pathMatch:"full",component:Vi},{path:"bands/create/spacer",pathMatch:"full",component:Li},{path:"bands/create/time-ruler",pathMatch:"full",component:Ri},{path:"bands/create/command-band",pathMatch:"full",component:Si},{path:"bands/:band",pathMatch:"full",component:Mi},{path:"items",pathMatch:"full",component:Ni},{path:"items/:item",pathMatch:"full",component:ki}]}];export{wl as ROUTES};
