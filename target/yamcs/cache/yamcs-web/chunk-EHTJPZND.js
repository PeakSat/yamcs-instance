import{a as It}from"./chunk-P3QPVXNS.js";import{a as At}from"./chunk-7QLPMAWZ.js";import{Aa as c,Ae as he,Ba as B,Bb as ce,Ca as O,Db as G,Eb as se,Ed as Dt,F as S,Fc as Te,Ga as y,Gc as je,Ge as He,Ha as Ze,Hc as Oe,Ia as Z,Ib as ot,Ic as pt,Jb as me,Jc as ut,Jd as Mt,K as b,L as x,La as f,Ma as v,Mb as at,Na as L,Nb as de,Nc as ft,Oc as ht,Pc as _t,Qb as pe,Qc as Pe,Rc as gt,Re as j,Sc as Le,Tc as Ve,Uc as Ae,V as ve,Vb as rt,Ve as w,Wc as Ie,We as Pt,X as s,Xc as Fe,Xe as Lt,Y as u,Yb as ue,Yd as Ne,Ye as Vt,Zc as Re,Zd as Bt,_a as W,_b as Y,_c as Ct,_d as We,aa as _,ad as bt,ae as Et,bc as De,bd as $e,be as Tt,ca as d,da as ke,db as et,dd as ze,e as U,ea as P,eb as tt,ed as Ue,fc as Me,ga as D,ha as ee,hc as lt,ia as te,ib as oe,ic as Be,id as xt,ja as ie,jd as vt,ka as r,kd as kt,la as a,lb as it,le as jt,ma as g,mb as ae,mc as ct,na as E,nb as re,nc as st,o as Ke,oa as T,ob as ye,oc as mt,p as Je,pb as H,pc as dt,qa as M,qb as nt,qc as A,ra as C,rc as I,sa as p,sc as Ee,sd as St,ta as Se,tc as F,td as yt,te as fe,ua as ne,uc as R,vc as $,wa as X,wb as we,wc as Q,xa as K,ya as J,yd as wt,za as N,zb as le,ze as Ot}from"./chunk-YLFXKKOP.js";var qt=[[["app-storage-toolbar"]],[["ya-detail-pane"]],"*"],Xt=["app-storage-toolbar","ya-detail-pane","*"],_e=(()=>{let n=class n{constructor(){this.noscroll=!1}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=S({type:n,selectors:[["app-storage-page"]],inputs:{noscroll:"noscroll"},standalone:!0,features:[y],ngContentSelectors:Xt,decls:4,vars:2,consts:[[1,"page-content"]],template:function(i,o){i&1&&(Se(qt),ne(0),r(1,"div",0),ne(2,1),ne(3,2),a()),i&2&&(s(),ke("overflow",o.noscroll?"hidden":"auto"))},dependencies:[w],styles:[".page-content[_ngcontent-%COMP%]{position:absolute;inset:49px 0 0;overflow:auto;font:400 12px/20px Roboto,sans-serif}"],changeDetection:0});let e=n;return e})();var Kt=["*"],ge=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=S({type:n,selectors:[["app-storage-toolbar"]],standalone:!0,features:[y],ngContentSelectors:Kt,decls:4,vars:0,consts:[[1,"top"],[2,"flex","1 1 auto"]],template:function(i,o){i&1&&(Se(),r(0,"mat-toolbar",0)(1,"mat-toolbar-row"),ne(2),g(3,"span",1),a()())},dependencies:[w,mt,st],styles:["mat-toolbar[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1);background-color:var(--y-background-color);box-sizing:content-box}mat-toolbar-row[_ngcontent-%COMP%]{padding-left:24px}.hide[_ngcontent-%COMP%]{visibility:hidden}.toolbar-text[_ngcontent-%COMP%]{font-size:12px}"],changeDetection:0});let e=n;return e})();var Ft=(()=>{let n=class n{constructor(t,i,o,m,h){this.dialogRef=t,this.data=m,this.messageService=h,this.storageClient=o.createStorageClient(),this.form=i.group({name:["",ce.required]})}save(){this.storageClient.createBucket({name:this.form.value.name}).then(()=>this.dialogRef.close(!0)).catch(t=>{this.dialogRef.close(!1),this.messageService.showError(t)})}};n.\u0275fac=function(i){return new(i||n)(u(A),u(ue),u(j),u(I),u(Ne))},n.\u0275cmp=S({type:n,selectors:[["app-create-bucket-dialog"]],standalone:!0,features:[y],decls:12,vars:2,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"click","disabled"]],template:function(i,o){i&1&&(r(0,"h2",0),c(1,"Create bucket"),a(),r(2,"mat-dialog-content")(3,"form",1)(4,"label"),c(5," Bucket name "),g(6,"input",2),a()()(),r(7,"mat-dialog-actions",3)(8,"button",4),c(9,"CANCEL"),a(),r(10,"button",5),C("click",function(){return o.save()}),c(11,"SAVE"),a()()),i&2&&(s(3),d("formGroup",o.form),s(7),d("disabled",!o.form.valid))},dependencies:[w,me,le,G,se,de,pe,F,R,Q,$],encapsulation:2});let e=n;return e})();var ti=e=>[e];function ii(e,n){if(e&1){let l=M();r(0,"button",26),C("click",function(){b(l);let i=p();return x(i.createBucket())}),r(1,"mat-icon"),c(2,"add_circle_outline"),a(),c(3," Create bucket "),a()}}function ni(e,n){if(e&1){let l=M();r(0,"button",27),C("click",function(){b(l);let i=p();return x(i.deleteSelectedBuckets())}),r(1,"mat-icon"),c(2,"delete"),a(),c(3," Delete "),a()}if(e&2){let l=p();d("disabled",!l.selection.hasValue())}}function oi(e,n){if(e&1){let l=M();r(0,"input",30),C("change",function(i){b(l);let o=p(2);return x(i?o.masterToggle():null)}),a()}if(e&2){let l=p(2);d("checked",l.selection.hasValue()&&l.isAllSelected())}}function ai(e,n){if(e&1&&(r(0,"th",28),_(1,oi,1,1,"input",29),a()),e&2){let l=p();s(),D(l.mayManageBuckets()?1:-1)}}function ri(e,n){if(e&1){let l=M();r(0,"input",32),C("click",function(i){return b(l),x(i.stopPropagation())})("change",function(i){b(l);let o=p().$implicit,m=p();return x(i?m.selection.toggle(o):null)}),a()}if(e&2){let l=p().$implicit,t=p();d("checked",t.selection.isSelected(l))}}function li(e,n){if(e&1&&(r(0,"td",31),_(1,ri,1,1,"input",29),a()),e&2){let l=p();s(),D(l.mayManageBuckets()?1:-1)}}function ci(e,n){e&1&&(r(0,"th",33),c(1,"Bucket"),a())}function si(e,n){if(e&1){let l=M();r(0,"td",34)(1,"mat-icon",35),c(2,"shopping_basket"),a(),r(3,"a",36),C("click",function(i){return b(l),x(i.stopPropagation())}),c(4),a()()}if(e&2){let l=n.$implicit;s(3),d("routerLink",Z(2,ti,l.name)),s(),B(l.name)}}function mi(e,n){e&1&&(r(0,"th",33),c(1,"Created"),a())}function di(e,n){if(e&1&&(r(0,"td",34),c(1),f(2,"datetime"),f(3,"nvl"),a()),e&2){let l=n.$implicit;s(),B(L(3,3,v(2,1,l.created),"-"))}}function pi(e,n){e&1&&(r(0,"th",37),c(1,"Used"),a())}function ui(e,n){if(e&1&&(r(0,"td",38),c(1),f(2,"formatBytes"),f(3,"nvl"),a()),e&2){let l=n.$implicit;s(),O(" ",L(3,3,v(2,1,l.size),"-")," ")}}function fi(e,n){e&1&&(r(0,"th",37),c(1," Available "),a())}function hi(e,n){if(e&1&&(r(0,"td",38),c(1),f(2,"formatBytes"),f(3,"nvl"),a()),e&2){let l=n.$implicit,t=p();s(),O(" ",L(3,3,v(2,1,t.zeroOrMore(l.maxSize-l.size)),"-")," ")}}function _i(e,n){e&1&&(r(0,"th",39),c(1,"Capacity"),a())}function gi(e,n){if(e&1&&(r(0,"td",34),g(1,"ya-progress",40),a()),e&2){let l=n.$implicit;s(),d("value",l.size)("total",l.maxSize)}}function Ci(e,n){e&1&&(r(0,"th",37),c(1,"Objects"),a())}function bi(e,n){if(e&1&&(r(0,"td",38),c(1),f(2,"number"),f(3,"nvl"),a()),e&2){let l=n.$implicit;s(),O(" ",L(3,3,v(2,1,l.numObjects),"-")," ")}}function xi(e,n){e&1&&(r(0,"th",37),c(1," Avail. objects "),a())}function vi(e,n){if(e&1&&(r(0,"td",38),c(1),f(2,"number"),f(3,"nvl"),a()),e&2){let l=n.$implicit,t=p();s(),O(" ",L(3,3,v(2,1,t.zeroOrMore(l.maxObjects-l.numObjects)),"-")," ")}}function ki(e,n){e&1&&(r(0,"th",39),c(1,"%objects"),a())}function Si(e,n){if(e&1&&(r(0,"td",34),g(1,"ya-progress",40),a()),e&2){let l=n.$implicit;s(),d("value",l.numObjects)("total",l.maxObjects)}}function yi(e,n){e&1&&g(0,"th",41)}function wi(e,n){if(e&1){let l=M();r(0,"ya-more")(1,"button",42),C("click",function(){b(l);let i=p().$implicit,o=p();return x(o.deleteBucket(i))}),c(2,"Delete bucket"),a()()}}function Di(e,n){if(e&1&&(r(0,"td",34),_(1,wi,3,0,"ya-more"),a()),e&2){let l=p();s(),D(l.mayManageBuckets()?1:-1)}}function Mi(e,n){e&1&&g(0,"tr",43)}function Bi(e,n){if(e&1){let l=M();r(0,"tr",44),C("click",function(){let i=b(l).$implicit,o=p();return x(o.toggleOne(i))}),a()}if(e&2){let l=n.$implicit,t=p();P("selected",t.selection.isSelected(l))}}var $t=(()=>{let n=class n{constructor(t,i,o,m,h,k,q){this.yamcs=t,this.dialog=i,this.router=o,this.route=m,this.messageService=h,this.authService=k,this.filterControl=new ot,this.displayedColumns=["select","name","created","size","avail","capacity","numObjects","availObjects","pctObjects","actions"],this.dataSource=new Ue,this.selection=new we(!0,[]),q.setTitle("Buckets"),this.storageClient=this.yamcs.createStorageClient(),this.initializeOptions(),this.refreshView()}ngAfterViewInit(){this.dataSource.sort=this.sort}initializeOptions(){let t=this.route.snapshot.queryParamMap;t.has("filter")&&(this.filterControl.setValue(t.get("filter")),this.dataSource.filter=t.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let i=this.filterControl.value||"";this.dataSource.filter=i.toLowerCase();for(let o of this.selection.selected)this.dataSource.filteredData.indexOf(o)===-1&&this.selection.deselect(o)})}isAllSelected(){let t=this.selection.selected.length,i=this.dataSource.filteredData.length;return t===i&&i>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(t=>this.selection.select(t))}toggleOne(t){(!this.selection.isSelected(t)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(t)}createBucket(){this.dialog.open(Ft,{width:"400px"}).afterClosed().subscribe(i=>{i&&this.refreshView()})}zeroOrMore(t){return Math.max(0,t)}mayManageBuckets(){return this.authService.getUser().hasSystemPrivilege("ManageAnyBucket")}deleteSelectedBuckets(){if(confirm("Are you sure you want to delete the selected buckets?")){let t=[];for(let i of this.selection.selected){let o=this.storageClient.deleteBucket(i.name);t.push(o)}Promise.all(t).then(()=>{this.selection.clear(),this.refreshView()})}}deleteBucket(t){confirm(`Are you sure you want to delete the bucket ${t.name}?`)&&this.storageClient.deleteBucket(t.name).then(()=>{this.selection.clear(),this.refreshView()}).catch(i=>this.messageService.showError(i))}selectNext(){let t=this.dataSource.filteredData,i=0;if(this.selection.hasValue()){let o=this.selection.selected[this.selection.selected.length-1];t.indexOf(o)!==-1&&(i=Math.min(t.indexOf(o)+1,t.length-1))}this.selection.clear(),this.selection.select(t[i])}selectPrevious(){let t=this.dataSource.filteredData,i=0;if(this.selection.hasValue()){let o=this.selection.selected[0];t.indexOf(o)!==-1&&(i=Math.max(t.indexOf(o)-1,0))}this.selection.clear(),this.selection.select(t[i])}applySelection(){if(this.selection.hasValue()&&this.selection.selected.length===1){let t=this.selection.selected[0];this.router.navigate(["/buckets",t.name])}}refreshView(){this.updateURL(),this.storageClient.getBuckets().then(t=>{this.dataSource.data=t}).catch(t=>this.messageService.showError(t))}updateURL(){let t=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:t||null},queryParamsHandling:"merge"})}};n.\u0275fac=function(i){return new(i||n)(u(j),u(Ee),u(ye),u(ae),u(Ne),u(Pt),u(oe))},n.\u0275cmp=S({type:n,selectors:[["ng-component"]],viewQuery:function(i,o){if(i&1&&X(Pe,7),i&2){let m;K(m=J())&&(o.sort=m.first)}},standalone:!0,features:[y],decls:41,vars:6,consts:[["mat-button","","color","primary"],["mat-button","","color","primary",3,"disabled"],[1,"panel-content"],[1,"filter-bar"],["placeholder","Filter buckets",3,"onArrowDown","onArrowUp","onEnter","formControl"],["mat-table","","matSort","","matSortActive","name","matSortDirection","asc","matSortDisableClear","",1,"ya-data-table","expand",3,"dataSource"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","created"],["matColumnDef","size"],["mat-header-cell","","mat-sort-header","","style","text-align: right",4,"matHeaderCellDef"],["mat-cell","","style","text-align: right",4,"matCellDef"],["matColumnDef","avail"],["matColumnDef","capacity"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","numObjects"],["matColumnDef","availObjects"],["matColumnDef","pctObjects"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","click",4,"matRowDef","matRowDefColumns"],["mat-button","","color","primary",3,"click"],["mat-button","","color","primary",3,"click","disabled"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"checked"],["type","checkbox",3,"change","checked"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"icon12",2,"vertical-align","middle","margin-right","7px"],[3,"click","routerLink"],["mat-header-cell","","mat-sort-header","",2,"text-align","right"],["mat-cell","",2,"text-align","right"],["mat-header-cell",""],[3,"value","total"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,o){i&1&&(r(0,"app-storage-page")(1,"app-storage-toolbar"),c(2," Storage \xA0\xA0\xA0 "),_(3,ii,4,0,"button",0)(4,ni,4,1,"button",1),a(),r(5,"div",2)(6,"div",3)(7,"ya-search-filter",4),C("onArrowDown",function(){return o.selectNext()})("onArrowUp",function(){return o.selectPrevious()})("onEnter",function(){return o.applySelection()}),a()(),r(8,"table",5),E(9,6),_(10,ai,2,1,"th",7)(11,li,2,1,"td",8),T(),E(12,9),_(13,ci,2,0,"th",10)(14,si,5,4,"td",11),T(),E(15,12),_(16,mi,2,0,"th",10)(17,di,4,6,"td",11),T(),E(18,13),_(19,pi,2,0,"th",14)(20,ui,4,6,"td",15),T(),E(21,16),_(22,fi,2,0,"th",14)(23,hi,4,6,"td",15),T(),E(24,17),_(25,_i,2,0,"th",18)(26,gi,2,2,"td",11),T(),E(27,19),_(28,Ci,2,0,"th",14)(29,bi,4,6,"td",15),T(),E(30,20),_(31,xi,2,0,"th",14)(32,vi,4,6,"td",15),T(),E(33,21),_(34,ki,2,0,"th",18)(35,Si,2,2,"td",11),T(),E(36,22),_(37,yi,1,0,"th",23)(38,Di,2,1,"td",11),T(),_(39,Mi,1,0,"tr",24)(40,Bi,1,2,"tr",25),a()()()),i&2&&(s(3),D(o.mayManageBuckets()?3:-1),s(),D(o.mayManageBuckets()?4:-1),s(3),d("formControl",o.filterControl),s(),d("dataSource",o.dataSource),s(31),d("matHeaderRowDef",o.displayedColumns),s(),d("matRowDefColumns",o.displayedColumns))},dependencies:[w,tt,G,at,H,Te,je,Oe,Me,Y,De,Pe,gt,Le,Ae,Ct,Ie,Ve,bt,Fe,Re,$e,ze,We,Et,Tt,fe,he,He,_e,ge],encapsulation:2,changeDetection:0});let e=n;return e})();var Ei=e=>["/storage/buckets",e,"objects"],Ti=e=>["/storage/buckets",e,"properties"],Ye=(()=>{let n=class n{constructor(t){this.yamcs=t}};n.\u0275fac=function(i){return new(i||n)(u(j))},n.\u0275cmp=S({type:n,selectors:[["app-bucket-page-tabs"]],inputs:{bucket:"bucket"},standalone:!0,features:[y],decls:10,vars:10,consts:[["rla","routerLinkActive"],["rlb","routerLinkActive"],["tabPanel",""],["mat-tab-nav-bar","",1,"secondary",3,"mat-stretch-tabs","tabPanel"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"]],template:function(i,o){if(i&1&&(r(0,"nav",3)(1,"a",4,0),c(3," Objects "),a(),r(4,"a",4,1),c(6," Properties "),a()(),r(7,"mat-tab-nav-panel",null,2),g(9,"router-outlet"),a()),i&2){let m=N(2),h=N(5),k=N(8);d("mat-stretch-tabs",!1)("tabPanel",k),s(),d("routerLink",Z(6,Ei,o.bucket))("active",m.isActive),s(3),d("routerLink",Z(8,Ti,o.bucket))("active",h.isActive)}},dependencies:[w,re,H,nt,xt,kt,vt],styles:[".mat-mdc-tab-link[_ngcontent-%COMP%]{height:36px;min-width:0;font-size:13px}"],changeDetection:0});let e=n;return e})();var zt=(()=>{let n=class n{constructor(t,i,o,m){this.dialogRef=t,this.data=m,this.storageClient=o.createStorageClient(),this.form=i.group({name:["",ce.required]})}save(){let{path:t,bucket:i}=this.data;t.startsWith("/")&&(t=t.substring(1));let o=this.form.value.name,m=t?`${t}/${o}/`:`${o}/`;this.storageClient.uploadObject(i,m,new Blob).then(()=>this.dialogRef.close(!0))}};n.\u0275fac=function(i){return new(i||n)(u(A),u(ue),u(j),u(I))},n.\u0275cmp=S({type:n,selectors:[["app-create-bucket-folder-dialog"]],standalone:!0,features:[y],decls:12,vars:2,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name","pattern","\\w[\\w\\s\\.\\-\\(\\)\\[\\]]*"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"click","disabled"]],template:function(i,o){i&1&&(r(0,"h2",0),c(1,"Create folder"),a(),r(2,"mat-dialog-content")(3,"form",1)(4,"label"),c(5," Folder name "),g(6,"input",2),a()()(),r(7,"mat-dialog-actions",3)(8,"button",4),c(9,"CANCEL"),a(),r(10,"button",5),C("click",function(){return o.save()}),c(11,"CREATE"),a()()),i&2&&(s(3),d("formGroup",o.form),s(7),d("disabled",!o.form.valid))},dependencies:[w,me,le,G,se,rt,de,pe,F,R,Q,$],encapsulation:2,changeDetection:0});let e=n;return e})();var Ut=(()=>{let n=class n{constructor(t,i,o,m){this.dialogRef=t,this.data=m,this.storageClient=o.createStorageClient();let h=wt.getFilename(this.data.name);this.filenameForm=i.group({name:[h,[ce.required]]})}async rename(){let t,i=this.data.name.lastIndexOf("/");i!==-1&&(t=this.data.name.substring(0,i+1));let m=await(await this.storageClient.getObject(this.data.bucket,this.data.name)).blob(),h=(t||"")+this.filenameForm.get("name").value;await this.storageClient.uploadObject(this.data.bucket,h,m),await this.storageClient.deleteObject(this.data.bucket,this.data.name),this.dialogRef.close(h)}};n.\u0275fac=function(i){return new(i||n)(u(A),u(ue),u(j),u(I))},n.\u0275cmp=S({type:n,selectors:[["app-rename-object-dialog"]],standalone:!0,features:[y],decls:13,vars:4,consts:[["filename",""],["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","text","formControlName","name"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"click","disabled"]],template:function(i,o){if(i&1){let m=M();r(0,"h2",1),c(1,"Rename file"),a(),r(2,"mat-dialog-content")(3,"form",2)(4,"label"),c(5," Name "),g(6,"input",3,0),a()()(),r(8,"mat-dialog-actions",4)(9,"button",5),c(10,"CANCEL"),a(),r(11,"button",6),C("click",function(){return b(m),x(o.rename())}),c(12," RENAME "),a()()}if(i&2){let m;s(3),d("formGroup",o.filenameForm),s(),P("invalid",(m=o.filenameForm.get("name"))==null?null:m.invalid),s(7),d("disabled",!o.filenameForm.valid)}},dependencies:[w,me,le,G,se,de,pe,F,R,Q,$],encapsulation:2});let e=n;return e})();var ji=["tableWrapper"];function Oi(e,n){e&1&&c(0," Finished ")}function Pi(e,n){if(e&1&&(r(0,"mat-icon",8),c(1,"error"),a(),c(2," Failed ")),e&2){let l=p().$implicit;d("matTooltip",l.err)}}function Li(e,n){e&1&&g(0,"ya-dots")}function Vi(e,n){if(e&1&&(r(0,"tr")(1,"td"),c(2),a(),r(3,"td",7),_(4,Oi,1,0)(5,Pi,3,1)(6,Li,1,0,"ya-dots"),a()()),e&2){let l=n.$implicit;P("failed",l.err),s(2),B(l.filename),s(2),D(l.complete&&!l.err?4:-1),s(),D(l.complete&&l.err?5:-1),s(),D(l.complete?-1:6)}}var Nt=(()=>{let n=class n{constructor(t,i){this.data=i,this.uploads$=i.uploads$.pipe(Je(500))}};n.\u0275fac=function(i){return new(i||n)(u(A),u(I))},n.\u0275cmp=S({type:n,selectors:[["app-upload-progress-dialog"]],viewQuery:function(i,o){if(i&1&&X(ji,7),i&2){let m;K(m=J())&&(o.tableWrapper=m.first)}},standalone:!0,features:[y],decls:13,vars:2,consts:[["tableWrapper",""],["mat-dialog-title",""],[2,"float","right"],["mat-icon-button","","mat-dialog-close",""],[1,"table-wrapper"],[2,"font-size","small","width","100%"],[3,"failed"],[2,"width","100px","text-align","center"],[1,"icon14",2,"vertical-align","middle",3,"matTooltip"]],template:function(i,o){i&1&&(r(0,"h3",1)(1,"div",2)(2,"button",3)(3,"mat-icon"),c(4,"close"),a()()(),c(5,` Uploads
`),a(),r(6,"mat-dialog-content")(7,"div",4,0)(9,"table",5),te(10,Vi,7,6,"tr",6,ee),f(12,"async"),a()()()),i&2&&(s(10),ie(v(12,0,o.uploads$)))},dependencies:[w,W,lt,F,R,$,Y,ct,Dt],styles:["tr.failed[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:red}h3.mat-mdc-dialog-title[_ngcontent-%COMP%]{background-color:#24292e;color:#fff;margin:0;padding-left:5px;font-size:16px;line-height:40px}table[_ngcontent-%COMP%]{border-collapse:collapse}.table-wrapper[_ngcontent-%COMP%]{height:150px;overflow-y:scroll;overflow-x:hidden;padding:5px}"],changeDetection:0});let e=n;return e})();function Ai(e,n){if(e&1&&(r(0,"tr")(1,"td"),c(2),a(),r(3,"td"),c(4),a()()),e&2){let l,t=n.$implicit;s(2),B(t.key),s(2),B((l=t.value)!==null&&l!==void 0?l:"-")}}var Wt=(()=>{let n=class n{constructor(t,i){this.dialogRef=t,this.data=i}};n.\u0275fac=function(i){return new(i||n)(u(A),u(I))},n.\u0275cmp=S({type:n,selectors:[["app-view-object-metadata-dialog"]],standalone:!0,features:[y],decls:15,vars:2,consts:[["mat-dialog-title",""],["yaDataTable","",1,"expand"],["width","1"],["align","end"],["mat-dialog-close","",1,"ya-button"]],template:function(i,o){i&1&&(r(0,"h2",0),c(1,"Object Metadata"),a(),r(2,"mat-dialog-content")(3,"table",1)(4,"tr")(5,"th",2),c(6,"Key"),a(),r(7,"th"),c(8,"Value"),a()(),te(9,Ai,5,2,"tr",null,ee),f(11,"keyvalue"),a()(),r(12,"mat-dialog-actions",3)(13,"button",4),c(14,"CLOSE"),a()()),i&2&&(s(9),ie(v(11,0,o.data.metadata)))},dependencies:[w,et,jt,F,R,Q,$],encapsulation:2});let e=n;return e})();var Ii=["droparea"],Fi=["uploader"],Ri=()=>["/storage/buckets"],$i=e=>["/storage/buckets",e,"objects"];function zi(e,n){e&1&&(r(0,"mat-icon"),c(1,"image_not_supported"),a())}function Ui(e,n){e&1&&(r(0,"mat-icon"),c(1,"image"),a())}function Ni(e,n){if(e&1&&g(0,"img",11),e&2){let l=p();d("src",l.selection.selected[0].objectUrl,ve)}}function Wi(e,n){e&1&&(r(0,"div",12)(1,"mat-icon"),c(2,"arrow_back"),a(),r(3,"p"),c(4,"Select an image to make it appear here"),a()())}function Hi(e,n){if(e&1&&g(0,"ya-breadcrumb",18),e&2){let l=n.$implicit;d("link",l.route)("label",l.name)}}function Gi(e,n){if(e&1&&(r(0,"div",15)(1,"ya-breadcrumb-trail"),g(2,"ya-breadcrumb",17)(3,"ya-breadcrumb",18),te(4,Hi,1,2,"ya-breadcrumb",18,ee),a()()),e&2){let l=p();s(2),d("link",Ze(3,Ri)),s(),d("link",Z(4,$i,l.name))("label",l.name),s(),ie(n)}}function Yi(e,n){if(e&1){let l=M();r(0,"th",32)(1,"input",33),C("change",function(i){b(l);let o=p(2);return x(i?o.masterToggle():null)}),a()()}if(e&2){let l=p(2);s(),d("checked",l.selection.hasValue()&&l.isAllSelected())}}function Qi(e,n){if(e&1){let l=M();r(0,"td",34)(1,"input",35),C("click",function(i){return b(l),x(i.stopPropagation())})("change",function(i){let o=b(l).$implicit,m=p(2);return x(i?m.selection.toggle(o):null)}),a()()}if(e&2){let l=n.$implicit,t=p(2);s(),d("checked",t.selection.isSelected(l))}}function qi(e,n){e&1&&(r(0,"th",36),c(1,"Name"),a())}function Xi(e,n){if(e&1){let l=M();r(0,"mat-icon",38),c(1," folder "),a(),r(2,"a",39),C("click",function(i){return b(l),x(i.stopPropagation())}),c(3),f(4,"filename"),a()}if(e&2){let l=p().$implicit,t=p(2);s(2),d("routerLink","/storage/buckets/"+t.name+"/objects/"+l.name),s(),O(" ",v(4,2,l.name)," ")}}function Ki(e,n){if(e&1){let l=M();r(0,"mat-icon",38),c(1," description "),a(),r(2,"a",40),C("click",function(i){return b(l),x(i.stopPropagation())}),c(3),f(4,"filename"),a()}if(e&2){let l=p().$implicit;s(2),d("href",l.objectUrl,ve),s(),O(" ",v(4,2,l.name)," ")}}function Ji(e,n){if(e&1&&(r(0,"td",37),_(1,Xi,5,4)(2,Ki,5,4),a()),e&2){let l=n.$implicit;s(),D(l.folder?1:2)}}function Zi(e,n){e&1&&(r(0,"th",36),c(1,"Date modified"),a())}function en(e,n){if(e&1&&(r(0,"td",37),c(1),f(2,"datetime"),a()),e&2){let l=n.$implicit;s(),O(" ",v(2,1,l.modified)||"-"," ")}}function tn(e,n){e&1&&(r(0,"th",36),c(1,"Size"),a())}function nn(e,n){if(e&1&&(r(0,"td",37),c(1),f(2,"formatBytes"),a()),e&2){let l=n.$implicit;s(),O(" ",v(2,1,l.size)||"-"," ")}}function on(e,n){e&1&&g(0,"th",41)}function an(e,n){if(e&1){let l=M();r(0,"ya-more")(1,"button",42),C("click",function(){b(l);let i=p().$implicit,o=p(2);return x(o.renameFile(i))}),c(2,"Rename"),a(),r(3,"a",43),c(4,"Download"),a(),g(5,"mat-divider"),r(6,"button",44),C("click",function(){b(l);let i=p().$implicit,o=p(2);return x(o.openViewMetadataDialog(i))}),c(7," View metadata "),a(),g(8,"mat-divider"),r(9,"button",42),C("click",function(){b(l);let i=p().$implicit,o=p(2);return x(o.deleteFile(i))}),c(10,"Delete"),a()()}if(e&2){let l=p().$implicit;s(3),d("href",l.objectUrl,ve),s(3),d("disabled",!l.metadata)}}function rn(e,n){if(e&1&&(r(0,"td",37),_(1,an,11,2,"ya-more"),a()),e&2){let l=n.$implicit;s(),D(l.folder?-1:1)}}function ln(e,n){e&1&&g(0,"tr",45)}function cn(e,n){if(e&1){let l=M();r(0,"tr",46),C("click",function(){let i=b(l).$implicit,o=p(2);return x(o.toggleOne(i))}),a()}if(e&2){let l=n.$implicit,t=p(2);P("selected",t.selection.isSelected(l))}}function sn(e,n){if(e&1&&(r(0,"table",16),E(1,19),_(2,Yi,2,1,"th",20)(3,Qi,2,1,"td",21),T(),E(4,22),_(5,qi,2,0,"th",23)(6,Ji,3,1,"td",24),T(),E(7,25),_(8,Zi,2,0,"th",23)(9,en,3,3,"td",24),T(),E(10,26),_(11,tn,2,0,"th",23)(12,nn,3,3,"td",24),T(),E(13,27),_(14,on,1,0,"th",28)(15,rn,2,1,"td",29),T(),_(16,ln,1,0,"tr",30)(17,cn,1,2,"tr",31),a()),e&2){let l=p();d("dataSource",l.dataSource),s(16),d("cdkHeaderRowDef",l.displayedColumns),s(),d("cdkRowDefColumns",l.displayedColumns)}}function mn(e,n){e&1&&(r(0,"ya-empty-message"),c(1,"Empty directory."),a())}var Ht=(()=>{let n=class n{constructor(t,i,o,m,h){this.dialog=t,this.route=o,this.breadcrumb$=new U([]),this.dragActive$=new U(!1),this.showPreview$=new U(!1),this.previewWidth$=new U(600),this.displayedColumns=["select","name","size","modified","actions"],this.dataSource=new Ue([]),this.selection=new we(!0,[]),this.uploads$=new U([]),this.progressDialogOpen=!1,this.name=o.snapshot.parent.parent.paramMap.get("name"),h.setTitle(this.name),this.storageClient=m.createStorageClient(),this.loadCurrentFolder(),this.routerSubscription=i.events.pipe(Ke(k=>k instanceof it)).subscribe(()=>{this.loadCurrentFolder()})}loadCurrentFolder(){let t={delimiter:"/"},i=this.route.snapshot.url;i.length&&(t.prefix=i.map(o=>o.path).join("/")+"/"),this.storageClient.listObjects(this.name,t).then(o=>{this.updateBrowsePath(),this.changedir(o)})}changedir(t){this.selection.clear();let i=[];for(let o of t.prefixes||[])i.push({folder:!0,name:o});for(let o of t.objects||[])o.name.endsWith("/")||i.push({folder:!1,name:o.name,modified:o.created,size:o.size,objectUrl:this.storageClient.getObjectURL(this.name,o.name),metadata:o.metadata});this.dataSource.data=i}isAllSelected(){let t=this.selection.selected.length,i=this.dataSource.filteredData.length;return t===i&&i>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(t=>this.selection.select(t))}toggleOne(t){(!this.selection.isSelected(t)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(t)}createFolder(){this.dialog.open(zt,{width:"400px",data:{bucket:this.name,path:this.getCurrentPath()}}).afterClosed().subscribe({next:()=>this.loadCurrentFolder()})}uploadObjects(){let t=this.getCurrentPath();t.startsWith("/")&&(t=t.substring(1));let i=this.uploaderEl.nativeElement.files,o=[];for(let m in i)if(!isNaN(parseInt(m,10))){let h=i[m],k=t?t+"/"+h.name:h.name,q=this.name,xe=this.storageClient.uploadObject(q,k,h);o.push({filename:h.name,promise:xe})}o.length&&this.showUploadProgress().then(()=>{for(let m of o)this.trackUpload(m);this.settlePromises(o.map(m=>m.promise)).then(()=>{this.loadCurrentFolder()})})}settlePromises(t){return Promise.all(t.map(i=>i.then(o=>({state:"fullfilled",value:o}),o=>({state:"rejected",value:o}))))}trackUpload(t){t.promise.then(()=>{t.complete=!0,this.uploads$.next([...this.uploads$.value])}).catch(i=>{i.response.json().then(o=>{t.complete=!0,t.err=o.msg,this.uploads$.next([...this.uploads$.value])}).catch(()=>{t.complete=!0,t.err=i.statusText,this.uploads$.next([...this.uploads$.value])})}),this.uploads$.next([...this.uploads$.value,t])}getCurrentPath(){let t="";for(let i of this.route.snapshot.url)t+="/"+i.path;return t||"/"}togglePreview(){this.showPreview$.next(!this.showPreview$.value)}deleteSelectedObjects(){let t=[],i=[];for(let o of this.selection.selected)o.folder?i.push(this.storageClient.listObjects(this.name,{prefix:o.name}).then(m=>{let h=m.objects||[];t.push(...h.map(k=>k.name))})):t.push(o.name);Promise.all(i).then(()=>{if(confirm(`You are about to delete ${t.length} files. Are you sure you want to continue?`)){let o=[];for(let m of t)o.push(this.storageClient.deleteObject(this.name,m));Promise.all(o).then(()=>{this.loadCurrentFolder()})}})}renameFile(t){this.dialog.open(Ut,{data:{bucket:this.name,name:t.name},width:"400px"}).afterClosed().subscribe(o=>{o&&this.loadCurrentFolder()})}deleteFile(t){confirm(`Are you sure you want to delete ${t.name}?`)&&this.storageClient.deleteObject(this.name,t.name).then(()=>{this.loadCurrentFolder()})}openViewMetadataDialog(t){this.dialog.open(Wt,{width:"600px",data:{metadata:t.metadata||{}}})}dragEnter(t){return this.dragActive$.next(!0),t.preventDefault(),t.stopPropagation(),!1}dragOver(t){return t.preventDefault(),t.stopPropagation(),!1}dragLeave(t){return this.dragActive$.next(!1),t.preventDefault(),t.stopPropagation(),!1}drop(t){let i=t.dataTransfer||{};if(i){let o=this.getCurrentPath().substring(1);o!==""&&(o+="/"),It(i).then(m=>{if(m.length){let h=[];this.showUploadProgress().then(()=>{for(let k of m){let q=o+k._fullPath,xe=this.storageClient.uploadObject(this.name,q,k);this.trackUpload({filename:k._fullPath,promise:xe}),h.push(xe)}this.settlePromises(h).then(()=>{this.loadCurrentFolder()})})}})}return this.dragActive$.next(!1),t.preventDefault(),t.stopPropagation(),!1}updateBrowsePath(){let t=[],i="";for(let o of this.route.snapshot.url)i+="/"+o.path,t.push({name:o.path,route:`/storage/buckets/${this.name}/objects`+i});return this.breadcrumb$.next(t),i||"/"}isImage(t){if(t.folder)return!1;let i=t.name.toLocaleLowerCase();return i.endsWith(".png")||i.endsWith(".gif")||i.endsWith(".jpg")||i.endsWith("jpeg")||i.endsWith("bmp")||i.endsWith("svg")||i.endsWith("ico")}async showUploadProgress(){if(!this.progressDialogOpen)return this.dialogRef=this.dialog.open(Nt,{position:{bottom:"10px",right:"10px"},width:"500px",data:{uploads$:this.uploads$},hasBackdrop:!1,autoFocus:!1,panelClass:["progress-dialog","elevation-z1"]}),this.dialogRef.afterOpened().subscribe(()=>this.progressDialogOpen=!0),this.dialogRef.afterClosed().subscribe(()=>{this.uploads$.next([]),this.progressDialogOpen=!1}),new Promise((t,i)=>{this.dialogRef.afterOpened().subscribe(()=>{t(!0)},o=>{i(o)})})}resizeMouseDown(t){let i=t.clientX,o=this.previewWidth$.value,m=k=>{if(i!==null){let q=o-(k.clientX-i);this.previewWidth$.next(Math.max(400,q))}},h=k=>{i=null,document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",h)}ngOnDestroy(){this.routerSubscription?.unsubscribe(),this.dialogRef?.close()}};n.\u0275fac=function(i){return new(i||n)(u(Ee),u(ye),u(ae),u(j),u(oe))},n.\u0275cmp=S({type:n,selectors:[["ng-component"]],viewQuery:function(i,o){if(i&1&&(X(Ii,7),X(Fi,5)),i&2){let m;K(m=J())&&(o.dropArea=m.first),K(m=J())&&(o.uploaderEl=m.first)}},standalone:!0,features:[y],decls:44,vars:28,consts:[["uploader",""],["droparea",""],["mat-icon-button","","routerLink","/storage/buckets","color","primary"],["mat-button","","color","primary",3,"click"],["type","file","hidden","","multiple","",3,"change"],["mat-button","","color","primary",3,"click","disabled"],[1,"droparea",3,"dragenter"],[1,"droparea-overlay",3,"dragover","dragleave","drop"],[3,"autosize"],["mode","side","position","end",2,"text-align","center",3,"opened","disableClose"],[1,"resize-handle",3,"mousedown"],[3,"src"],[2,"margin-top","4em","color","#fff"],[1,"panel-content"],[3,"bucket"],[2,"margin-top","16px"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["label","Buckets",3,"link"],[3,"link","label"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["cdkColumnDef","name"],["mat-header-cell","",4,"cdkHeaderCellDef"],["mat-cell","",4,"cdkCellDef"],["cdkColumnDef","modified"],["cdkColumnDef","size"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"cdkHeaderRowDef"],["mat-row","",3,"selected","click",4,"cdkRowDef","cdkRowDefColumns"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"change","checked"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell",""],["mat-cell",""],[1,"icon12",2,"vertical-align","middle","margin-right","7px"],[3,"click","routerLink"],["download","",3,"click","href"],["mat-header-cell","",1,"expand"],["mat-menu-item","",3,"click"],["mat-menu-item","","download","",3,"href"],["mat-menu-item","",3,"click","disabled"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,o){if(i&1){let m=M();r(0,"app-storage-page")(1,"app-storage-toolbar")(2,"a",2)(3,"mat-icon"),c(4,"arrow_back"),a()(),c(5),r(6,"button",3),C("click",function(){b(m);let k=N(11);return x(k.click())}),r(7,"mat-icon"),c(8,"file_upload"),a(),c(9," Upload files "),r(10,"input",4,0),C("change",function(){return b(m),x(o.uploadObjects())}),a()(),r(12,"button",3),C("click",function(){return b(m),x(o.createFolder())}),r(13,"mat-icon"),c(14,"create_new_folder"),a(),c(15," Create folder "),a(),r(16,"button",5),C("click",function(){return b(m),x(o.deleteSelectedObjects())}),r(17,"mat-icon"),c(18,"delete"),a(),c(19," Delete "),a(),r(20,"button",3),C("click",function(){return b(m),x(o.togglePreview())}),_(21,zi,2,0,"mat-icon"),f(22,"async"),_(23,Ui,2,0,"mat-icon"),c(24," Preview panel "),a()(),r(25,"div",6,1),f(27,"async"),C("dragenter",function(k){return b(m),x(o.dragEnter(k))}),r(28,"div",7),f(29,"async"),C("dragover",function(k){return b(m),x(o.dragOver(k))})("dragleave",function(k){return b(m),x(o.dragLeave(k))})("drop",function(k){return b(m),x(o.drop(k))}),a(),r(30,"mat-sidenav-container",8)(31,"mat-sidenav",9),f(32,"async"),f(33,"async"),r(34,"div",10),C("mousedown",function(k){return b(m),x(o.resizeMouseDown(k))}),a(),_(35,Ni,1,1,"img",11)(36,Wi,5,0,"div",12),a(),r(37,"mat-sidenav-content")(38,"div",13),g(39,"app-bucket-page-tabs",14),_(40,Gi,6,6,"div",15),f(41,"async"),_(42,sn,18,3,"table",16)(43,mn,2,0,"ya-empty-message"),a()()()()()}if(i&2){let m;s(5),O(" ",o.name," \xA0\xA0\xA0 "),s(11),d("disabled",!o.selection.hasValue()),s(5),D(v(22,16,o.showPreview$)?21:23),s(4),P("active",v(27,18,o.dragActive$)),s(3),P("hide",!v(29,20,o.dragActive$)),s(2),d("autosize",!0),s(),ke("width",v(32,22,o.previewWidth$)+"px"),d("opened",v(33,24,o.showPreview$))("disableClose",!1),s(4),D(o.selection.selected.length===1&&o.isImage(o.selection.selected[0])?35:36),s(4),d("bucket",o.name),s(),D((m=v(41,26,o.breadcrumb$))?40:-1,m),s(2),D(o.dataSource&&o.dataSource.data.length?42:43)}},dependencies:[Ye,w,W,H,ut,Te,je,Oe,pt,Me,Be,Y,dt,De,ht,_t,ft,Le,Ae,Ie,Ve,Fe,Re,$e,ze,yt,St,Mt,We,fe,Ot,he,_e,ge],styles:["mat-toolbar[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3;background-color:#fff;box-sizing:content-box;color:#000000a7}mat-toolbar-row[_ngcontent-%COMP%]{padding-left:24px}.droparea[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:auto;user-select:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none}.droparea-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;box-sizing:border-box;background:#1b61b91a;border:1px solid rgba(27,97,185,1);z-index:10;user-select:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none}  .progress-dialog .mat-mdc-dialog-container{box-shadow:none;padding:0;overflow:hidden}  .progress-dialog .mat-mdc-dialog-content{overflow:hidden}.mat-sidenav-container[_ngcontent-%COMP%]{height:100%;width:100%;background-color:inherit}.mat-sidenav-container[_ngcontent-%COMP%]   .mat-sidenav[_ngcontent-%COMP%]{background-color:#000}.mat-sidenav[_ngcontent-%COMP%]   .mat-drawer-inner-container[_ngcontent-%COMP%]{overflow:hidden!important}.resize-handle[_ngcontent-%COMP%]{position:absolute;background-color:#000;top:0;left:0;width:20px;bottom:0;cursor:ew-resize;user-select:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none}.mat-sidenav-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:2em;max-width:calc(100% - 5em);max-height:calc(100% - 5em)}"],changeDetection:0});let e=n;return e})();var Gt=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=S({type:n,selectors:[["app-bucket-placeholder"]],standalone:!0,features:[y],decls:1,vars:0,template:function(i,o){i&1&&g(0,"router-outlet")},dependencies:[re],encapsulation:2,changeDetection:0});let e=n;return e})();function dn(e,n){if(e&1&&(r(0,"dt"),c(1,"Directory"),a(),r(2,"dd"),c(3),a()),e&2){let l=p();s(3),B(l.directory)}}function pn(e,n){if(e&1&&(r(0,"div",3)(1,"dl",4)(2,"dt"),c(3,"Created"),a(),r(4,"dd"),c(5),f(6,"datetime"),f(7,"nvl"),a(),r(8,"dt"),c(9,"Storage engine"),a(),r(10,"dd"),c(11),a(),_(12,dn,4,1),a(),r(13,"h3"),c(14,"Bucket size"),a(),r(15,"dl",4)(16,"dt"),c(17,"Limit"),a(),r(18,"dd"),c(19),f(20,"formatBytes"),f(21,"nvl"),a(),r(22,"dt"),c(23,"Used"),a(),r(24,"dd"),c(25),f(26,"formatBytes"),f(27,"nvl"),a(),r(28,"dt"),c(29,"Available"),a(),r(30,"dd"),c(31),f(32,"formatBytes"),a()(),r(33,"h3"),c(34,"Object count"),a(),r(35,"dl",4)(36,"dt"),c(37,"Limit"),a(),r(38,"dd"),c(39),f(40,"nvl"),a(),r(41,"dt"),c(42,"Used"),a(),r(43,"dd"),c(44),f(45,"nvl"),a(),r(46,"dt"),c(47,"Available"),a(),r(48,"dd"),c(49),a()()()),e&2){let l=n,t=p();s(5),B(L(7,11,v(6,9,l.created),"-")),s(6),B(l.directory?"File System":"RocksDB"),s(),D(l.directory?12:-1),s(7),B(L(21,16,v(20,14,l.maxSize),"-")),s(6),B(L(27,21,v(26,19,l.size),"-")),s(6),B(v(32,24,t.zeroOrMore(l.maxSize-l.size))),s(8),B(L(40,26,l.maxObjects,"-")),s(5),B(L(45,29,l.numObjects,"-")),s(5),B(t.zeroOrMore(l.maxObjects-l.numObjects))}}var Yt=(()=>{let n=class n{constructor(t,i,o){this.bucket$=new U(null),this.name=t.snapshot.parent.paramMap.get("name"),o.setTitle(this.name+": Properties"),this.storageClient=i.createStorageClient(),this.storageClient.getBucket(this.name).then(m=>{this.bucket$.next(m)})}bucketSizePercentage(t,i=!1){var o=100*t.size/t.maxSize;return i?Math.min(100,o):o}objectCountPercentage(t,i=!1){var o=100*t.numObjects/t.maxObjects;return i?Math.min(100,o):o}zeroOrMore(t){return Math.max(0,t)}};n.\u0275fac=function(i){return new(i||n)(u(ae),u(j),u(oe))},n.\u0275cmp=S({type:n,selectors:[["ng-component"]],standalone:!0,features:[y],decls:10,vars:5,consts:[["mat-icon-button","","routerLink","/storage/buckets","color","primary"],[1,"panel-content"],[3,"bucket"],[1,"small",2,"margin-top","16px"],[1,"dl-horizontal"]],template:function(i,o){if(i&1&&(r(0,"app-storage-page")(1,"app-storage-toolbar")(2,"a",0)(3,"mat-icon"),c(4,"arrow_back"),a()(),c(5),a(),r(6,"div",1),g(7,"app-bucket-page-tabs",2),_(8,pn,50,32,"div",3),f(9,"async"),a()()),i&2){let m;s(5),O(" ",o.name," "),s(2),d("bucket",o.name),s(),D((m=v(9,3,o.bucket$))?8:-1,m)}},dependencies:[Ye,w,W,H,Be,Y,fe,he,He,_e,ge],styles:[".progress[_ngcontent-%COMP%]{display:inline-block;width:100px;position:relative;text-align:center;margin-right:5px;background-color:#eee;border:1px solid rgba(0,0,0,.1)}.fill[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;width:30%;background-color:#009e87;background:linear-gradient(to bottom,#009e87,#bce3dd 50%,#009e87)}.label[_ngcontent-%COMP%]{position:absolute;inset:0;margin:0 auto}"],changeDetection:0});let e=n;return e})();var Qt=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=S({type:n,selectors:[["ng-component"]],standalone:!0,features:[y],decls:5,vars:4,consts:[["messageBar",""],[1,"storage-page-content"]],template:function(i,o){if(i&1&&(g(0,"ya-message-bar",null,0),r(2,"div",1),f(3,"async"),g(4,"router-outlet"),a()),i&2){let m=N(1);s(2),P("message-bar-visible",v(3,2,m.show$))}},dependencies:[w,W,re,Bt],styles:[".storage-page-content[_ngcontent-%COMP%]{position:absolute;inset:48px 0 0;background-color:var(--y-background-color)}.storage-page-content.message-bar-visible[_ngcontent-%COMP%]{top:112px}mat-toolbar[_ngcontent-%COMP%]{background-color:#fcfcfc;border-bottom:1px solid #d3d3d3;box-sizing:content-box;color:#000000a7}"],changeDetection:0});let e=n;return e})();var Po=[{path:"",canActivate:[Lt,At],canActivateChild:[Vt],runGuardsAndResolvers:"always",component:Qt,children:[{path:"",pathMatch:"full",redirectTo:"buckets"},{path:"buckets",children:[{path:"",pathMatch:"full",component:$t,data:{hasSidebar:!1}},{path:":name",children:[{path:"",pathMatch:"full",redirectTo:"objects"},{path:"objects",component:Gt,children:[{path:"**",component:Ht,data:{hasSidebar:!1}}]},{path:"properties",component:Yt,data:{hasSidebar:!1}}]}]}]}];export{Po as ROUTES};
