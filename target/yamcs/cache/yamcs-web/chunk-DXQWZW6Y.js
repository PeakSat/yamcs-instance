import{b as Et,d as wt,e as Ke,f as Qe}from"./chunk-FTOGDGWN.js";import{Aa as l,Ab as ot,Ba as D,Bb as U,Bd as Ve,C as Mt,Ca as C,Cd as Fe,Da as he,Db as N,Dd as Pe,Eb as at,F as T,Fa as it,Fb as Ft,Fc as Ee,Ga as E,Gb as ye,Gc as we,Ge as Ue,Ha as Ot,Hb as Y,Hc as De,Hd as Ne,Ia as X,Ib as ut,J as de,Jb as gt,K as g,Kd as mt,L as k,La as h,Lb as Pt,Ma as y,Mb as rt,Md as Re,Na as Q,Nb as lt,Od as $,P as et,Qb as st,Qd as Be,Rd as $e,Re as q,Sa as xe,Sc as Wt,Tc as Ut,U as ue,Uc as Yt,Ue as Ye,Vd as qe,Ve as w,Wc as Kt,Wd as He,We as Tt,X as c,Xc as zt,Xd as ne,Xe as ze,Y as x,Yb as Se,Yd as K,Ye as Xe,Zc as Xt,_a as R,_b as kt,_c as Qt,_d as je,a as ce,aa as _,ad as Jt,bc as yt,bd as Zt,be as Ge,ca as d,cc as St,da as dt,db as At,dc as bt,dd as te,e as tt,ea as G,eb as Ct,ec as Lt,ed as ee,fc as Nt,ga as u,ha as O,i as me,ia as A,ib as ht,ic as be,id as Ie,ja as V,jd as Me,ka as a,kd as Oe,la as r,ma as f,mb as xt,mc as Le,na as F,nb as ve,ne as We,oa as P,ob as Vt,pb as vt,pc as ct,qa as b,qb as ge,qc as Rt,qd as ie,ra as v,rc as Bt,sa as m,sc as $t,tc as qt,te as oe,uc as Ht,vc as jt,vd as Ae,wa as _e,wb as ke,wc as Gt,xa as fe,xb as nt,xc as Te,y as B,ya as Ce,yd as J,z as pe,za as I,zb as W}from"./chunk-YLFXKKOP.js";var fi=()=>({exact:!0}),Je=t=>({c:t}),ae=(()=>{let n=class n{constructor(e){this.yamcs=e}};n.\u0275fac=function(o){return new(o||n)(x(q))},n.\u0275cmp=T({type:n,selectors:[["app-links-page-tabs"]],standalone:!0,features:[E],decls:10,vars:12,consts:[["rla","routerLinkActive"],["rlb","routerLinkActive"],["tabPanel",""],["mat-tab-nav-bar","",1,"secondary",3,"mat-stretch-tabs","tabPanel"],["mat-tab-link","","routerLink","/links","routerLinkActive","",3,"routerLinkActiveOptions","active","queryParams"],["mat-tab-link","","routerLink","/links/log","routerLinkActive","",3,"active","queryParams"]],template:function(o,s){if(o&1&&(a(0,"nav",3)(1,"a",4,0),l(3," Links "),r(),a(4,"a",5,1),l(6," Action log "),r()(),a(7,"mat-tab-nav-panel",null,2),f(9,"router-outlet"),r()),o&2){let p=I(2),L=I(5),S=I(8);d("mat-stretch-tabs",!1)("tabPanel",S),c(),d("routerLinkActiveOptions",Ot(7,fi))("active",p.isActive)("queryParams",X(8,Je,s.yamcs.context)),c(3),d("active",L.isActive)("queryParams",X(10,Je,s.yamcs.context))}},dependencies:[w,ve,vt,ge,Ie,Oe,Me],styles:[".mat-mdc-tab-link[_ngcontent-%COMP%]{height:36px;min-width:0;font-size:13px}"],changeDetection:0});let t=n;return t})();var hi=["intervalSelect"];function xi(t,n){if(t&1){let i=b();f(0,"ya-date-time-input",16)(1,"ya-date-time-input",17),a(2,"button",18),v("click",function(){g(i);let o=m();return k(o.applyCustomDates())}),l(3," Apply "),r()}if(t&2){let i=m();c(2),d("disabled",i.filterForm.invalid)}}function vi(t,n){if(t&1){let i=b();a(0,"button",19),v("click",function(){g(i);let o=m();return k(o.jumpToNow())}),l(1,"Jump to now"),r()}}function gi(t,n){t&1&&(a(0,"th",20),l(1,"Time"),r())}function ki(t,n){if(t&1&&(a(0,"td",21),l(1),h(2,"datetime"),r()),t&2){let i=n.$implicit;c(),D(y(2,1,i.time))}}function yi(t,n){t&1&&(a(0,"th",20),l(1,"User"),r())}function Si(t,n){if(t&1&&(a(0,"td",21),l(1),r()),t&2){let i=n.$implicit;c(),D(i.user||"-")}}function bi(t,n){t&1&&(a(0,"th",20),l(1,"Action"),r())}function Li(t,n){if(t&1&&(a(0,"td",21),f(1,"span",22),h(2,"actionLogFormat"),r()),t&2){let i=n.$implicit;c(),d("innerHTML",y(2,1,i.summary)||"-",ue)}}function Ti(t,n){t&1&&f(0,"th",23)}function Ei(t,n){t&1&&f(0,"td",21)}function wi(t,n){t&1&&f(0,"tr",24)}function Di(t,n){t&1&&f(0,"tr",25)}var ti=(()=>{let n=class n{constructor(e,o,s,p,L){this.yamcs=e,this.messageService=o,this.router=s,this.route=p,this.filterForm=new ye({filter:new ut,interval:new ut("NO_LIMIT"),customStart:new ut(null),customStop:new ut(null)}),this.displayedColumns=["time","user","summary","actions"],this.intervalOptions=[{id:"PT1H",label:"Last hour"},{id:"PT6H",label:"Last 6 hours"},{id:"P1D",label:"Last 24 hours"},{id:"NO_LIMIT",label:"No limit"},{id:"CUSTOM",label:"Custom",group:!0}],this.dataSource=new ee,L.setTitle("Links"),this.initializeOptions(),this.loadData(),this.filterForm.get("interval").valueChanges.forEach(S=>{if(S==="CUSTOM"){let Z=new Date,j=this.validStart||Z,M=this.validStop||Z;this.filterForm.get("customStart").setValue(J.toISOString(j)),this.filterForm.get("customStop").setValue(J.toISOString(M))}else S==="NO_LIMIT"?(this.validStart=null,this.validStop=null,this.appliedInterval=S,this.loadData()):(this.validStop=new Date,this.validStart=J.subtractDuration(this.validStop,S),this.appliedInterval=S,this.loadData())})}initializeOptions(){let e=this.route.snapshot.queryParamMap;if(e.has("filter")&&(this.filter=e.get("filter")||"",this.filterForm.get("filter").setValue(this.filter)),e.has("interval"))if(this.appliedInterval=e.get("interval"),this.filterForm.get("interval").setValue(this.appliedInterval),this.appliedInterval==="CUSTOM"){let o=e.get("customStart");this.filterForm.get("customStart").setValue(o),this.validStart=J.toDate(o);let s=e.get("customStop");this.filterForm.get("customStop").setValue(s),this.validStop=J.toDate(s)}else this.appliedInterval==="NO_LIMIT"?(this.validStart=null,this.validStop=null):(this.validStop=new Date,this.validStart=J.subtractDuration(this.validStop,this.appliedInterval));else this.appliedInterval="NO_LIMIT",this.validStop=null,this.validStart=null}jumpToNow(){this.filterForm.get("interval").setValue("NO_LIMIT")}applyCustomDates(){this.validStart=J.toDate(this.filterForm.value.customStart),this.validStop=J.toDate(this.filterForm.value.customStop),this.appliedInterval="CUSTOM",this.loadData()}loadData(){this.updateURL();let e={service:"LinksApi"};this.validStart&&(e.start=this.validStart.toISOString()),this.validStop&&(e.stop=this.validStop.toISOString()),this.filter&&(e.q=this.filter),this.yamcs.yamcsClient.getAuditRecords(this.yamcs.instance,e).then(o=>this.dataSource.data=o.records||[]).catch(o=>this.messageService.showError(o))}updateURL(){this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:this.filter||null,interval:this.appliedInterval,customStart:this.appliedInterval==="CUSTOM"?this.filterForm.value.customStart:null,customStop:this.appliedInterval==="CUSTOM"?this.filterForm.value.customStop:null},queryParamsHandling:"merge"})}};n.\u0275fac=function(o){return new(o||n)(x(q),x(K),x(Vt),x(xt),x(ht))},n.\u0275cmp=T({type:n,selectors:[["app-links-action-log-tab"]],viewQuery:function(o,s){if(o&1&&_e(hi,5),o&2){let p;fe(p=Ce())&&(s.intervalSelect=p.first)}},standalone:!0,features:[E],decls:26,vars:7,consts:[["intervalSelect",""],[1,"panel-content"],[2,"margin-top","16px",3,"formGroup"],[1,"filter-bar"],["icon","access_time","formControlName","interval",3,"options"],[1,"ya-button"],["mat-table","",1,"ya-data-table","expand",3,"dataSource"],["matColumnDef","time"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","user"],["matColumnDef","summary"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["formControlName","customStart"],["formControlName","customStop"],[1,"ya-button",3,"click","disabled"],[1,"ya-button",3,"click"],["mat-header-cell",""],["mat-cell",""],[3,"innerHTML"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row",""]],template:function(o,s){o&1&&(a(0,"app-instance-page")(1,"app-instance-toolbar"),l(2," Links "),r(),a(3,"div",1),f(4,"app-links-page-tabs"),a(5,"form",2)(6,"div",3),f(7,"ya-select",4,0),_(9,xi,4,1)(10,vi,2,0,"button",5),r()(),a(11,"table",6),F(12,7),_(13,gi,2,0,"th",8)(14,ki,3,3,"td",9),P(),F(15,10),_(16,yi,2,0,"th",8)(17,Si,2,1,"td",9),P(),F(18,11),_(19,bi,2,0,"th",8)(20,Li,3,3,"td",9),P(),F(21,12),_(22,Ti,1,0,"th",13)(23,Ei,1,0,"td",9),P(),_(24,wi,1,0,"tr",14)(25,Di,1,0,"tr",15),r()()()),o&2&&(c(5),d("formGroup",s.filterForm),c(2),d("options",s.intervalOptions),c(2),u(s.filterForm.value.interval==="CUSTOM"?9:-1),c(),u(s.filterForm.value.interval!=="CUSTOM"?10:-1),c(),d("dataSource",s.dataSource),c(13),d("matHeaderRowDef",s.displayedColumns),c(),d("matRowDefColumns",s.displayedColumns))},dependencies:[wt,Et,ae,w,gt,N,at,lt,st,Wt,Yt,Qt,Kt,Ut,Jt,zt,Xt,Zt,te,Ve,Ne,We,oe],encapsulation:2,changeDetection:0});let t=n;return t})();function Ii(t,n){if(t&1&&(f(0,"ya-led",0),h(1,"async")),t&2){let i=m();d("matTooltip",i.link.status)("color",y(1,3,i.okColor$))("fade",i.parentLink&&i.parentLink.status!=="OK")}}function Mi(t,n){if(t&1&&f(0,"ya-led",1),t&2){let i=m();d("matTooltip",i.link.status)("fade",i.parentLink&&i.parentLink.status!=="OK")}}function Oi(t,n){if(t&1&&f(0,"ya-led",1),t&2){let i=m();d("matTooltip",i.link.status)("fade",i.parentLink&&i.parentLink.status!=="OK")}}function Ai(t,n){if(t&1&&f(0,"ya-led",2),t&2){let i=m();d("matTooltip",i.link.status)("fade",i.parentLink&&i.parentLink.status!=="OK")}}var Vi=2e3,Dt=(()=>{let n=class n{constructor(e){this.prevInCount=-1,this.prevOutCount=-1,this.active$=new tt(!1),this.okColor$=this.active$.pipe(me(o=>o?qe:He)),this.activeExpiration=-1,this.syncSubscription=e.syncFast(()=>{new Date().getTime()>=this.activeExpiration&&(this.active$.next(!1),this.activeExpiration=-1)})}ngOnChanges(){if(this.link.status==="OK"){let e=this.prevInCount!==-1&&this.prevInCount<this.link.dataInCount,o=this.prevOutCount!==-1&&this.prevOutCount<this.link.dataOutCount;(e||o)&&(this.active$.next(!0),this.activeExpiration=new Date().getTime()+Vi)}else this.active$.next(!1),this.activeExpiration=-1;this.prevInCount=this.link.dataInCount,this.prevOutCount=this.link.dataOutCount}ngOnDestroy(){this.syncSubscription?.unsubscribe()}};n.\u0275fac=function(o){return new(o||n)(x(Ye))},n.\u0275cmp=T({type:n,selectors:[["app-link-status"]],inputs:{link:"link",parentLink:"parentLink"},standalone:!0,features:[de,E],decls:4,vars:1,consts:[[3,"matTooltip","color","fade"],["color","red",3,"matTooltip","fade"],["color","#aaa",3,"matTooltip","fade"]],template:function(o,s){if(o&1&&_(0,Ii,2,5,"ya-led",0)(1,Mi,1,2,"ya-led",1)(2,Oi,1,2,"ya-led",1)(3,Ai,1,2,"ya-led",2),o&2){let p;u((p=s.link.status)==="OK"?0:p==="UNAVAIL"?1:p==="FAILED"?2:p==="DISABLED"?3:-1)}},dependencies:[w,R,Le,ne],styles:["[_nghost-%COMP%]{line-height:0;font-size:0}"],changeDetection:0});let t=n;return t})();function Fi(t,n){t&1&&(a(0,"span",4),l(1,"(optional)"),r())}function Pi(t,n){if(t&1&&(a(0,"p"),l(1),r()),t&2){let i=n.$implicit;c(),D(i)}}function Ni(t,n){if(t&1&&(a(0,"ya-help"),A(1,Pi,2,1,"p",null,O),r()),t&2){let i=m();c(),V(i.description)}}function Ri(t,n){if(t&1&&(a(0,"div",1)(1,"div",2),h(2,"async"),a(3,"div",3),l(4,"boolean"),r()(),l(5),_(6,Fi,2,0,"span",4)(7,Ni,3,0,"ya-help"),f(8,"ya-errors",5,0)(10,"br"),F(11,6),f(12,"input",7),l(13," True "),f(14,"input",8),l(15," False "),P(),r()),t&2){let i=n,e=I(9),o=m();c(),G("error",y(2,7,e.invalid$)),c(4),C(" ",i.name," "),c(),u(i.required?-1:6),c(),u(i.description!=null&&i.description.length?7:-1),c(),d("controlName",i.name),c(3),d("formGroup",o.formGroup)}}var ei=(()=>{let n=class n{constructor(){this.option=et.required(),this.validators=[],this.onChange=e=>{},this.subscriptions=[],this.formGroup=new Ft({enabled:new Y(null)})}ngOnInit(){this.subscriptions.push(this.formGroup.valueChanges.subscribe(()=>{let e=this.formGroup.get("enabled").value;e==="true"?this.onChange(!0):e==="false"?this.onChange(!1):this.onChange(null)})),this.option().required&&this.validators.push(U.required)}writeValue(e){e===!0?this.formGroup.setValue({enabled:"true"}):e===!1&&this.formGroup.setValue({enabled:"false"})}registerOnChange(e){this.onChange=e}registerOnTouched(e){}validate(e){for(let o of this.validators){let s=o(e);if(s)return s}return null}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=T({type:n,selectors:[["app-boolean-option"]],inputs:{option:[1,"option"]},standalone:!0,features:[it([{provide:nt,useExisting:B(()=>n),multi:!0},{provide:ot,useExisting:B(()=>n),multi:!0}]),E],decls:1,vars:1,consts:[["err",""],[1,"label"],[1,"meta"],[1,"item"],[1,"hint"],[3,"controlName"],[3,"formGroup"],["type","radio","formControlName","enabled","value","true"],["type","radio","formControlName","enabled","value","false"]],template:function(o,s){if(o&1&&_(0,Ri,16,9,"div",1),o&2){let p;u((p=s.option())?0:-1,p)}},dependencies:[w,R,W,Pt,N,at,lt,st,mt,$],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#5787b1;color:#fff;cursor:pointer}",".ng-invalid[_nghost-%COMP%]:not(.ng-pristine)     input{border-color:#dc143c!important}.label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0});let t=n;return t})();function Bi(t,n){t&1&&(a(0,"span",4),l(1,"(optional)"),r())}function $i(t,n){t&1&&(a(0,"ya-help"),l(1),r()),t&2&&(c(),C(" ",n," "))}function qi(t,n){if(t&1&&(a(0,"div",1)(1,"div",2),h(2,"async"),a(3,"div",3),l(4,"float"),r()(),l(5),_(6,Bi,2,0,"span",4)(7,$i,2,1,"ya-help"),f(8,"ya-errors",5,0)(10,"input",6),r()),t&2){let i,e=n,o=I(9),s=m();c(),G("error",y(2,7,o.invalid$)),c(4),C(" ",e.name," "),c(),u(e.required?-1:6),c(),u((i=e.description)?7:-1,i),c(),d("controlName",e.name),c(2),d("formControl",s.formControl)}}var ii=(()=>{let n=class n{constructor(){this.option=et.required(),this.formControl=new Y(null),this.validators=[],this.onChange=e=>{},this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.formControl.valueChanges.subscribe(e=>{e===null||e===""?this.onChange(null):this.onChange(e)})),this.option().required&&this.validators.push(U.required),this.validators.push(ie.requireFloat)}writeValue(e){this.formControl.setValue(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){}validate(e){for(let o of this.validators){let s=o(e);if(s)return s}return null}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=T({type:n,selectors:[["app-float-option"]],inputs:{option:[1,"option"]},standalone:!0,features:[it([{provide:nt,useExisting:B(()=>n),multi:!0},{provide:ot,useExisting:B(()=>n),multi:!0}]),E],decls:1,vars:1,consts:[["err",""],[1,"label"],[1,"meta"],[1,"item"],[1,"hint"],[3,"controlName"],["type","text","autocomplete","off",3,"formControl"]],template:function(o,s){if(o&1&&_(0,qi,11,9,"div",1),o&2){let p;u((p=s.option())?0:-1,p)}},dependencies:[w,R,W,N,rt,mt,$],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#5787b1;color:#fff;cursor:pointer}",".ng-invalid[_nghost-%COMP%]:not(.ng-pristine)     input{border-color:#dc143c!important}.label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0});let t=n;return t})();function Hi(t,n){t&1&&(a(0,"span",4),l(1,"(optional)"),r())}function ji(t,n){t&1&&(a(0,"ya-help"),l(1),r()),t&2&&(c(),C(" ",n," "))}function Gi(t,n){if(t&1&&(a(0,"div",1)(1,"div",2),h(2,"async"),a(3,"div",3),l(4,"integer"),r()(),l(5),_(6,Hi,2,0,"span",4)(7,ji,2,1,"ya-help"),f(8,"ya-errors",5,0)(10,"input",6),r()),t&2){let i,e=n,o=I(9),s=m();c(),G("error",y(2,7,o.invalid$)),c(4),C(" ",e.name," "),c(),u(e.required?-1:6),c(),u((i=e.description)?7:-1,i),c(),d("controlName",e.name),c(2),d("formControl",s.formControl)}}var ni=(()=>{let n=class n{constructor(){this.option=et.required(),this.formControl=new Y(null),this.validators=[],this.onChange=e=>{},this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.formControl.valueChanges.subscribe(e=>{e===null||e===""?this.onChange(null):this.onChange(e)})),this.option().required&&this.validators.push(U.required),this.validators.push(ie.requireInteger)}writeValue(e){this.formControl.setValue(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){}validate(e){for(let o of this.validators){let s=o(e);if(s)return s}return null}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=T({type:n,selectors:[["app-integer-option"]],inputs:{option:[1,"option"]},standalone:!0,features:[it([{provide:nt,useExisting:B(()=>n),multi:!0},{provide:ot,useExisting:B(()=>n),multi:!0}]),E],decls:1,vars:1,consts:[["err",""],[1,"label"],[1,"meta"],[1,"item"],[1,"hint"],[3,"controlName"],["type","text","autocomplete","off",3,"formControl"]],template:function(o,s){if(o&1&&_(0,Gi,11,9,"div",1),o&2){let p;u((p=s.option())?0:-1,p)}},dependencies:[w,R,W,N,rt,mt,$],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#5787b1;color:#fff;cursor:pointer}",".ng-invalid[_nghost-%COMP%]:not(.ng-pristine)     input{border-color:#dc143c!important}.label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0});let t=n;return t})();function Wi(t,n){t&1&&(a(0,"span",4),l(1,"(optional)"),r())}function Ui(t,n){t&1&&(a(0,"ya-help"),l(1),r()),t&2&&(c(),C(" ",n," "))}function Yi(t,n){if(t&1&&(a(0,"div",1)(1,"div",2),h(2,"async"),a(3,"div",3),l(4,"string"),r()(),l(5),_(6,Wi,2,0,"span",4)(7,Ui,2,1,"ya-help"),f(8,"ya-errors",5,0)(10,"input",6),r()),t&2){let i,e=n,o=I(9),s=m();c(),G("error",y(2,7,o.invalid$)),c(4),C(" ",e.name," "),c(),u(e.required?-1:6),c(),u((i=e.description)?7:-1,i),c(),d("controlName",e.name),c(2),d("formControl",s.formControl)}}var oi=(()=>{let n=class n{constructor(){this.option=et.required(),this.formControl=new Y(null),this.validators=[],this.onChange=e=>{},this.subscriptions=[]}ngOnInit(){this.subscriptions.push(this.formControl.valueChanges.subscribe(()=>{let e=this.formControl.value;this.onChange(e)})),this.option().required&&this.validators.push(U.required)}writeValue(e){this.formControl.setValue(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){}validate(e){for(let o of this.validators){let s=o(e);if(s)return s}return null}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=T({type:n,selectors:[["app-string-option"]],inputs:{option:[1,"option"]},standalone:!0,features:[it([{provide:nt,useExisting:B(()=>n),multi:!0},{provide:ot,useExisting:B(()=>n),multi:!0}]),E],decls:1,vars:1,consts:[["err",""],[1,"label"],[1,"meta"],[1,"item"],[1,"hint"],[3,"controlName"],["type","text","autocomplete","off",3,"formControl"]],template:function(o,s){if(o&1&&_(0,Yi,11,9,"div",1),o&2){let p;u((p=s.option())?0:-1,p)}},dependencies:[w,R,W,N,rt,mt,$],styles:[".meta[_ngcontent-%COMP%]{position:absolute;top:0;right:0;display:flex}.meta[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{flex:none;background-color:#eee;font-weight:400;font-family:Roboto Mono,monospace;color:#000000a7;padding-left:2px;padding-right:2px;margin-left:10px}.meta.error[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#dc143c;color:#fff}.members[_ngcontent-%COMP%], .entries[_ngcontent-%COMP%]{margin-top:5px;padding-top:5px;padding-left:10px;border-left:1px solid rgba(0,0,0,.1)}.meta[_ngcontent-%COMP%]   .item.menu[_ngcontent-%COMP%]:hover{background-color:#5787b1;color:#fff;cursor:pointer}",".ng-invalid[_nghost-%COMP%]:not(.ng-pristine)     input{border-color:#dc143c!important}.label[_ngcontent-%COMP%]{position:relative}"],changeDetection:0});let t=n;return t})();function Ki(t,n){t&1&&f(0,"hr",5)}function zi(t,n){if(t&1&&f(0,"app-boolean-option",6),t&2){let i=m().$implicit;d("formControlName",i.name)("option",i)}}function Xi(t,n){if(t&1&&f(0,"app-float-option",6),t&2){let i=m().$implicit;d("formControlName",i.name)("option",i)}}function Qi(t,n){if(t&1&&f(0,"app-integer-option",6),t&2){let i=m().$implicit;d("formControlName",i.name)("option",i)}}function Ji(t,n){if(t&1&&f(0,"app-string-option",6),t&2){let i=m().$implicit;d("formControlName",i.name)("option",i)}}function Zi(t,n){if(t&1&&_(0,Ki,1,0,"hr",5)(1,zi,1,2,"app-boolean-option",6)(2,Xi,1,2,"app-float-option",6)(3,Qi,1,2,"app-integer-option",6)(4,Ji,1,2,"app-string-option",6),t&2){let i,e=n.$implicit,o=n.$index;u(o!==0?0:-1),c(),u((i=e.type)==="BOOLEAN"?1:i==="FLOAT"?2:i==="INTEGER"?3:i==="STRING"?4:-1)}}var ri=(()=>{let n=class n{constructor(e,o){this.dialogRef=e,this.data=o,this.form=new Ft({});for(let s of this.options){let p=new Y(s.default??null);this.form.addControl(s.name,p)}}get options(){return this.data.action.spec?.options||[]}sendRequest(){let e=this.form.value;this.dialogRef.close(e)}};n.\u0275fac=function(o){return new(o||n)(x(Rt),x(Bt))},n.\u0275cmp=T({type:n,selectors:[["ng-component"]],standalone:!0,features:[E],decls:11,vars:3,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"click","disabled"],[1,"half-break"],[3,"formControlName","option"]],template:function(o,s){o&1&&(a(0,"h2",0),l(1),r(),a(2,"mat-dialog-content")(3,"form",1),A(4,Zi,5,2,null,null,O),r()(),a(6,"mat-dialog-actions",2)(7,"button",3),l(8,"CANCEL"),r(),a(9,"button",4),v("click",function(){return s.sendRequest()}),l(10,"SUBMIT"),r()()),o&2&&(c(),D(s.data.action.label),c(2),d("formGroup",s.form),c(),V(s.options),c(5),d("disabled",!s.form.valid))},dependencies:[ei,ii,ni,w,gt,N,at,lt,st,qt,Ht,Gt,jt,oi],encapsulation:2,changeDetection:0});let t=n;return t})();var It=(()=>{let n=class n{constructor(){this.dialog=Mt($t),this.yamcs=Mt(q),this.messageService=Mt(K),this.snackBar=Mt(Te)}runAction(e,o){o.spec?this.dialog.open(ri,{data:{action:o},width:"600px"}).afterClosed().subscribe(s=>{s&&this.submitRequest(e,o,s)}):this.submitRequest(e,o)}submitRequest(e,o,s){this.snackBar.open(`Running '${o.label}' ...`,void 0,{horizontalPosition:"end"}),this.yamcs.yamcsClient.runLinkAction(this.yamcs.instance,e,o.id,s).then(()=>{this.snackBar.open(`'${o.label}' successful`,void 0,{duration:3e3,horizontalPosition:"end"})}).catch(p=>{this.messageService.showError(p),this.snackBar.open(`'${o.label}' failed`,void 0,{duration:3e3,horizontalPosition:"end"})})}};n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=pe({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();function tn(t,n){if(t&1&&(l(0),f(1,"br")),t&2){let i=n.$implicit;C(" ",i||"-","")}}function en(t,n){if(t&1&&A(0,tn,2,1,"br",null,O),t&2){let i=m();V(i)}}function nn(t,n){t&1&&l(0," - ")}function on(t,n){if(t&1&&_(0,en,2,0)(1,nn,1,0),t&2){let i=n;u(i.length?0:-1),c(),u(i.length?-1:1)}}function an(t,n){if(t&1&&(a(0,"div",1),l(1),r(),a(2,"div",2),_(3,on,2,2),r()),t&2){let i,e=n.$implicit,o=m(2);c(),D(e.key),c(2),u((i=o.getEntriesForValue(e.value))?3:-1,i)}}function rn(t,n){if(t&1&&(f(0,"br")(1,"mat-divider"),A(2,an,4,2,null,null,O),h(4,"keyvalue")),t&2){let i=m();c(2),V(y(4,0,i.link.extra))}}function ln(t,n){if(t&1){let i=b();a(0,"button",9),v("click",function(){g(i);let o=m(2);return k(o.enableLink())}),l(1,"ENABLE LINK"),r()}}function sn(t,n){if(t&1){let i=b();a(0,"button",9),v("click",function(){g(i);let o=m(2);return k(o.disableLink())}),l(1,"DISABLE LINK"),r()}}function cn(t,n){if(t&1&&(a(0,"mat-icon"),l(1,"check"),r()),t&2){let i=m().$implicit;dt("visibility",i.checked?"visible":"hidden")}}function mn(t,n){t&1&&l(0," ... ")}function pn(t,n){if(t&1){let i=b();a(0,"button",12),v("click",function(){let o=g(i).$implicit,s=m(4);return k(s.runAction(o))}),_(1,cn,2,2,"mat-icon",13),l(2),_(3,mn,1,0),r()}if(t&2){let i=n.$implicit;d("disabled",!i.enabled),c(),u(i.style==="CHECK_BOX"?1:-1),c(),C(" ",i.label," "),c(),u(i.spec?3:-1)}}function dn(t,n){if(t&1&&(f(0,"mat-divider"),A(1,pn,4,4,"button",11,O)),t&2){let i=m(3);c(),V(i.link.actions)}}function un(t,n){if(t&1){let i=b();a(0,"button",10),v("click",function(){g(i);let o=m(2);return k(o.resetCounters())}),l(1,"Reset counters"),r(),_(2,dn,3,0)}if(t&2){let i=m(2);c(2),u(i.link.actions?2:-1)}}function _n(t,n){if(t&1&&(a(0,"div",4),_(1,ln,2,0,"button",5)(2,sn,2,0,"button",5),a(3,"button",6),l(4," MORE "),a(5,"mat-icon"),l(6,"arrow_drop_down"),r()(),a(7,"mat-menu",7,0),_(9,un,3,1,"ng-template",8),r()()),t&2){let i=I(8),e=m();c(),u(e.link.status==="DISABLED"?1:-1),c(),u(e.link.status!=="DISABLED"?2:-1),c(),d("matMenuTriggerFor",i),c(4),d("overlapTrigger",!1)}}var mi=(()=>{let n=class n{constructor(e,o,s,p){this.authService=e,this.yamcs=o,this.messageService=s,this.linkService=p}mayControlLinks(){return this.authService.getUser().hasSystemPrivilege("ControlLinks")}enableLink(){this.yamcs.yamcsClient.enableLink(this.link.instance,this.link.name).catch(e=>this.messageService.showError(e))}disableLink(){this.yamcs.yamcsClient.disableLink(this.link.instance,this.link.name).catch(e=>this.messageService.showError(e))}resetCounters(){this.yamcs.yamcsClient.resetLinkCounters(this.link.instance,this.link.name).catch(e=>this.messageService.showError(e))}runAction(e){this.linkService.runAction(this.link.name,e)}getEntriesForValue(e){if(e==null)return[];let o=[];if(Array.isArray(e))for(let s=0;s<e.length;s++)typeof e[s]=="object"?o.push(""+JSON.stringify(e[s])):o.push(""+e[s]);else o.push(""+e);return o}};n.\u0275fac=function(o){return new(o||n)(x(Tt),x(q),x(K),x(It))},n.\u0275cmp=T({type:n,selectors:[["app-link-detail"]],inputs:{link:"link"},standalone:!0,features:[E],decls:31,vars:13,consts:[["moreActions",""],[1,"block-title"],[1,"block"],[3,"link"],[1,"action-bar"],[1,"ya-button"],[1,"ya-button",3,"matMenuTriggerFor"],["yPosition","below",1,"ya-menu",3,"overlapTrigger"],["matMenuContent",""],[1,"ya-button",3,"click"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled"],["mat-menu-item","",3,"click","disabled"],[3,"visibility"]],template:function(o,s){o&1&&(a(0,"div",1),l(1,"Name"),r(),a(2,"div",2),l(3),r(),a(4,"div",1),l(5,"Class"),r(),a(6,"div",2),l(7),r(),f(8,"br")(9,"mat-divider"),a(10,"div",1),l(11,"Status"),r(),a(12,"div",2),f(13,"app-link-status",3),l(14),r(),a(15,"div",1),l(16,"In count"),r(),a(17,"div",2),l(18),h(19,"number"),r(),a(20,"div",1),l(21,"Out count"),r(),a(22,"div",2),l(23),h(24,"number"),r(),a(25,"div",1),l(26,"Detail"),r(),a(27,"div",2),l(28),r(),_(29,rn,5,2)(30,_n,10,4,"div",4)),o&2&&(c(3),C(" ",s.link.name,`
`),c(4),C(" ",s.link.type,`
`),c(6),d("link",s.link),c(),C(" ",s.link.status,`
`),c(4),C(" ",y(19,9,s.link.dataInCount),`
`),c(5),C(" ",y(24,11,s.link.dataOutCount),`
`),c(5),C(" ",s.link.detailedStatus||"-",`
`),c(),u(s.link.extra?29:-1),c(),u(s.mayControlLinks()?30:-1))},dependencies:[Dt,w,Ct,At,kt,ct,bt,yt,St,Lt],encapsulation:2,changeDetection:0});let t=n;return t})();var Cn=t=>["/links",t],hn=t=>({c:t}),xn=()=>[];function vn(t,n){if(t&1){let i=b();a(0,"button",38),v("click",function(){g(i);let o=m();return k(o.enableSelectedLinks())}),a(1,"mat-icon"),l(2,"link"),r(),l(3," Enable "),r()}if(t&2){let i=m();d("disabled",!i.allowGroupEnable())}}function gn(t,n){if(t&1){let i=b();a(0,"button",38),v("click",function(){g(i);let o=m();return k(o.disableSelectedLinks())}),a(1,"mat-icon"),l(2,"link_off"),r(),l(3," Disable "),r()}if(t&2){let i=m();d("disabled",!i.allowGroupDisable())}}function kn(t,n){if(t&1&&(a(0,"button",3),l(1," More \u25BE "),r()),t&2){let i=m(),e=I(7);d("disabled",i.selection.isEmpty())("matMenuTriggerFor",e)}}function yn(t,n){if(t&1&&(a(0,"mat-icon"),l(1,"check"),r()),t&2){let i=m().$implicit;dt("visibility",i.checked?"visible":"hidden")}}function Sn(t,n){t&1&&l(0," ... ")}function bn(t,n){if(t&1){let i=b();a(0,"button",41),v("click",function(){let o=g(i).$implicit,s=m(2),p=m(2);return k(p.runAction(s.link.name,o))}),_(1,yn,2,2,"mat-icon",42),l(2),_(3,Sn,1,0),r()}if(t&2){let i=n.$implicit;d("disabled",!i.enabled),c(),u(i.style==="CHECK_BOX"?1:-1),c(),C(" ",i.label," "),c(),u(i.spec?3:-1)}}function Ln(t,n){if(t&1&&(f(0,"mat-divider"),A(1,bn,4,4,"button",40,O)),t&2){let i=m();c(),V(i.link.actions)}}function Tn(t,n){t&1&&_(0,Ln,3,0),t&2&&u(n.link.actions?0:-1)}function En(t,n){if(t&1){let i=b();a(0,"button",39),v("click",function(){g(i);let o=m();return k(o.resetCountersForSelectedLinks())}),l(1,"Reset counters"),r(),_(2,Tn,1,1),h(3,"async")}if(t&2){let i,e=m();c(2),u((i=y(3,1,e.detailLink$))?2:-1,i)}}function wn(t,n){t&1&&(a(0,"ya-detail-toolbar"),l(1," Link Detail "),r(),a(2,"div",43),f(3,"app-link-detail",44),r()),t&2&&(c(3),d("link",n.link))}function Dn(t,n){if(t&1&&(a(0,"div",43),l(1),r()),t&2){let i=m(2);c(),C("",i.selection.selected.length," links selected")}}function In(t,n){if(t&1&&(a(0,"ya-detail-toolbar"),l(1," Select a link "),r(),_(2,Dn,2,1,"div",43)),t&2){let i=m();c(2),u(i.selection.hasValue()?2:-1)}}function Mn(t,n){if(t&1){let i=b();a(0,"th",45)(1,"input",46),v("change",function(o){g(i);let s=m();return k(o?s.masterToggle():null)}),r()()}if(t&2){let i=m();c(),d("checked",i.selection.hasValue()&&i.isAllSelected())}}function On(t,n){if(t&1){let i=b();a(0,"td",47)(1,"input",48),v("click",function(o){return g(i),k(o.stopPropagation())})("change",function(o){let s=g(i).$implicit,p=m();return k(o?p.selection.toggle(s):null)}),r()()}if(t&2){let i=n.$implicit,e=m();c(),d("checked",e.selection.isSelected(i))}}function An(t,n){t&1&&(a(0,"th",49),l(1,"Name"),r())}function Vn(t,n){if(t&1&&(a(0,"div",51),f(1,"app-link-status",55),r()),t&2){let i=m().$implicit;c(),d("link",i.link)("parentLink",i.parentLink)}}function Fn(t,n){if(t&1){let i=b();a(0,"ya-icon-action",56),v("click",function(o){g(i);let s=m().$implicit,p=m();return k(p.expandItem(o,s))}),r()}if(t&2){let i=m().$implicit;d("icon",i.expanded?"expand_more":"chevron_right")}}function Pn(t,n){if(t&1&&(a(0,"td",50),_(1,Vn,2,2,"div",51),a(2,"a",52),f(3,"ya-highlight",53),r(),_(4,Fn,1,1,"ya-icon-action",54),r()),t&2){let i=n.$implicit,e=m();c(),u(i.link.parentName?1:-1),c(),d("routerLink",X(6,Cn,i.link.name))("queryParams",X(8,hn,e.yamcs.context)),c(),d("text",i.link.name)("term",e.filterControl.value),c(),u(i.hasChildren?4:-1)}}function Nn(t,n){t&1&&(a(0,"th",49),l(1,"Class"),r())}function Rn(t,n){if(t&1&&(a(0,"td",57),f(1,"ya-highlight",53),r()),t&2){let i=n.$implicit,e=m();c(),d("text",i.link.type)("term",e.filterControl.value)}}function Bn(t,n){t&1&&f(0,"th",58)}function $n(t,n){if(t&1&&f(0,"app-link-status",44),t&2){let i=m().$implicit;d("link",i.link)}}function qn(t,n){if(t&1&&(a(0,"td",59),_(1,$n,1,1,"app-link-status",44),r()),t&2){let i=n.$implicit;c(),u(i.link.parentName?-1:1)}}function Hn(t,n){t&1&&(a(0,"th",49),l(1,"Detail"),r())}function jn(t,n){if(t&1&&(a(0,"td",57),l(1),r()),t&2){let i=n.$implicit;c(),C(" ",i.link.detailedStatus||"-"," ")}}function Gn(t,n){t&1&&(a(0,"th",60),l(1,"In"),r())}function Wn(t,n){if(t&1&&(a(0,"td",61),l(1),h(2,"number"),r()),t&2){let i=n.$implicit;c(),C(" ",y(2,1,i.link.dataInCount)," ")}}function Un(t,n){t&1&&(a(0,"th",60),l(1,"Out"),r())}function Yn(t,n){if(t&1&&(a(0,"td",61),l(1),h(2,"number"),r()),t&2){let i=n.$implicit;c(),C(" ",y(2,1,i.link.dataOutCount)," ")}}function Kn(t,n){t&1&&f(0,"th",62)}function zn(t,n){if(t&1&&(a(0,"mat-icon"),l(1,"check"),r()),t&2){let i=m().$implicit;dt("visibility",i.checked?"visible":"hidden")}}function Xn(t,n){t&1&&l(0," ... ")}function Qn(t,n){if(t&1){let i=b();a(0,"button",41),v("click",function(){let o=g(i).$implicit,s=m(3).$implicit,p=m();return k(p.runAction(s.link.name,o))}),_(1,zn,2,2,"mat-icon",42),l(2),_(3,Xn,1,0),r()}if(t&2){let i=n.$implicit;d("disabled",!i.enabled),c(),u(i.style==="CHECK_BOX"?1:-1),c(),C(" ",i.label," "),c(),u(i.spec?3:-1)}}function Jn(t,n){if(t&1&&(f(0,"mat-divider"),A(1,Qn,4,4,"button",40,O)),t&2){let i=m(2).$implicit;c(),V(i.link.actions||Ot(0,xn))}}function Zn(t,n){if(t&1){let i=b();a(0,"ya-more")(1,"button",41),v("click",function(){g(i);let o=m().$implicit,s=m();return k(s.enableLink(o.link.name))}),l(2," Enable link "),r(),a(3,"button",41),v("click",function(){g(i);let o=m().$implicit,s=m();return k(s.disableLink(o.link.name))}),l(4," Disable link "),r(),f(5,"mat-divider"),a(6,"button",39),v("click",function(){g(i);let o=m().$implicit,s=m();return k(s.resetCounters(o.link.name))}),l(7,"Reset counters"),r(),_(8,Jn,3,1),r()}if(t&2){let i=m().$implicit;c(),d("disabled",i.link.status!=="DISABLED"),c(2),d("disabled",i.link.status==="DISABLED"),c(5),u(i.link.actions?8:-1)}}function to(t,n){if(t&1&&(a(0,"td",57),_(1,Zn,9,3,"ya-more"),r()),t&2){let i=m();c(),u(i.mayControlLinks()?1:-1)}}function eo(t,n){t&1&&f(0,"tr",63)}function io(t,n){if(t&1){let i=b();a(0,"tr",64),v("click",function(){let o=g(i).$implicit,s=m();return k(s.toggleOne(o))}),r()}if(t&2){let i=n.$implicit,e=m();G("selected",e.selection.isSelected(i))("disabled",i.link.status==="DISABLED")}}var pi=(()=>{let n=class n{constructor(e,o,s,p,L,S,Z,j){this.yamcs=e,this.authService=o,this.changeDetection=p,this.route=L,this.router=S,this.messageService=Z,this.linkService=j,this.filterControl=new ut,this.detailLink$=new tt(null),this.columns=[{id:"select",label:"",alwaysVisible:!0},{id:"status",label:"",alwaysVisible:!0},{id:"name",label:"Name",alwaysVisible:!0},{id:"className",label:"Class name"},{id:"in",label:"In count",visible:!0},{id:"out",label:"Out count",visible:!0},{id:"detailedStatus",label:"Detail",visible:!0},{id:"actions",label:"",alwaysVisible:!0}],this.dataSource=new ee,this.selection=new ke(!0,[]),this.itemsByName={},this.tableTrackerFn=(M,pt)=>pt.link.name,s.setTitle("Links"),this.dataSource.filterPredicate=(M,pt)=>M.link.name.toLowerCase().indexOf(pt)>=0||M.link.type.toLowerCase().indexOf(pt)>=0,this.selectionSubscription=this.selection.changed.subscribe(()=>{let M=this.selection.selected;M.length===1?this.detailLink$.next(M[0]):this.detailLink$.next(null)})}ngAfterViewInit(){let e=this.route.snapshot.queryParamMap;e.has("filter")&&(this.filterControl.setValue(e.get("filter")),this.dataSource.filter=e.get("filter").toLowerCase()),this.filterControl.valueChanges.subscribe(()=>{this.updateURL();let o=this.filterControl.value||"";this.dataSource.filter=o.toLowerCase();for(let s of this.selection.selected)this.dataSource.filteredData.indexOf(s)===-1&&this.selection.deselect(s)}),this.yamcs.yamcsClient.getLinks(this.yamcs.instance).then(o=>{for(let s of o){let p={link:s,hasChildren:!1,expanded:!1};this.itemsByName[s.name]=p}for(let s of o)if(s.parentName){let p=this.itemsByName[s.parentName];p.hasChildren=!0,this.itemsByName[s.name].parentLink=p.link}this.updateDataSource(),this.linkSubscription=this.yamcs.yamcsClient.createLinkSubscription({instance:this.yamcs.instance},s=>{this.processLinkEvent(s)})})}expandItem(e,o){if(o.expanded=!o.expanded,!o.expanded)for(let s of this.selection.selected)s.parentLink&&s.parentLink.name===o.link.name&&this.selection.deselect(s);this.updateDataSource(),e.stopPropagation()}enableLink(e){this.yamcs.yamcsClient.enableLink(this.yamcs.instance,e).catch(o=>this.messageService.showError(o))}disableLink(e){this.yamcs.yamcsClient.disableLink(this.yamcs.instance,e).catch(o=>this.messageService.showError(o))}resetCounters(e){this.yamcs.yamcsClient.resetLinkCounters(this.yamcs.instance,e).catch(o=>this.messageService.showError(o))}runAction(e,o){this.linkService.runAction(e,o)}mayControlLinks(){return this.authService.getUser().hasSystemPrivilege("ControlLinks")}processLinkEvent(e){if(e.type!=="UPDATE_ALL")return;let o=[];for(let p of e.links||[]){o.push(p.name);let L=this.detailLink$.value;if(L&&L.link.name===p.name){L.link=p;for(let S of Object.values(this.itemsByName))S.link.parentName===p.name&&(S.parentLink=p);this.detailLink$.next(ce({},L))}if(p.name in this.itemsByName)this.itemsByName[p.name].link=p;else{let S={link:p,hasChildren:!1,expanded:!1};this.itemsByName[p.name]=S}for(let S of Object.values(this.itemsByName))S.parentLink&&S.parentLink.name===p.name&&(S.parentLink=p),p.parentName&&p.parentName===S.link.name&&(S.hasChildren=!0)}let s=[];for(let p in this.itemsByName)if(o.indexOf(p)===-1){let L=this.itemsByName[p];this.selection.deselect(L),s.push(p)}for(let p of s)delete this.itemsByName[p];this.updateDataSource(),this.changeDetection.detectChanges()}updateDataSource(){let e=Object.values(this.itemsByName).filter(o=>{let s=o.link.parentName;return s?this.itemsByName[s].expanded:!0});e.sort((o,s)=>{let p=o.link.name.split("."),L=s.link.name.split(".");for(let S=0;S<Math.max(p.length,L.length);S++){let Z=S<p.length?p[S]:"",j=S<L.length?L[S]:"",M=Z.localeCompare(j);if(M!==0)return M}return 0}),this.dataSource.data=e}allowGroupEnable(){for(let e of this.selection.selected)if(e.link.disabled)return!0;return!1}allowGroupDisable(){for(let e of this.selection.selected)if(!e.link.disabled)return!0;return!1}isAllSelected(){let e=this.selection.selected.length,o=this.dataSource.filteredData.length;return e===o&&o>0}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.filteredData.forEach(e=>this.selection.select(e))}toggleOne(e){(!this.selection.isSelected(e)||this.selection.selected.length>1)&&this.selection.clear(),this.selection.toggle(e)}enableSelectedLinks(){for(let e of this.selection.selected)this.enableLink(e.link.name)}disableSelectedLinks(){for(let e of this.selection.selected)this.disableLink(e.link.name)}resetCountersForSelectedLinks(){for(let e of this.selection.selected)this.resetCounters(e.link.name)}updateURL(){let e=this.filterControl.value;this.router.navigate([],{replaceUrl:!0,relativeTo:this.route,queryParams:{filter:e||null},queryParamsHandling:"merge"})}selectNext(){let e=this.dataSource.filteredData,o=0;if(this.selection.hasValue()){let s=this.selection.selected[this.selection.selected.length-1];e.indexOf(s)!==-1&&(o=Math.min(e.indexOf(s)+1,e.length-1))}this.selection.clear(),this.selection.select(e[o])}selectPrevious(){let e=this.dataSource.filteredData,o=0;if(this.selection.hasValue()){let s=this.selection.selected[0];e.indexOf(s)!==-1&&(o=Math.max(e.indexOf(s)-1,0))}this.selection.clear(),this.selection.select(e[o])}applySelection(){if(this.selection.hasValue()&&this.selection.selected.length===1){let e=this.selection.selected[0];this.router.navigate(["/links",e.link.name],{queryParams:{c:this.yamcs.context}})}}ngOnDestroy(){this.selectionSubscription?.unsubscribe(),this.linkSubscription?.cancel()}};n.\u0275fac=function(o){return new(o||n)(x(q),x(Tt),x(ht),x(xe),x(xt),x(Vt),x(K),x(It))},n.\u0275cmp=T({type:n,selectors:[["ng-component"]],standalone:!0,features:[E],decls:62,vars:21,consts:[["moreActions",""],["columnChooser",""],["mat-button","","color","primary",3,"disabled"],["mat-button","","color","primary",3,"disabled","matMenuTriggerFor"],["yPosition","below",1,"ya-menu",3,"overlapTrigger"],["matMenuContent",""],[1,"table-wrapper"],[1,"panel-content"],[1,"filter-bar",2,"margin-top","16px"],["placeholder","Filter links",3,"onArrowDown","onArrowUp","onEnter","formControl"],["preferenceKey","links",3,"columns"],["mat-table","",1,"ya-data-table","expand",3,"dataSource","trackBy"],["cdkColumnDef","select"],["mat-header-cell","","class","checkbox",4,"cdkHeaderCellDef"],["mat-cell","","class","checkbox",4,"cdkCellDef"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","style","white-space: nowrap",4,"matCellDef"],["matColumnDef","className"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["mat-header-cell","","class","status",4,"matHeaderCellDef"],["mat-cell","","class","status","style","line-height: 0",4,"matCellDef"],["matColumnDef","detailedStatus"],["matColumnDef","in"],["mat-header-cell","","style","text-align: center",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center",4,"matCellDef"],["matColumnDef","out"],["matColumnDef","actions"],["mat-header-cell","","class","expand",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected","disabled","click",4,"matRowDef","matRowDefColumns"],[1,"legend"],[1,"legend-item"],["color","rgba(0, 100, 0)",3,"fade"],["color","rgba(0, 255, 0)",3,"fade"],["color","red",3,"fade"],["color","#aaa",3,"fade"],["mat-button","","color","primary",3,"click","disabled"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled"],["mat-menu-item","",3,"click","disabled"],[3,"visibility"],[2,"padding","0 16px"],[3,"link"],["mat-header-cell","",1,"checkbox"],["type","checkbox",3,"change","checked"],["mat-cell","",1,"checkbox"],["type","checkbox",3,"click","change","checked"],["mat-header-cell",""],["mat-cell","",2,"white-space","nowrap"],[2,"display","inline-block","margin-right","10px"],[3,"routerLink","queryParams"],[3,"text","term"],[3,"icon"],[3,"link","parentLink"],[3,"click","icon"],["mat-cell",""],["mat-header-cell","",1,"status"],["mat-cell","",1,"status",2,"line-height","0"],["mat-header-cell","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],["mat-header-cell","",1,"expand"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(o,s){if(o&1){let p=b();a(0,"app-instance-page")(1,"app-instance-toolbar"),l(2," Links \xA0\xA0\xA0 "),_(3,vn,4,1,"button",2)(4,gn,4,1,"button",2)(5,kn,2,2,"button",3),a(6,"mat-menu",4,0),_(8,En,4,3,"ng-template",5),r()(),a(9,"ya-detail-pane"),_(10,wn,4,1),h(11,"async"),_(12,In,3,1),r(),a(13,"div",6)(14,"div",7),f(15,"app-links-page-tabs"),a(16,"div",8)(17,"ya-search-filter",9),v("onArrowDown",function(){return g(p),k(s.selectNext())})("onArrowUp",function(){return g(p),k(s.selectPrevious())})("onEnter",function(){return g(p),k(s.applySelection())}),r(),f(18,"ya-column-chooser",10,1),r(),a(20,"table",11),F(21,12),_(22,Mn,2,1,"th",13)(23,On,2,1,"td",14),P(),F(24,15),_(25,An,2,0,"th",16)(26,Pn,5,10,"td",17),P(),F(27,18),_(28,Nn,2,0,"th",16)(29,Rn,2,2,"td",19),P(),F(30,20),_(31,Bn,1,0,"th",21)(32,qn,2,1,"td",22),P(),F(33,23),_(34,Hn,2,0,"th",16)(35,jn,2,1,"td",19),P(),F(36,24),_(37,Gn,2,0,"th",25)(38,Wn,3,3,"td",26),P(),F(39,27),_(40,Un,2,0,"th",25)(41,Yn,3,3,"td",26),P(),F(42,28),_(43,Kn,1,0,"th",29)(44,to,2,1,"td",19),P(),_(45,eo,1,0,"tr",30),h(46,"async"),_(47,io,1,4,"tr",31),h(48,"async"),r(),a(49,"div",32)(50,"div",33),f(51,"ya-led",34),l(52," OK"),r(),a(53,"div",33),f(54,"ya-led",35),l(55," OK, activity "),r(),a(56,"div",33),f(57,"ya-led",36),l(58," Error"),r(),a(59,"div",33),f(60,"ya-led",37),l(61," Disabled"),r()()()()()}if(o&2){let p,L=I(19);c(3),u(s.mayControlLinks()?3:-1),c(),u(s.mayControlLinks()?4:-1),c(),u(s.mayControlLinks()?5:-1),c(),d("overlapTrigger",!1),c(4),u((p=y(11,15,s.detailLink$))?10:12,p),c(7),d("formControl",s.filterControl),c(),d("columns",s.columns),c(2),d("dataSource",s.dataSource)("trackBy",s.tableTrackerFn),c(25),d("matHeaderRowDef",y(46,17,L.displayedColumns$)),c(2),d("matRowDefColumns",y(48,19,L.displayedColumns$)),c(4),d("fade",!1),c(3),d("fade",!1),c(3),d("fade",!1),c(3),d("fade",!1)}},dependencies:[wt,Et,mi,Dt,ae,w,R,Ct,N,rt,vt,Ee,we,De,Nt,kt,ct,bt,yt,St,Lt,Wt,Yt,Qt,Kt,Ut,Jt,zt,Xt,Zt,te,Ae,Fe,Pe,Be,$e,ne,je,Ge],styles:[".detail[_ngcontent-%COMP%]{background-color:#fafafa;float:right;height:100%;width:450px;overflow:auto;border-left:1px solid #d3d3d3;box-sizing:border-box}.table-wrapper[_ngcontent-%COMP%]{position:relative;overflow:auto;height:100%}tr.disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], tr.disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-style:italic;color:#aaa}.legend[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:12px;margin-top:12px;margin-left:10px;font-family:Roboto,sans-serif}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:10px}.legend-item[_ngcontent-%COMP%]   ya-led[_ngcontent-%COMP%]{margin-right:4px}"],changeDetection:0});let t=n;return t})();function no(t,n){t&1&&(a(0,"label"),l(1," CLCW check timeout (milliseconds) "),a(2,"ya-help",11)(3,"p"),l(4," Timeout associated to acknowledgment CLCWs. If a command frame is not acknowledged within this time, it will be retransmitted. "),r(),a(5,"p"),l(6," Other names: "),a(7,"code"),l(8,"T1_Initial"),r(),l(9," \xA0\u2022\xA0 "),a(10,"code"),l(11,"Timer_Initial_Value"),r(),l(12,". "),r()(),f(13,"input",12),r())}function oo(t,n){t&1&&(a(0,"label"),l(1," V(R) "),a(2,"ya-help",13)(3,"p"),l(4," The N(S) frame sequence number expected to be seen by FARM-1 in the next Type-AD transfer frame. "),r(),a(5,"p"),l(6,"Other name: "),a(7,"code"),l(8,"Receiver_Frame_Sequence_Number"),r(),l(9,"."),r()(),f(10,"input",14),r())}function ao(t,n){if(t&1&&(f(0,"mat-divider",10),_(1,no,14,0,"label")(2,oo,11,0,"label")),t&2){let i=m();c(),u(i.form.controls.type.value=="WITH_CLCW_CHECK"?1:-1),c(),u(i.form.controls.type.value=="SET_VR"?2:-1)}}var ro=t=>{let n=t.get("type").value,i=t.get("clcwCheckTimeout").value,e=t.get("vr").value;return n=="WITH_CLCW_CHECK"&&(i===null||i==="")?{combined:"CLCW Check Timeout must be specified"}:n=="SET_VR"&&(e===null||e=="")?{combined:"V(R) must be specified"}:null},di=(()=>{let n=class n{constructor(e,o,s){this.dialogRef=e,this.data=s,this.form=o.group({type:["WITH_CLCW_CHECK",U.required],clcwCheckTimeout:"3000",vr:null},{validators:[ro]})}sendRequest(){let e=this.form.value,o={type:e.type};o.type==="WITH_CLCW_CHECK"?o.clcwCheckInitializeTimeout=Number(e.clcwCheckTimeout):o.type==="SET_VR"&&(o.vR=Number(e.vr)),this.dialogRef.close(o)}};n.\u0275fac=function(o){return new(o||n)(x(Rt),x(Se),x(Bt))},n.\u0275cmp=T({type:n,selectors:[["app-initiate-cop1-dialog"]],standalone:!0,features:[E],decls:26,vars:3,consts:[["mat-dialog-title",""],[1,"ya-form",3,"formGroup"],["type","radio","formControlName","type","value","WITHOUT_CLCW_CHECK"],[2,"font-weight","normal"],["type","radio","formControlName","type","value","WITH_CLCW_CHECK"],["type","radio","formControlName","type","value","UNLOCK"],["type","radio","formControlName","type","value","SET_VR"],["align","end"],["mat-dialog-close","",1,"ya-button"],[1,"ya-button","primary",3,"click","disabled"],[2,"margin-top","1em","margin-bottom","1em"],["dialogTitle","CLCW Check Timeout"],["type","text","formControlName","clcwCheckTimeout"],["dialogTitle","V(R)"],["type","text","formControlName","vr"]],template:function(o,s){o&1&&(a(0,"h2",0),l(1,"Initiate COP-1 AD Service"),r(),a(2,"mat-dialog-content")(3,"form",1)(4,"label"),f(5,"input",2),a(6,"span",3),l(7,"Without CLCW check"),r()(),a(8,"label"),f(9,"input",4),a(10,"span",3),l(11,"With CLCW check"),r()(),a(12,"label"),f(13,"input",5),a(14,"span",3),l(15,"With Unlock"),r()(),a(16,"label"),f(17,"input",6),a(18,"span",3),l(19,"With Set V(R)"),r()(),_(20,ao,3,2),r()(),a(21,"mat-dialog-actions",7)(22,"button",8),l(23,"CANCEL"),r(),a(24,"button",9),v("click",function(){return s.sendRequest()}),l(25," INITIATE "),r()()),o&2&&(c(3),d("formGroup",s.form),c(17),u(s.form.controls.type.value=="WITH_CLCW_CHECK"||s.form.controls.type.value=="SET_VR"?20:-1),c(4),d("disabled",!s.form.valid))},dependencies:[w,gt,W,Pt,N,at,lt,st,qt,Ht,Gt,jt,ct,$],encapsulation:2});let t=n;return t})();var ui=t=>({c:t});function lo(t,n){if(t&1){let i=b();a(0,"button",10),v("click",function(){g(i);let o=m(),s=m();return k(s.enableLink(o.name))}),a(1,"mat-icon"),l(2,"link"),r(),l(3," Enable "),r()}if(t&2){let i=m();d("disabled",!i.disabled)}}function so(t,n){if(t&1){let i=b();a(0,"button",10),v("click",function(){g(i);let o=m(),s=m();return k(s.disableLink(o.name))}),a(1,"mat-icon"),l(2,"link_off"),r(),l(3," Disable "),r()}if(t&2){let i=m();d("disabled",i.disabled)}}function co(t,n){if(t&1&&(a(0,"button",3),l(1,"More \u25BE"),r()),t&2){m();let i=I(10);d("matMenuTriggerFor",i)}}function mo(t,n){if(t&1&&(a(0,"mat-icon"),l(1,"check"),r()),t&2){let i=m().$implicit;dt("visibility",i.checked?"visible":"hidden")}}function po(t,n){if(t&1){let i=b();a(0,"button",13),v("click",function(){let o=g(i).$implicit,s=m(3),p=m();return k(p.runAction(s.name,o))}),_(1,mo,2,2,"mat-icon",14),l(2),r()}if(t&2){let i=n.$implicit;d("disabled",!i.enabled),c(),u(i.style==="CHECK_BOX"?1:-1),c(),C(" ",i.label," ")}}function uo(t,n){if(t&1&&(f(0,"mat-divider"),A(1,po,3,3,"button",12,O)),t&2){let i=m(2);c(),V(i.actions)}}function _o(t,n){if(t&1){let i=b();a(0,"button",11),v("click",function(){g(i);let o=m(),s=m();return k(s.resetCounters(o.name))}),l(1,"Reset counters"),r(),_(2,uo,3,0)}if(t&2){let i=m();c(2),u(i.actions?2:-1)}}function fo(t,n){if(t&1&&(l(0),f(1,"br")),t&2){let i=n.$implicit;C(" ",i||"-","")}}function Co(t,n){if(t&1&&A(0,fo,2,1,"br",null,O),t&2){let i=m();V(i)}}function ho(t,n){t&1&&l(0," - ")}function xo(t,n){if(t&1&&_(0,Co,2,0)(1,ho,1,0),t&2){let i=n;u(i.length?0:-1),c(),u(i.length?-1:1)}}function vo(t,n){if(t&1&&(a(0,"dt"),l(1),r(),a(2,"dd"),_(3,xo,2,2),r()),t&2){let i,e=n.$implicit,o=m(3);c(),D(e.key),c(2),u((i=o.getEntriesForValue(e.value))?3:-1,i)}}function go(t,n){if(t&1&&(a(0,"div",15),f(1,"mat-divider"),r(),a(2,"dl",16),A(3,vo,4,2,null,null,O),h(5,"keyvalue"),r()),t&2){let i=m();c(3),V(y(5,0,i.extra))}}function ko(t,n){if(t&1&&(a(0,"mat-icon",17),l(1,"toll"),r(),l(2,"\xA0 "),a(3,"a",18),l(4),r(),f(5,"br")),t&2){let i=n.$implicit,e=m(3);c(3),d("routerLink","/telemetry/parameters"+i)("queryParams",X(3,ui,e.yamcs.context)),c(),D(i)}}function yo(t,n){if(t&1&&(a(0,"div",15),f(1,"mat-divider"),r(),a(2,"h4"),l(3,"System parameters"),r(),A(4,ko,6,5,null,null,O)),t&2){let i=m();c(4),V(i.parameters)}}function So(t,n){if(t&1){let i=b();a(0,"ya-text-action",25),v("click",function(){g(i);let o=m(4),s=m();return k(s.openInitiateCop1Dialog(o.name))}),l(1," INITIATE AD "),r()}}function bo(t,n){if(t&1){let i=b();a(0,"ya-text-action",26),v("click",function(){g(i);let o=m(4),s=m();return k(s.resumeCop1(o.name))}),l(1," RESUME AD "),r()}}function Lo(t,n){if(t&1){let i=b();a(0,"ya-text-action",27),v("click",function(){g(i);let o=m(4),s=m();return k(s.disableCop1(o.name))}),l(1," TERMINATE AD "),r()}}function To(t,n){if(t&1&&(a(0,"div",19),_(1,So,2,0,"ya-text-action",22)(2,bo,2,0,"ya-text-action",23)(3,Lo,2,0,"ya-text-action",24),r()),t&2){let i=m();c(),u(i.cop1Active?-1:1),c(),u(i.state==="SUSPENDED"?2:-1),c(),u(i.cop1Active?3:-1)}}function Eo(t,n){t&1&&l(0," AD (Sequence-controlled service) ")}function wo(t,n){t&1&&l(0," BD (Expedited service) ")}function Do(t,n){if(t&1&&l(0),t&2){let i=m(2);C(" of ",i.txLimit," ")}}function Io(t,n){if(t&1&&(a(0,"div",15),f(1,"mat-divider"),r(),a(2,"h4"),l(3," COP-1 "),_(4,To,4,3,"div",19),r(),a(5,"dl",16)(6,"dt"),l(7," Service "),a(8,"ya-help")(9,"p"),l(10," COP-1 provides two service modes that determine how reliably frames are transmitted: "),r(),a(11,"table",20)(12,"tr")(13,"td",21),l(14,"AD (Sequence-controlled)"),r(),a(15,"td"),l(16,"Sends Type-AD and Type-BC Transfer Frames."),r()(),a(17,"tr")(18,"td",21),l(19,"BD (Expedited)"),r(),a(20,"td"),l(21,"Sends Type-BD Transfer Frames. There are no retransmissions."),r()()()()(),a(22,"dd"),_(23,Eo,1,0)(24,wo,1,0),r()(),a(25,"dl",16)(26,"dt"),l(27,"Wait queue"),r(),a(28,"dd"),l(29),r(),a(30,"dt"),l(31,"Enqueue TCs with bypass"),r(),a(32,"dd"),l(33),h(34,"nvl"),r()(),a(35,"dl",16)(36,"dt"),l(37,"TX state"),r(),a(38,"dd"),l(39),r(),a(40,"dt"),l(41,"V(S)"),r(),a(42,"dd"),l(43),h(44,"nvl"),r(),a(45,"dt"),l(46,"Sent queue"),r(),a(47,"dd"),l(48),r(),a(49,"dt"),l(50,"Out queue"),r(),a(51,"dd"),l(52),r(),a(53,"dt"),l(54,"Last frame TX attempts"),r(),a(55,"dd"),l(56),h(57,"nvl"),_(58,Do,1,1),r()(),a(59,"dl",16)(60,"dt"),l(61,"On TX timeout"),r(),a(62,"dd"),l(63),r(),a(64,"dt"),l(65,"Retransmission delay"),r(),a(66,"dd"),l(67),r()(),a(68,"h4"),l(69,"CLCW"),r(),a(70,"dl",7)(71,"dt"),l(72,"Received"),r(),a(73,"dd"),l(74),h(75,"datetime"),r(),a(76,"dt"),l(77,"Lockout"),r(),a(78,"dd"),l(79),h(80,"nvl"),r(),a(81,"dt"),l(82,"Wait"),r(),a(83,"dd"),l(84),h(85,"nvl"),r(),a(86,"dt"),l(87,"Retransmit"),r(),a(88,"dd"),l(89),h(90,"nvl"),r(),a(91,"dt"),l(92,"N(R)"),r(),a(93,"dd"),l(94),h(95,"nvl"),r()(),a(96,"dl",16)(97,"dt"),l(98,"NN(R)"),r(),a(99,"dd"),l(100),h(101,"nvl"),r()()),t&2){let i=n,e=m(),o=m(2);c(4),u(o.mayControlLinks()?4:-1),c(19),u(i.cop1Active?23:-1),c(),u(i.cop1Active?-1:24),c(5),C("",i.waitQueueNumTC||0," TCs"),c(4),C(" ",Q(34,20,!e.bdAbsolutePriority,"-")," "),c(6),D(i.state||"-"),c(4),D(Q(44,23,i.vS,"-")),c(5),he("",i.sentQueueNumFrames||0," frames (limit: ",e.windowWidth,")"),c(4),D(i.outQueueNumFrames||0),c(4),C(" ",Q(57,26,i.txCount,"-")," "),c(2),u(i.txCount?58:-1),c(5),D(e.timeoutType||"-"),c(4),C("",e.t1," ms"),c(7),D(y(75,29,i.clcw==null?null:i.clcw.receptionTime)||"-"),c(5),C(" ",Q(80,31,i.clcw==null?null:i.clcw.lockout,"-")," "),c(5),C(" ",Q(85,34,i.clcw==null?null:i.clcw.wait,"-")," "),c(5),C(" ",Q(90,37,i.clcw==null?null:i.clcw.retransmit,"-")," "),c(5),D(Q(95,40,i.clcw==null?null:i.clcw.nR,"-")),c(6),D(Q(101,43,i.nnR,"-"))}}function Mo(t,n){if(t&1&&(_(0,Io,102,46),h(1,"async")),t&2){let i,e=m(2);u((i=y(1,1,e.cop1Status$))?0:-1,i)}}function Oo(t,n){if(t&1&&(a(0,"app-instance-page")(1,"app-instance-toolbar")(2,"a",1)(3,"mat-icon"),l(4,"arrow_back"),r()(),l(5),_(6,lo,4,1,"button",2)(7,so,4,1,"button",2)(8,co,2,1,"button",3),a(9,"mat-menu",4,0),_(11,_o,3,1,"ng-template",5),r()(),a(12,"div",6)(13,"dl",7)(14,"dt"),l(15,"Type"),r(),a(16,"dd"),l(17),r(),a(18,"dt"),l(19,"Status"),r(),a(20,"dd",8),f(21,"app-link-status",9),l(22),r(),a(23,"dt"),l(24,"In count"),r(),a(25,"dd"),l(26),h(27,"number"),r(),a(28,"dt"),l(29,"Out count"),r(),a(30,"dd"),l(31),h(32,"number"),r(),a(33,"dt"),l(34,"Detail"),r(),a(35,"dd"),l(36),r()(),_(37,go,6,2)(38,yo,6,0)(39,Mo,2,3),h(40,"async"),r()()),t&2){let i,e=n,o=m();c(2),d("queryParams",X(21,ui,o.yamcs.context)),c(3),C(" Links / ",e.name," \xA0\xA0\xA0 "),c(),u(o.mayControlLinks()?6:-1),c(),u(o.mayControlLinks()?7:-1),c(),u(o.mayControlLinks()?8:-1),c(),d("overlapTrigger",!1),c(8),D(e.type),c(4),d("link",e),c(),C("\xA0 ",e.status," "),c(4),D(y(27,15,e.dataInCount)),c(5),D(y(32,17,e.dataOutCount)),c(5),D(e.detailedStatus||"-"),c(),u(e.extra?37:-1),c(),u(e.parameters?38:-1),c(),u((i=y(40,19,o.cop1Config$))?39:-1,i)}}var _i=(()=>{let n=class n{constructor(e,o,s,p,L,S,Z){this.title=e,this.yamcs=s,this.authService=p,this.messageService=L,this.dialog=S,this.linkService=Z,this.link$=new tt(null),this.cop1Config$=new tt(null),this.cop1Status$=new tt(null),o.paramMap.subscribe(j=>{let M=j.get("link");this.changeLink(M)}),this.linkSubscription=this.yamcs.yamcsClient.createLinkSubscription({instance:this.yamcs.instance},j=>{if(j.type==="UPDATE_ALL")for(let M of j.links||[]){let pt=this.link$.value;pt&&pt.name===M.name&&this.link$.next(M)}})}changeLink(e){this.cop1Subscription?.cancel(),this.cop1Status$.next(null),this.cop1Config$.next(null),this.yamcs.yamcsClient.getLink(this.yamcs.instance,e).then(o=>{this.link$.next(o),this.title.setTitle(e),o.type.indexOf("Cop1Tc")!==-1&&(this.yamcs.yamcsClient.getCop1Config(this.yamcs.instance,e).then(s=>{this.cop1Config$.next(s)}),this.cop1Subscription=this.yamcs.yamcsClient.createCop1Subscription({instance:o.instance,link:e},s=>{this.cop1Status$.next(s)}))})}openInitiateCop1Dialog(e){this.dialog.open(di,{width:"400px"}).afterClosed().subscribe(s=>{s&&this.initiateCop1(e,s)})}initiateCop1(e,o){this.yamcs.yamcsClient.initiateCop1(this.yamcs.instance,e,o).catch(s=>this.messageService.showError(s))}disableCop1(e){this.yamcs.yamcsClient.disableCop1(this.yamcs.instance,e).catch(o=>this.messageService.showError(o))}resumeCop1(e){this.yamcs.yamcsClient.resumeCop1(this.yamcs.instance,e).catch(o=>this.messageService.showError(o))}mayControlLinks(){return this.authService.getUser().hasSystemPrivilege("ControlLinks")}enableLink(e){this.yamcs.yamcsClient.enableLink(this.yamcs.instance,e).catch(o=>this.messageService.showError(o))}disableLink(e){this.yamcs.yamcsClient.disableLink(this.yamcs.instance,e).catch(o=>this.messageService.showError(o))}resetCounters(e){this.yamcs.yamcsClient.resetLinkCounters(this.yamcs.instance,e).catch(o=>this.messageService.showError(o))}runAction(e,o){this.linkService.runAction(e,o)}getEntriesForValue(e){if(e==null)return[];let o=[];if(Array.isArray(e))for(let s=0;s<e.length;s++)typeof e[s]=="object"?o.push(""+JSON.stringify(e[s])):o.push(""+e[s]);else o.push(""+e);return o}ngOnDestroy(){this.linkSubscription?.cancel(),this.cop1Subscription?.cancel()}};n.\u0275fac=function(o){return new(o||n)(x(ht),x(xt),x(q),x(Tt),x(K),x($t),x(It))},n.\u0275cmp=T({type:n,selectors:[["ng-component"]],standalone:!0,features:[E],decls:2,vars:3,consts:[["moreActions",""],["mat-icon-button","","routerLink","..","color","primary",3,"queryParams"],["mat-button","","color","primary",3,"disabled"],["mat-button","","color","primary",3,"matMenuTriggerFor"],["yPosition","below",1,"ya-menu",3,"overlapTrigger"],["matMenuContent",""],[1,"form-content"],[1,"dl-horizontal",2,"margin-top","0"],[2,"display","flex","align-items","center"],[3,"link"],["mat-button","","color","primary",3,"click","disabled"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled"],["mat-menu-item","",3,"click","disabled"],[3,"visibility"],[1,"section-divider"],[1,"dl-horizontal"],[1,"icon12",2,"vertical-align","middle"],[1,"ya-link",3,"routerLink","queryParams"],[2,"float","right"],[1,"ya-data-table"],["width","1",2,"white-space","nowrap"],["icon","adjust"],["icon","redo"],["icon","not_interested"],["icon","adjust",3,"click"],["icon","redo",3,"click"],["icon","not_interested",3,"click"]],template:function(o,s){if(o&1&&(_(0,Oo,41,23,"app-instance-page"),h(1,"async")),o&2){let p;u((p=y(1,1,s.link$))?0:-1,p)}},dependencies:[wt,Et,Dt,w,R,Ct,At,vt,Nt,be,kt,ct,bt,yt,St,Lt,$,Re,oe,Ue],encapsulation:2,changeDetection:0});let t=n;return t})();var dr=[{path:"",canActivate:[ze,Ke],canActivateChild:[Xe],runGuardsAndResolvers:"always",component:Qe,children:[{path:"",pathMatch:"full",component:pi},{path:"log",component:ti},{path:":link",component:_i}]}];export{dr as ROUTES};
