import{b as W,d as Y,e as H,f as Q}from"./chunk-FTOGDGWN.js";import{Aa as m,Ba as q,Ca as F,Da as R,F as b,Ga as D,Ia as j,K as k,L as I,La as C,Ma as S,Re as O,Ve as U,X as r,Xe as J,Y as p,Yd as N,Ye as K,_a as A,_b as L,a as g,aa as d,b as T,ca as x,e as v,ga as h,ha as M,ia as P,ib as z,ja as $,ka as l,la as s,ma as f,mb as B,oc as V,pb as G,qa as E,ra as w,sa as u}from"./chunk-YLFXKKOP.js";var ee=e=>({c:e});function te(e,n){e&1&&m(0," s ")}function ie(e,n){if(e&1&&(l(0,"div")(1,"mat-icon",2),m(2,"toll"),s(),l(3,"a",3),m(4),s(),f(5,"br"),s()),e&2){let o=n.$implicit,i=u(2);r(3),x("routerLink",o.link)("queryParams",j(3,ee,i.yamcs.context)),r(),q(o.label)}}function ne(e,n){if(e&1){let o=E();l(0,"mat-toolbar"),f(1,"span",4),l(2,"button",5),w("click",function(){k(o);let t=u(2);return I(t.loadMoreData())}),m(3," Load More "),s(),f(4,"span",4),s()}if(e&2){let o=u();r(2),x("disabled",!o.continuationToken)}}function oe(e,n){if(e&1&&(l(0,"div",1),m(1),d(2,te,1,0),m(3),C(4,"async"),s(),P(5,ie,6,5,"div",null,M),d(7,ne,5,1,"mat-toolbar")),e&2){let o=n,i=u();r(),R(" Showing ",o.resources.length," of ",o.totalSize," result "),r(),h(o.totalSize!==1?2:-1),r(),F(' for "',S(4,5,i.term$),'". '),r(2),$(o.resources),r(2),h(o.resources.length?7:-1)}}var X=(()=>{let n=class n{constructor(i,t,c,a){this.yamcs=i,this.messageService=a,this.term$=new v(null),this.result$=new v(null),t.setTitle("Search"),c.queryParamMap.subscribe(Z=>{let y=Z.get("q")??"";this.fetchPage(y).then(_=>{this.term$.next(y),this.result$.next({resources:this.toResources(_.parameters||[]),totalSize:_.totalSize,continuationToken:_.continuationToken})})})}loadMoreData(){let i=this.term$.value??"",t=this.result$.value?.continuationToken;this.fetchPage(i,t).then(c=>{let a=this.result$.value;a.resources=[...a.resources,...this.toResources(c.parameters||[])],this.result$.next(T(g({},a),{continuationToken:c.continuationToken}))})}toResources(i){return i.map(t=>({label:t.qualifiedName,type:"Parameter",link:["/telemetry/parameters"+t.qualifiedName]}))}fetchPage(i,t){let c=this.yamcs.yamcsClient.getParameters(this.yamcs.instance,{q:i,next:t,limit:50,searchMembers:!0});return c.catch(a=>this.messageService.showError(a)),c}};n.\u0275fac=function(t){return new(t||n)(p(O),p(z),p(B),p(N))},n.\u0275cmp=b({type:n,selectors:[["ng-component"]],standalone:!0,features:[D],decls:6,vars:3,consts:[[1,"panel-content"],[2,"margin-bottom","1em"],[1,"icon12",2,"vertical-align","middle","margin-right","4px"],[1,"ya-link",3,"routerLink","queryParams"],[2,"flex","1 1 auto"],[1,"ya-button",3,"click","disabled"]],template:function(t,c){if(t&1&&(l(0,"app-instance-page")(1,"app-instance-toolbar"),m(2,"Search results"),s(),l(3,"div",0),d(4,oe,8,7),C(5,"async"),s()()),t&2){let a;r(4),h((a=S(5,1,c.result$))?4:-1,a)}},dependencies:[Y,W,U,A,G,L,V],encapsulation:2,changeDetection:0});let e=n;return e})();var ge=[{path:"",canActivate:[J,H],canActivateChild:[K],runGuardsAndResolvers:"always",component:Q,children:[{path:"",pathMatch:"full",component:X}]}];export{ge as ROUTES};
